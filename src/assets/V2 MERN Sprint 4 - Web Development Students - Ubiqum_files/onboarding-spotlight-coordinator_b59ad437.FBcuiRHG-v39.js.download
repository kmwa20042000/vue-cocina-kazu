(window.webpackJsonp=window.webpackJsonp||[]).push([["onboarding-spotlight-coordinator~b59ad437"],{"44iz":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("HKB3");const o=(e,t=!0)=>((e,t)=>e.getVariantValue("confluence.frontend.nux.onboarding.v1",{default:a.a.NOT_ENROLLED,oneOf:[a.a.EXPERIMENT,a.a.NOT_ENROLLED,a.a.CONTROL],shouldTrackExposureEvent:t}))(e,t)===a.a.EXPERIMENT},HKB3:function(e,t,n){"use strict";let a;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),function(e){e.NOT_ENROLLED="not-enrolled",e.CONTROL="control",e.EXPERIMENT="experiment"}(a||(a={}));const o=Object.keys(a).map(e=>a[e])},NsoU:function(e,t,n){e.exports=n.p+"571f61d2e0c23c60a4305d04ac08348d.svg"},Om1Q:function(e,t,n){e.exports=n.p+"3f75d7aca2e3d158e9dc768bbd451343.svg"},P2IS:function(e,t,n){"use strict";let a,o;n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),function(e){e.started="started",e.viewed="viewed",e.failed="failed",e.skipped="skipped",e.ended="ended"}(a||(a={})),function(e){e.postOnboardingSpotlight="postOnboardingSpotlight",e.spaceSpotlight="spaceSpotlight",e.homeOnboardingSpotlight="homeOnboardingSpotlight",e.sharedLinkSpotlight="sharedLinkSpotlight",e.onboarding="onboarding"}(o||(o={}));const c=e=>()=>({type:"sendTrackEvent",data:{action:a.started,source:o.onboarding,actionSubject:e,actionSubjectId:"spotlight"}}),i=(e,t)=>()=>({type:"sendTrackEvent",data:{action:a.viewed,source:o.onboarding,actionSubject:t,actionSubjectId:e}}),r=e=>()=>({type:"sendTrackEvent",data:{action:a.ended,source:o.onboarding,actionSubject:e,actionSubjectId:"spotlight"}}),s=e=>()=>({type:"sendTrackEvent",data:{action:a.skipped,source:o.onboarding,actionSubject:e,actionSubjectId:"spotlight"}})},P5T4:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("Kttv"),o=n.n(a),c=n("HKB3");const i=(e,t=!0,n="",a="")=>!(parseInt(o()(a).substring(0,7),16)%100<20)&&(-1!==n.toLowerCase().indexOf("en",0)&&((e,t)=>e.getVariantValue("confluence.frontend.join.team.space",{default:c.a.NOT_ENROLLED,oneOf:[c.a.EXPERIMENT,c.a.NOT_ENROLLED,c.a.CONTROL],shouldTrackExposureEvent:t}))(e,t)===c.a.EXPERIMENT)},XjVu:function(e,t,n){"use strict";var a,o,c,i,r,s=n("D57K"),d=n("ERkP"),l=n.n(d),p=n("8gCJ"),u=n("nbEJ"),g=n("/sMe"),h=n("KsTJ"),m=n("RZTm"),b=n("hd9Z"),f=h.default.div(a||(a=Object(s.__makeTemplateObject)(["\n  padding: 40px 20px;\n  text-align: center;\n"],["\n  padding: 40px 20px;\n  text-align: center;\n"]))),w=h.default.h4(o||(o=Object(s.__makeTemplateObject)(["\n  color: inherit;\n  font-size: 20px;\n  font-style: inherit;\n  font-weight: 500;\n  letter-spacing: -0.008em;\n  line-height: 1.2;\n  margin-bottom: ","px;\n"],["\n  color: inherit;\n  font-size: 20px;\n  font-style: inherit;\n  font-weight: 500;\n  letter-spacing: -0.008em;\n  line-height: 1.2;\n  margin-bottom: ","px;\n"])),m.l),y=h.default.img(c||(c=Object(s.__makeTemplateObject)(["\n  border-top-left-radius: ","px;\n  border-top-right-radius: ","px;\n  height: auto;\n  width: 100%;\n\n  @media (min-width: 320px) and (max-width: 480px) {\n    border-radius: 0;\n  }\n"],["\n  border-top-left-radius: ","px;\n  border-top-right-radius: ","px;\n  height: auto;\n  width: 100%;\n\n  @media (min-width: 320px) and (max-width: 480px) {\n    border-radius: 0;\n  }\n"])),m.f,m.f),O=h.default.div(i||(i=Object(s.__makeTemplateObject)(["\n  display: flex;\n  justify-content: center;\n  padding: 0 40px 40px;\n"],["\n  display: flex;\n  justify-content: center;\n  padding: 0 40px 40px;\n"]))),E=h.default.div(r||(r=Object(s.__makeTemplateObject)(["\n  margin: 0 ","px;\n"],["\n  margin: 0 ","px;\n"])),Object(b.divide)(m.l,2)),v=n("GBWy");function S(){}var j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.headerComponent=function(e){var t=e.header,n=e.image;return t||function(){return l.a.createElement(y,{alt:"",src:n})}},t.footerComponent=function(e){var t=e.footer,n=e.actions;return t||function(){return n?l.a.createElement(u.a.Provider,{value:v.a},l.a.createElement(O,null,n.map((function(e,t){var n=e.text,a=e.key,o=Object(s.__rest)(e,["text","key"]),c=t?"subtle-link":"primary";return l.a.createElement(E,{key:a||("string"==typeof n?n:""+t)},l.a.createElement(g.a,Object(s.__assign)({appearance:c,autoFocus:!t},o),n))})))):null}},t}return Object(s.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=(e.actions,e.children),n=e.heading,a=Object(s.__rest)(e,["actions","children","heading"]);return l.a.createElement(p.a,Object(s.__assign)({autoFocus:!0,components:{Header:this.headerComponent(this.props),Footer:this.footerComponent(this.props)},onClose:S,scrollBehavior:"outside",shouldCloseOnOverlayClick:!1,shouldCloseOnEscapePress:!1},a),l.a.createElement(f,null,n&&l.a.createElement(w,null,n),t))},t}(d.Component);t.a=j},YVOQ:function(e,t,n){"use strict";n.r(t);var a=n("ERkP"),o=n.n(a),c=n("cphC"),i=n("T20J"),r=n("gQ5V"),s=n("P5T4"),d=n("44iz"),l=n("oZlZ"),p=n("tvZK"),u=n("KD1n"),g=n("H5qd"),h=n.n(g);function m(){const e=Object(u.a)(["\n  query OnboardingSpotlightWatchQuery($contentId: ID!) {\n    content(id: $contentId) {\n      nodes {\n        id\n        currentUserIsWatching\n        space {\n          id\n          currentUser {\n            isWatched\n          }\n        }\n      }\n    }\n  }\n"]);return m=function(){return e},e}const b=h()(m());function f(){const e=Object(u.a)(["\n  mutation OnboardingSpotlightWatchContentMutation($id: ID!) {\n    watchContent(watchContentInput: { contentId: $id, currentUser: true }) {\n      content {\n        id\n        currentUserIsWatching\n      }\n    }\n  }\n"]);return f=function(){return e},e}const w=h()(f());function y(){const e=Object(u.a)(["\n  mutation OnboardingSpotlightWatchSpaceMutation($spaceId: ID!) {\n    watchSpace(watchSpaceInput: { spaceId: $spaceId, currentUser: true }) {\n      space {\n        id\n        currentUser {\n          isWatched\n        }\n      }\n    }\n  }\n"]);return y=function(){return e},e}const O=h()(y());function E(){const e=Object(u.a)(["\n  mutation OnboardingSpotlightUnwatchContentMutation($id: ID!) {\n    unwatchContent(watchContentInput: { contentId: $id, currentUser: true }) {\n      content {\n        id\n        currentUserIsWatching\n      }\n    }\n  }\n"]);return E=function(){return e},e}const v=h()(E());function S(){const e=Object(u.a)(["\n  mutation OnboardingSpotlightUnwatchSpaceMutation($spaceId: ID!) {\n    unwatchSpace(watchSpaceInput: { spaceId: $spaceId, currentUser: true }) {\n      space {\n        id\n        currentUser {\n          isWatched\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}const j=h()(S());function I(){const e=Object(u.a)(["\n  mutation OnboardingStatusCompleteMutation @experimental {\n    experimentalCompleteOnboarding {\n      complete\n    }\n  }\n"]);return I=function(){return e},e}const C=h()(I());var k=n("L21V"),x=n("XjVu"),_=n("E3RG"),W=n("hpu0"),M=n("3VMZ"),B=n("IC1n"),T=n.n(B),U=n("iCkr"),V=n("ZdhY"),D=n.n(V),P=n("NsoU"),R=n.n(P),H=n("P2IS"),N=n("kgxZ");const L=e=>{const{stop:t,spaceId:n,contentId:c,watchSpace:r,unwatchSpace:s,watchContent:d,unwatchContent:l,isWatchingSpace:p,isWatchingPage:u,origin:g,completeOnboarding:h,isV2:m,showModal:b,source:f,isOnboardingCompleted:w}=e,[y,O]=Object(a.useState)(0),[,E]=Object(a.useState)({}),{createAnalyticsEvent:v}=Object(i.a)();Object(a.useEffect)(()=>{y>0&&E({})},[y]),Object(a.useEffect)(()=>{switch(j(),g){case"page":I();break;case"spaceOverview":C()}},[]);const S=e=>{v(e()).fire()},j=()=>{S(Object(H.d)(f)),Object(W.a)().start({name:M.a.ONBOARDING_SHARED_LINK_SPOTLIGHT,id:T()()}),w||v({type:"sendOperationalEvent",data:{action:"started",actionSubject:"onboarding",actionSubjectId:c,source:f}}).fire()},I=()=>{u||d({variables:{id:c},optimisticResponse:{__typename:"Mutation",watchContent:{__typename:"WatchContentPayload",content:{__typename:"Content",id:c,currentUserIsWatching:!0}}}})},C=()=>{p||r({variables:{spaceId:n},optimisticResponse:{__typename:"Mutation",watchSpace:{__typename:"WatchSpacePayload",space:{__typename:"Space",id:n,currentUser:{__typename:"SpaceUserMetadata",isWatched:!0}}}}})},B=()=>O(y+1),V=()=>{S(Object(H.b)(f)),h(),Object(W.a)().succeed({name:M.a.ONBOARDING_SHARED_LINK_SPOTLIGHT}),O(-1),t(),sessionStorage.removeItem(N.a)},P=e=>(Object(a.useEffect)(()=>{const t=Object(H.e)(e.target,f);e.createAnalyticsEvent(t()).fire()},[]),o.a.createElement(a.Fragment,null,e.index,"/3")),L=[o.a.createElement(x.a,{key:"onboarding-welcome-modal",actions:[{onClick:()=>{const e=y;O(-1),setTimeout(()=>{O(e+1)},250)},text:o.a.createElement(k.c,U.a.showMeButton)}],heading:o.a.createElement(k.c,U.a.welcomeHome),image:m?R.a:D.a},m?o.a.createElement(k.c,U.a.modalBodyV2):o.a.createElement(k.c,U.a.modalBody)),o.a.createElement(_.a,{key:"space-switcher-spotlight",actions:[{onClick:B,text:o.a.createElement(k.c,U.a.nextButton)}],heading:m?o.a.createElement(k.c,U.a.spacesSectionHeadingV2):"",dialogPlacement:"left top",target:"space-switcher-spotlight",actionsBeforeElement:o.a.createElement(P,{createAnalyticsEvent:v,target:"space-switcher-spotlight",index:1}),targetBgColor:"white",targetRadius:5},o.a.createElement(k.c,U.a.spacesSectionBody)),o.a.createElement(_.a,{key:"page-tree-spotlight",dialogPlacement:"top center",actions:[{onClick:B,text:o.a.createElement(k.c,U.a.nextButton)}],heading:m?o.a.createElement(k.c,U.a.pageTreeHeadingV2):"",target:"page-tree-spotlight",targetBgColor:"white",actionsBeforeElement:o.a.createElement(P,{createAnalyticsEvent:v,target:"page-tree-spotlight",index:2}),targetRadius:5},o.a.createElement(k.c,U.a.pageTreeBody)),o.a.createElement(_.a,{key:"page-watch-spotlight",actions:[{onClick:()=>{switch(g){case"page":l({variables:{id:c},optimisticResponse:{__typename:"Mutation",unwatchContent:{__typename:"WatchContentPayload",content:{__typename:"Content",id:c,currentUserIsWatching:!1}}}}),V();break;case"spaceOverview":s({variables:{spaceId:n},optimisticResponse:{__typename:"Mutation",unwatchSpace:{__typename:"WatchSpacePayload",space:{__typename:"Space",id:n,currentUser:{__typename:"SpaceUserMetadata",isWatched:!1}}}}}),V()}},text:o.a.createElement(k.c,U.a.unwatchButton),appearance:"subtle-link"},{onClick:V,autoFocus:!0,text:o.a.createElement(k.c,U.a.doneButton)}],heading:m?o.a.createElement(k.c,"page"===g?U.a.pageWatchHeadingV2:"spaceOverview"===g?U.a.spaceWatchHeadingV2:{}):"",dialogPlacement:"bottom right",target:"page-watch-spotlight",targetBgColor:"white",targetRadius:5,actionsBeforeElement:o.a.createElement(P,{createAnalyticsEvent:v,target:"page-watch-spotlight",index:3})},o.a.createElement(k.c,"page"===g?m?U.a.pageWatchBodyV2:U.a.pageWatchBody:"spaceOverview"===g?m?U.a.spaceWatchBodyV2:U.a.spaceWatchBody:{}))];return b||L.shift(),y>=0?L[y]:null};n.d(t,"OnboardingSpotlightCoordinator",(function(){return q}));const A=({coordinationClient:e,contentId:t,origin:n})=>{const{createAnalyticsEvent:c}=Object(i.a)(),{featureFlagClient:u,locale:g,cloudId:h}=Object(p.a)(),m=Object(s.a)(u,!0,g,h),f=!m&&Object(d.a)(u,!0)&&-1!==g.toLowerCase().indexOf("en",0);let y;f?y="confluence-onboarding-shared-link":m&&(y="confluence-onboarding-space-page-v2");const[E,S]=((e,t)=>{const[n,o]=Object(a.useState)(!1);Object(a.useEffect)(()=>{(async()=>{try{await e.start(t)&&o(!0)}catch(e){console.error("Unable to start flow message ".concat(t,". ").concat(e))}})()},[t]);return[n,async a=>{if(a||n)try{await e.stop(t)}catch(e){console.error("Unable to stop flow message ".concat(t,". ").concat(e))}}]})(e,y),I=sessionStorage.getItem(N.a)===N.b,k=!(m&&I),{loading:x,error:_,isAdmin:W,completedOnboarding:M}=Object(l.a)(),B=m&&I||M?H.a.spaceSpotlight:H.a.sharedLinkSpotlight;if(!f&&!m)return null;if(!E)return null;if(!t||!n)return null;if(x||_)return null;if(f&&W&&M)return null;const T=(e,n)=>{c({type:"sendTrackEvent",data:{action:e,actionSubject:n,actionSubjectId:t,source:B}}).fire()},U=()=>{M||c({type:"sendOperationalEvent",data:{action:"ended",actionSubject:"onboarding",actionSubjectId:t,source:B}}).fire()},V=()=>{T("unwatch","space")},D=()=>{T("watch","space")},P=()=>{T("unwatch","content")},R=()=>{T("watch","content")},A=(e,{data:n})=>{var a;const o=null!=(a=n)&&null!=(a=a.watchSpace)&&null!=(a=a.space)&&null!=(a=a.currentUser)?a.isWatched:a,c=e.readQuery({query:b,variables:{contentId:t}});c.content.nodes[0].space.currentUser.isWatched=o,e.writeQuery({query:b,data:c})},q=(e,{data:n})=>{var a;const o=null!=(a=n)&&null!=(a=a.unwatchSpace)&&null!=(a=a.space)&&null!=(a=a.currentUser)?a.isWatched:a,c=e.readQuery({query:b,variables:{contentId:t}});c.content.nodes[0].space.currentUser.isWatched=o,e.writeQuery({query:b,data:c})},K=(e,{data:n})=>{var a;const o=null!=(a=n)&&null!=(a=a.watchContent)&&null!=(a=a.content)?a.currentUserIsWatching:a,c=e.readQuery({query:b,variables:{contentId:t}});c.content.nodes[0].currentUserIsWatching=o,e.writeQuery({query:b,data:c})},Q=(e,{data:n})=>{var a;const o=null!=(a=n)&&null!=(a=a.unwatchContent)&&null!=(a=a.content)?a.currentUserIsWatching:a,c=e.readQuery({query:b,variables:{contentId:t}});c.content.nodes[0].currentUserIsWatching=o,e.writeQuery({query:b,data:c})};return o.a.createElement(r.b,{query:b,variables:{contentId:t}},({data:e,loading:a,error:c})=>{var i,s,d;if(c||a)return null;const l=(null!=(d=e)&&null!=(d=d.content)&&null!=(d=d.nodes)&&null!=(d=d[0])&&null!=(d=d.space)?d.id:d)||"",p=Boolean(null!=(s=e)&&null!=(s=s.content)&&null!=(s=s.nodes)&&null!=(s=s[0])?s.currentUserIsWatching:s),u=Boolean(null!=(i=e)&&null!=(i=i.content)&&null!=(i=i.nodes)&&null!=(i=i[0])&&null!=(i=i.space)&&null!=(i=i.currentUser)?i.isWatched:i);return o.a.createElement(r.a,{mutation:j,onCompleted:V,update:q},e=>o.a.createElement(r.a,{mutation:O,onCompleted:D,update:A},a=>o.a.createElement(r.a,{mutation:v,onCompleted:P,update:Q},c=>o.a.createElement(r.a,{mutation:w,onCompleted:R,update:K},i=>o.a.createElement(r.a,{mutation:C,onCompleted:U},r=>o.a.createElement(L,{stop:S,spaceId:l,contentId:t,watchSpace:a,unwatchSpace:e,isWatchingSpace:u,watchContent:i,unwatchContent:c,isWatchingPage:p,completeOnboarding:r,origin:n,isV1:f,isV2:m,showModal:k,source:B,isOnboardingCompleted:!!M}))))))})};A.displayName="OnboardingSpotlightCoordinator";const q=Object(c.a)(A)},ZdhY:function(e,t,n){e.exports=n.p+"072767abcb67af86b59eaff32e8484b9.svg"},iCkr:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("L21V");const o=Object(a.g)({nextButton:{id:"onboarding-spotlight-coordinator.spotlight.next.button",defaultMessage:"Next",description:"Button to navigate to the next spotlight"},doneButton:{id:"onboarding-spotlight-coordinator.spotlight.done.button",defaultMessage:"Done",description:"Button to complete the spotlight tour"},showMeButton:{id:"onboarding-spotlight-coordinator.spotlight.get.started.button",defaultMessage:"Get started",description:"Button to show the user spotlight tour"},welcomeHome:{id:"onboarding-spotlight-coordinator.spotlight.welcome",defaultMessage:"Welcome",description:"Message introducing the user to beginning of spotlight tour"},modalBodyV2:{id:"onboarding-spotlight-coordinator.spotlight.modal.body.v2",defaultMessage:"You've arrived at your shared workspace where knowledge and teamwork come together. Let's quickly learn the basics.",description:"Description of the shared link page"},modalBody:{id:"onboarding-spotlight-coordinator.spotlight.modal.body",defaultMessage:"Confluence is a workspace for your team to share knowledge and collaborate. Let's learn the basics.",description:"Description of the shared link page"},spacesSectionHeadingV2:{id:"onboarding-spotlight-coordinator.spotlight.spaces.section.heading.v2",defaultMessage:"Welcome to the space",description:"Heading of what content is shown in the spaces section"},spacesSectionBodyV2:{id:"onboarding-spotlight-coordinator.spotlight.spaces.section.body.v2",defaultMessage:"Your space contains your team's work.",description:"Description of what content is shown in the spaces section"},spacesSectionBody:{id:"onboarding-spotlight-coordinator.spotlight.spaces.section.body",defaultMessage:"Keep your content organized with spaces. Spaces can be for a team of people, for a project, or for a certain audience.",description:"Description of what content is shown in the spaces section"},pageTreeHeadingV2:{id:"onboarding-spotlight-coordinator.spotlight.page.tree.heading.v2",defaultMessage:"Pages",description:"Heading of what content is shown in the page tree section"},pageTreeBodyV2:{id:"onboarding-spotlight-coordinator.spotlight.page.tree.body.v2",defaultMessage:"Your space contains your team's work.",description:"Description of what content is shown in the page tree section"},pageTreeBody:{id:"onboarding-spotlight-coordinator.spotlight.page.tree.body",defaultMessage:"Each space has it's own page tree. You can drag and drop a page to move it around.",description:"Description of what content is shown in the page tree section"},pageWatchHeadingV2:{id:"onboarding-spotlight-coordinator.spotlight.page.watch.heading.v2",defaultMessage:"Page watched",description:"Heading of what watching a page is"},pageWatchBodyV2:{id:"onboarding-spotlight-coordinator.spotlight.page.watch.body.v2",defaultMessage:"We've watched this page for you. You'll get notified about changes made to this page.",description:"Description of what watching a page is"},pageWatchBody:{id:"onboarding-spotlight-coordinator.spotlight.page.watch.body",defaultMessage:"You can watch a page to get notifications about it. This page has been automatically watched for you.",description:"Description of what watching a page is"},spaceWatchHeadingV2:{id:"onboarding-spotlight-coordinator.spotlight.space.watch.heading.v2",defaultMessage:"Space watched",description:"Heading of what watching a space is"},spaceWatchBodyV2:{id:"onboarding-spotlight-coordinator.spotlight.space.watch.body.v2",defaultMessage:"We've watched this space for you. You'll get notified about changes made to pages within this space.",description:"Description of what watching a space is"},spaceWatchBody:{id:"onboarding-spotlight-coordinator.spotlight.space.watch.body",defaultMessage:"We've watched this space for you so you'll get notified about changes made to pages within this space.",description:"Description of what watching a space is"},unwatchButton:{id:"onboarding-spotlight-coordinator.spotlight.unwatch.button",defaultMessage:"Unwatch",description:"Button to navigate to the unwatch page or space"},pageWatchSpotlight:{id:"onboarding-spotlight-coordinator.page-watch.spotlight",defaultMessage:"When you watch a space, you'll receive notifications about changes and updates to all pages within a space.",description:"Page Watch Spotlight"},welcome:{id:"onboarding-spotlight-coordinator.spotlight.welcome.home",defaultMessage:"Welcome home",description:"Message introducing the user to beginning of spotlight tour on home"},welcomeHomeBody:{id:"onboarding-spotlight-coordinator.spotlight.welcome.home.body",defaultMessage:"Start your day here by quickly accessing the spaces and pages you frequent, and see all the latest updates across your site.",description:"Message body for introducing home"},homeSpacesHeader:{id:"onboarding-spotlight-coordinator.home-space.header",defaultMessage:"Your spaces",description:"Your spaces"},homeSpacesDesc:{id:"onboarding-spotlight-coordinator.home-space.desc",defaultMessage:"New spaces you star or visit will appear here.",description:"Explanation of Spaces section on Home"},skip:{id:"onboarding-spotlight-coordinator.skip",defaultMessage:"Skip",description:"Skip"},viewSpace:{id:"onboarding-spotlight-coordinator.view",defaultMessage:"View space",description:"View space"}})},kgxZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return y}));var a=n("ERkP"),o=n.n(a),c=n("L21V"),i=n("XjVu"),r=n("E3RG"),s=n("7M9M"),d=n("Ua4J"),l=n("tqyq"),p=n("WlwD"),u=n("iCkr"),g=n("Om1Q"),h=n.n(g),m=n("P2IS");const b="completeHomeTour",f="completed",{RECENTLY_WATCHED_SPACE:w}=l.a,y=({stop:e,createAnalyticsEvent:t,selectedSpaceKey:n})=>{const l=m.a.homeOnboardingSpotlight,{push:g}=Object(a.useContext)(d.a),[y,O]=Object(a.useState)(0),[,E]=Object(a.useState)({}),v=()=>{S(Object(m.b)(l)),O(-1),sessionStorage.setItem(b,f),e&&e()},S=e=>{t(e()).fire()};Object(a.useEffect)(()=>{S(Object(m.d)(l))},[]);const j=[o.a.createElement(i.a,{key:"onboarding-welcome-home-modal",actions:[{onClick:()=>{p.c.removeItem(w),O(y+1)},text:o.a.createElement(c.c,u.a.showMeButton)}],heading:o.a.createElement(c.c,u.a.welcome),image:h.a},o.a.createElement(c.c,u.a.welcomeHomeBody)),o.a.createElement(r.a,{key:"selected-space-spotlight",actions:[{onClick:()=>{v(),g(s.SPACE_OVERVIEW.toUrl({spaceKey:n}))},text:o.a.createElement(c.c,u.a.viewSpace)},{onClick:()=>{S(Object(m.c)(l)),v()},text:o.a.createElement(c.c,u.a.skip),appearance:"subtle-link"}],dialogPlacement:"right middle",target:"selected-space-spotlight",targetBgColor:"white",dialogWidth:300,heading:o.a.createElement(c.c,u.a.homeSpacesHeader)},o.a.createElement(c.c,u.a.homeSpacesDesc))];return Object(a.useEffect)(()=>{if(y>=0){var e;const n=(null!=(e=j[y])?e.key:e)||"",a=Object(m.e)(n,l);t(a()).fire(),E({})}},[y]),y>=0?j[y]:null}},oZlZ:function(e,t,n){"use strict";var a=n("cxan"),o=n("ERkP"),c=n.n(o),i=n("1U1M"),r=n("T20J"),s=n("tvZK"),d=n("KD1n"),l=n("H5qd"),p=n.n(l);function u(){const e=Object(d.a)(["\n  query OnboardingStatus @experimental {\n    experimentalGetCompleteOnboarding {\n      complete\n    }\n  }\n"]);return u=function(){return e},e}const g=p()(u());function h(){const e=Object(d.a)(["\n  query AdminStatus($cloudId: String!) @experimental {\n    experimentalDrsEligibility(cloudId: $cloudId) {\n      isAdmin\n    }\n  }\n"]);return h=function(){return e},e}const m=p()(h());n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return f}));const b=(e,t,n=!0)=>o=>{const{loading:i,error:r,isAdmin:d,completedOnboarding:l}=f(),{featureFlagClient:p,locale:u,userId:g,cloudId:h}=Object(s.a)();return i||r?null:((e,a,o)=>Boolean(e)&&t(a,n,o,h)&&-1!==o.toLowerCase().indexOf("en",0))(g,p,u)?c.a.createElement(e,Object(a.a)({},o,{isAdmin:d||!1,completedOnboarding:l||!1})):null},f=()=>{var e,t;const{createAnalyticsEvent:n}=Object(r.a)(),a=e=>t=>{n({type:"sendTrackEvent",data:{action:"failed",source:"onboardingUserInfo",actionSubject:"onboarding",actionSubjectId:e,attributes:{error:t.message}}}).fire()},{cloudId:o}=Object(s.a)(),{data:c,loading:d,error:l}=Object(i.c)(g,{onError:a("onboardingStatus"),fetchPolicy:"no-cache"}),{data:p,loading:u,error:h}=Object(i.c)(m,{variables:{cloudId:o},onError:a("adminStatus")});if(d||u)return{loading:!0};if(l||h)return{error:l||h};const b=Boolean(null!=(t=c)&&null!=(t=t.experimentalGetCompleteOnboarding)?t.complete:t);return{loading:!1,isAdmin:Boolean(null!=(e=p)&&null!=(e=e.experimentalDrsEligibility)?e.isAdmin:e),completedOnboarding:b}}}}]);
//# sourceMappingURL=onboarding-spotlight-coordinator~b59ad437.FBcuiRHG-v39.js.map