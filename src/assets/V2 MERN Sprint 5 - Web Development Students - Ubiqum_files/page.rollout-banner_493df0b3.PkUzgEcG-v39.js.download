(window.webpackJsonp=window.webpackJsonp||[]).push([["page.rollout-banner~493df0b3"],{DMQv:function(e,n,t){"use strict";var c=t("ROYt"),a=t("yS9+"),r=t("yLtY"),s=t("Ci1e"),i=t("mWX1");const o={changeSets:new s.schema.Array({user:i.user,recentUpdates:new s.schema.Array(i.content)})},u={results:new s.schema.Array(i.content)},l={resultList:new s.schema.Array(i.content)};t.d(n,"i",(function(){return p})),t.d(n,"k",(function(){return d})),t.d(n,"a",(function(){return h})),t.d(n,"p",(function(){return E})),t.d(n,"n",(function(){return b})),t.d(n,"g",(function(){return f})),t.d(n,"e",(function(){return m})),t.d(n,"b",(function(){return O})),t.d(n,"f",(function(){return y})),t.d(n,"h",(function(){return T})),t.d(n,"d",(function(){return C})),t.d(n,"o",(function(){return g})),t.d(n,"m",(function(){return j})),t.d(n,"c",(function(){return N})),t.d(n,"j",(function(){return _})),t.d(n,"l",(function(){return A})),t.d(n,"q",(function(){return I}));Object(a.c)("DASHBOARD_VIEW_MODEL",c.a.views.dashboard);const p=Object(a.c)("SPACE_INFO",c.a.spaces.space,{schema:r.a.spaces}),d=Object(a.c)("SPACE_CUSTOM_SETTINGS",c.a.spaces.customSettings,{schema:r.a.space}),h=(Object(a.c)("FAVOURITED_SPACES",c.a.spaces.favourited,{schema:r.a.spaces}),Object(a.c)("RECENTLY_VISITED_SPACES",c.a.spaces.recentlyVisited,{schema:r.a.spaces}),Object(a.c)("SPACE_LABELS",c.a.spaces.labels),Object(a.c)("SPACE_FAVOURITE",c.a.spaces.favourite)),E=Object(a.c)("SPACE_UNFAVOURITE",c.a.spaces.unfavourite),b=Object(a.c)("SPACE_HOME_CONTENT",c.a.spaces.spaceHomeContent,{schema:r.a.content}),f=(Object(a.c)("DELETE_ATTACHMENT",c.a.content.deleteContent),Object(a.c)("LABELS",c.a.spaces.labels),Object(a.c)("RECENTLY_UPDATED_CONTENT",c.a.content.recentlyUpdated,{schema:o})),m=Object(a.c)("POPULAR_CONTENT",c.a.content.popular,{schema:l}),O=Object(a.c)("DRAFTS_CONTENT",c.a.content.drafts,{schema:u}),y=Object(a.c)("RECENT_WORK_CONTENT",c.a.content.recentlyUpdatedByCurrentUserWithDrafts,{schema:u}),T=Object(a.c)("RECENTLY_VISITED_CONTENT",c.a.content.recentlyVisitedByCurrentUser,{schema:u}),C=Object(a.c)("FAVOURITED_CONTENT",c.a.content.favouritedByCurrentUser,{schema:u}),g=Object(a.c)("UNFAVOURITE_CONTENT",c.a.content.unfavourite),j=(Object(a.c)("SPACE_WATCH_ADD",c.a.watches.add),Object(a.c)("SPACE_WATCH_DELETE",c.a.watches.delete),Object(a.c)("GET_APP_SWITCHER_LINKS",c.a.appSwitcher.getAppSwitcherLinks),Object(a.c)("FEATURE_DISCOVERED_MARK",c.a.featureDiscovery.markDiscovered)),N=(Object(a.c)("FOLLOW_USER",c.a.users.follow,{schema:r.a.user}),Object(a.c)("UNFOLLOW_USER",c.a.users.unfollow,{schema:r.a.user}),Object(a.c)("EDITOR_CONTENT_METADATA",c.a.content.editPageMetadata,{schema:r.a.content})),_=Object(a.c)("SPACE_CALENDAR",c.a.views.spaceCalendar),A=(Object(a.c)("UPDATE_SPACE_LOGO",c.a.spaces.logo,{schema:r.a.space}),Object(a.c)("SPACE_HOME_OVERRIDE_CONTENT",c.a.atlassianConnect.getConnectModuleDescriptor,{schema:r.a.connectModule})),D={RECENTLY_VISITED_CONTENT:c.a.content.recentlyVisitedByCurrentUser,RECENT_WORK_CONTENT:c.a.content.recentlyUpdatedByCurrentUserWithDrafts,FAVOURITED_CONTENT:c.a.content.favouritedByCurrentUser,DRAFTS_CONTENT:c.a.content.drafts};function I(e,n){return Object(a.c)(e,D[e],{schema:u})(n)}Object(a.c)("USER_DARK_FEATURE",c.a.settings.addUserDarkFeature),Object(a.c)("SEND_ANALYTICS",c.a.settings.sendAnalytics)},QJbY:function(e,n,t){"use strict";t.r(n);var c=t("ERkP"),a=t.n(c),r=t("/FQd"),s=t("bQlP"),i=t("gQ5V"),o=t("+mzV"),u=t("2srY"),l=t.n(u),p=t("uDfI"),d=t("DMQv"),h=t("OzZX"),E=t("rZXo"),b=t("2sr0"),f=t("qdfj"),m=t("vqZc"),O=t("zjfJ"),y=t("KD1n"),T=t("gHio"),C=t.n(T),g=t("L21V"),j=t("KsTJ"),N=t("dDc+"),_=t("94Z3"),A=t("kC4U"),D=t("Ydxy"),I=t("Z/GR"),S=t.n(I);function k(){const e=Object(y.a)(["\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  cursor: pointer;\n"]);return k=function(){return e},e}function M(){const e=Object(y.a)(["\n  color: ",";\n\n  a,\n  a:link,\n  a:visited,\n  a:active,\n  a:hover {\n    text-decoration: underline;\n    color: ",";\n    cursor: pointer;\n  }\n"]);return M=function(){return e},e}function R(){const e=Object(y.a)([""]);return R=function(){return e},e}function v(){const e=Object(y.a)(["\n  font-weight: bold;\n"]);return v=function(){return e},e}function w(){const e=Object(y.a)(["\n  max-width: 800px;\n"]);return w=function(){return e},e}function U(){const e=Object(y.a)(["\n  font-size: 24pt;\n  margin-right: 10px;\n"]);return U=function(){return e},e}function L(){const e=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 56px;\n  padding: 5px 60px;\n  position: relative;\n  background-image: url(",");\n\n  ",";\n\n  background-position: left bottom;\n  background-repeat: repeat-x;\n  font-size: 16px;\n  text-align: center;\n"]);return L=function(){return e},e}const P=j.default.div(L(),S.a,({backgroundType:e})=>"wavey"===e?"\n      background-color: ".concat(N.colors.B50,";\n    "):"\n      background-color: ".concat(N.colors.Y100,";\n      background-image: none;\n  ")),x=j.default.div(U()),V=j.default.div(w()),F=j.default.span(v()),K=j.default.span(R()),z=j.default.span(M(),N.colors.N800,N.colors.N800),B=j.default.div(k());class Y extends c.Component{constructor(...e){super(...e),Object(O.a)(this,"state",{isCreatingNewPage:!1}),Object(O.a)(this,"_willEventuallyRender",()=>this.props.shouldRender&&("tryit"!==this.props.actionType||this.props.spaceKey)),Object(O.a)(this,"_sendScreenEvent",()=>{this.props.createAnalyticsEvent({type:"sendScreenEvent",data:{name:"fabricRolloutBanner",attributes:{sourceType:this.props.bannerType}}}).fire()}),Object(O.a)(this,"_sendUIEvent",(e,n,t)=>{this.props.createAnalyticsEvent({type:"sendUIEvent",data:{action:e,actionSubject:n,actionSubjectId:t,source:"fabricRolloutBanner",attributes:{sourceType:this.props.bannerType}}}).fire()}),Object(O.a)(this,"_onCloseClick",()=>{this._sendUIEvent("clicked","button","close"),this.props.dismissAnnouncement(this.props.featureDiscoveryKey)}),Object(O.a)(this,"_spinnerOn",()=>{this.setState({isCreatingNewPage:!0})}),Object(O.a)(this,"_spinnerOff",()=>{this.setState({isCreatingNewPage:!1})}),Object(O.a)(this,"_onLearnMoreLinkClick",()=>(this._sendUIEvent("clicked","link","action"),!0)),Object(O.a)(this,"_onTryItLinkClick",()=>{this._spinnerOn(),this._sendUIEvent("clicked","link","action");const e={type:"page",status:"draft",space:{key:this.props.spaceKey},metadata:{properties:{editor:{value:"v2"}}}},n=e=>{if(e instanceof _.a)return e.response;throw e};Object(A.a)("/wiki/rest/api/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(n).then(e=>e.json()).then(e=>e._links.editui).then(e=>Object(A.a)("/wiki".concat(e)).catch(n)).then(e=>{this._spinnerOff(),this.props.open(e.url,"_blank")}).catch(()=>{this._spinnerOff()})})}_getContent(){if("tryit"===this.props.actionType&&!this.props.spaceKey)return null;const{formatMessage:e}=this.props.intl,n=e({id:"fabric.editor.announcement.greeting"},{0:this.props.displayName}),t=this.props.rolloutDate?e({id:this.props.mainMessageId},{0:this.props.rolloutDate}):e({id:this.props.mainMessageId}),c=e({id:this.props.actionMessageId}).replace(/ /g,"Â "),r=e({id:"fabric.editor.announcement.dismiss"});return a.a.createElement(P,{"data-test-id":"rollout-container",backgroundType:this.props.backgroundType},this.props.showIcon?a.a.createElement(x,null,"ðŸ‘‹"):null,a.a.createElement(V,null,this.props.showGreeting?a.a.createElement(F,null,n):null,a.a.createElement(K,null," ".concat(t," ")),a.a.createElement(z,null,"tryit"===this.props.actionType?a.a.createElement("span",null,a.a.createElement("a",{onClick:this._onTryItLinkClick},c),"Â Â ",this.state.isCreatingNewPage?a.a.createElement(D.a,{size:"medium"}):null):a.a.createElement("a",{target:"_blank",href:this.props.actionUrl,onClick:this._onLearnMoreLinkClick},c))),a.a.createElement(B,{"data-test":"announcement-dismiss",onClick:this._onCloseClick},a.a.createElement(C.a,{size:"medium",label:r})))}componentDidMount(){this.props.isReady?this._willEventuallyRender()&&this._sendScreenEvent():this.props.getDiscoveredFeatures()}componentDidUpdate(e){!e.isReady&&this.props.isReady&&this._willEventuallyRender()&&this._sendScreenEvent()}render(){return this.props.isReady&&this.props.shouldRender?this._getContent():null}}Y.displayName="RolloutAnnouncementBannerComponent";const G=Object(g.h)(Y);var W=Object(f.a)(Object(b.a)()(Object(p.connect)((e,n)=>({isReady:Object(h.c)(e),shouldRender:!Object(h.b)(e,{pluginKey:m.b,featureKey:n.featureDiscoveryKey})}),e=>({getDiscoveredFeatures:()=>e(Object(E.b)()),dismissAnnouncement(n){if(null!==n){const t=Object(d.m)({pluginKey:m.b,featureKey:n});e(t)}}}))(G))),H=t("H5qd");function Z(){const e=Object(y.a)(["\n  query RolloutAnnouncementBannerQuery {\n    user(current: true) {\n      id\n      displayName\n      confluence {\n        space {\n          key\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}const Q=t.n(H)()(Z()),J=1,q=2,X=3,$="https://confluence.atlassian.com/confcloud/confluence-editing-improvements-945107733.html";class ee extends c.Component{_getContent(e,n,t){let c,r,i,o,u,p,d=!0,h=!0,E="wavey";const b=n||l()(t,"user.confluence.space.key");let f=e[s.k];if("tryit-notice"===e[s.l]){if(!b)return null;c=J,r="fabric.editor.announcement.tryitnotice.main",i="fabric.editor.announcement.tryit.action",o="tryit",d=!1,h=!1}else if("initial-notice"===e[s.l])c=q,r="fabric.editor.announcement.initialnotice.main",i="fabric.editor.announcement.link.action",o="link",u=$;else if("dated-notice"===e[s.l]){c=X,r="fabric.editor.announcement.datednotice.main",i="fabric.editor.announcement.link.action",o="link",u=$;const n=e[s.j].split("-");p=new Date(n[0],n[1],n[2]).toLocaleDateString()}else{if("accidental"!==e[s.i])return null;c=q,r="fabric.editor.announcement.rollbacknotice.main",i="fabric.editor.announcement.rollbacknotice.action",o="link",u="https://confluence.atlassian.com/confcloud/blog/2019/03/accidental-upgrade-to-the-new-editing-experience",d=!1,E="yellow",f="fabric.editor.announcement.rollback.message"}return a.a.createElement(W,{bannerType:c,mainMessageId:r,actionMessageId:i,backgroundType:E,actionType:o,actionUrl:u,featureDiscoveryKey:f,rolloutDate:p,spaceKey:b,showIcon:d,showGreeting:h,displayName:l()(t,"user.displayName",null)})}render(){return a.a.createElement(r.a,null,({featureFlags:e,userId:n})=>!n?null:a.a.createElement(i.b,{query:Q},({data:n,loading:t,error:c})=>c||t||!n?null:a.a.createElement(o.a.Consumer,null,({spaceKey:t})=>this._getContent(e,t,n))))}}ee.displayName="RolloutAnnouncementBannerWrapperComponent",t.d(n,"RolloutAnnouncementComponent",(function(){return ne}));const ne=()=>a.a.createElement(ee,null);ne.displayName="RolloutAnnouncementComponent"},"Z/GR":function(e,n){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4MCIgaGVpZ2h0PSI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMCAxMS45ODNjOTYuNDYgMCA5OS45MTUgMzMuMDg0IDIwNC41NjQgMzMuMDg0IDEwNC42NDkgMCAyMTYuNTc2LTU4LjQyMiAzMTcuNzU2LTM3LjI4NSAxMDEuMTggMjEuMTM3IDIyNS40OSAzNy4yODUgMzU4LjY4IDBzMjEwLjAwNyA3NC4xNTMgMzEzIDI1Ljc2OGM0Ni0yMS42MSA1My45NDctMjEuMjU4IDg2LTIxLjU2N1Y1NS4wOUgwVjExLjk4M3oiIGZpbGw9IiNGRkYiIG9wYWNpdHk9Ii4yNSIvPjwvc3ZnPg=="}}]);
//# sourceMappingURL=page.rollout-banner~493df0b3.PkUzgEcG-v39.js.map