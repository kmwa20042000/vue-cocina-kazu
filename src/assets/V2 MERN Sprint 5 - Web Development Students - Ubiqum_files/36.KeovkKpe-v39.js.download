(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"3ldI":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n("Jygk"),a=n.n(r),o=n("M2LZ"),i=n("kC4U"),c=n("94Z3");function s(){let e=null;return function(){if(e)return Promise.resolve(e);const t=e=>e.json();return Object(i.a)("/wiki/plugins/macrobrowser/browse-macros.action?detailed=false&t=12").then(t,e=>{if(e instanceof c.a)return t(e.response);throw e}).then(({macros:t})=>(e=t,t))}}function u(){return new Promise(e=>{o.a.require(["wrc!fabric-editor-macro-browser","wr!com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-macro-browser","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:editor-resources","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-macro-browser-resources","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-resources"],()=>{const t=a.a.require("confluence-macro-browser/macro-browser");n.e("macro-browser-overrides~d16a5355").then(n.bind(null,"9S8K")).then(e=>{e.default()}).then(()=>{a.a.AJS.trigger("reset.rte"),e(t)})})})}const l=["wr!confluence.web.resources:view-content","wr!confluence.macros.advanced:get-more"];function d(e){if(!e)return;const t=e.contexts&&e.contexts.map(e=>"wrc!".concat(e))||[],n=e.keys&&e.keys.map(e=>"wr!".concat(e))||[],r=[...l,...t,...n];o.a.require(r)}},CSJ9:function(e,t,n){"use strict";n("aWzz");var r=n("ERkP"),a=n.n(r),o=n("Ydxy");const i={small:12,medium:26,large:36},c=({size:e})=>a.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},a.a.createElement("div",{"data-test-id":"spinner",style:{position:"absolute",left:"50%",top:"50%",marginLeft:-i[e]/2,marginTop:-i[e]/2,zIndex:100}},a.a.createElement(o.a,{size:i[e]})));c.displayName="CenteredSpinner",c.displayName="CenteredSpinner",c.defaultProps={size:"small"},t.a=c},J6ot:function(e,t,n){"use strict";var r=n("2srY"),a=n.n(r),o=n("dbjD"),i=n("idn7"),c=n("ERkP"),s=n.n(c),u=n("x+QU"),l=n.n(u),d=n("CSJ9"),p=l()({loader:()=>Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e(1),n.e(3),n.e(5),n.e(6),n.e(7),n.e(11),n.e(12),n.e(23),n.e(28),n.e(27),n.e(29),n.e(33),n.e("fabric.popup.editor~dc51bad7")]).then(n.bind(null,"KuQr")),loading:()=>s.a.createElement(d.a,{size:"medium"})});n.d(t,"a",(function(){return m}));class m{static isPopupADNode(e){return null!==e&&e.attrs&&e.attrs.extensionType===o.d.MACRO_CORE&&"popup"===e.attrs.extensionKey}static getAdf(e){let t=a()(e,"attrs.parameters.macroParams.innerAdfText.value");return t?JSON.parse(t):null}static isPopupMacro(e){return"popup"===e.name}static createAdfNode(){const e={type:"inlineExtension",attrs:{extensionType:o.d.MACRO_CORE,extensionKey:"popup",parameters:{macroMetadata:{},macroParams:{title:{value:"More details"},innerAdfText:{value:""}}},text:""}};return Promise.resolve(Object(i.c)(e))}static openPopupEditor(e,t){return new Promise((n,r)=>{e.attrs&&t.setActiveModal?t.setActiveModal(p,{title:a()(e,"attrs.parameters.macroParams.title.value")||"",adf:m.getAdf(e),onSaveAndClose:(r,i)=>{const c={type:"inlineExtension",attrs:{extensionKey:"popup",extensionType:o.d.MACRO_CORE,parameters:{macroMetadata:a()(e,"attrs.parameters.macroMetadata")||{},macroParams:{title:{value:r},innerAdfText:{value:i?JSON.stringify(i):""}}},text:""}};t.closeActiveModal&&t.closeActiveModal(),n(c)},onClose:()=>{t.closeActiveModal&&t.closeActiveModal(),r()}}):r(new Error("Cannot open Popup editor"))})}}},M2LZ:function(e,t,n){"use strict";var r=n("S2j0");var a={require:(e,t)=>new Promise(n=>{Object(r.a)(e,e=>{n(e),t&&t(e)},()=>{0})})},o=n("cxan"),i=n("zjfJ"),c=n("pkwY"),s=n("ERkP"),u=n.n(s);var l=function(e,t){const n=Object(c.a)({isBlocking:!0},t);return t=>{class a extends s.Component{constructor(...e){super(...e),Object(i.a)(this,"state",{dependenciesLoaded:!1}),Object(i.a)(this,"markAsLoaded",()=>{this.mounted&&this.setState({dependenciesLoaded:!0})})}componentDidMount(){this.mounted=!0,e&&e.length>0?Object(r.a)(e,this.markAsLoaded,()=>{0}):this.markAsLoaded()}componentWillUnmount(){this.mounted=!1}render(){const{dependenciesLoaded:e}=this.state;return e||!n.isBlocking?u.a.createElement(t,Object(o.a)({},this.props,{wrmDependenciesLoaded:e})):null}}return a.displayName="WRMComponent",a.displayName="WRMComponent(".concat(t.displayName||t.name,")"),a}};n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l}))},TOvH:function(e,t,n){"use strict";var r=n("RfuI");t.a=Object(r.a)({name:"packages/confluence-fabric-editor/src/components/FullPageEditorWrapper/FullPageEditorWrapperLoader.js",loader:()=>Promise.all([n.e("vendors~4134d62c"),n.e(10),n.e("fullpage.editor.wrapper~493df0b3")]).then(n.bind(null,"XDCa")),loading:()=>null})},Tl5U:function(e,t,n){"use strict";var r=n("pkwY"),a=n("ROYt"),o=n("8TdO"),i=n("/FQd"),c=n("dbjD"),s=n("3ldI"),u=n("Jygk"),l=n.n(u),d=n("idn7");async function p(e){const t={macroDefinition:{name:"jira"},contentId:e},n=await C(t);return e=>function(e,t){const n={source:e},r=l.a.require("confluence/jim/editor-plugins/jira-paste-link").pasteHandler(n,null,()=>{});if(!r||!r.params)return null;const a=JSON.parse(JSON.stringify(t));return a.attrs.parameters||(a.attrs.parameters={}),a.attrs.parameters.macroParams=Object(d.e)(r.params),a}(e,n)}const m=e=>{for(;-1!==e.indexOf("{}{}");)e=e.replace("{}{}","{}");return e="^"+(e=((e,t,n)=>n.replace(new RegExp(e,"g"),t))("{}","[^/]*?",e=e.replace(/[\-\[\]\/\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")))+"$"};async function f(e,t){const n=[],r=await e(),a=new Set;r.forEach(e=>{(e=>e.autoconvertData&&e.autoconvertData.urlParameter&&e.autoconvertData.patterns)(e)&&e.autoconvertData.patterns.forEach(t=>{if((e=>["http://","https://","http://{}","https://{}","http://{}.{}","https://{}.{}","http://{}.{}.{}","https://{}.{}.{}"].every(t=>t!==e))(t)){const r={macroName:e.macroName,urlParameter:e.autoconvertData.urlParameter,matcher:m(t)};a.add(r.macroName),n.push(r)}})});const o=await(async(e,t)=>(await Promise.all(Array.from(e).map(e=>C({macroDefinition:{name:e},contentId:t})))).reduce((e,t,n)=>(e[t.attrs.extensionKey]=t,e),{}))(a,t);return e=>((e,t,n)=>{const r=t.find(t=>!!e.match(t.matcher));if(r){const{macroName:t,urlParameter:a}=r,o={};o[a]=e;const i=n[t],c=JSON.parse(JSON.stringify(i));return c.attrs.text="".concat(a," = ").concat(e),c.attrs.extensionKey=t,c.attrs.parameters||(c.attrs.parameters={}),c.attrs.parameters.macroParams=Object(d.e)(o),c}return null})(e,n,o)}const h=()=>null;const y={align:!0,anchor:!0,bgcolor:!0,center:!0,cheese:!0,clickable:!0,code:!0,colgroup:!0,column:!0,"content-by-user":!0,copyright:!0,"create-space-button":!0,div:!0,"fancy-bullets":!0,favpages:!0,"gadget-b7a6531b1c147f2e175f1209bed5c0ad":!0,"global-reports":!0,highlight:!0,htmlcomment:!0,im:!0,img:!0,info:!0,junitreport:!0,li:!0,loremipsum:!0,lozenge:!0,multimedia:!0,navmap:!0,network:!0,noformat:!0,note:!0,ol:!0,p:!0,panel:!0,pre:!0,"privacy-policy":!0,"privacy-mark":!0,"recently-used-labels":!0,"reg-tm":!0,rollover:!0,roundrect:!0,search:!0,section:!0,sm:!0,"space-attachments":!0,"space-details":!0,span:!0,strike:!0,style:!0,table:!0,tbody:!0,td:!0,th:!0,thead:!0,tr:!0,tip:!0,tm:!0,ul:!0,warning:!0};function b(e,t={}){const n=e.alternateId||(e.id?e.id.replace("macro-",""):e.macroName);return t.hasOwnProperty(n)?t[n]:Boolean(y[n])}var g=n("J6ot");n.d(t,"d",(function(){return P})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return x})),n.d(t,"g",(function(){return E})),n.d(t,"e",(function(){return A})),n.d(t,"f",(function(){return k})),n.d(t,"a",(function(){return C}));const w=Object(s.a)(),v=["toc","expand","jira","trello-board","status","jiraroadmap"],O={type:"extension",content:c.b},P=async()=>{const[e,{featureFlags:t}]=await Promise.all([w(),Object(i.b)(Object(o.getApolloClient)())]);return e.filter((e,n)=>!e.hidden&&(t["confluence.frontend.fabric.editor.native.expands.insert"]?!b(e,{expand:!0}):!b(e)))};function j(){return P().then(e=>e.filter(e=>v.includes(e.macroName)))}function x(e){return(async(e,t)=>{const{contentId:n}=t;if(!n)return h;const[r,a]=await Promise.all([p(n),f(e,n)]);return e=>r(e)||a(e)})(P,e)}function E(e,t){const n=e.macroName;return e.anyParameterRequired||"children"===n||"tasks-report-macro"===n?function(e,t,n){return new Promise(async(a,o)=>{const i=await Object(s.b)();n&&(i.metadataList=i.metadataList.filter(n));const c=await M(i,t,e,a,o);try{i.open(Object(r.a)({},c,{presetMacroMetadata:e}))}catch(e){o(e)}})}(e,t):C({macroDefinition:{name:n,body:"",params:{}},contentId:t.contentId})}async function M(e,t,n,r,a){const c=await async function(e){const t=[...e.metadataList],{featureFlags:n}=await Object(i.b)(Object(o.getApolloClient)()),r=e.metadataList.filter(e=>n["confluence.frontend.fabric.editor.native.expands.insert"]?!b(e,{expand:!0}):!b(e));return e.metadataList=r,function(){e.metadataList=t}}(e);let s;return{autoClose:!1,onComplete:async o=>{s=!0,e.UI.showBrowserSpinner(!0);const i=n&&n.hasOwnProperty("content")?n:null,u=function(e,t,n){const{name:r,body:a,params:o,defaultParameterValue:i,schemaVersion:c}=e;return{macroDefinition:{name:r||"",body:a||"",params:o,defaultParameterValue:i||"",schemaVersion:c},contentId:t.contentId,selectedMacro:n}}(o,t,i);try{const t=await C(u);r(t),e.close(),c()}catch(e){a(e)}},onCancel:()=>{c(),s||a({reason:"cancel"})}}}function A(e,t){return new Promise(async(n,a)=>{const o=await Object(s.b)();t&&(o.metadataList=o.metadataList.filter(t));const i=await M(o,e,null,n,a);try{o.open(Object(r.a)({},i,{selectedMacro:null}))}catch(e){a(e)}})}function k(e,t,n){return new Promise(async(a,o)=>{const i=await Object(d.b)(e||O),c=await Object(s.b)();n&&(c.metadataList=c.metadataList.filter(n));const u=await M(c,t,e,a,o);try{c.open(Object(r.a)({},u,{selectedMacro:i}))}catch(e){o(e)}})}const C=async e=>{const{macroDefinition:t,contentId:n,selectedMacro:o}=e;if(g.a.isPopupMacro(t))return g.a.createAdfNode();const i=await a.a.content.getMacroPlaceholderADF(t,n),s=Object(r.a)({},i);return s.type===c.a&&(o?s.content=o.content:s.content&&0!==s.content.length||(s.content=c.b)),Object(d.c)(s)}},dbjD:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return s}));const r="extension",a="inlineExtension",o="bodiedExtension",i=[{content:[],type:"paragraph"}],c={TEMPLATE:"com.atlassian.confluence.template",MACRO_CORE:"com.atlassian.confluence.macro.core",MIGRATION:"com.atlassian.confluence.migration"},s={TEMPLATE:"variable",INLINE_EXTERNAL_IMAGE:"inline-external-image",INLINE_MEDIA_IMAGE:"inline-media-image",INVALID:"__confluenceADFMigrationUnsupportedContentInternalExtension__"}},hd8a:function(e,t,n){"use strict";var r=n("RfuI");t.a=Object(r.a)({name:"EditPageBrowserTitle",loader:()=>n.e("fabric.editpage.title~493df0b3").then(n.bind(null,"66Bi")),loading:()=>null})},idn7:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n("HbGN"),a=n("kC4U"),o=n("94Z3"),i=n("dbjD");function c(e){return Object.keys(e).reduce((t,n)=>{const r=u(e[n]);return""===n&&""===r||(t[n]=r),t},{})}function s(e){return Object.keys(e).reduce((t,n)=>{const r=u(e[n]);return""===n&&""===r||(t[n]={value:r}),t},{})}function u(e){return e.hasOwnProperty("value")?e.value:e}function l(e){const{type:t,content:n}=e,a=Object(r.a)(e,["type","content"]),{macroParams:o}=a.parameters,i={type:t,attrs:a};return i.attrs.bodyType="none","bodiedExtension"===t&&(i.content=n&&n.length>0?n:[],i.attrs.bodyType="rich"),i.attrs.parameters.macroParams=s(o),i}function d(e){const{attrs:t,content:n,type:r}=e,{macroParams:a}=t.parameters;let o=i.f;r===i.a?o=i.a:r===i.e&&(o=i.e);const c={type:o,attrs:t};return c.attrs.parameters||(c.attrs.parameters={}),n&&(c.content=n),c.attrs.parameters.macroParams=s(a),c}async function p(e){if(e.hasOwnProperty("name")&&!e.hasOwnProperty("attrs"))return Promise.resolve(e);const t=e,{attrs:n}=t,{extensionKey:r,parameters:i}=n||{extensionKey:null,parameters:{macroParams:{},macroMetadata:{schemaVersion:null}}},{macroParams:s,macroMetadata:l}=i,d=r||"",p=c(s||{}),m=function(e){return e.hasOwnProperty("")&&u(e[""])||""}(s||{}),f=l&&l.schemaVersion||"1";if(!t.content||0===t.content.length)return{name:d,params:p,defaultParameterValue:m,schemaVersion:f,body:""};const{content:h}=t,y={representation:"atlas_doc_format",value:JSON.stringify({type:"doc",content:h,version:1})};let b;try{b=await Object(a.a)("/wiki/rest/api/contentbody/convert/storage",{method:"POST",body:JSON.stringify(y),headers:{"Content-Type":"application/json"}})}catch(e){if(!(e instanceof o.a))throw e;b=e.response}if(!b.ok||200!==b.status)throw Error("Conversion HTTP error, status = ".concat(b.status,', message = "').concat(b.statusText,'"'));return{name:d,params:p,defaultParameterValue:m,schemaVersion:f,body:(await b.json()).value||""}}},"x+QU":function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n("ERkP"),s=n("aWzz"),u=[],l=[];function d(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e})).catch((function(e){throw n.loading=!1,n.error=e,e})),n}function p(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach((function(r){var a=d(e[r]);a.loading?t.loading=!0:(t.loaded[r]=a.loaded,t.error=a.error),n.push(a.promise),a.promise.then((function(e){t.loaded[r]=e})).catch((function(e){t.error=e}))}))}catch(e){t.error=e}return t.promise=Promise.all(n).then((function(e){return t.loading=!1,e})).catch((function(e){throw t.loading=!1,e})),t}function m(e,t){return c.createElement((n=e)&&n.__esModule?n.default:n,t);var n}function f(e,t){var d,p;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var f=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:m,webpack:null,modules:null},t),h=null;function y(){return h||(h=e(f.loader)),h.promise}return u.push(y),"function"==typeof f.webpack&&l.push((function(){if(e=f.webpack,"object"===r(n.m)&&e().every((function(e){return void 0!==e&&void 0!==n.m[e]})))return y();var e})),p=d=function(t){function n(r){a(this,n);var i=o(this,t.call(this,r));return i.retry=function(){i.setState({error:null,loading:!0,timedOut:!1}),h=e(f.loader),i._loadModule()},y(),i.state={error:h.error,pastDelay:!1,timedOut:!1,loading:h.loading,loaded:h.loaded},i}return i(n,t),n.preload=function(){return y()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(f.modules)&&f.modules.forEach((function(t){e.context.loadable.report(t)})),h.loading){"number"==typeof f.delay&&(0===f.delay?this.setState({pastDelay:!0}):this._delay=setTimeout((function(){e.setState({pastDelay:!0})}),f.delay)),"number"==typeof f.timeout&&(this._timeout=setTimeout((function(){e.setState({timedOut:!0})}),f.timeout));var t=function(){e._mounted&&(e.setState({error:h.error,loaded:h.loaded,loading:h.loading}),e._clearTimeouts())};h.promise.then((function(){t()})).catch((function(e){t()}))}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?c.createElement(f.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?f.render(this.state.loaded,this.props):null},n}(c.Component),d.contextTypes={loadable:s.shape({report:s.func.isRequired})},p}function h(e){return f(d,e)}h.Map=function(e){if("function"!=typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return f(p,e)};var y=function(e){function t(){return a(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return c.Children.only(this.props.children)},t}(c.Component);function b(e){for(var t=[];e.length;){var n=e.pop();t.push(n())}return Promise.all(t).then((function(){if(e.length)return b(e)}))}y.propTypes={report:s.func.isRequired},y.childContextTypes={loadable:s.shape({report:s.func.isRequired}).isRequired},h.Capture=y,h.preloadAll=function(){return new Promise((function(e,t){b(u).then(e,t)}))},h.preloadReady=function(){return new Promise((function(e,t){b(l).then(e,e)}))},e.exports=h}}]);
//# sourceMappingURL=36.KeovkKpe-v39.js.map