(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{"/9an":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("L21V"),a=Object(r.g)({deleteEmojiTitle:{id:"fabric.emoji.delete.title",defaultMessage:"Remove emoji",description:"Title for emoji removal dialog"},deleteEmojiDescription:{id:"fabric.emoji.delete.description",defaultMessage:"All existing instances of this emoji will be replaced with {emojiShortName}",description:"Description for emoji removal dialog"},deleteEmojiLabel:{id:"fabric.emoji.delete.label",defaultMessage:"Remove",description:"Button label to remove emoji"},addCustomEmojiLabel:{id:"fabric.emoji.add.custom.emoji.label",defaultMessage:"Add your own emoji",description:"Button label to add custom emoji"},emojiPlaceholder:{id:"fabric.emoji.placeholder",defaultMessage:"Emoji name",description:"Placeholder for emoji"},emojiNameAriaLabel:{id:"fabric.emoji.name.ariaLabel",defaultMessage:"Enter a name for the new emoji",description:"Explains to enter a name for a new emoji"},emojiChooseFileTitle:{id:"fabric.emoji.choose.file.title",defaultMessage:"Choose file",description:"Choose custom emoji file"},emojiChooseFileAriaLabel:{id:"fabric.emoji.choose.file.ariaLabel",defaultMessage:"Choose a file for the emoji. JPG, PNG or GIF. Max size 1 MB.",description:"Message indicating the purpose of choosing the file and requirements for the file"},emojiImageRequirements:{id:"fabric.emoji.image.requirements",defaultMessage:"JPG, PNG or GIF. Max size 1 MB.",description:"Message for emoji image requirements and maximum file size"},emojiPreviewTitle:{id:"fabric.emoji.preview.title",defaultMessage:"Preview",description:"Emoji preview title"},emojiPreview:{id:"fabric.emoji.preview",defaultMessage:"Your new emoji {emoji} looks great",description:"Emoji preview"},addEmojiLabel:{id:"fabric.emoji.add.label",defaultMessage:"Add emoji",description:"verb - Button label to add emoji"},retryLabel:{id:"fabric.emoji.retry.label",defaultMessage:"Retry",description:"verb - Button label to retry upload"},cancelLabel:{id:"fabric.emoji.cancel.label",defaultMessage:"Cancel",description:"verb - button label to cancel operation"},searchLabel:{id:"fabric.emoji.search.label",defaultMessage:"Search",description:"verb - button label to search"},categoriesSearchResults:{id:"fabric.emoji.categories.search.results",defaultMessage:"Search results",description:"Emoji categories search results"},frequentCategory:{id:"fabric.emoji.category.frequent",defaultMessage:"Frequent",description:"Emoji frequent category"},peopleCategory:{id:"fabric.emoji.category.people",defaultMessage:"People",description:"Emoji frequent category"},natureCategory:{id:"fabric.emoji.category.nature",defaultMessage:"Nature",description:"Emoji nature category"},foodsCategory:{id:"fabric.emoji.category.foods",defaultMessage:"Food & Drink",description:"Emoji Foods category"},activityCategory:{id:"fabric.emoji.category.activity",defaultMessage:"Activity",description:"Emoji activity category"},placesCategory:{id:"fabric.emoji.category.places",defaultMessage:"Travel & Places",description:"Emoji Places category"},objectsCategory:{id:"fabric.emoji.category.objects",defaultMessage:"Objects",description:"Emoji objects category"},symbolsCategory:{id:"fabric.emoji.category.symbols",defaultMessage:"Symbols",description:"Emoji symbols category"},flagsCategory:{id:"fabric.emoji.category.flags",defaultMessage:"Flags",description:"Emoji flags category"},productivityCategory:{id:"fabric.emoji.category.productivity",defaultMessage:"Productivity",description:"Emoji productivity category"},userUploadsCustomCategory:{id:"fabric.emoji.category.user.uploads",defaultMessage:"Your uploads",description:"User uploads in the custom category"},allUploadsCustomCategory:{id:"fabric.emoji.category.all.uploads",defaultMessage:"All uploads",description:"All uploads in the custom category"},deleteEmojiFailed:{id:"fabric.emoji.error.delete.failed",defaultMessage:"Remove failed",description:"Error message when custom emoji failed to be removed"},emojiInvalidImage:{id:"fabric.emoji.error.invalid.image",defaultMessage:"Selected image is invalid",description:"Error message for invalid selected image"},emojiUploadFailed:{id:"fabric.emoji.error.upload.failed",defaultMessage:"Upload failed",description:"Failed to upload emoji image"},emojiImageTooBig:{id:"fabric.emoji.error.image.too.big",defaultMessage:"Selected image is more than 1 MB",description:"Error message for image too big, beyond the size limit"}})},ElYY:function(e,t,n){"use strict";var r=n("pkwY"),a=n("zjfJ"),i=n("ERkP"),o=n.n(i),s=n("L21V"),c=n("jCA7"),d=n("Jygk"),l=n.n(d),u=n("lSUb"),p=n("2srY"),m=n.n(p),f=n("zdnd"),h=n("ROar"),b=n("JpEQ"),g=n("DDra"),j=n("9lk5"),v=n("bQlP"),I=n("8U2Q"),y=n("bR0+"),w=n("7M9M"),E=n("qdfj"),P=n("KkZ4"),O=n("1Y1u"),C=n("6y+9"),x=n("T+3T"),M=n("uIYj"),T=n("RfuI");var _=()=>null;var k=Object(T.a)({name:"DetailsLoadable",loader:()=>n.e("extension-handler-details~2c7771c4").then(n.bind(null,"tcwv")),loading:_});class A extends i.Component{render(){const{contentId:e,showTemplateVariablesInPreview:t,showTemplateInputInPreview:n}=this.props,{content:r}=this.props.node,a={};return r&&(a.adf=r),e&&(a.contentId=e),this.props.node.parameters&&this.props.node.parameters.macroParams&&this.props.node.parameters.macroParams.hidden&&this.props.node.parameters.macroParams.hidden.value?a.hidden=!!this.props.node.parameters.macroParams.hidden.value:a.hidden=!1,t&&(a.showTemplateVariablesInPreview=t),n&&(a.showTemplateInputInPreview=n),o.a.createElement(k,a)}}A.displayName="DetailsExtensionHandler";var R=A,S=n("a0pW");var F=Object(T.a)({name:"ExcerptLoadable",loader:()=>n.e("extension-handler-excerpt~b9cac009").then(n.bind(null,"7J+w")),loading:()=>o.a.createElement(S.a,{size:"medium",style:{minHeight:100}})});class N extends i.Component{render(){const{contentId:e,node:t,showTemplateVariablesInPreview:n,showTemplateInputInPreview:r}=this.props,{content:a}=t;if("true"===m()(t,"parameters.macroParams['hidden'].value"))return null;const i={contentId:e,adf:a};return n&&(i.showTemplateVariablesInPreview=n),r&&(i.showTemplateInputInPreview=r),o.a.createElement(F,i)}}N.displayName="ExcerptExtensionHandler";var D=N,L=n("S1px");const V=()=>o.a.createElement("div",{style:{padding:"8px 0 0 16px"}},o.a.createElement("span",{style:{display:"inline-block",borderRadius:3,backgroundColor:"#F4F5F7",width:16,height:16,margin:"2px 16px 2px 0"}}),o.a.createElement("span",{style:{display:"inline-block",borderRadius:3,backgroundColor:"#F4F5F7",width:120,height:20}}));V.displayName="ExpandComponentShadow";var H=V;var q=Object(T.a)({name:"ExpandLoadable",loader:()=>n.e("extension-handler-expand~9e850db9").then(n.bind(null,"w2pD")),loading:H});class J extends i.Component{render(){const{contentId:e,showTemplateVariablesInPreview:t,showTemplateInputInPreview:n}=this.props,{content:r}=this.props.node,{title:a}=this.props.node.parameters.macroParams,i={};return r&&(i.adf=r),a&&(i.title=a.value),e&&(i.contentId=e),t&&(i.showTemplateVariablesInPreview=t),n&&(i.showTemplateInputInPreview=n),o.a.createElement(q,i)}}J.displayName="ExpandExtensionHandler";var K=J,U=n("MTqT"),G=n("dbjD"),Y=n("2sr0");const B=Object(Y.a)()(class extends i.Component{componentDidMount(){const{createAnalyticsEvent:e,extensionKey:t}=this.props;e&&e({type:"sendTrackEvent",data:{action:"viewed",actionSubject:"macro",actionSubjectId:t,source:"viewPageScreen"}}).fire()}render(){const{children:e}=this.props;return o.a.createElement(i.Fragment,null,e)}});var z=n("cxan"),X=n("9jV5"),W=n("FCVA"),Q=n("B/tD");const Z=({contentId:e})=>(t,...n)=>{if(!t)return null;const{extensionKey:r,parameters:a}=t;if(r===G.c.INVALID){const t=a;return o.a.createElement(Q.a,{cxhtml:t.cxhtml,reason:t.reason,contentId:e})}if(r===G.c.INLINE_EXTERNAL_IMAGE){const e=a;return o.a.createElement(W.a,e)}if(r===G.c.INLINE_MEDIA_IMAGE){const t=a;return o.a.createElement(X.a,Object(z.a)({},t,{contentId:e}))}return null};var $=n("6v+B"),ee=n("x+QU"),te=n.n(ee),ne=n("CSJ9"),re=te()({loader:()=>Promise.all([n.e("atlaskit~66e23772"),n.e("fabric.popup.renderer~676ab740")]).then(n.bind(null,"YmUJ")),loading:()=>o.a.createElement(ne.a,{size:"medium"})});class ae{}Object(a.a)(ae,"getOpenPopupRenderer",(e,t)=>n=>{const r=m()(e,"parameters.macroParams.title.value"),a=m()(e,"parameters.macroParams.innerAdfText.value"),i=a?JSON.parse(a):null;t.setActiveModal(re,{adf:i,title:r,popupElement:n,onClose:()=>{t.closeActiveModal&&t.closeActiveModal()}})});var ie=n("Sbo1");const oe={insertCss:e=>e._insertCss()},se=({contentId:e,showTemplateVariablesInPreview:t,showTemplateInputInPreview:n,spaceKey:r,store:a,isJposMacroEnabled:i,config:s})=>a=>{const{extensionKey:c}=a,d={node:a,contentId:e,showTemplateVariablesInPreview:t||!1,showTemplateInputInPreview:n||!1,spaceKey:r,mode:"renderer",context:oe},l=ae.getOpenPopupRenderer(a,s);return o.a.createElement(B,{extensionKey:c},(()=>{switch(c){case"details":return o.a.createElement(R,d);case"excerpt":return o.a.createElement(D,d);case"excerpt-include":return o.a.createElement(L.a,d);case"expand":return o.a.createElement(K,d);case"popup":return o.a.createElement(ie.a,{title:m()(a,"parameters.macroParams.title.value"),onClick:l});case"portfolioforjiraplan":if(!i){const{parameters:{macroParams:{url:{value:e}}}}=a;return o.a.createElement("div",null,o.a.createElement("a",{href:e,target:"_blank"},e))}default:return o.a.createElement(U.a,d)}})())},ce=(e,t)=>{if("media"!==e.type)e.content&&e.content.forEach(e=>ce(e,t));else{const n=m()(e,"attrs.__fileName");n&&t.push(n)}},de=(e,t)=>Promise.all(t.map((e=>t=>fetch("/wiki/download/thumbnails/".concat(e,"/").concat(t),{redirect:"error"}))(e))),le=e=>!!e&&!!e["confluence.frontend.fabric.renderer.table.sorting"],ue=e=>!!e&&!!e["confluence.frontend.fabric.editor.image.alt-text"];class pe extends i.PureComponent{constructor(...e){super(...e),Object(a.a)(this,"state",{_root:void 0,justConvertedContentId:""}),Object(a.a)(this,"_handleActionToggle",(e,t)=>{const{objectId:n,updateInlineTask:r}=this.props;r({contentId:n,status:"TODO"===t?"UNCHECKED":"CHECKED",taskId:e.localId,trigger:"VIEW_PAGE"})}),Object(a.a)(this,"_handleProfileCardActions",e=>{const{inProductPeopleDirectory:t,push:n}=this.props;return[{label:this.props.intl.formatMessage({id:"view.profile"}),callback:()=>{t?n(Object(y.a)(e,null,w.CONTEXT_PATH)):l.a.open(Object(y.a)(e,null),"_blank").focus()}}]}),Object(a.a)(this,"getExtensionHandlers",()=>{const{objectId:e,spaceKey:t,showTemplateVariablesInPreview:n,showTemplateInputInPreview:a,isJposMacroEnabled:i}=this.props,{store:o}=this.context;return(({contentId:e,showTemplateVariablesInPreview:t,showTemplateInputInPreview:n,spaceKey:a,store:i,isJposMacroEnabled:o,config:s})=>{const c=se,d={[G.d.MACRO_CORE]:c({contentId:e,showTemplateVariablesInPreview:t,showTemplateInputInPreview:n,spaceKey:a,isJposMacroEnabled:o,store:i,config:s})},l={[G.d.MIGRATION]:Z({contentId:e})},u=n?$.b:$.a,p=t?{[G.d.TEMPLATE]:u}:{};return Object(r.a)({},d,l,p)})({contentId:e,showTemplateVariablesInPreview:n,showTemplateInputInPreview:a,spaceKey:t,store:o,isJposMacroEnabled:i,config:this.getConfig()})}),Object(a.a)(this,"_handleMediaClick",e=>{const{objectId:t,openPreviewer:n}=this.props;n({parentId:t,item:e.mediaItemDetails})}),Object(a.a)(this,"_handleLinkClick",e=>{const{isPersonalSpace:t,contentTitle:n}=this.props;if(t&&"Get to know Confluence"===n){e&&e.preventDefault();const t=m()(e,"target.href");l.a.open(t,"_blank")}}),Object(a.a)(this,"getEventHandlers",()=>{const{isMediaViewerNextGen:e}=this.props;return{media:e?void 0:{onClick:this._handleMediaClick},link:{onClick:this._handleLinkClick}}}),Object(a.a)(this,"_setRoot",e=>this.setState({_root:e})),Object(a.a)(this,"getProviders",Object(u.a)(()=>{const{containerId:e,cloudId:t,accountId:n,objectId:r}=this.props,a=h.a.create({mediaProvider:Object(O.c)({contentId:r}),taskDecisionProvider:Promise.resolve(new C.a(this._handleActionToggle))});return t&&n&&a.setProvider("mentionProvider",Object(x.a)(t,n).then(e=>e.mentionResource).catch(e=>Promise.reject())),t&&(a.setProvider("emojiProvider",Object(g.a)(b.a,{cloudId:t,source:"view"})),a.setProvider("profilecardProvider",Object(x.b)(t,this._handleProfileCardActions))),e&&a.setProvider("contextIdentifierProvider",Promise.resolve({containerId:e,objectId:r,product:"confluence"})),a})),Object(a.a)(this,"renderRenderer",e=>{const{adf:t,id:n,className:a,style:i,allowInlineComments:s,ignoreHeadingAnchorLinksFeatureFlag:c,renderWhenReady:d,onComplete:l,featureFlags:u}=this.props;if(!t)return null;const p=!c&&(e=>!!e&&!!e["confluence.frontend.fabric.renderer.heading.anchor"])(u);return o.a.createElement("div",{id:n,"data-inline-comments-target":s?"true":"false",className:a,ref:this._setRoot,style:Object(r.a)({},i,{width:"100%"}),"data-test-appearance":this.props.appearance},o.a.createElement(f.a,{allowDynamicTextSizing:this.props.allowDynamicTextSizing,appearance:this.props.appearance,document:t,adfStage:"stage0",dataProviders:this.getProviders(),eventHandlers:this.getEventHandlers(),extensionHandlers:e,portal:this.state._root,onComplete:l,allowColumnSorting:le(u),allowHeadingAnchorLinks:p,UNSAFE_allowAltTextOnImages:ue(u)}),d&&d())}),Object(a.a)(this,"renderRendererWithXen",(e,t,n,a,s)=>{const c=Object(j.d)(t);return o.a.createElement(I.b,{analyticsWebClient:Object(P.getAnalyticsWebClient)(),allowConfig:s["confluence.frontend.forge.allow.config"],apolloClient:c,contextIds:e,dataProviders:this.getProviders(),forgeContext:n,forgeUIAnalyticsContext:a,metalClient:Object(j.c)(t)},({extensionHandlers:e})=>o.a.createElement(i.Fragment,null,this.renderRenderer(Object(r.a)({},this.getExtensionHandlers(),e))))})}getConfig(){const{objectId:e,setActiveModal:t,closeActiveModal:n}=this.props;return{contentId:e,setActiveModal:t,closeActiveModal:n}}componentDidMount(){const{adf:e,objectId:t,featureFlags:n}=this.props;e&&n&&n["confluence.frontend.fabric.fire-event-media"]&&(async(e,t)=>{const n=[];try{ce(t,n),await de(e,n)}catch(e){}})(t,e)}_isEnabledFor(e){return this.props.fabricFeatureSet>=e}_isSupportInlineImage(){return this._isEnabledFor(M.b)}render(){const{accountId:e,cloudId:t,containerId:n,contentType:r,environment:a,featureFlags:i,objectId:o,spaceKey:s}=this.props;if(!!i&&i[v.w]){if(!t||!a)return null;const c="ari:cloud:confluence::site/".concat(t);return this.renderRendererWithXen([c],a,Object(j.b)(e,t,o,s),Object(j.a)({objectId:o,objectType:r,containerId:n,containerType:"space"}),i)}return this.renderRenderer(this.getExtensionHandlers())}}pe.displayName="RendererComponent",Object(a.a)(pe,"contextTypes",{store:c.storeShape.isRequired});t.a=Object(E.a)(Object(s.h)(pe))},WmVM:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.UsageFrequency=2]="UsageFrequency"}(r||(r={}))},"aJ+w":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"j",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"m",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return f})),n.d(t,"e",(function(){return h}));var r="CUSTOM",a="FREQUENT",i="allUploadsCustomCategory",o="userUploadsCustomCategory",s="data:",c="delete-emoji",d=1e5,l=20,u=350,p=295,m="fabric.emoji",f=m+".selectedTone",h=["PEOPLE","NATURE","FOODS","ACTIVITY","PLACES","OBJECTS","SYMBOLS","FLAGS"]},nYST:function(e,t,n){"use strict";n.d(t,"p",(function(){return o})),n.d(t,"o",(function(){return s})),n.d(t,"i",(function(){return c})),n.d(t,"l",(function(){return d})),n.d(t,"n",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"k",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return h})),n.d(t,"m",(function(){return b})),n.d(t,"q",(function(){return g})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return w})),n.d(t,"e",(function(){return E}));var r=n("D57K"),a=n("/9an"),i=n("aJ+w"),o=function(e){return!(!e||!e.spriteRef)},s=function(e){return!(!e||!e.sprite)},c=function(e){return!(!e||!e.imagePath)},d=function(e){return!(!e||!e.mediaPath)},l=function(e){return!(!e||!e.then)},u=function(e){return e&&e.shortName&&e.type},p=function(e){return d(e.representation)},m=function(e){return e.category===i.b&&(t=e.representation,c(t)&&0===t.imagePath.indexOf(i.d));var t},f=function(e){return!(!e||!e.skinVariations)},h=function(e){return"baseId"in e},b=function(e){return e in a.a},g=function(e){return{shortName:e.shortName,id:e.id,fallback:e.fallback}},j=function(e,t){if(!t)return!1;for(var n=0;n<e.length;n++)if((r=e[n])===(a=t)||r&&a&&r.id===a.id&&r.shortName===a.shortName)return!0;var r,a;return!1},v=function(e){return{mediaPath:e.imagePath,height:e.height,width:e.width}},I=function(e,t){return{imagePath:t||e.mediaPath,height:e.height,width:e.width}},y=function(e,t,n){var a=e.representation,i=e.altRepresentation,o=n?void 0:t,s=n?t:void 0;if(!d(a)&&!d(i))return e;var c=d(a)?I(a,o):a,l=d(i)?I(i,s):i,u=Object(r.__assign)(Object(r.__assign)({},e),{representation:c});return w(u,l)},w=function(e,t){return t?Object(r.__assign)(Object(r.__assign)({},e),{altRepresentation:t}):e},E=function(e){return e.category}},rhKZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("D57K"),a=!1;function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];a&&console.log.apply(console,Object(r.__spread)([e],t))}},xN70:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return f}));var r=n("D57K"),a=n("F00T"),i=n("nYST"),o=n("rhKZ"),s=function(e,t){var n=e.getRatio,i=void 0===n?d:n,o=Object(r.__rest)(e,["getRatio"]),s=c(i),l=t||{},u=l.queryParams,p=void 0===u?{}:u,m=Object(r.__rest)(l,["queryParams"]),f=Object(r.__assign)(Object(r.__assign)({},m),{queryParams:Object(r.__assign)(Object(r.__assign)({},s),p)});return a.b.requestService(o,f)},c=function(e){return e()>1?{scale:"XHDPI",altScale:"XXXHDPI"}:{altScale:"XHDPI"}},d=function(){return window.devicePixelRatio},l=function(e){return e[c(d).altScale]},u=function(e,t){if(Object(i.p)(e)&&t&&t.spriteSheets){var n=e,r=n.height,a=n.width,s=n.x,c=n.y,d=n.xIndex,l=n.yIndex,u=n.spriteRef,p=t.spriteSheets[u];if(p)return{sprite:p,height:r,width:a,x:s,y:c,xIndex:d,yIndex:l}}else if(Object(i.i)(e)){r=e.height,a=e.width;var m=e.imagePath;return function(e,t){return!(!t||!t.mediaApiToken||0!==e.indexOf(t.mediaApiToken.url))}(m,t)?Object(i.c)(e):{height:r,width:a,imagePath:m}}Object(o.a)("failed conversion for representation",e,t)},p=function(e,t){return e&&e!=={}?u(l(e),t):void 0},m=function(e){return{emojis:e.emojis.map((function(t){var n=u(t.representation,e.meta),a=p(t.altRepresentations,e.meta),o=function(e,t){if(!e.skinVariations)return[];var n=e.skinVariations,a=e.id;return n.map((function(e){var n=e.representation,i=e.altRepresentations,o=Object(r.__rest)(e,["representation","altRepresentations"]);return Object(r.__assign)({baseId:a,representation:u(n,t),altRepresentation:p(i,t)},o)}))}(t,e.meta),s=(t.representation,t.skinVariations,t.altRepresentations,Object(r.__rest)(t,["representation","skinVariations","altRepresentations"])),c=Object(r.__assign)(Object(r.__assign)({},s),{representation:n,skinVariations:o});return Object(i.a)(c,a)})),mediaApiToken:e.meta&&e.meta.mediaApiToken}},f=function(e,t){return!!(t&&e.altRepresentation&&function(e){return d()>1?2*e:e}(t)>e.representation.height)}}}]);
//# sourceMappingURL=88.8kYrS1c8-v39.js.map