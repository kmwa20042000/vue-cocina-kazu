(window.webpackJsonp=window.webpackJsonp||[]).push([[19,"dashboard.popular~675cf4e2"],{"2+Cz":function(e,n,t){"use strict";var r=t("ERkP"),o=t.n(r),a=t("lZoD"),i=t("p+ff"),s=t("RfuI");const c=Object(s.a)({loader:()=>Promise.all([t.e("atlaskit~66e23772"),t.e("vendors~4134d62c"),t.e(0),t.e(2),t.e(14),t.e(17),t.e(20),t.e(26),t.e(34),t.e("restrictions.dialog~b59ad437")]).then(t.bind(null,"uqKO")).then(({RestrictionsDialog:e})=>e),name:"RestrictionsDialogLoader"}),l=Object(s.a)({name:"RestrictionsUpsellDialogLoader",loader:()=>Promise.all([t.e("atlaskit~66e23772"),t.e("vendors~4134d62c"),t.e(0),t.e(2),t.e(14),t.e(17),t.e(20),t.e(26),t.e(34),t.e("restrictions.dialog~b59ad437")]).then(t.bind(null,"YnqX")).then(({RestrictionsUpsellDialog:e})=>e)});var u=t("gQ5V"),d=t("TYX8"),p=t("AXlJ"),f=t("KD1n"),g=t("H5qd");function h(){const e=Object(f.a)(["\n  query IsUpsellQuery($contentId: ID!, $status: [String]) {\n    content(id: $contentId, status: $status) {\n      nodes {\n        id\n        hasInheritedRestrictions\n        hasRestrictions\n        type\n      }\n    }\n    tenant {\n      editions {\n        edition\n      }\n    }\n  }\n"]);return h=function(){return e},e}const m=t.n(g)()(h());function I(e){const n=Object(p.a)(e.contentId);return n?o.a.createElement(u.b,{query:m,variables:{contentId:n,status:d.a}},({data:n,loading:t,error:r})=>{var o,a,i;if(t||r)return null;const s=null!=(i=n)&&null!=(i=i.tenant)&&null!=(i=i.editions)?i.edition:i,c=Boolean(null!=(a=n)&&null!=(a=a.content)&&null!=(a=a.nodes)&&null!=(a=a[0])?a.hasRestrictions:a),l=Boolean(null!=(o=n)&&null!=(o=o.content)&&null!=(o=o.nodes)&&null!=(o=o[0])?o.hasInheritedRestrictions:o),u=c||l;return e.children({isUpsell:"FREE"===s&&!u})}):e.children({isUpsell:!1})}var b=t("CMz1");function y({contentId:e}){return o.a.createElement(a.c,{to:[b.a]},n=>o.a.createElement(I,{contentId:e},({isUpsell:t})=>{let r;if(n.getIsOpen()){const a=()=>n.setIsOpen(!1);r=t?o.a.createElement(l,{onClose:a}):o.a.createElement(c,{contentId:e,onClose:a})}return o.a.createElement(i.b,null,r)}))}t.d(n,"a",(function(){return y})),y.displayName="RestrictionsDialogMountPoint"},AXlJ:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var r=t("ERkP"),o=t("+mzV"),a=t("Ua4J"),i=t("DlIL");function s(e){const{contentId:n}=Object(r.useContext)(o.a),{getQueryParams:t}=Object(r.useContext)(a.a);return e||(n||Object(i.a)(t(),"draftId"))}},Bnkh:function(e,n,t){"use strict";var r=t("ERkP"),o=t.n(r),a=t("gQ5V"),i=t("/FQd"),s=t("KD1n"),c=t("H5qd"),l=t.n(c);function u(){const e=Object(s.a)(["\n  query PageViewRestrictionsQuery($contentId: ID!, $status: [String]) {\n    content(id: $contentId, status: $status) {\n      nodes {\n        ...ContentIdAndRestrictionsFragment\n        ancestors {\n          ...ContentIdAndRestrictionsFragment\n        }\n      }\n    }\n  }\n\n  fragment ContentIdAndRestrictionsFragment on Content {\n    id\n    restrictions {\n      read {\n        restrictions {\n          user {\n            count\n            nodes {\n              accountId\n            }\n          }\n          group {\n            count\n            nodes {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}const d=l()(u());function p(){const e=Object(s.a)(["\n  query PageViewRestrictionsQueryV2($contentId: ID!, $status: [String]) {\n    content(id: $contentId, status: $status) {\n      nodes {\n        id\n        hasInheritedRestrictions\n        hasViewRestrictions\n      }\n    }\n  }\n"]);return p=function(){return e},e}const f=l()(p());function g({children:e,contentId:n,status:t}){return o.a.createElement(i.a,null,({featureFlags:r})=>{const i=r["confluence.frontend.restrictions-dialog.view-restrictions-from-graphql"]?f:d;return o.a.createElement(a.b,{query:i,variables:{contentId:n,status:t}},({data:n,error:t,loading:r})=>{let o,a;if(!r){var i;const e=null!=(i=n)&&null!=(i=i.content)&&null!=(i=i.nodes)?i[0]:i;e&&("restrictions"in e?(o=h(e),a=function({ancestors:e}){return Boolean(e&&e.some(h))}(e)):(o=e.hasViewRestrictions,a=e.hasInheritedRestrictions))}return e({error:t,hasDirectViewRestrictions:o,hasInheritedViewRestrictions:a,loading:r})})})}function h(e){var n,t,r;const o=null!=(r=e)&&null!=(r=r.restrictions)&&null!=(r=r.read)?r.restrictions:r,a=null!=(t=o)&&null!=(t=t.user)?t.nodes:t,i=null!=(n=o)&&null!=(n=n.group)?n.nodes:n;return Boolean(a&&a.length||i&&i.length)}t.d(n,"a",(function(){return g})),g.displayName="PageViewRestrictions"},CMz1:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t("zjfJ"),o=t("lZoD");class a extends o.a{constructor(...e){super(...e),Object(r.a)(this,"state",{isOpen:!1})}getIsOpen(){return this.state.isOpen}setIsOpen(e){this.setState({isOpen:e})}}},Cam2:function(e,n,t){"use strict";var r,o=t("D57K"),a=t("ERkP"),i=t.n(a),s=t("OEBU"),c=t("YGBU"),l=t("2sr0"),u=t("JEzt"),d=t.n(u),p=t("gp2w"),f=t("NI0Q"),g=t("RLdS"),h=t("FmgO"),m=t("KsTJ"),I=t("+3hD"),b=t("RZTm"),y=t("m7kQ"),E=t("hd9Z"),O=t("tD4N"),R=Object(I.a)({light:y.N0,dark:y.DN50}),C=Object(I.a)({light:y.N900,dark:y.DN600}),w=m.default.div(r||(r=Object(o.__makeTemplateObject)(["\n  background: ",";\n  border-radius: ","px;\n  box-sizing: content-box; /* do not set this to border-box or it will break the overflow handling */\n  color: ",";\n  max-height: ","px;\n  max-width: ","px;\n  padding: ","px ","px;\n  z-index: ",";\n\n  ",";\n\n  &:focus {\n    outline: none;\n  }\n"],["\n  background: ",";\n  border-radius: ","px;\n  box-sizing: content-box; /* do not set this to border-box or it will break the overflow handling */\n  color: ",";\n  max-height: ","px;\n  max-width: ","px;\n  padding: ","px ","px;\n  z-index: ",";\n\n  ",";\n\n  &:focus {\n    outline: none;\n  }\n"])),R,b.f,C,Object(E.multiply)(b.l,56),Object(E.multiply)(b.l,56),Object(E.multiply)(b.l,2),Object(E.multiply)(b.l,3),b.m.dialog,O.e200),v=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleClickOutside=function(e){var t=n.props,r=t.isOpen,o=t.onClose;if(!e.defaultPrevented){var a=n.containerRef,i=n.triggerRef,s=e.target;i&&i.contains(s)||r&&a&&!a.contains(s)&&o&&o({isOpen:!1,event:e})}},n}return Object(o.__extends)(n,e),n.prototype.componentDidUpdate=function(e){"undefined"!=typeof window&&(!e.isOpen&&this.props.isOpen?window.addEventListener("click",this.handleClickOutside,!0):e.isOpen&&!this.props.isOpen&&window.removeEventListener("click",this.handleClickOutside,!0))},n.prototype.componentDidMount=function(){"undefined"!=typeof window&&this.props.isOpen&&window.addEventListener("click",this.handleClickOutside,!0)},n.prototype.componentWillUnmount=function(){"undefined"!=typeof window&&window.removeEventListener("click",this.handleClickOutside,!0)},n.prototype.render=function(){var e=this,n=this.props,t=n.children,r=n.placement,o=n.isOpen,a=n.content,s=n.onContentBlur,c=n.onContentFocus,l=n.onContentClick,u=n.testId,h=o?i.a.createElement(p.a,{placement:r},(function(n){var t=n.ref,r=n.style;return i.a.createElement(w,{onBlur:s,onFocus:c,onClick:l,innerRef:function(n){e.containerRef=n,"function"==typeof t?t(n):t.current=n},style:r,"data-testid":u},a)})):null;return i.a.createElement(f.c,null,i.a.createElement(g.a,null,(function(n){var r=n.ref;return i.a.createElement(d.a,{innerRef:function(n){e.triggerRef=n,"function"==typeof r?r(n):r.current=n}},t)})),h)},n.defaultProps={isOpen:!1,onContentBlur:function(){},onContentClick:function(){},onContentFocus:function(){},onClose:function(){},placement:"bottom-start"},n}(a.Component),D=Object(s.a)("atlaskit");n.a=Object(c.a)({componentName:"inlineDialog",packageName:h.a,packageVersion:h.b})(Object(l.a)({onClose:D({action:"closed",actionSubject:"inlineDialog",attributes:{componentName:"inlineDialog",packageName:h.a,packageVersion:h.b}})})(v))},DlIL:function(e,n,t){"use strict";function r(e,n){if(!e)return;const t=e[n];return Array.isArray(t)?t[0]:t}function o(e,n,t){const o=r(e,n),a=parseInt(o||"",10);return isNaN(a)?t:a}t.d(n,"a",(function(){return r})),t.d(n,"b",(function(){return o}))},Efxu:function(e,n,t){"use strict";let r,o,a,i;t.d(n,"a",(function(){return r})),t.d(n,"d",(function(){return o})),t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),function(e){e.NO_RESTRICTIONS="NO_RESTRICTIONS",e.RESTRICT_EDIT="RESTRICT_EDIT",e.RESTRICT_VIEW="RESTRICT_VIEW"}(r||(r={})),function(e){e.DIRECT="DIRECT",e.MULTIPLE="MULTIPLE",e.NONE="NONE",e.PAGE_INHERITED="PAGE_INHERITED",e.SPACE="SPACE"}(o||(o={})),function(e){e.GROUP="GROUP",e.USER="USER"}(a||(a={})),function(e){e.EDIT="EDIT",e.VIEW="VIEW"}(i||(i={}))},EhnY:function(e,n){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhMiAyIDAgMTAtNCAwdjNIMlY4YTQgNCAwIDExOCAwdjJoNmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem00IDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjNDI1MjZFIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},EufE:function(e,n,t){"use strict";var r=t("cxan"),o=t("pkwY"),a=t("zjfJ"),i=t("KD1n"),s=t("ERkP"),c=t.n(s),l=t("gQ5V"),u=t("KsTJ"),d=t("lZoD"),p=t("IC1n"),f=t.n(p),g=t("T20J"),h=(t("aWzz"),t("nnm9")),m=t.n(h),I=t("Cam2"),b=t("+352"),y=t("lL+D");function E(){const e=Object(i.a)(["\n  display: inline-block;\n  position: relative;\n"]);return E=function(){return e},e}function O(){const e=Object(i.a)(["\n  & div {\n    white-space: initial;\n    line-height: 20px;\n  }\n"]);return O=function(){return e},e}const R=u.default.div(O());R.displayName="DialogContainer";const C=u.default.div(E());C.displayName="DialogAnchor";class w extends s.Component{getContent(){const{parentData:e,isChildPage:n,onClose:t}=this.props;return c.a.createElement(R,null,c.a.createElement(y.a,{appearanceType:b.g.INLINE,parentData:e,isChildPage:n,onUpFlowOpen:t}))}render(){const{isOpen:e,children:n,onClose:t}=this.props;return c.a.createElement(I.a,{isOpen:e,content:this.getContent(),onClose:t},c.a.createElement(C,null,n))}}w.displayName="ChangeEditionInlineDialog",Object(a.a)(w,"defaultProps",{isOpen:!1,onClose:m.a,parentData:{},isChildPage:!1});var v=t("mvtW"),D=t("37V8"),A=t("hpu0"),T=t("3VMZ"),j=t("U+B7"),k=t("A79P"),M=t("DlIL"),N=t("Ua4J"),P=t("TYX8"),x=t("/sMe"),S=t("qhEF"),F=t("+mzV"),L=t("WA38"),G=t("bR0+"),_=t("M/rd"),B=t("L21V"),U=t("H5qd"),z=t.n(U);function H(){const e=Object(i.a)(["\n  query ContentType($contentId: ID!) {\n    content(id: $contentId) {\n      nodes {\n        id\n        type\n      }\n    }\n  }\n"]);return H=function(){return e},e}const Y=z()(H());function V(){const e=Object(i.a)(["\n  mutation experimentalGrantAccessMutation(\n    $contentId: String!\n    $accessType: String!\n    $accountId: String!\n  ) @experimental {\n    experimentalGrantAccess(\n      contentId: $contentId\n      accessType: $accessType\n      accountId: $accountId\n    ) {\n      responseStatus\n    }\n  }\n"]);return V=function(){return e},e}const W=z()(V());var Q,q;function J(){const e=Object(i.a)(["\n  display: inline-block;\n  position: relative;\n"]);return J=function(){return e},e}function Z(){const e=Object(i.a)(["\n  font-size: 14px;\n"]);return Z=function(){return e},e}function $(){const e=Object(i.a)(["\n  font-size: 14px;\n  margin-top: 10px;\n  margin-bottom: 15px;\n"]);return $=function(){return e},e}function X(){const e=Object(i.a)(["\n  width: 350px;\n\n  > h2 {\n    font-size: 24px;\n  }\n"]);return X=function(){return e},e}const K=u.default.div(X()),ee=u.default.p($());ee.displayName="MessageContainer";const ne=u.default.div(Z()),te=u.default.div(J()),re=Object(B.g)({successTitle:{id:"restrictions.grant-access.success.title",defaultMessage:"Access request granted",description:"For content permissions"},errorTitle:{id:"restrictions.grant-access.error.title",defaultMessage:"Access request error",description:"For content permissions"},noMailServer:{id:"restrictions.grant-access.error.no-mail-server",defaultMessage:"Access was granted, but there is not a mail server configured so the notification could not be sent.",description:"For content permissions"},sendEmailError:{id:"restrictions.grant-access.error.send-email",defaultMessage:"Access was granted, but an unexpected error happened while sending the notification.",description:"For content permissions"},genericError:{id:"restrictions.grant-access.error.generic",defaultMessage:"Sorry, there was an unexpected error while granting access.",description:"For content permissions"},alreadyGranted:{id:"restrictions.grant-access.success.already-granted",defaultMessage:"Access was already granted to the user.",description:"For content permissions"},genericSuccess:{id:"restrictions.grant-access.success.generic",defaultMessage:"Access was granted, a notification to the user will be sent.",description:"For content permissions"}});const oe=Object(B.h)((q=Q=class extends s.PureComponent{constructor(...e){super(...e),Object(a.a)(this,"generateGrantClickHandler",(e,n)=>{const{accessType:t,accountId:r,legacyInfo:o={username:void 0},onActionClick:a}=this.props;return()=>{e({variables:{contentId:n,accessType:t,accountId:r||o.username}}),a&&a()}}),Object(a.a)(this,"handleDenyClick",()=>{const{onActionClick:e}=this.props;e&&e()})}handleGrantAccessError(e){const{formatMessage:n}=this.props.intl,t=n(re.errorTitle);return r=>{var o;const a=null!=(o=r)&&null!=(o=o.graphQLErrors)&&null!=(o=o[0])?o.message:o;let i;i=n("412"===a?re.noMailServer:"502"===a?re.sendEmailError:re.genericError),e.showErrorFlag({title:t,description:i})}}handleGrantAccessSuccess(e){const{formatMessage:n}=this.props.intl,t=n(re.successTitle);return r=>{var o;const a=null!=(o=r)&&null!=(o=o.experimentalGrantAccess)?o.responseStatus:o;if(!a)return void e.showErrorFlag({title:t,description:n(re.genericError)});let i;i=n("202"===a?re.alreadyGranted:re.genericSuccess),e.showSuccessFlag({title:t,description:i})}}getContent(e,n,t){const{displayName:r,accessType:o,accountId:a,legacyInfo:i={username:void 0,userFullName:void 0}}=this.props;let s;var u;return s=a?c.a.createElement(L.a,{target:"_blank",href:Object(G.a)(a)},r):c.a.createElement(_.a,{target:"_blank",href:(u=i.username,u?"/display/~".concat(u):"")},i.userFullName," (",i.username,")"),c.a.createElement(K,null,c.a.createElement(B.c,{id:"restrictions.grant-access.dialog.title",defaultMessage:"Access request",description:"title for dialog to grant access to content when requested",tagName:"h2"}),c.a.createElement(ee,null,c.a.createElement(B.c,{id:"restrictions.grant-access.dialog.message",description:"Person trying to request type of access to page or blog post",defaultMessage:"{person} wants to {accessType} this {contentType, select, page {page} blogpost {blog post}}",values:{person:s,accessType:o,contentType:n}})),c.a.createElement(ne,null,c.a.createElement(l.a,{mutation:W,onError:this.handleGrantAccessError(t),onCompleted:this.handleGrantAccessSuccess(t)},n=>c.a.createElement(x.a,{onClick:this.generateGrantClickHandler(n,e),"data-test-id":"grant-button"},c.a.createElement(B.c,{id:"restrictions.grant-access.dialog.action.grant",defaultMessage:"Grant access",description:"Button label to grant access request to content"}))),c.a.createElement(x.a,{appearance:"link",onClick:this.handleDenyClick},c.a.createElement(B.c,{id:"restrictions.grant-access.dialog.action.deny",defaultMessage:"Deny",description:"Button label to deny access request to content"}))))}render(){const{children:e,isOpen:n}=this.props;return c.a.createElement(F.a.Consumer,null,({contentId:t})=>c.a.createElement(l.b,{query:Y,variables:{contentId:t}},({data:r,loading:o})=>{var a;if(o)return null;const i=(null!=(a=r)&&null!=(a=a.content)&&null!=(a=a.nodes)&&null!=(a=a[0])?a.type:a)||"page";return c.a.createElement(d.c,{to:[S.a]},r=>c.a.createElement(I.a,{isOpen:n,content:this.getContent(t,i,r)},c.a.createElement(te,{"data-test-id":"inline-dialog-anchor"},e)))}))}},Object(a.a)(Q,"defaultProps",{accessType:"view",isOpen:!1,onActionClick:()=>{},legacyInfo:{username:"",userFullName:""}}),q));var ae=t("/FQd"),ie=t("IJlJ"),se=t("I4DW"),ce=t.n(se),le=t("EhnY"),ue=t.n(le),de=t("GFFF"),pe=t.n(de),fe=t("Bnkh"),ge=t("AXlJ");function he(){const e=Object(i.a)(["\n  query RestrictionsButtonQuery($contentId: ID!, $status: [String]) {\n    content(id: $contentId, status: $status) {\n      nodes {\n        id\n        hasInheritedRestrictions\n        hasRestrictions\n        hasViewRestrictions\n      }\n    }\n  }\n"]);return he=function(){return e},e}const me=z()(he());function Ie(){const e=Object(i.a)(["\n  button {\n    cursor: pointer;\n    height: 30px;\n    width: 30px;\n    padding: 0;\n    margin: 0;\n  }\n"]);return Ie=function(){return e},e}const be=u.default.span(Ie()),ye=Object(B.g)({noRestrictions:{id:"restrictions.button.no-restrictions.tooltip",defaultMessage:"No restrictions",description:"Tooltip explaining that the shown icon indicates absence of restrictions"},restrictionsApply:{id:"restrictions.button.restrictions-apply.tooltip",defaultMessage:"Restrictions apply",description:"Tooltip explaining that the shown icon indicates presence of restrictions"}});function Ee(e){const n=Object(ge.a)(e.contentId),{className:t,onClick:r}=e,o=(...e)=>{const{content:n,icon:o}=function(e,n){if(e)return{content:c.a.createElement(B.c,ye.restrictionsApply),icon:c.a.createElement("img",{src:ce.a,"data-test-id":"locked-icon"})};if(n)return{content:c.a.createElement(B.c,ye.restrictionsApply),icon:c.a.createElement("img",{src:pe.a,"data-test-id":"unlocked-restricted-icon"})};return{content:c.a.createElement(B.c,ye.noRestrictions),icon:c.a.createElement("img",{src:ue.a,"data-test-id":"unlocked-icon"})}}(...e);return c.a.createElement(be,{className:t||""},c.a.createElement(ie.a,{content:n},c.a.createElement(x.a,{appearance:"subtle","data-test-id":"restrictions.dialog.button",onClick:r},o)))};return n?c.a.createElement(ae.a,null,({featureFlags:e})=>{const t=e["confluence.frontend.restrictions-dialog.view-restrictions-from-graphql"];return c.a.createElement(l.b,{query:me,variables:{contentId:n,status:P.a},fetchPolicy:"network-only"},({data:e,loading:r})=>{var a,i,s;if(r)return null;const l=null!=(s=e)&&null!=(s=s.content)&&null!=(s=s.nodes)&&null!=(s=s[0])?s.hasViewRestrictions:s,u=null!=(i=e)&&null!=(i=i.content)&&null!=(i=i.nodes)&&null!=(i=i[0])?i.hasInheritedRestrictions:i;return t?o(l,u):(null!=(a=e)&&null!=(a=a.content)&&null!=(a=a.nodes)&&null!=(a=a[0])?a.hasRestrictions:a)||u?c.a.createElement(fe.a,{contentId:n,status:P.a},({error:e,hasDirectViewRestrictions:n,hasInheritedViewRestrictions:t,loading:r})=>r||e?null:o(n,t)):o(!1,!1)})}):null}function Oe(){const e=Object(i.a)(["\n  query HasRestrictionsQuery($contentId: ID!, $status: [String]) {\n    content(id: $contentId, status: $status) {\n      nodes {\n        id\n        type\n        hasInheritedRestrictions\n        hasRestrictions\n        ancestors {\n          id\n          title\n          hasRestrictions\n          links {\n            webui\n          }\n        }\n      }\n    }\n  }\n"]);return Oe=function(){return e},e}const Re=z()(Oe());var Ce=t("CMz1");function we(){const e=Object(i.a)(["\n  display: inline-block;\n  vertical-align: top;\n"]);return we=function(){return e},e}t.d(n,"a",(function(){return Ae})),t.d(n,"b",(function(){return Te}));const ve=u.default.div(we());class De extends s.PureComponent{constructor(...e){super(...e),Object(a.a)(this,"state",{grantAccessClicked:!1,showFreeRestrictionDialog:!1,hasAutoOpenedRestrictionDialog:!1}),Object(a.a)(this,"makeHandleOpen",(e,n)=>()=>Te(Object(o.a)({},this.props,{actionSubjectId:"restrictionsDialogButton",dialogStateContainer:e,edition:n}))),Object(a.a)(this,"handleGrantAccessActionClicked",()=>{this.setState({grantAccessClicked:!0})}),Object(a.a)(this,"handleFreeEditionPadlockClicked",()=>{this.setState({showFreeRestrictionDialog:!0})}),Object(a.a)(this,"onFreeDialogClosed",()=>{this.setState({showFreeRestrictionDialog:!1})})}hasRestrictions(e){var n,t;return Boolean((null!=(t=e)&&null!=(t=t.content)&&null!=(t=t.nodes)&&null!=(t=t[0])?t.hasRestrictions:t)||(null!=(n=e)&&null!=(n=n.content)&&null!=(n=n.nodes)&&null!=(n=n[0])?n.hasInheritedRestrictions:n))}hasInheritedRestrictionsOnly(e){var n,t;return Boolean((null!=(t=e)&&null!=(t=t.content)&&null!=(t=t.nodes)&&null!=(t=t[0])?t.hasInheritedRestrictions:t)&&!(null!=(n=e)&&null!=(n=n.content)&&null!=(n=n.nodes)&&null!=(n=n[0])?n.hasRestrictions:n))}getParentData(e){var n;const t=null!=(n=e)&&null!=(n=n.content)&&null!=(n=n.nodes)&&null!=(n=n[0])?n.ancestors:n;for(let e=t.length-1;e>=0;e--)if(t[e].hasRestrictions)return t[e]}shouldShowGrantAccessDialog({grantAccess:e,displayName:n,accountId:t,username:r}){return Boolean(e&&n&&t||r)}renderFreeEditionDialog(e,n){const{contentId:t}=this.props;return c.a.createElement(l.b,{query:Re,variables:{contentId:t,status:P.a}},({data:r,loading:o,error:a})=>{var i;if(o||a)return null;const s=this.hasRestrictions(r),l=this.hasInheritedRestrictionsOnly(r),u=(null!=(i=r)&&null!=(i=i.content)&&null!=(i=i.nodes)&&null!=(i=i[0])&&null!=(i=i.ancestors)?i.length:i)-1>0;if(s){if(u&&l){const e=this.getParentData(r);return c.a.createElement(w,{isOpen:this.state.showFreeRestrictionDialog,onClose:this.onFreeDialogClosed,parentData:e,isChildPage:u},c.a.createElement(Ee,{contentId:t,onClick:this.handleFreeEditionPadlockClicked}))}return n&&!this.state.hasAutoOpenedRestrictionDialog&&(this.makeHandleOpen(e,v.a.FREE)(),this.setState({hasAutoOpenedRestrictionDialog:!0})),c.a.createElement(Ee,{contentId:t,onClick:this.makeHandleOpen(e,v.a.FREE)})}return c.a.createElement(w,{isOpen:this.state.showFreeRestrictionDialog,onClose:this.onFreeDialogClosed},c.a.createElement(Ee,{contentId:t,onClick:this.handleFreeEditionPadlockClicked}))})}renderGrantAccessDialogAndButton(e,n,t,r){const{contentId:o}=this.props,a=e(),i=c.a.createElement(Ee,{contentId:o,onClick:this.makeHandleOpen(n,r)});return t&&!this.state.grantAccessClicked?c.a.createElement(oe,{isOpen:!0,onActionClick:this.handleGrantAccessActionClicked,accessType:"edit"===Object(M.a)(a,"accessType")?"edit":"view",accountId:Object(M.a)(a,"accountId"),displayName:Object(M.a)(a,"displayName"),legacyInfo:{username:Object(M.a)(a,"username")||"",userFullName:Object(M.a)(a,"userFullName")}},i):i}render(){return c.a.createElement(d.c,{to:[Ce.a]},e=>c.a.createElement(ve,null,c.a.createElement(D.a,null,({loading:n,error:t,edition:r})=>n||t?null:c.a.createElement(N.a.Consumer,null,({getQueryParams:n})=>{const{displayName:t,accountId:o,grantAccess:a,username:i}=n(),s=this.shouldShowGrantAccessDialog({grantAccess:a,displayName:t,accountId:o,username:i});return"FREE"===r?this.renderFreeEditionDialog(e,s):this.renderGrantAccessDialogAndButton(n,e,s,r)}))))}}function Ae(e){const n=Object(g.a)(),t=Object(ge.a)(e.contentId);return c.a.createElement(De,Object(r.a)({},e,n,{contentId:t}))}function Te({actionSubjectId:e,contentId:n,createAnalyticsEvent:t,dialogStateContainer:r,edition:o,triggeredFrom:a}){const i=Object(A.a)(),s=(n?"".concat(n,"/"):"")+f()();i.start({name:T.a.RESTRICTIONS_DIALOG,id:s,collect(e,n){n.stopOn(e.find(({action:e,name:n})=>"taskFail"===e&&n===T.a.RESTRICTIONS_DIALOG_LOAD)),n.stopOn(e.find(e=>Object(j.b)(e)&&e.name===T.a.RESTRICTIONS_DIALOG_APPLY))}}),i.start({name:T.a.RESTRICTIONS_DIALOG_LOAD,id:s,timeout:k.a.DEFAULT}),r.setIsOpen(!0),t({type:"sendUIEvent",data:{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:e,attributes:{source:"v2",triggeredFrom:a,edition:o}}}).fire()}De.displayName="RestrictionsDialogTriggerComponent",Ae.displayName="RestrictionsDialogTrigger"},FmgO:function(e){e.exports=JSON.parse('{"a":"@atlaskit/inline-dialog","b":"12.1.7"}')},GFFF:function(e,n){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhMiAyIDAgMTAtNCAwdjNIMlY4YTQgNCAwIDExOCAwdjJoNmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem00IDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjREUzNTBCIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},I4DW:function(e,n){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhNCA0IDAgMTE4IDB2MmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem0yIDBoNFY4YTIgMiAwIDEwLTQgMHYyem0yIDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjREUzNTBCIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},JEzt:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("JnXH");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}})},JnXH:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=t("ERkP"),a=t("7nmT");function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}var c=function(e){function n(){return i(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),r(n,[{key:"componentDidMount",value:function(){this.props.innerRef((0,a.findDOMNode)(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),n}(o.Component);n.default=c},"M/rd":function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t("pkwY"),o=t("ERkP"),a=t.n(o),i=t("xBue"),s=t("Ua4J");const c=Object(o.forwardRef)(({children:e,className:n,target:t,testId:c,name:l,href:u=null,to:d=null,params:p={},onClick:f=(()=>{})},g)=>{const{toUrl:h,matchSupportedRoute:m,onPageReload:I}=Object(o.useContext)(s.a),b=e=>{I(e.target.getAttribute("href"),!1),f(e)},y=r=>a.a.createElement("a",{href:r,className:n,onClick:b,target:t,rel:"_blank"===t?"noreferrer":void 0,"data-testid":c,ref:g},e),E=u||d;if(!E&&!l)return y("");const O=E&&{href:E},R=h(l,Object(r.a)({},p,O)),C=m(R);return C?a.a.createElement(i.a,{to:"".concat(C.pathname).concat(C.search).concat(C.hash),className:n,onClick:f,innerRef:g},e):y(R)})},MV18:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t("ERkP"),o=t("hpu0");function a({name:e,attributes:n}){return Object(r.useEffect)(()=>Object(o.a)().succeed({name:e,attributes:n}),[e]),null}},RLdS:function(e,n,t){"use strict";t.d(n,"a",(function(){return I}));var r=t("97Jx"),o=t.n(r),a=t("1Pcy"),i=t.n(a),s=t("W/Kd"),c=t.n(s),l=t("KEM+"),u=t.n(l),d=t("ERkP"),p=t("8z1j"),f=t.n(p),g=t("NI0Q"),h=t("3eOh"),m=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n=e.call.apply(e,[this].concat(r))||this,u()(i()(n),"refHandler",(function(e){Object(h.b)(n.props.innerRef,e),Object(h.a)(n.props.setReferenceNode,e)})),n}c()(n,e);var t=n.prototype;return t.componentWillUnmount=function(){Object(h.b)(this.props.innerRef,null)},t.render=function(){return f()(Boolean(this.props.setReferenceNode),"`Reference` should not be used outside of a `Manager` component."),Object(h.c)(this.props.children)({ref:this.refHandler})},n}(d.Component);function I(e){return d.createElement(g.b.Consumer,null,(function(n){return d.createElement(m,o()({setReferenceNode:n},e))}))}},TYX8:function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"a",(function(){return c}));var r=t("ERkP"),o=t.n(r),a=t("L21V"),i=t("Efxu");const s=[{label:o.a.createElement(a.c,{id:"restrictions.dialog.permission-select.view",defaultMessage:"Can view",description:"User or group will be allowed to view content"}),value:i.c.VIEW},{label:o.a.createElement(a.c,{id:"restrictions.dialog.permission-select.view-and-edit",defaultMessage:"Can view and edit",description:"User or group will be allowed to view and edit content"}),value:i.c.EDIT}],c=["current","draft"]},WA38:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t("cxan"),o=t("HbGN"),a=t("ERkP"),i=t.n(a),s=(t("aWzz"),t("/FQd")),c=t("M/rd"),l=t("7M9M");const u=e=>{const{href:n,to:t}=e,a=Object(o.a)(e,["href","to"]),u=n||t;return i.a.createElement(s.a,null,({featureFlags:n})=>{const t=u&&0!==u.indexOf("/")?"/".concat(u):u,o=n["confluence.frontend.people.directory"]&&!t.startsWith(l.CONTEXT_PATH)?"".concat(l.CONTEXT_PATH).concat(t):t;return i.a.createElement(c.a,Object(r.a)({},e,{href:o},a))})};u.displayName="PeopleLink"},"bR0+":function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return c})),t.d(n,"d",(function(){return d}));var r=t("/FQd"),o=t("8TdO"),a=t("7M9M");const i=(e,n,t="")=>e?"".concat(t,"/people/").concat(e,"?ref=confluence").concat(n?"&src=".concat(encodeURIComponent(n)):""):"",s=async(e,n)=>{if(!e)return"";let t="";try{const{featureFlags:e}=await Object(r.b)(Object(o.getApolloClient)());t=e["confluence.frontend.people.directory"]?a.CONTEXT_PATH:""}catch(e){}return"".concat(t,"/people/").concat(e,"?ref=confluence").concat(n?"&src=".concat(encodeURIComponent(n)):"")},c=(e,n,t="")=>e?"".concat(t,"/people/team/").concat(e,"?ref=confluence").concat(n?"&src=".concat(encodeURIComponent(n)):""):"",l=e=>e.getAttribute("data-account-id"),u=e=>{const n={class:"className"},t={};return(e=>Array.from(e.attributes).map(e=>e.name))(e).forEach(r=>{t[n[r]||r]=e.getAttribute(r)}),t.dangerouslySetInnerHTML={__html:e.innerHTML},t};function d(e){return e.filter(l).map(e=>{const n=u(e);n["data-user-hover-bound"]="true",n.href=i(n["data-account-id"],null);const t=window.document.createElement("span");return e.parentNode?(e.parentNode.replaceChild(t,e),{props:n,placeholder:t}):{}})}},jLkM:function(e,n,t){var r=t("s+R0");e.exports=function(e){return e&&e.length?r(e):[]}},"lL+D":function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t("ERkP"),o=t.n(r),a=(t("aWzz"),t("L21V")),i=t("mTU2"),s=t("46jh"),c=t("ZUFC");const l=({isSiteAdmin:e,intl:n,appearanceType:t,parentData:r,isChildPage:a,onUpFlowOpen:s})=>{const{title:l,body:u}=function(e,n,t,r){if(t){const{title:e,links:{webui:t}}=n,o='<a href="'.concat(t,'" target="_blank">').concat(e,"</a>");return{title:r.formatMessage(i.a.grandfatheredChildContentRestrictionsTitle),body:"".concat(r.formatMessage(i.a.grandfatheredChildContentRestrictionsBody,{parent:o}))}}return{title:r.formatMessage(e?i.a.siteAdminContentRestrictionsTitle:i.a.nonSiteAdminContentRestrictionsTitle),body:r.formatMessage(e?i.a.siteAdminPageRestrictionsBody:i.a.nonSiteAdminPageRestrictionsBody)}}(e,r,a,n);return o.a.createElement(c.a,{appearanceType:t,title:l,body:u,source:"pageRestrictionsInline",canShowUpgradeButton:!a,onUpFlowOpen:s})};l.displayName="ChangeEditionSectionMessageContentRestrictedComponent";const u=Object(a.h)(Object(s.a)(l))},xBue:function(e,n,t){"use strict";var r=t("ERkP"),o=t.n(r),a=t("aWzz"),i=t.n(a),s=t("I9iR"),c=t.n(s),l=t("W47X"),u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};function d(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function p(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}var f=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},g=function(e){function n(){var t,r;d(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=p(this,e.call.apply(e,[this].concat(a))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!f(e)){e.preventDefault();var n=r.context.router.history,t=r.props,o=t.replace,a=t.to;o?n.replace(a):n.push(a)}},p(r,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),n.prototype.render=function(){var e=this.props,n=(e.replace,e.to),t=e.innerRef,r=function(e,n){var t={};for(var r in e)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}(e,["replace","to","innerRef"]);c()(this.context.router,"You should not use <Link> outside a <Router>"),c()(void 0!==n,'You must specify the "to" property');var a=this.context.router.history,i="string"==typeof n?Object(l.b)(n,null,null,a.location):n,s=a.createHref(i);return o.a.createElement("a",u({},r,{onClick:this.handleClick,href:s,ref:t}))},n}(o.a.Component);g.propTypes={onClick:i.a.func,target:i.a.string,replace:i.a.bool,to:i.a.oneOfType([i.a.string,i.a.object]).isRequired,innerRef:i.a.oneOfType([i.a.string,i.a.func])},g.defaultProps={replace:!1},g.contextTypes={router:i.a.shape({history:i.a.shape({push:i.a.func.isRequired,replace:i.a.func.isRequired,createHref:i.a.func.isRequired}).isRequired}).isRequired},n.a=g}}]);
//# sourceMappingURL=19.5NzzEiBS-v39.js.map