(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+BG6":function(t,e,r){"use strict";var n=r("D57K"),i=r("4/oB"),o=r("XOyS");r.d(e,"f",(function(){return u})),r.d(e,"d",(function(){return a})),r.d(e,"c",(function(){return h})),r.d(e,"e",(function(){return l})),r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return v}));var s=function(t){function e(e,r){var n=t.call(this,e)||this;return n.message=e,n.statusCode=r,n}return Object(n.__extends)(e,t),e}(Error),c=function(t){return Object(n.__awaiter)(void 0,void 0,void 0,(function(){var e;return Object(n.__generator)(this,(function(r){switch(r.label){case 0:return t.ok||t.redirected?[2,t]:[3,1];case 1:return[4,t.text()];case 2:throw e=r.sent(),new s("Got error code "+t.status+": "+e,t.status)}}))}))};function u(t,e,r){void 0===e&&(e={});var i=e.method,o=void 0===i?"GET":i,s=e.auth,u=e.params,a=e.headers,h=e.body,l=e.retryOptions;return function(t,e){void 0===e&&(e={});return Object(n.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s,c,u,a=this;return Object(n.__generator)(this,(function(h){switch(h.label){case 0:r=Object(n.__assign)(Object(n.__assign)({},b),e),i=r.startTimeoutInMs,o=function(){return Object(n.__awaiter)(a,void 0,void 0,(function(){return Object(n.__generator)(this,(function(t){switch(t.label){case 0:return[4,d(i)];case 1:return t.sent(),i*=r.factor,[2]}}))}))},s=1,h.label=1;case 1:if(!(s<=r.attempts))return[3,9];h.label=2;case 2:return h.trys.push([2,4,,8]),[4,t()];case 3:return[2,h.sent()];case 4:return c=h.sent(),v(c)?[2,Promise.reject(c)]:(u=s===r.attempts,!(c instanceof TypeError)&&c.statusCode<500||u?[2,Promise.reject(new Error("The call did not succeed after "+s+" attempts. Last error is\n---\n"+c.stack+"\n---"))]:[3,5]);case 5:return[4,o()];case 6:h.sent(),h.label=7;case 7:return[3,8];case 8:return s++,[3,1];case 9:return[2,Promise.reject(new Error("Exhaused all attempts"))]}}))}))}((function(){return fetch(f(t,{params:u}),{method:o,body:h,headers:p(s)(a),signal:r&&r.signal}).then(c)}),void 0===l?{}:l)}function a(t){return t.json()}function h(t){return t.blob()}function l(){return Promise.resolve()}function f(t,e){var r=e.params,s=e.auth,c=function(t){var e=t.indexOf("?");return e>0?{baseUrl:t.substring(0,e),queryParams:Object(i.parse)(t.substring(e+1,t.length))}:{baseUrl:t}}(t),u=c.baseUrl,a=c.queryParams,h=s&&function(t){return Object(o.isClientBasedAuth)(t)?{client:t.clientId,token:t.token}:{issuer:t.asapIssuer,token:t.token}}(s),l=Object(i.stringify)(Object(n.__assign)(Object(n.__assign)(Object(n.__assign)({},a),r),h));return u+(l.length>0?"?"+l:"")}function p(t){return function(e){return t?Object(n.__assign)(Object(n.__assign)({},e||{}),function(t){return Object(o.isClientBasedAuth)(t)?{"X-Client-Id":t.clientId,Authorization:"Bearer "+t.token}:{"X-Issuer":t.asapIssuer,Authorization:"Bearer "+t.token}}(t)):e}}var b={attempts:5,startTimeoutInMs:1e3,factor:2},d=function(t){return new Promise((function(e){setTimeout(e,t)}))},v=function(t){return"request_cancelled"===t.message||"AbortError"===t.name}},"+R7Q":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r,n){t.call(this),this.start=e,this._count=r,this.scheduler=n}return n(e,t),e.create=function(t,r,n){return void 0===t&&(t=0),void 0===r&&(r=0),new e(t,r,n)},e.dispatch=function(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;r>=n?i.complete():(i.next(e),i.closed||(t.index=r+1,t.start=e+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=0,n=this.start,i=this._count,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{index:r,count:i,start:n,subscriber:t});for(;;){if(r++>=i){t.complete();break}if(t.next(n++),t.closed)break}},e}(r("yrnK").Observable);e.RangeObservable=i},"+UBt":function(t,e,r){"use strict";e.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},"/6AP":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("D57K"),i=r("yrnK"),o=r("YECT"),s=r("eTEs");r("Z+0v"),e.probinator=function(t,e){var r=e.batchSize,c=e.prober;return t.pipe(o.bufferCount(r),s.concatMap((function(t){return c(t).then((function(e){return t.map((function(t,r){return n.__assign({},t,{exists:e[r]})}))}))})),s.concatMap((function(t){return i.Observable.from(t)})))}},"/fv9":function(t,e,r){"use strict";var n=r("D57K"),i=r("7gWO"),o=r.n(i),s=null;r.d(e,"a",(function(){return l}));var c=function(t){return Object(n.__awaiter)(void 0,void 0,void 0,(function(){return Object(n.__generator)(this,(function(e){switch(e.label){case 0:return[4,Object(n.__awaiter)(void 0,void 0,void 0,(function(){var t,e,i;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:if(t=3,s)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,5]),[4,Promise.all([r.e(45),r.e(170)]).then(r.bind(null,"Kq//"))];case 2:return e=n.sent().WorkerHasher,s=new e(t),[3,5];case 3:return n.sent(),[4,Promise.all([r.e(45),r.e(169)]).then(r.bind(null,"/Qau"))];case 4:return i=n.sent().SimpleHasher,s=new i,[3,5];case 5:return[2,s]}}))}))];case 1:return[2,e.sent().hash(t)]}}))}))},u=function(t,e){return function(r){return Object(n.__awaiter)(void 0,void 0,void 0,(function(){var i,o;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.probeChunks(f(r),e)];case 1:return i=n.sent(),o=i.data.results,[2,Object.values(o).map((function(t){return t.exists}))]}}))}))}},a=function(t,e){return function(r){return t.uploadChunk(r.hash,r.blob,e)}},h=function(t,e,r){var i=0;return function(o){return Object(n.__awaiter)(void 0,void 0,void 0,(function(){var s,c;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return c=(s=t).appendChunksToUpload,[4,e];case 1:return[4,c.apply(s,[n.sent(),{chunks:f(o),offset:i},r])];case 2:return n.sent(),i+=o.length,[2]}}))}))}},l=function(t,e,r,i){var s=t.content,l=t.collection,f=t.name,p=t.mimeType,b=r.id,d=r.occurrenceKey,v=r.deferredUploadId,y=o()(s,{hashingFunction:c,hashingConcurrency:5,probingBatchSize:100,chunkSize:4194304,uploadingConcurrency:3,uploadingFunction:a(e,l),probingFunction:u(e,l),processingBatchSize:1e3,processingFunction:h(e,v,l)},{onProgress:function(t){i&&i.onProgress(t)}}),m=y.response,_=y.cancel,w=i&&i.onUploadFinish||function(){};return Promise.all([v,m]).then((function(t){var r=Object(n.__read)(t,1)[0];return Object(n.__awaiter)(void 0,void 0,void 0,(function(){return Object(n.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.createFileFromUpload({uploadId:r,name:f,mimeType:p},{occurrenceKey:d,collection:l,replaceFileId:b})];case 1:return t.sent(),w(),[2]}}))}))})).catch(w),{cancel:_}},f=function(t){return t.map((function(t){return t.hash}))}},"/t4x":function(t,e,r){"use strict";var n=r("27zd"),i=r("k5x2");e.queue=new i.QueueScheduler(n.QueueAction)},"0y6i":function(t,e,r){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},"18tx":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("2f5I"),o=function(t){function e(e,r){t.call(this),this.promise=e,this.scheduler=r}return n(e,t),e.create=function(t,r){return new e(t,r)},e.prototype._subscribe=function(t){var e=this,r=this.promise,n=this.scheduler;if(null==n)this._isScalar?t.closed||(t.next(this.value),t.complete()):r.then((function(r){e.value=r,e._isScalar=!0,t.closed||(t.next(r),t.complete())}),(function(e){t.closed||t.error(e)})).then(null,(function(t){i.root.setTimeout((function(){throw t}))}));else if(this._isScalar){if(!t.closed)return n.schedule(s,0,{value:this.value,subscriber:t})}else r.then((function(r){e.value=r,e._isScalar=!0,t.closed||t.add(n.schedule(s,0,{value:r,subscriber:t}))}),(function(e){t.closed||t.add(n.schedule(c,0,{err:e,subscriber:t}))})).then(null,(function(t){i.root.setTimeout((function(){throw t}))}))},e}(r("yrnK").Observable);function s(t){var e=t.value,r=t.subscriber;r.closed||(r.next(e),r.complete())}function c(t){var e=t.err,r=t.subscriber;r.closed||r.error(e)}e.PromiseObservable=o},"25nn":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n=function(t){return 0===t.indexOf("image/")?"image":0===t.indexOf("video/")?"video":0===t.indexOf("audio/")?"audio":0===t.indexOf("application/pdf")?"doc":"unknown"}},"27zd":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.work=r}return n(e,t),e.prototype.schedule=function(e,r){return void 0===r&&(r=0),r>0?t.prototype.schedule.call(this,e,r):(this.delay=r,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,r){return r>0||this.closed?t.prototype.execute.call(this,e,r):this._execute(e,r)},e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?t.prototype.requestAsyncId.call(this,e,r,n):e.flush(this)},e}(r("oaw7").AsyncAction);e.QueueAction=i},"2dYC":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("yrnK");e.Observable=n.Observable;var i=r("nwWh"),o=r("ZRmL");e.asyncMap=function(t,e){return i.mergeMap(function(t){var e=new Array,r=function(){var t=e.findIndex((function(t){return!t.notifyIfReady()}));t>0&&e.splice(0,t)};return function(i){return new n.Observable((function(n){e.push(o.notify(t(i),n,r))}))}}(t),e)}},"2f5I":function(t,e,r){"use strict";(function(t){var r="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i=r||void 0!==t&&t||n;e.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,r("fRV1"))},"321D":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(r("lLRD").Subscriber);e.OuterSubscriber=i},"3rc9":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("2f5I"),o=r("yrnK"),s=r("KCzj"),c=function(t){function e(e,r){if(t.call(this),this.scheduler=r,null==e)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[s.iterator];if(!e&&"string"==typeof t)return new u(t);if(!e&&void 0!==t.length)return new a(t);if(!e)throw new TypeError("object is not iterable");return t[s.iterator]()}(e)}return n(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.index,r=t.hasError,n=t.iterator,i=t.subscriber;if(r)i.error(t.error);else{var o=n.next();o.done?i.complete():(i.next(o.value),t.index=e+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var r=this.iterator,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{index:0,iterator:r,subscriber:t});for(;;){var i=r.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed){"function"==typeof r.return&&r.return();break}}},e}(o.Observable);e.IteratorObservable=c;var u=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length),this.str=t,this.idx=e,this.len=r}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),a=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(r=e,"number"!=typeof r||!i.root.isFinite(r)))return e;var r;if((e=function(t){var e=+t;if(0===e)return e;if(isNaN(e))return e;return e<0?-1:1}(e)*Math.floor(Math.abs(e)))<=0)return 0;if(e>h)return h;return e}(t)),this.arr=t,this.idx=e,this.len=r}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();var h=Math.pow(2,53)-1},"4/oB":function(t,e,r){"use strict";var n=r("UM5q"),i=r("maj8");function o(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t,e){var r=function(t){var e;switch(t.arrayFormat){case"index":return function(t,r,n){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return function(t,r,n){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};default:return function(t,e,r){void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e=i({arrayFormat:"none"},e)),n=Object.create(null);return"string"!=typeof t?n:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach((function(t){var e=t.replace(/\+/g," ").split("="),i=e.shift(),o=e.length>0?e.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),r(decodeURIComponent(i),o,n)})),Object.keys(n).sort().reduce((function(t,e){var r=n[e];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort((function(t,e){return Number(t)-Number(e)})).map((function(t){return e[t]})):e}(r):t[e]=r,t}),Object.create(null))):n},e.stringify=function(t,e){var r=function(t){switch(t.arrayFormat){case"index":return function(e,r,n){return null===r?[o(e,t),"[",n,"]"].join(""):[o(e,t),"[",o(n,t),"]=",o(r,t)].join("")};case"bracket":return function(e,r){return null===r?o(e,t):[o(e,t),"[]=",o(r,t)].join("")};default:return function(e,r){return null===r?o(e,t):[o(e,t),"=",o(r,t)].join("")}}}(e=i({encode:!0,strict:!0,arrayFormat:"none"},e));return t?Object.keys(t).sort().map((function(n){var i=t[n];if(void 0===i)return"";if(null===i)return o(n,e);if(Array.isArray(i)){var s=[];return i.slice().forEach((function(t){void 0!==t&&s.push(r(n,t,s.length))})),s.join("&")}return o(n,e)+"="+o(i,e)})).filter((function(t){return t.length>0})).join("&"):""}},"5DF9":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return n(e,t),e}(Error);e.UnsubscriptionError=i},"5YWe":function(t,e,r){"use strict";var n,i=r("5zEQ");function o(){try{return n.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}e.tryCatch=function(t){return n=t,o}},"5zEQ":function(t,e,r){"use strict";e.errorObject={e:{}}},"6kv7":function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r("D57K"),i=r("+BG6"),o=r("b9Hw"),s=r("QR6f"),c={"max-age":s.a,allowAnimated:!0,mode:"crop"},u={limit:30,sortDirection:"desc"},a=function(t,e){return void 0===e&&(e=!1),Object(n.__assign)(Object(n.__assign)(Object(n.__assign)({},c),t),e?{width:4096,height:4096}:{})},h={Accept:"application/json","Content-Type":"application/json"},l=function(){function t(t){var e=this;this.config=t,this.getFile=function(t,r){return void 0===r&&(r={}),e.request("/file/"+t,{params:r,authContext:{collectionName:r.collection}}).then(i.d)},this.getFileImageURL=function(t,r){return Object(n.__awaiter)(e,void 0,void 0,(function(){var e;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.config.authProvider()];case 1:return e=n.sent(),[2,Object(i.a)(e.baseUrl+"/file/"+t+"/image",{params:a(r),auth:e})]}}))}))},this.getFileBinaryURL=function(t,r){return Object(n.__awaiter)(e,void 0,void 0,(function(){var e;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.config.authProvider({collectionName:r})];case 1:return e=n.sent(),[2,Object(i.a)(e.baseUrl+"/file/"+t+"/binary",{params:{dl:!0,collection:r,"max-age":s.a},auth:e})]}}))}))},this.getArtifactURL=function(t,r,c){return Object(n.__awaiter)(e,void 0,void 0,(function(){var e,u;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:if(!(e=Object(o.a)(t,r)))throw new Error("artifact "+r+" not found");return[4,this.config.authProvider({collectionName:c})];case 1:return u=n.sent(),[2,Object(i.a)(""+u.baseUrl+e,{params:{collection:c,"max-age":s.a},auth:u})]}}))}))},this.getImage=function(t,r,o,s){return Object(n.__awaiter)(e,void 0,void 0,(function(){var e;return Object(n.__generator)(this,(function(n){return!1,[2,this.request("/file/"+t+"/image",{headers:e,params:a(r,s),authContext:{collectionName:r&&r.collection}},o).then(i.c)]}))}))},this.getItems=function(t,r){var n=t.map((function(t){return{type:"file",id:t,collection:r}}));return e.request("/items",{method:"POST",body:JSON.stringify({descriptors:n}),headers:h,authContext:{collectionName:r}}).then(i.d)},this.getImageMetadata=function(t,r){return e.request("/file/"+t+"/image/metadata",{params:r,authContext:{collectionName:r&&r.collection}}).then(i.d)}}return t.prototype.getCollectionItems=function(t,e){return Object(n.__awaiter)(this,void 0,void 0,(function(){var r,o,s,c;return Object(n.__generator)(this,(function(a){switch(a.label){case 0:return[4,this.request("/collection/"+t+"/items",{authContext:{collectionName:t},params:Object(n.__assign)(Object(n.__assign)({},u),e),headers:{Accept:"application/json"}})];case 1:return r=a.sent(),[4,Object(i.d)(r)];case 2:return o=a.sent().data,s=o.contents,c=o.nextInclusiveStartKey,[2,{data:{contents:s.filter((function(t){return t.details.size&&t.details.size>0})),nextInclusiveStartKey:c}}]}}))}))},t.prototype.removeCollectionFile=function(t,e,r){return Object(n.__awaiter)(this,void 0,void 0,(function(){var i;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return i={actions:[{action:"remove",item:{type:"file",id:t,occurrenceKey:r}}]},[4,this.request("/collection/"+e,{method:"PUT",authContext:{collectionName:e},body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json"}})];case 1:return n.sent(),[2]}}))}))},t.prototype.createUpload=function(t,e){return void 0===t&&(t=1),this.request("/upload",{method:"POST",authContext:{collectionName:e},params:{createUpTo:t},headers:{Accept:"application/json"}}).then(i.d)},t.prototype.uploadChunk=function(t,e,r){return this.request("/chunk/"+t,{method:"PUT",authContext:{collectionName:r},body:e}).then(i.e)},t.prototype.probeChunks=function(t,e){return this.request("/chunk/probe",{method:"POST",authContext:{collectionName:e},body:JSON.stringify({chunks:t}),headers:h}).then(i.d)},t.prototype.createFileFromUpload=function(t,e){return void 0===e&&(e={}),this.request("/file/upload",{method:"POST",authContext:{collectionName:e.collection},params:e,body:JSON.stringify(t),headers:h}).then(i.d)},t.prototype.touchFiles=function(t,e){return void 0===e&&(e={}),this.request("/upload/createWithFiles",{method:"POST",headers:h,body:JSON.stringify(t),authContext:{collectionName:e.collection}}).then(i.d)},t.prototype.appendChunksToUpload=function(t,e,r){return this.request("/upload/"+t+"/chunks",{method:"PUT",authContext:{collectionName:r},body:JSON.stringify(e),headers:h}).then(i.e)},t.prototype.copyFileWithToken=function(t,e){return this.request("/file/copy/withToken",{method:"POST",authContext:{collectionName:e.collection},body:JSON.stringify(t),headers:h,params:e}).then(i.d)},t.prototype.request=function(t,e,r){return void 0===e&&(e={method:"GET",authContext:{}}),Object(n.__awaiter)(this,void 0,void 0,(function(){var o,s,c,u,a,h,l;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return o=this.config.authProvider,s=e.method,c=e.authContext,u=e.params,a=e.headers,h=e.body,[4,o(c)];case 1:return l=n.sent(),[2,Object(i.f)(""+l.baseUrl+t,{method:s,auth:l,params:u,headers:a,body:h},r)]}}))}))},t}()},"7cO/":function(t,e,r){"use strict";var n=r("IkBf");e.map=function(t,e){return n.map(t,e)(this)}},"7gWO":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("wxPC");e.default=n.chunkinator},"86hb":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return s})),r.d(e,"d",(function(){return c}));var n=r("D57K"),i=function(t){return"error"===t.status},o=function(t){switch(t.status){case"processing":case"processed":case"failed-processing":return!(!t.representations||!t.representations.image);default:return!1}},s=function(t){var e=t.data,r=e.id,i=e.name,o=e.size,s=e.processingStatus,c=e.artifacts,u={id:r,name:i,size:o,mediaType:e.mediaType,mimeType:e.mimeType,artifacts:c,representations:e.representations};switch(s){case"pending":case void 0:return Object(n.__assign)(Object(n.__assign)({},u),{status:"processing"});case"succeeded":return Object(n.__assign)(Object(n.__assign)({},u),{status:"processed"});case"failed":return Object(n.__assign)(Object(n.__assign)({},u),{status:"failed-processing"})}},c=function(t,e){return s({data:Object(n.__assign)({id:t},e)})}},"879T":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("lLRD");e.tap=function(t,e,r){return function(n){return n.lift(new o(t,e,r))}};var o=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},t}(),s=function(t){function e(e,r,n,o){t.call(this,e);var s=new i.Subscriber(r,n,o);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return n(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(i.Subscriber)},"8r3m":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r){t.call(this),this.value=e,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return n(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;e?n.complete():(n.next(r),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.value,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{done:!1,value:r,subscriber:t});t.next(r),t.closed||t.complete()},e}(r("yrnK").Observable);e.ScalarObservable=i},"9t0a":function(t,e,r){"use strict";var n=r("yrnK"),i=r("Fy45");n.Observable.range=i.range},BRUJ:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return u}));var n=r("D57K"),i=r("ERkP"),o=r("w5uy"),s=new Map,c=function(t){var e=s.get(t);return e||(e=new o.a(t),s.set(t,e)),e},u=function(t){return function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Object(n.__extends)(r,e),r.prototype.render=function(){var e,r=this.props,s=r.mediaClientConfig,u=r.identifier,a=u&&"external-image"===u.mediaItemType?(e={authProvider:function(){return Promise.resolve({clientId:"",token:"",baseUrl:""})}},new o.a(e)):c(s);return i.createElement(t,Object(n.__assign)({},r,{mediaClient:a}))},r}(i.Component)}},BVi2:function(t,e,r){"use strict";var n=r("lLRD"),i=r("paX8"),o=r("oWhn");e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(o.empty)}},BobD:function(t,e,r){"use strict";var n=r("2f5I");function i(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=i,e.observable=i(n.root),e.$$observable=e.observable},CB5d:function(t,e,r){"use strict";var n=r("D57K"),i=r("oVJk"),o=r("IC1n"),s=r.n(o),c=r("B0Ro"),u=r.n(c),a=r("XOyS"),h=r("86hb"),l=r("WFC3"),f=r("/fv9"),p=r("ZoNr"),b=r("QR6f"),d=r("6kv7"),v=r("x19/"),y=r.n(v),m=r("25nn"),_=r("zgbF"),w=function(t){return new Promise((function(e,r){var n=URL.createObjectURL(t),i=new Image;i.src=n,i.onload=function(){var t={width:i.width,height:i.height};URL.revokeObjectURL(n),e(t)},i.onerror=r}))},O=r("Y4SL");r.d(e,"a",(function(){return j}));var g=function(t,e){return e?t+"-"+e:t},j=function(){function t(t){var e=this;this.mediaStore=t,this.batchLoadingFunc=function(t){return Object(n.__awaiter)(e,void 0,void 0,(function(){var e,r,i=this;return Object(n.__generator)(this,(function(o){switch(o.label){case 0:return"__media-single-file-collection__",e=t.reduce((function(t,e){var r=e.collection||"__media-single-file-collection__",n=t[r]||[];return n.push(e.id),t[r]=n,t}),{}),r=[],[4,Promise.all(Object.keys(e).map((function(t){return Object(n.__awaiter)(i,void 0,void 0,(function(){var i,o,s;return Object(n.__generator)(this,(function(c){switch(c.label){case 0:return i=e[t],o="__media-single-file-collection__"===t?void 0:t,[4,this.mediaStore.getItems(i,o)];case 1:return s=c.sent(),r.push.apply(r,Object(n.__spread)(s.data.items)),[2]}}))}))})))];case 1:return o.sent(),[2,(s=t,c=r,u=c.reduce((function(t,e){var r=e.id,n=e.collection;return t[g(r,n)]=e.details,t}),{}),s.map((function(t){var e=t.id,r=t.collection,n=g(e,r);return u[n]})))]}var s,c,u}))}))},this.createDownloadFileStream=function(t,r){var i,o=Object(O.a)(),s=function(){return Object(n.__awaiter)(e,void 0,void 0,(function(){var e,c,u;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.dataloader.load({id:t,collection:r})];case 1:return(e=n.sent())?(c=Object(h.d)(t,e),o.next(c),"processing"===c.status?i=window.setTimeout(s,1e3):o.complete(),[3,3]):[2];case 2:return u=n.sent(),window.clearTimeout(i),o.error(u),[3,3];case 3:return[2]}}))}))};return s(),o},this.dataloader=new u.a(this.batchLoadingFunc,{maxBatchSize:100})}return t.prototype.getFileState=function(t,e){var r=this;if(!y()(t)){var n=Object(O.a)();return n.error("invalid id was passed to getFileState"),n}return Object(l.b)().getOrInsert(t,(function(){var n=e&&e.collectionName;return r.createDownloadFileStream(t,n)}))},t.prototype.getCurrentState=function(t,e){return Object(_.a)(this.getFileState(t,e))},t.prototype.getArtifactURL=function(t,e,r){return this.mediaStore.getArtifactURL(t,e,r)},t.prototype.getFileBinaryURL=function(t,e){return this.mediaStore.getFileBinaryURL(t,e)},t.prototype.touchFiles=function(t,e){return this.mediaStore.touchFiles({descriptors:t},{collection:e}).then((function(t){return t.data}))},t.prototype.generateUploadableFileUpfrontIds=function(t){var e=s()(),r=s()(),n={fileId:e,occurrenceKey:r,collection:t};return{id:e,occurrenceKey:r,deferredUploadId:this.touchFiles([n],t).then((function(t){return t.created[0].uploadId}))}},t.prototype.uploadExternal=function(t,e){return Object(n.__awaiter)(this,void 0,void 0,(function(){var r,o,s,c,u,a,h,f,p=this;return Object(n.__generator)(this,(function(b){return r=this.generateUploadableFileUpfrontIds(e),o=r.id,s=r.occurrenceKey,c=new i.ReplaySubject(1),u=fetch(t).then((function(t){return t.blob()})).catch((function(){})),a=new Promise((function(t,e){return Object(n.__awaiter)(p,void 0,void 0,(function(){var r;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return[4,u];case 1:return(r=n.sent())||e("Could not fetch the blob"),t({value:r}),[2]}}))}))})),h=t.split("/").pop()||"",f={status:"processing",name:h,size:0,mediaType:"unknown",mimeType:"",id:o,occurrenceKey:s,preview:a},c.next(f),Object(l.b)().set(o,c),[2,new Promise((function(t,i){return Object(n.__awaiter)(p,void 0,void 0,(function(){var l,f,p,b,d,v;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return[4,u];case 1:return(l=n.sent())?(f=l.type,p=l.size,b={content:l,mimeType:f,collection:e,name:h},d=Object(m.a)(f),c.next({status:"processing",name:h,size:p,mediaType:d,mimeType:f,id:o,occurrenceKey:s,preview:a}),this.upload(b,void 0,r),[4,w(l)]):[2,i("Could not download remote file")];case 2:return v=n.sent(),t({dimensions:v,uploadableFileUpfrontIds:r}),[2]}}))}))}))]}))}))},t.prototype.upload=function(t,e,r){"string"==typeof t.content&&(t.content=function(t){for(var e=t.split(",")[1],r=atob(e),n=[],i=function(t){var e=r.slice(t,t+512),i=e.split("").map((function(t,r){return e.charCodeAt(r)})),o=new Uint8Array(i);n.push(o)},o=0;o<r.length;o+=512)i(o);return new Blob(n,{type:"image/jpeg"})}(t.content));var o=t.content,s=t.name,c=void 0===s?"":s,u=t.collection;r||(r=this.generateUploadableFileUpfrontIds(u));var a,h=r.id,p=r.occurrenceKey,b="",d=0,v=function(t){if(t.content instanceof Blob){var e=t.content.type;return Object(m.a)(e)}return"unknown"}(t),y=new i.ReplaySubject(1);o instanceof Blob&&(d=o.size,b=o.type,a={value:o});var _={name:c,size:d,mediaType:v,mimeType:b,id:h,occurrenceKey:p,preview:a},w=function(t){y.next(Object(n.__assign)(Object(n.__assign)({status:"uploading"},_),{progress:t}))},O=Object(f.a)(t,this.mediaStore,r,{onUploadFinish:function(t){if(t)return y.error(t);y.next(Object(n.__assign)({status:"processing",representations:{}},_)),y.complete()},onProgress:w}).cancel;return Object(l.b)().set(h,y),setTimeout((function(){w(0)}),0),e&&e.setAbort(O),y},t.prototype.downloadBinary=function(t,e,r){return void 0===e&&(e="download"),Object(n.__awaiter)(this,void 0,void 0,(function(){var i,o,s,c,u,a;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return i=!!window.MSInputMethodContext&&!!document.documentMode,o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s="media-download-iframe",c=document.createElement("a"),(u=document.getElementById(s))||((u=document.createElement("iframe")).style.display="none",u.id=s,u.name=s,document.body.appendChild(u)),a=c,[4,this.mediaStore.getFileBinaryURL(t,r)];case 1:return a.href=n.sent(),c.download=e,c.target=i||o?"_blank":s,document.body.appendChild(c),c.click(),document.body.removeChild(c),p.a.emit("media-viewed",{fileId:t,isUserCollection:r===b.b,viewingLevel:"download"}),[2]}}))}))},t.prototype.copyFile=function(t,e){return Object(n.__awaiter)(this,void 0,void 0,(function(){var r,o,s,c,u,f,p,b,v,y,m,_,w,O,g;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return r=t.authProvider,o=t.collection,s=t.id,c=e.authProvider,u=e.collection,f=e.replaceFileId,p=e.occurrenceKey,b=new d.a({authProvider:c}),y=a.authToOwner,[4,r({collectionName:o})];case 1:return v=y.apply(void 0,[n.sent()]),m={sourceFile:{id:s,collection:o,owner:v}},_={collection:u,replaceFileId:f,occurrenceKey:p},[4,b.copyFileWithToken(m,_)];case 2:return w=n.sent().data,O=new i.ReplaySubject(1),g=Object(h.c)({data:w}),O.next(g),Object(l.b)().set(w.id,O),[2,w]}}))}))},t}()},DAxX:function(t,e,r){"use strict";var n=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=n},DdBr:function(t,e,r){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length}},ELws:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("yrnK");r("9t0a"),r("J0qW"),e.slicenator=function(t,e){var r=e.size,i=Math.ceil(t.size/r);return n.Observable.range(0,i).map((function(e){return t.slice(e*r,(e+1)*r)}))}},Fy45:function(t,e,r){"use strict";var n=r("+R7Q");e.range=n.RangeObservable.create},HHu4:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("2dYC");e.uploadinator=function(t,e){return t.pipe(n.asyncMap((function(t){return t.exists?Promise.resolve(t):e.uploader(t).then((function(){return t}))}),e.concurrency))}},IkBf:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("lLRD");e.map=function(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new o(t,e))}};var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();e.MapOperator=o;var s=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.count=0,this.thisArg=n||this}return n(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.Subscriber)},J0qW:function(t,e,r){"use strict";var n=r("yrnK"),i=r("7cO/");n.Observable.prototype.map=i.map},KCzj:function(t,e,r){"use strict";var n=r("2f5I");function i(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}e.symbolIteratorPonyfill=i,e.iterator=i(n.root),e.$$iterator=e.iterator},KtOV:function(t,e,r){"use strict";var n=r("0y6i"),i=r("xQsq"),o=r("vlYB"),s=r("5YWe"),c=r("5zEQ"),u=r("5DF9"),a=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,a=this._parents,l=this._unsubscribe,f=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,b=a?a.length:0;r;)r.remove(this),r=++p<b&&a[p]||null;if(o.isFunction(l))s.tryCatch(l).call(this)===c.errorObject&&(e=!0,t=t||(c.errorObject.e instanceof u.UnsubscriptionError?h(c.errorObject.e.errors):[c.errorObject.e]));if(n.isArray(f))for(p=-1,b=f.length;++p<b;){var d=f[p];if(i.isObject(d))if(s.tryCatch(d.unsubscribe).call(d)===c.errorObject){e=!0,t=t||[];var v=c.errorObject.e;v instanceof u.UnsubscriptionError?t=t.concat(h(v.errors)):t.push(v)}}if(e)throw new u.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function h(t){return t.reduce((function(t,e){return t.concat(e instanceof u.UnsubscriptionError?e.errors:e)}),[])}e.Subscription=a},LkRT:function(t,e,r){"use strict";var n=r("x+j0");e.from=n.FromObservable.create},QR6f:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i}));var n="recents",i=2592e3},UM5q:function(t,e,r){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}},V4Gz:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r){t.call(this)}return n(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(r("KtOV").Subscription);e.Action=i},WFC3:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o}));var n,i=function(){function t(t){this.streams=t}return t.prototype.has=function(t){return!!this.streams.find(t)},t.prototype.set=function(t,e){this.streams.set(t,e)},t.prototype.get=function(t){return this.streams.get(t)},t.prototype.getOrInsert=function(t,e){return this.has(t)||this.set(t,e()),this.get(t)},t.prototype.removeAll=function(){this.streams.removeAll()},t.prototype.remove=function(t){this.streams.remove(t)},Object.defineProperty(t.prototype,"size",{get:function(){return this.streams.size},enumerable:!0,configurable:!0}),t}(),o=function(){if(!n){var t=r("XOyS").mediaState;n=new i(t.streams)}return n}},Y4SL:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("oVJk"),i=function(t){var e=new n.ReplaySubject(1);return t&&e.next(t),e}},YECT:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("lLRD");e.bufferCount=function(t,e){return void 0===e&&(e=null),function(r){return r.lift(new o(t,e))}};var o=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?c:s}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),s=function(t){function e(e,r){t.call(this,e),this.bufferSize=r,this.buffer=[]}return n(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(i.Subscriber),c=function(t){function e(e,r,n){t.call(this,e),this.bufferSize=r,this.startBufferEvery=n,this.buffers=[],this.count=0}return n(e,t),e.prototype._next=function(t){var e=this.bufferSize,r=this.startBufferEvery,n=this.buffers,i=this.count;this.count++,i%r==0&&n.push([]);for(var o=n.length;o--;){var s=n[o];s.push(t),s.length===e&&(n.splice(o,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this.buffers,r=this.destination;e.length>0;){var n=e.shift();n.length>0&&r.next(n)}t.prototype._complete.call(this)},e}(i.Subscriber)},"Z+0v":function(t,e,r){"use strict";var n=r("yrnK"),i=r("LkRT");n.Observable.from=i.from},ZRmL:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notify=function(t,e,r){var n={notifyIfReady:function(){return!1}};return t.then((function(t){n.notifyIfReady=function(){return e.next(t),e.complete(),!0},r(n)}),(function(t){n.notifyIfReady=function(){return e.error(t),!0},r(n)})),n}},b9Hw:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n=function(t,e){var r=t[e];if(r&&r.url)return r.url}},dOZe:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e){t.call(this),this.scheduler=e}return n(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(r("yrnK").Observable);e.EmptyObservable=i},dPiC:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("D57K");e.fetchBlob=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return"string"!=typeof t?[3,2]:[4,fetch(t).then((function(t){return t.blob()}))];case 1:return[2,e.sent()];case 2:return[2,t]}}))}))}},eTEs:function(t,e,r){"use strict";var n=r("nwWh");e.concatMap=function(t,e){return n.mergeMap(t,e,1)}},elmK:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("yrnK"),o=r("8r3m"),s=r("dOZe"),c=function(t){function e(e,r){t.call(this),this.arrayLike=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return n(e,t),e.create=function(t,r){var n=t.length;return 0===n?new s.EmptyObservable:1===n?new o.ScalarObservable(t[0],r):new e(t,r)},e.dispatch=function(t){var e=t.arrayLike,r=t.index,n=t.length,i=t.subscriber;i.closed||(r>=n?i.complete():(i.next(e[r]),t.index=r+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.arrayLike,n=this.scheduler,i=r.length;if(n)return n.schedule(e.dispatch,0,{arrayLike:r,index:0,length:i,subscriber:t});for(var o=0;o<i&&!t.closed;o++)t.next(r[o]);t.complete()},e}(i.Observable);e.ArrayLikeObservable=c},gmAT:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r,n){t.call(this),this.parent=e,this.outerValue=r,this.outerIndex=n,this.index=0}return n(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(r("lLRD").Subscriber);e.InnerSubscriber=i},ifL1:function(t,e,r){"use strict";e.noop=function(){}},"j+EA":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("2dYC");function i(t){return Array.prototype.map.call(new Uint8Array(t),(function(t){return("00"+t.toString(16)).slice(-2)})).join("")}e.defaultHasher=function(t){return function(t){var e=new FileReader;return new Promise((function(r,n){e.onload=function(){r(this.result)},e.onerror=n,e.readAsArrayBuffer(t)}))}(t).then((function(t){return crypto.subtle.digest("SHA-1",t)})).then(i)},e.blobToHashedBlob=function(t){return function(e){return t(e).then((function(t){return{blob:e,hash:t+"-"+e.size}}))}},e.hashinator=function(t,r){var i=r.hasher,o=r.concurrency;return n.asyncMap(e.blobToHashedBlob(i||e.defaultHasher),o)(t)}},jN4z:function(t,e,r){"use strict";e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},k5x2:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(r("wmEa").AsyncScheduler);e.QueueScheduler=i},kWVH:function(t,e,r){"use strict";var n=r("ifL1");function i(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:n.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i(t)},e.pipeFromArray=i},"l+aB":function(t,e,r){"use strict";var n=r("yrnK"),i=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();e.Notification=i},l1F0:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("yrnK"),o=r("lLRD"),s=r("KtOV"),c=r("uHbu"),u=r("y/oz"),a=r("paX8"),h=function(t){function e(e){t.call(this,e),this.destination=e}return n(e,t),e}(o.Subscriber);e.SubjectSubscriber=h;var l=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(e,t),e.prototype[a.rxSubscriber]=function(){return new h(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(i.Observable);e.Subject=l;var f=function(t){function e(e,r){t.call(this),this.destination=e,this.source=r}return n(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},e}(l);e.AnonymousSubject=f},lLRD:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("vlYB"),o=r("KtOV"),s=r("oWhn"),c=r("paX8"),u=function(t){function e(e,r,n){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!e){this.destination=s.empty;break}if("object"==typeof e){if(h(e)){var i=e[c.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new a(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new a(this,e,r,n)}}return n(e,t),e.prototype[c.rxSubscriber]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.Subscription);e.Subscriber=u;var a=function(t){function e(e,r,n,o){var c;t.call(this),this._parentSubscriber=e;var u=this;i.isFunction(r)?c=r:r&&(c=r.next,n=r.error,o=r.complete,r!==s.empty&&(u=Object.create(r),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=c,this._error=n,this._complete=o}return n(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u);function h(t){return t instanceof u||"syncErrorThrowable"in t&&t[c.rxSubscriber]}},mPUF:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n=function(t){setTimeout((function(){return t&&t.unsubscribe()}),0)}},"mm+C":function(t,e,r){"use strict";var n=r("18tx");e.fromPromise=n.PromiseObservable.create},nwWh:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("rihZ"),o=r("321D");e.mergeMap=function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(n){return"number"==typeof e&&(r=e,e=null),n.lift(new s(t,e,r))}};var s=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=s;var c=function(t){function e(e,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.project=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){this.add(i.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,r,n){var i;try{i=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeMapSubscriber=c},oVJk:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("l1F0"),o=r("/t4x"),s=r("KtOV"),c=r("t3X+"),u=r("uHbu"),a=r("y/oz"),h=function(t){function e(e,r,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=n,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=r<1?1:r}return n(e,t),e.prototype.next=function(e){var r=this._getNow();this._events.push(new l(r,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?e=s.Subscription.EMPTY:this.isStopped?e=s.Subscription.EMPTY:(this.observers.push(t),e=new a.SubjectSubscription(this,t)),n&&t.add(t=new c.ObserveOnSubscriber(t,n));for(var i=r.length,o=0;o<i&&!t.closed;o++)t.next(r[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(t-n[o].time<r);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&n.splice(0,o),n},e}(i.Subject);e.ReplaySubject=h;var l=function(t,e){this.time=t,this.value=e}},oWhn:function(t,e,r){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},oaw7:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("2f5I"),o=function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.pending=!1,this.work=r}return n(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),i.root.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;i.root.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(r("V4Gz").Action);e.AsyncAction=o},paX8:function(t,e,r){"use strict";var n=r("2f5I").root.Symbol;e.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},rihZ:function(t,e,r){"use strict";var n=r("2f5I"),i=r("DdBr"),o=r("+UBt"),s=r("xQsq"),c=r("yrnK"),u=r("KCzj"),a=r("gmAT"),h=r("BobD");e.subscribeToResult=function(t,e,r,l){var f=new a.InnerSubscriber(t,r,l);if(f.closed)return null;if(e instanceof c.Observable)return e._isScalar?(f.next(e.value),f.complete(),null):(f.syncErrorThrowable=!0,e.subscribe(f));if(i.isArrayLike(e)){for(var p=0,b=e.length;p<b&&!f.closed;p++)f.next(e[p]);f.closed||f.complete()}else{if(o.isPromise(e))return e.then((function(t){f.closed||(f.next(t),f.complete())}),(function(t){return f.error(t)})).then(null,(function(t){n.root.setTimeout((function(){throw t}))})),f;if(e&&"function"==typeof e[u.iterator])for(var d=e[u.iterator]();;){var v=d.next();if(v.done){f.complete();break}if(f.next(v.value),f.closed)break}else if(e&&"function"==typeof e[h.observable]){var y=e[h.observable]();if("function"==typeof y.subscribe)return y.subscribe(new a.InnerSubscriber(t,r,l));f.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var m="You provided "+(s.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";f.error(new TypeError(m))}}return null}},"t3X+":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("lLRD"),o=r("l+aB");e.observeOn=function(t,e){return void 0===e&&(e=0),function(r){return r.lift(new s(t,e))}};var s=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=s;var c=function(t){function e(e,r,n){void 0===n&&(n=0),t.call(this,e),this.scheduler=r,this.delay=n}return n(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new u(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},e}(i.Subscriber);e.ObserveOnSubscriber=c;var u=function(t,e){this.notification=t,this.destination=e};e.ObserveOnMessage=u},uHbu:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error);e.ObjectUnsubscribedError=i},vlYB:function(t,e,r){"use strict";e.isFunction=function(t){return"function"==typeof t}},w0I2:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n=r("D57K"),i=r("oVJk"),o=r("86hb"),s=r("WFC3"),c={},u=function(){function t(t){this.mediaStore=t}return t.prototype.createFileStateObserver=function(t,e){var r=new i.ReplaySubject(1),s=Object(n.__assign)({id:t},e),c=Object(o.c)({data:s});return r.next(c),r},t.prototype.populateCache=function(t){var e=this;t.forEach((function(t){var r=e.createFileStateObserver(t.id,t.details);Object(s.b)().set(t.id,r)}))},t.prototype.removeFromCache=function(t,e){var r=c[e].items.findIndex((function(e){return e.id===t}));-1!==r&&(Object(s.b)().remove(t),c[e].items.splice(r,1))},t.prototype.getItems=function(t,e){var r=this;c[t]||(c[t]={items:[],subject:new i.ReplaySubject(1),isLoadingNextPage:!1});var o=c[t],s=o.subject;return this.mediaStore.getCollectionItems(t,Object(n.__assign)(Object(n.__assign)({},e),{details:"full"})).then((function(t){var e=t.data,n=e.contents,i=e.nextInclusiveStartKey;r.populateCache(n),o.items=t.data.contents,o.nextInclusiveStartKey=i,s.next(o.items)})).catch((function(t){return s.error(t)})),s},t.prototype.removeFile=function(t,e,r){return Object(n.__awaiter)(this,void 0,void 0,(function(){var i;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.mediaStore.removeCollectionFile(t,e,r)];case 1:return n.sent(),this.removeFromCache(t,e),(i=c[e]).subject.next(i.items),[2]}}))}))},t.prototype.loadNextPage=function(t,e){return Object(n.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s,u,a,h,l,f,p,b,d;return Object(n.__generator)(this,(function(v){switch(v.label){case 0:return r=c[t],i=!!r&&r.isLoadingNextPage,r&&r.nextInclusiveStartKey&&!i?(r.isLoadingNextPage=!0,o=c[t],s=o.nextInclusiveStartKey,u=o.items,a=o.subject,[4,this.mediaStore.getCollectionItems(t,Object(n.__assign)(Object(n.__assign)({},e),{inclusiveStartKey:s,details:"full"}))]):[2];case 1:return h=v.sent(),l=h.data,f=l.contents,p=l.nextInclusiveStartKey,this.populateCache(f),b=h.data.contents,d=Object(n.__spread)(u,b),a.next(d),c[t]={items:d,nextInclusiveStartKey:p,subject:a,isLoadingNextPage:!1},[2]}}))}))},t}()},w5uy:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n=r("D57K"),i=r("+gXh"),o=r("6kv7"),s=r("w0I2"),c=r("CB5d"),u=function(){function t(t){this.mediaClientConfig=t,this.mediaStore=new o.a({authProvider:t.authProvider}),this.config=t,this.collection=new s.a(this.mediaStore),this.file=new c.a(this.mediaStore),this.eventEmitter=new i.EventEmitter2}return t.prototype.getImage=function(t,e,r,n){return this.mediaStore.getImage(t,e,r,n)},t.prototype.getImageUrl=function(t,e){return this.mediaStore.getFileImageURL(t,e)},t.prototype.getImageMetadata=function(t,e){return Object(n.__awaiter)(this,void 0,void 0,(function(){return Object(n.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.mediaStore.getImageMetadata(t,e)];case 1:return[2,r.sent().metadata]}}))}))},t.prototype.on=function(t,e){this.eventEmitter.on(t,e)},t.prototype.off=function(t,e){this.eventEmitter.off(t,e)},t.prototype.emit=function(t,e){return this.eventEmitter.emit(t,e)},t}()},wmEa:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(r("DAxX").Scheduler);e.AsyncScheduler=i},wxPC:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("879T"),i=r("eTEs"),o=r("mm+C"),s=r("l1F0"),c=r("ELws"),u=r("j+EA"),a=r("/6AP"),h=r("HHu4"),l=r("y/TO"),f=r("dPiC");function p(t){var e=new s.Subject,r=t.subscribe(e);return{response:e.toPromise(),cancel:function(){r.unsubscribe(),e.error("canceled")}}}e.getObservableFromFile=function(t,e,r){return o.fromPromise(f.fetchBlob(t)).pipe(i.concatMap((function(t){var i=e.chunkSize,o=r.onProgress,s=Math.ceil(t.size/i),f=c.slicenator(t,{size:i}),p=u.hashinator(f,{concurrency:e.hashingConcurrency,hasher:e.hashingFunction}),b=a.probinator(p,{batchSize:e.probingBatchSize,prober:e.probingFunction}),d=0,v=h.uploadinator(b,{concurrency:e.uploadingConcurrency,uploader:e.uploadingFunction});return o&&(v=v.pipe(n.tap((function(){o((d+=1)/s)})))),l.processinator(v,{batchSize:e.processingBatchSize,processor:e.processingFunction})})))},e.chunkinator=function(t,r,n){return p(e.getObservableFromFile(t,r,n))},e.toCancelablePromise=p},"x+j0":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("0y6i"),o=r("DdBr"),s=r("+UBt"),c=r("18tx"),u=r("3rc9"),a=r("zo1O"),h=r("elmK"),l=r("KCzj"),f=r("yrnK"),p=r("t3X+"),b=r("BobD"),d=function(t){function e(e,r){t.call(this,null),this.ish=e,this.scheduler=r}return n(e,t),e.create=function(t,r){if(null!=t){if("function"==typeof t[b.observable])return t instanceof f.Observable&&!r?t:new e(t,r);if(i.isArray(t))return new a.ArrayObservable(t,r);if(s.isPromise(t))return new c.PromiseObservable(t,r);if("function"==typeof t[l.iterator]||"string"==typeof t)return new u.IteratorObservable(t,r);if(o.isArrayLike(t))return new h.ArrayLikeObservable(t,r)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,r=this.scheduler;return null==r?e[b.observable]().subscribe(t):e[b.observable]().subscribe(new p.ObserveOnSubscriber(t,r,0))},e}(f.Observable);e.FromObservable=d},"x19/":function(t,e,r){(function(e){for(var r=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i,n=[],i=0;i<256;i++)n[i]=(i+256).toString(16).substr(1);t.exports=function(t,i){var s;if(e.isBuffer(t))s=function(t,e){var r=e||0,i=n;return i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]}(t);else{if("[object String]"!==Object.prototype.toString.call(t))return!1;s=t}if(s=s.toLowerCase(),!r.test(s))return!1;if(void 0===i)i=o(s);else if(o(s)!==i)return!1;switch(i){case 1:case 2:return!0;case 3:case 4:case 5:return-1!==["8","9","a","b"].indexOf(s.charAt(19));default:throw new Error("Invalid version provided.")}};var o=t.exports.version=function(t){return 0|t.charAt(14)}}).call(this,r("GmLw").Buffer)},xQsq:function(t,e,r){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},"y/TO":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("YECT"),i=r("eTEs");e.processinator=function(t,e){return t.pipe(n.bufferCount(e.batchSize)).pipe(i.concatMap((function(t){return e.processor?e.processor(t).then((function(){return t})):Promise.resolve(t)})))}},"y/oz":function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r){t.call(this),this.subject=e,this.subscriber=r,this.closed=!1}return n(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(r("KtOV").Subscription);e.SubjectSubscription=i},yrnK:function(t,e,r){"use strict";var n=r("2f5I"),i=r("BVi2"),o=r("BobD"),s=r("kWVH"),c=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=i.toSubscriber(t,e,r);if(n?n.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e((function(e,n){var i;i=r.subscribe((function(e){if(i)try{t(e)}catch(t){n(t),i.unsubscribe()}else t(e)}),n,e)}))},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[o.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();e.Observable=c},zgbF:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("mPUF"),i=function(t){return new Promise((function(e){var r=t.subscribe({next:function(t){e(t),Object(n.a)(r)}})}))}},zo1O:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r("yrnK"),o=r("8r3m"),s=r("dOZe"),c=r("jN4z"),u=function(t){function e(e,r){t.call(this),this.array=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return n(e,t),e.create=function(t,r){return new e(t,r)},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=t[t.length-1];c.isScheduler(n)?t.pop():n=null;var i=t.length;return i>1?new e(t,n):1===i?new o.ScalarObservable(t[0],n):new s.EmptyObservable(n)},e.dispatch=function(t){var e=t.array,r=t.index,n=t.count,i=t.subscriber;r>=n?i.complete():(i.next(e[r]),i.closed||(t.index=r+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.array,n=r.length,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{array:r,index:0,count:n,subscriber:t});for(var o=0;o<n&&!t.closed;o++)t.next(r[o]);t.complete()},e}(i.Observable);e.ArrayObservable=u}}]);
//# sourceMappingURL=6.Doenj1Rx-v39.js.map