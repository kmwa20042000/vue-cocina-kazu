(window.webpackJsonp=window.webpackJsonp||[]).push([["super-admin-banner~b59ad437","super-admin-expiration~1b9a29a8","super-admin-satisfaction-survey~0a2efa80"],{B5Kc:function(e,t,n){"use strict";var i=n("zjfJ"),a=n("ERkP"),s=n.n(a),r=(n("aWzz"),n("gQ5V")),o=n("L21V"),c=n("lZoD"),d=n("/MSF"),u=n("qhEF"),l=n("wKA4"),p=n("n9CL"),m=n("KD1n"),h=n("H5qd");function f(){const e=Object(m.a)(["\n  mutation DisableSuperAdmin {\n    disableSuperAdmin {\n      user {\n        id\n        confluence {\n          roles {\n            isSuperAdmin\n          }\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}const b=n.n(h)()(f());n.d(t,"a",(function(){return y}));const g=Object(o.g)({disableSuperAdminErrorTitle:{id:"super-admin.disable.super.admin.error.title",defaultMessage:"Something went wrong",description:"Title for the error if disabling Super Admin fails"},disableSuperAdminErrorDescription:{id:"super-admin.disable.super.admin.error.description-with-link",defaultMessage:"If this keeps happening, let us know at {atlassianSupportLink}",description:"Description for the error if disabling Super Admin fails"}});class S extends a.Component{constructor(...e){super(...e),Object(i.a)(this,"handleMutationComplete",e=>t=>{var n;const{handleMutationCompleteCallback:i}=this.props;(null!=(n=t)&&null!=(n=n.disableSuperAdmin)&&null!=(n=n.user)&&null!=(n=n.confluence)&&null!=(n=n.roles)?n.isSuperAdmin:n)||!1?this.handleMutationError(e)():(Object(l.b)(),Object(p.f)(),i().then(()=>window.location.reload()))}),Object(i.a)(this,"handleMutationError",e=>()=>{const{intl:t,handleMutationErrorCallback:n}=this.props;e.showErrorFlag({title:t.formatMessage(g.disableSuperAdminErrorTitle),description:t.formatMessage(g.disableSuperAdminErrorDescription,{atlassianSupportLink:s.a.createElement(d.b,{showHostname:!0})})}),n()}),Object(i.a)(this,"render",()=>s.a.createElement(c.c,{to:[u.a]},e=>s.a.createElement(r.a,{mutation:b,onCompleted:this.handleMutationComplete(e),onError:this.handleMutationError(e)},t=>this.props.children(t,e))))}}Object(i.a)(S,"defaultProps",{handleMutationCompleteCallback:()=>Promise.resolve(),handleMutationErrorCallback:()=>Promise.resolve()});const y=Object(o.h)(S)},IkOR:function(e,t,n){"use strict";n.r(t);var i=n("zjfJ"),a=n("ERkP"),s=n.n(a),r=n("2sr0"),o=(n("aWzz"),n("WlwD")),c=n("tqyq"),d=n("B5Kc"),u=n("KD1n"),l=n("L21V"),p=n("KsTJ"),m=n("n9CL");class h extends a.Component{constructor(...e){super(...e),Object(i.a)(this,"state",{countdown:0,interval:void 0}),Object(i.a)(this,"startCountdown",()=>{this.props.initialCountdown>0&&this.setState({countdown:this.props.initialCountdown},()=>this.setState({interval:setInterval(this.intervalHandler,1e3)}))}),Object(i.a)(this,"stopCountdown",()=>{clearInterval(this.state.interval)}),Object(i.a)(this,"intervalHandler",()=>{this.state.countdown>0?this.decrementCountdown():this.stopCountdown()}),Object(i.a)(this,"decrementCountdown",()=>{this.setState({countdown:this.state.countdown-1})})}componentDidMount(){this.startCountdown()}componentWillUnmount(){this.stopCountdown()}render(){return this.state.countdown}}function f(){const e=Object(u.a)(["\n  font-weight: bold;\n  display: inline;\n"]);return f=function(){return e},e}h.displayName="Counter";const b=Object(l.g)({timeoutSuperAdminTitle:{id:"super-admin.timeout.super.admin.title",defaultMessage:"Still there?",description:"Title for the flag for Admin Key expiry notification"},superAdminTimerFlagAction:{id:"super-admin.timer.flag.action",defaultMessage:"Keep using admin key",description:"Text for the action on Super Admin timeout flag"}}),g=p.default.div(f()),S=()=>{};class y extends a.Component{constructor(...e){super(...e),Object(i.a)(this,"state",{flagId:void 0}),Object(i.a)(this,"handleAKTimeout",(e,t,n)=>{Object(m.b)(Object(m.c)())({beforeNotify:()=>this.waitFor1Second(()=>{n&&this.hideFlag(t),this.handleAKTimeout(e,t,!1)}),afterNotify:i=>this.waitFor1Second(()=>{n||this.showFlag(t,i),this.handleAKTimeout(e,t,!0)}),afterExpiry:()=>e(),noTimeout:S})}),Object(i.a)(this,"waitFor1Second",e=>{setTimeout(e,1e3)}),Object(i.a)(this,"showFlag",(e,t)=>{const{intl:n}=this.props;e.showWarningFlag({title:n.formatMessage(b.timeoutSuperAdminTitle),description:this.renderFlagDescription(t),actions:[{content:n.formatMessage(b.superAdminTimerFlagAction),onClick:this.onClickKeepUsing(e)}]}).then(e=>this.setState({flagId:e.id}))}),Object(i.a)(this,"renderFlagDescription",e=>s.a.createElement(l.c,{id:"super-admin.timeout.super.admin.description",defaultMessage:"Due to inactivity, you will be signed out in {counter}.",description:"Description  for the flag for Admin Key expiry notification",values:{counter:s.a.createElement(g,null,s.a.createElement(l.c,{id:"super-admin.timeout.super.admin.description.counter",defaultMessage:"{counter} seconds",description:"Part of description for the flag for Admin Key expiry notification",values:{counter:s.a.createElement(h,{initialCountdown:Object(m.d)(e)})}}))}})),Object(i.a)(this,"onClickKeepUsing",e=>()=>{Object(m.e)(),this.fireAdminKeyExtendedAnalyticsEvent(),this.hideFlag(e)}),Object(i.a)(this,"fireAdminKeyExtendedAnalyticsEvent",()=>{this.props.createAnalyticsEvent({type:"sendTrackEvent",data:{source:"superAdminExpiration",action:"extended",actionSubject:"adminKeySession"}}).fire()})}componentDidMount(){const{disableSuperAdminTrigger:e,flags:t}=this.props;this.handleAKTimeout(e,t,!1)}hideFlag(e){void 0!==this.state.flagId&&e.hideFlag(this.state.flagId)}render(){return null}}y.displayName="SuperAdminExpirationTimerComponent";const v=Object(r.a)()(Object(l.h)(y)),E=Object(l.g)({sessionExpirationTitle:{id:"super-admin.session.expiration.title",defaultMessage:"Access to restricted pages has ended",description:"Title for Super admin session expiration flag"},sessionExpirationDescription:{id:"super-admin.session.expiration.description",defaultMessage:"You’ve been inactive for a while. To keep things secure, we’ve ended your access to restricted pages.",description:"Description for Super admin session expiration flag"}});class A extends a.Component{constructor(...e){super(...e),Object(i.a)(this,"showFlag",()=>{const{flags:e,intl:t}=this.props;e.showInfoFlag({title:t.formatMessage(E.sessionExpirationTitle),description:t.formatMessage(E.sessionExpirationDescription)})})}componentDidMount(){o.b.getAndRemoveItem(c.a.SUPERADMIN_SESSION_EXPIRED).then(e=>{e&&this.showFlag()})}render(){return null}}A.displayName="SuperAdminExpirationFlagComponent";const O=Object(l.h)(A);n.d(t,"SuperAdminExpiration",(function(){return x}));class j extends a.Component{constructor(...e){super(...e),Object(i.a)(this,"fireAdminKeyExpiredAnalyticsEvent",()=>{this.props.createAnalyticsEvent({type:"sendTrackEvent",data:{source:"superAdminExpiration",action:"expired",actionSubject:"adminKeySession"}}).fire()}),Object(i.a)(this,"deleteStoredRestrictedPage",()=>o.b.removeItem(c.a.RESTRICTED_PAGE_CONFIRMED)),Object(i.a)(this,"fireAdminKeyExpiryFailedAnalyticsEvent",()=>this.props.createAnalyticsEvent({type:"sendTrackEvent",data:{action:"failed",actionSubject:"exitAdminKeySession",source:"superAdminExpiration"}}).fire()),Object(i.a)(this,"setAKSessionExpired",()=>o.b.setItem(c.a.SUPERADMIN_SESSION_EXPIRED,!0,Object(m.a)(new Date,10))),Object(i.a)(this,"render",()=>s.a.createElement(d.a,{handleMutationCompleteCallback:()=>(this.fireAdminKeyExpiredAnalyticsEvent(),Promise.all([this.deleteStoredRestrictedPage(),this.setAKSessionExpired()])),handleMutationErrorCallback:()=>(this.fireAdminKeyExpiryFailedAnalyticsEvent(),Promise.resolve())},(e,t)=>s.a.createElement(a.Fragment,null,s.a.createElement(v,{flags:t,disableSuperAdminTrigger:e}),s.a.createElement(O,{flags:t}))))}}const x=Object(r.a)()(j)},LjTg:function(e,t,n){"use strict";n("aWzz");var i=n("ERkP"),a=n.n(i),s=n("gQ5V"),r=n("wKA4"),o=n("KD1n"),c=n("H5qd");function d(){const e=Object(o.a)(["\n  query IsSuperAdmin {\n    user(current: true) {\n      id\n      confluence {\n        roles {\n          isSuperAdmin\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}const u=n.n(c)()(d());n.d(t,"a",(function(){return l}));const l=({children:e})=>Object(r.a)()?a.a.createElement(s.b,{query:u},({loading:t,error:n,data:i})=>{var a;return e({loading:t,error:n,isSuperAdmin:Boolean(null!=(a=i)&&null!=(a=a.user)&&null!=(a=a.confluence)&&null!=(a=a.roles)?a.isSuperAdmin:a)})}):e({loading:!1,isSuperAdmin:!1});l.displayName="AdminKeyQuery"},"OC/i":function(e,t,n){"use strict";n.r(t);var i,a,s,r,o,c,d=n("zjfJ"),u=n("KD1n"),l=n("ERkP"),p=n.n(l),m=(n("aWzz"),n("L21V")),h=n("KsTJ"),f=n("lZoD"),b=n("D57K"),g=n("+3hD"),S=n("RZTm"),y=n("m7kQ"),v=n("hd9Z"),E=Object(g.a)("appearance",{error:{light:y.R400,dark:y.R300},warning:{light:y.Y300,dark:y.Y300},announcement:{light:y.N500,dark:y.N500}}),A=h.default.div(i||(i=Object(b.__makeTemplateObject)(["\n  max-height: ",";\n  overflow: ",";\n  background-color: ",";\n"],["\n  max-height: ",";\n  overflow: ",";\n  background-color: ",";\n"])),(function(e){return"announcement"===e.appearance?"88px":"52px"}),(function(e){return"announcement"===e.appearance?"scroll":"visible"}),E),O=(y.R400,y.N0,Object(g.a)("appearance",{error:{light:y.N0,dark:y.DN40},warning:{light:y.N700,dark:y.DN40},announcement:{light:y.N0,dark:y.N0}})),j=h.default.div(a||(a=Object(b.__makeTemplateObject)(["\n  align-items: center;\n  background-color: ",";\n  color: ",";\n  display: flex;\n  fill: ",";\n  font-weight: 500;\n  justify-content: center;\n  padding: ","px;\n  text-align: center;\n  ","\n\n  margin: auto;\n  "," transition: color ",";\n\n  a,\n  a:visited,\n  a:hover,\n  a:active,\n  a:focus {\n    color: ",";\n    text-decoration: underline;\n  }\n"],["\n  align-items: center;\n  background-color: ",";\n  color: ",";\n  display: flex;\n  fill: ",";\n  font-weight: 500;\n  justify-content: center;\n  padding: ","px;\n  text-align: center;\n  ","\n\n  margin: auto;\n  "," transition: color ",";\n\n  a,\n  a:visited,\n  a:hover,\n  a:active,\n  a:focus {\n    color: ",";\n    text-decoration: underline;\n  }\n"])),E,O,E,Object(v.multiply)(S.l,1.5),"",(function(e){return"announcement"===e.appearance?"max-width: 876px;":""}),"0.25s ease-in-out",O),x=h.default.span(s||(s=Object(b.__makeTemplateObject)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  flex: 0 0 auto;\n"],["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  flex: 0 0 auto;\n"]))),w=h.default.div(o||(o=Object(b.__makeTemplateObject)(["\n  max-height: ","px;\n  overflow: hidden;\n  transition: max-height ",";\n"],["\n  max-height: ","px;\n  overflow: hidden;\n  transition: max-height ",";\n"])),(function(e){return e.isOpen?e.bannerHeight:0}),"0.25s ease-in-out"),T=h.default.span(c||(c=Object(b.__makeTemplateObject)(["\n  flex: 0 1 auto;\n  padding: ","px;\n  ",";\n  overflow: hidden;\n"],["\n  flex: 0 1 auto;\n  padding: ","px;\n  ",";\n  overflow: hidden;\n"])),Object(v.divide)(S.l,2),(function(e){return"announcement"===e.appearance?"":Object(h.css)(r||(r=Object(b.__makeTemplateObject)(["\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      "],["\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      "])))})),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={height:0},t.getHeight=function(){t.containerRef&&t.setState({height:t.containerRef.clientHeight})},t.innerRef=function(e){t.containerRef=e,t.props.innerRef&&t.props.innerRef(e),t.getHeight()},t}return Object(b.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.appearance,n=e.children,i=e.icon,a=e.isOpen,s=e.testId;return p.a.createElement(w,{bannerHeight:this.state.height,isOpen:a},p.a.createElement(A,{innerRef:this.innerRef,appearance:t,"aria-hidden":!a,role:"alert","data-testid":s},p.a.createElement(j,{appearance:t},p.a.createElement(x,null,i),p.a.createElement(T,{appearance:t},n))))},t.defaultProps={appearance:"warning",isOpen:!1},t}(p.a.Component),M=n("OOEx"),R=n.n(M),C=n("2sr0"),D=n("WWAs"),I=n("WlwD"),K=n("tqyq"),B=n("wKA4"),F=n("LjTg"),N=n("yJma"),_=n("B5Kc"),P=n("IkOR");function z(){const e=Object(u.a)(["\n  color: inherit;\n  cursor: pointer;\n  font-weight: normal;\n  margin-left: 5px;\n  text-decoration: underline;\n"]);return z=function(){return e},e}function U(){const e=Object(u.a)(["\n  width: 100%;\n"]);return U=function(){return e},e}n.d(t,"SuperAdminBannerComponent",(function(){return H})),n.d(t,"SuperAdminBanner",(function(){return V}));const W=h.default.div(U()),Q=h.default.a(z());class H extends l.Component{constructor(...e){super(...e),Object(d.a)(this,"state",{surveyIsVisible:!1}),Object(d.a)(this,"componentDidMount",()=>{I.b.getItemAsBoolean(K.a.SUPERADMIN_SURVEY_REQUESTED).then(e=>{e&&this.setState({surveyIsVisible:e})})}),Object(d.a)(this,"showSurvey",e=>I.b.getItemAsBoolean(K.a.SUPERADMIN_SURVEY_SUBMITTED).then(t=>{t||(I.b.setItem(K.a.SUPERADMIN_SURVEY_REQUESTED,"true"),e&&this.setState({surveyIsVisible:!0}))})),Object(d.a)(this,"hideSurvey",()=>{I.b.removeItem(K.a.SUPERADMIN_SURVEY_REQUESTED),this.setState({surveyIsVisible:!1})}),Object(d.a)(this,"hideBanner",e=>(e.hide("SuperAdminBanner"),null)),Object(d.a)(this,"fireAdminKeyExitAnalyticsEvent",()=>this.props.createAnalyticsEvent({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:"adminKeyExit",source:"superAdminBanner"}}).fire()),Object(d.a)(this,"fireAdminKeyExitFailedAnalyticsEvent",()=>this.props.createAnalyticsEvent({type:"sendTrackEvent",data:{action:"failed",actionSubject:"exitAdminKeySession",source:"superAdminBanner"}}).fire()),Object(d.a)(this,"deleteStoredRestrictedPage",()=>I.b.removeItem(K.a.RESTRICTED_PAGE_CONFIRMED)),Object(d.a)(this,"handleMutationCompleteCallback",()=>Promise.all([this.showSurvey(!1),this.deleteStoredRestrictedPage(),Promise.resolve(this.fireAdminKeyExitAnalyticsEvent())])),Object(d.a)(this,"handleMutationErrorCallback",()=>Promise.resolve(this.fireAdminKeyExitFailedAnalyticsEvent())),Object(d.a)(this,"renderBanner",e=>{const t=p.a.createElement(R.a,{size:"medium",secondaryColor:"fill"}),n=this,i=t=>{if(t){const i=t.clientHeight;n.setState({bannerHeight:i}),e.show("SuperAdminBanner",i)}};return p.a.createElement(_.a,{handleMutationCompleteCallback:this.handleMutationCompleteCallback,handleMutationErrorCallback:this.handleMutationErrorCallback},e=>p.a.createElement(l.Fragment,null,p.a.createElement(W,null,p.a.createElement(k,{appearance:"warning",icon:t,isOpen:!0,innerRef:i},p.a.createElement(m.c,{id:"super-admin.banner.message",description:"Message in the banner to notify users of super admin mode",defaultMessage:"You’re using admin key, which gives you temporary access to restricted pages."}),p.a.createElement(Q,{onClick:e},p.a.createElement(m.c,{id:"super-admin.banner.exit",description:"Click to action in banner to allow users to exit super admin mode",defaultMessage:"Stop using admin key"}))))))})}renderQuery(e){return Object(B.a)()?p.a.createElement(F.a,null,({loading:t,error:n,isSuperAdmin:i})=>t||n?null:i?this.renderBanner(e):this.hideBanner(e)):null}render(){return p.a.createElement(f.c,{to:[D.a]},e=>p.a.createElement(l.Fragment,null,this.renderQuery(e),this.state.surveyIsVisible?p.a.createElement(N.SuperAdminSatisfactionSurvey,{onDone:this.hideSurvey}):null,p.a.createElement(P.SuperAdminExpiration,null)))}}H.displayName="SuperAdminBannerComponent";const V=Object(C.a)()(Object(m.h)(H))},WWAs:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("pkwY"),a=n("zjfJ"),s=n("lZoD"),r=n("+FBq");class o extends s.a{constructor(...e){super(...e),Object(a.a)(this,"state",{banners:[],isTopNavEnabled:!1}),Object(a.a)(this,"_findBanner",e=>this.state.banners.indexOf(this.state.banners.filter(t=>t.name===e)[0])),Object(a.a)(this,"_updateServerRenderedBanners",e=>{0===e?this.hide("ServerRenderedBanners"):this.show("ServerRenderedBanners",e)}),Object(a.a)(this,"setTopNavEnabled",e=>{this.state.isTopNavEnabled!==e&&this.setState(t=>Object(i.a)({},t,{isTopNavEnabled:e}))}),Object(a.a)(this,"show",(e,t)=>{const n=this._findBanner(e);-1===n?this.setState(n=>{const a=[...n.banners];return a.push({name:e,height:t}),Object(i.a)({},n,{banners:a})}):this.state.banners[n].height!==t&&this.setState(e=>{const a=[...e.banners];return a[n].height=t,Object(i.a)({},e,{banners:a})})}),Object(a.a)(this,"hide",e=>{const t=this._findBanner(e);t>-1&&this.setState(e=>{const n=[...e.banners];return n.splice(t,1),Object(i.a)({},e,{banners:n})})}),Object(a.a)(this,"getTotalHeight",e=>{const t=this.state.isTopNavEnabled&&!1!==(e&&e.includeTopNav);return this.state.banners.reduce((e,t)=>e+t.height,t?r.b:0)})}}},n9CL:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return d}));const i="confluence.super.admin.timeout",a=e=>Math.round((e-(new Date).getTime())/1e3),s=(e,t)=>new Date(e.getTime()+1e3*t),r=e=>({beforeNotify:t,afterNotify:n,afterExpiry:i,noTimeout:s})=>{if(e){const s=a(e),r=s<=60;return s>0?r?n(e):t(e):i(e)}return s()},o=()=>localStorage.getItem(i),c=()=>{localStorage.removeItem(i)},d=()=>{var e,t,n;e=(t=new Date,n=10,s(t,60*n)).getTime(),localStorage.setItem(i,e)}},ntAl:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("RfuI");const a=Object(i.a)({name:"SatisfactionSurvey",loader:()=>Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e(8),n.e("satisfaction-survey~b59ad437")]).then(n.bind(null,"8jqM")).then(({SatisfactionSurvey:e})=>e),loading:()=>null})},yJma:function(e,t,n){"use strict";n.r(t);var i=n("zjfJ"),a=n("ERkP"),s=n.n(a),r=(n("aWzz"),n("L21V")),o=n("2sr0"),c=n("cGYM"),d=n("ntAl"),u=n("WlwD"),l=n("tqyq");const p=Object(r.g)({superAdminSatisfactionSurveyTitle:{id:"super-admin.satisfaction.survey.title",defaultMessage:"How was your admin key experience?",description:"Title for Admin Key Satisfaction Survey, shown after exiting Admin Key mode"},superAdminSatisfactionSurveyFinalTitle:{id:"super-admin.satisfaction.survey.final.title",defaultMessage:"Thank you",description:"Final title for Admin Key Satisfaction Survey after submission"},superAdminSatisfactionSurveyFinalDescription:{id:"super-admin.satisfaction.survey.final.description",defaultMessage:"Your feedback has been submitted",description:"Final Description for Admin Key Satisfaction Survey after submission"},superAdminSatisfactionSurveyReactionTerrible:{id:"super-admin.satisfaction.survey.reaction.terrible",defaultMessage:"Terrible",description:"Reaction icon tooltip for terrible"},superAdminSatisfactionSurveyReactionBad:{id:"super-admin.satisfaction.survey.reaction.bad",defaultMessage:"Bad",description:"Reaction icon tooltip for bad"},superAdminSatisfactionSurveyReactionOkay:{id:"super-admin.satisfaction.survey.reaction.okay",defaultMessage:"Okay",description:"Reaction icon tooltip for okay"},superAdminSatisfactionSurveyReactionGreat:{id:"super-admin.satisfaction.survey.reaction.great",defaultMessage:"Great",description:"Reaction icon tooltip for great"},superAdminSatisfactionSurveyReactionAmazing:{id:"super-admin.satisfaction.survey.reaction.amazing",defaultMessage:"Amazing",description:"Reaction icon tooltip for amazing"},superAdminSatisfactionSurveyQuestionBad:{id:"super-admin.satisfaction.survey.question.bad",defaultMessage:"We're sorry to hear that. What went wrong? (optional)",description:"Prompt for additional feedback when the user is unhappy"},superAdminSatisfactionSurveyQuestionGood:{id:"super-admin.satisfaction.survey.question.good",defaultMessage:"Thanks! What did you like about it? What could be improved? (optional)",description:"Prompt for additional feedback when the user is happy"},superAdminSatisfactionSurveyButtonSubmit:{id:"super-admin.satisfaction.survey.button.submit",defaultMessage:"Submit",description:"Button to submit the survey"},superAdminSatisfactionSurveyButtonClose:{id:"super-admin.satisfaction.survey.button.close",defaultMessage:"Close",description:"Button to close the survey without submitting"}});n.d(t,"SuperAdminSatisfactionSurveyComponent",(function(){return m})),n.d(t,"SuperAdminSatisfactionSurvey",(function(){return h}));class m extends a.Component{constructor(...e){super(...e),Object(i.a)(this,"state",{eventSent:!1}),Object(i.a)(this,"initializeText",()=>{if(!this.formQuestions){const{intl:e}=this.props;this.title=e.formatMessage(p.superAdminSatisfactionSurveyTitle),this.finalTitle=e.formatMessage(p.superAdminSatisfactionSurveyFinalTitle),this.finalDescription=e.formatMessage(p.superAdminSatisfactionSurveyFinalDescription),this.submitButtonText=e.formatMessage(p.superAdminSatisfactionSurveyButtonSubmit),this.closeButtonText=e.formatMessage(p.superAdminSatisfactionSurveyButtonClose),this.reactionTitles=[e.formatMessage(p.superAdminSatisfactionSurveyReactionTerrible),e.formatMessage(p.superAdminSatisfactionSurveyReactionBad),e.formatMessage(p.superAdminSatisfactionSurveyReactionOkay),e.formatMessage(p.superAdminSatisfactionSurveyReactionGreat),e.formatMessage(p.superAdminSatisfactionSurveyReactionAmazing)];const t=e.formatMessage(p.superAdminSatisfactionSurveyQuestionBad),n=e.formatMessage(p.superAdminSatisfactionSurveyQuestionGood);this.formQuestions=[t,t,n,n,n]}}),Object(i.a)(this,"fireAnalyticsEvent",({reaction:e=null,feedback:t="",submitted:n=!1})=>{const{createAnalyticsEvent:i}=this.props;t=n?t:"",i({type:"sendTrackEvent",data:{action:"submitted",actionSubject:"adminKeyFeedbackSurvey",attributes:{reaction:n&&e?e.value:0,feedback:Object(c.a)(t)},source:"adminKeyCsatSurvey"}}).fire()}),Object(i.a)(this,"markUserAsSubmitted",()=>{u.b.setItem(l.a.SUPERADMIN_SURVEY_SUBMITTED,"true",259200)}),Object(i.a)(this,"handleInteraction",async e=>{const{onDone:t}=this.props,{eventSent:n}=this.state;n||(this.fireAnalyticsEvent(e),e.submitted&&this.markUserAsSubmitted(),await this.setState({eventSent:!0})),e.dismissed&&t()})}render(){const{eventSent:e}=this.state;return this.initializeText(),s.a.createElement(d.a,{size:"medium",title:this.title,description:"",finalTitle:this.finalTitle,finalDescription:this.finalDescription,reactionTitles:this.reactionTitles,formQuestions:this.formQuestions,submitButtonText:this.submitButtonText,closeButtonText:this.closeButtonText,onInteraction:this.handleInteraction,isOnFinalStage:e,autoHideTime:-1,autoHideFinalTime:2e3})}}m.displayName="SuperAdminSatisfactionSurveyComponent";const h=Object(o.a)()(Object(r.h)(m))}}]);
//# sourceMappingURL=super-admin-banner~b59ad437.Jo99ZZVp-v39.js.map