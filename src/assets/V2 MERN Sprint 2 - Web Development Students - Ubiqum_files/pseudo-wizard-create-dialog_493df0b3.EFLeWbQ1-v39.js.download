(window.webpackJsonp=window.webpackJsonp||[]).push([["pseudo-wizard-create-dialog~493df0b3"],{"17lG":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var a=n("Jygk"),r=n.n(a),o=n("k8+f");function c(e){try{return r.a.require(e),!0}catch(e){return!1}}function i({listener:e,module:t,interval:n=250},a){Object(o.a)({listener:"wait-for-required-module ".concat(t),globalProperty:"require"},()=>{if(c(t))return void a();const e=setInterval(()=>{c(t)&&(clearInterval(e),a())},n)})}},"3ac5":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("TOvH"),r=n("RZKf"),o=n("HA9u"),c=n("hd8a"),i=n("7xNx"),l=n("rQmM"),s=n("iLhO");function d(){o.a.preload(),a.a.preload(),r.a.preload(),c.a.preload(),i.a.preload(),l.a.preload(),s.b.preload(),s.a.preload()}},"681K":function(e,t,n){"use strict";n.r(t),n.d(t,"CreateDialogBlueprintWizardRenderer",(function(){return y}));var a=n("zjfJ"),r=(n("aWzz"),n("ERkP")),o=n.n(r),c=n("Jygk"),i=n.n(c),l=n("wuLf"),s=n("3ac5"),d=n("bfgX"),u=n("S2j0"),p=n("hpu0"),f=n("3VMZ"),b=n("A79P"),h=n("k8+f"),g=n("17lG");class m extends r.PureComponent{constructor(...e){super(...e),Object(a.a)(this,"isOpening",!1),Object(a.a)(this,"forceReloadInNextOpen",!0),Object(a.a)(this,"_setOpenState",e=>e?this._open():this._close()),Object(a.a)(this,"_close",e=>{if("function"==typeof this._confluenceDialogClose){try{this._confluenceDialogClose()}catch(e){0}this._confluenceDialogClose=null}Object(d.c)("remove.dialog",this._afterDialogClosed),this.props.onClose(e)}),Object(a.a)(this,"_afterDialogClosed",(e,{dialog:t})=>{"create-dialog"===t.id&&(this._confluenceDialogClose=null,this._close(e))}),Object(a.a)(this,"_isActive",()=>!!i.a.document.querySelector("#create-dialog")),Object(a.a)(this,"_open",()=>{if(!this._isActive()&&!this.isOpening){const{blueprint:e,spaceKey:t,parentPageId:n}=this.props;e&&(Object(p.a)().start({name:f.a.BLUEPRINT_WIZARD_LOAD_DIALOG,id:e.blueprintModuleCompleteKey,timeout:b.a.DEFAULT}),this.isOpening=!0,Object(u.a)(["wrc!com.atlassian.confluence.plugins.dialog-wizard:dialog-wizard-resources","wrc!create-content"],()=>{Object(g.a)({listener:"PseudoWizardDialog",module:"ac/confluence/style/link-style-css"},()=>{const e=i.a.require("ac/confluence/style/link-style-css");e&&"function"==typeof e.addLinkTags&&e.addLinkTags()}),Object(h.a)({listener:"PseudoWizardDialog",globalProperty:"Confluence.Blueprint.loadDialogAndOpenTemplate"},()=>{const{contentBlueprintId:a,templateId:r,itemModuleCompleteKey:o}=e;i.a.Confluence.Blueprint.loadDialogAndOpenTemplate({spaceKey:t,contentBlueprintId:a,templateId:r,initContext:{itemModuleCompleteKey:o,parentPageId:"no-parent-page"===n?null:n}}).then(()=>{this.isOpening=!1,this.forceReloadInNextOpen=!1,Object(p.a)().succeed({name:f.a.BLUEPRINT_WIZARD_LOAD_DIALOG})})})},()=>{Object(p.a)().fail({name:f.a.BLUEPRINT_WIZARD_LOAD_DIALOG,error:new Error("WRM is unavailable")})}))}})}componentDidMount(){Object(d.a)("remove.dialog",this._afterDialogClosed),this.forceReloadInNextOpen=!0,this._setOpenState(this.props.open)}UNSAFE_componentWillReceiveProps(e){this.props.spaceKey!==e.spaceKey&&(this.forceReloadInNextOpen=!0),e.open&&Object(s.a)()}render(){return null}}m.displayName="PseudoWizardCreateDialogComponent",Object(a.a)(m,"defaultProps",{onClose:()=>{}}),Object(a.a)(m,"displayName","PseudoWizardDialog");const y=()=>{const{showBlueprintVariableWizard:e,parentPageId:t,spaceKey:n,onClose:a,blueprint:c}=Object(r.useContext)(l.a);return e?o.a.createElement(m,{parentPageId:t,spaceKey:n,onClose:a,blueprint:c,open:!0}):null}},"7xNx":function(e,t,n){"use strict";var a=n("RfuI"),r=Object(a.a)({name:"packages/confluence-fabric-editor/src/components/EditorBreadcrumbs/EditorBreadcrumbsLoader.ts",loader:()=>Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e("fabric.editor.breadcrumbs~dc51bad7")]).then(n.bind(null,"R0Hm")),loading:()=>null});t.a=r},"7yUP":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u}));n("veKZ");var a=n("aGtI"),r=n.n(a),o=n("BlJA"),c=n.n(o),i=n("Jygk"),l=n.n(i);const s=(e,t,n=[])=>{if(e===t)return!0;const a=r()(c()(e),c()(t));for(const r of a)if(!(n.indexOf(r)>=0)&&e[r]!==t[r])return!1;return!0},d=e=>{0},u=e=>{l.a.performance&&l.a.performance.mark(e)}},HA9u:function(e,t,n){"use strict";var a=n("cxan"),r=n("ERkP"),o=n.n(r),c=n("RfuI"),i=n("7yUP"),l=n("CSJ9"),s=n("Tl5U"),d=n("zjfJ");n("aWzz");class u extends r.PureComponent{constructor(...e){super(...e),Object(d.a)(this,"_renderFuncChildrenWithLoadedData",e=>{const{children:t,editorModule:n,SynchronyProvider:a,featuredMacros:r}=this.props,{Editor:o,EmojiResource:c,ToolbarFeedback:i,WithHelpTrigger:l}=n;return t({Editor:o,EmojiResource:c,ToolbarFeedback:i,WithHelpTrigger:l,editorActions:e,SynchronyProvider:a,featuredMacros:r})})}render(){const{children:e,editorModule:{EditorContext:t,WithEditorActions:n}}=this.props;return"function"!=typeof e?null:o.a.createElement(t,null,o.a.createElement(n,{render:this._renderFuncChildrenWithLoadedData}))}}u.displayName="EditorLoader",Object(d.a)(u,"displayName","EditorLoader");t.a=Object(c.a)({name:"EditorLoader",loader:()=>Promise.all([(async()=>{Object(i.c)("".concat("confluence.fabric.editor.download",".start"));const e=await Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e(1),n.e(3),n.e(5),n.e(6),n.e(7),n.e(11),n.e(12),n.e(15),n.e(16),n.e(23),n.e(28),n.e(27),n.e(29),n.e(33),n.e("@atlaskit_editor-core~4134d62c")]).then(n.bind(null,"Mf5f"));return Object(i.c)("".concat("confluence.fabric.editor.download",".end")),e})(),Promise.all([n.e("graphql.prosemirror-synchrony-plugin.content-reconciler~4134d62c"),n.e("synchrony-plugin~4134d62c")]).then(n.bind(null,"/VC6")),Object(s.c)()]).then(e=>{const[t,n,r]=e;return e=>o.a.createElement(u,Object(a.a)({},e,{editorModule:t,SynchronyProvider:n.Provider,featuredMacros:r}))}),loading:()=>o.a.createElement(l.a,{size:"medium"})})},RZKf:function(e,t,n){"use strict";var a=n("RfuI");t.a=Object(a.a)({name:"packages/confluence-fabric-editor/src/components/ContentEditorBindings/ContentEditorBindingsLoader.ts",loader:()=>Promise.all([n.e(5),n.e(9),n.e(11),n.e("graphql.prosemirror-synchrony-plugin.content-reconciler~4134d62c"),n.e("collab.editor.container~dc51bad7")]).then(n.bind(null,"ktcL")),loading:()=>null})},fE4j:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("ERkP"),r=n.n(a),o=n("7+Q0");const c=r.a.createContext({appearance:o.b.DEFAULT,version:0});c.displayName="PrefetchContentAppearanceContext"},iLhO:function(e,t,n){"use strict";var a=n("zjfJ"),r=n("ERkP"),o=n.n(r),c=n("2srY"),i=n.n(c),l=n("RfuI"),s=n("adTp"),d=n("7+Q0"),u=n("8TdO"),p=n("KD1n"),f=n("H5qd"),b=n.n(f),h=n("j+hl");function g(){const e=Object(p.a)(["\n  query getDraftContentAppearanceProperty($contentId: ID, $status: [String]) {\n    content(id: $contentId, status: $status) {\n      nodes {\n        ...contentAppearanceDraftFragment\n      }\n    }\n  }\n\n  ","\n"]);return g=function(){return e},e}const m=b()(g(),h.a);var y=n("fE4j");n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return P}));const O=Object(l.a)({name:"EditPageLoader",loader:()=>Promise.all([n.e("vendors~4134d62c"),n.e(31),n.e(36),n.e("fabric.editpage~493df0b3")]).then(n.bind(null,"wv4k")),loading:()=>null}),P=Object(l.a)({name:"EditPageDataLoaderLoader",loader:()=>Promise.all([n.e(9),n.e("graphql.prosemirror-synchrony-plugin.content-reconciler~4134d62c"),n.e("fabric.editpage.dataloader~dc51bad7")]).then(n.bind(null,"yRof")),loading:()=>null});class j extends r.PureComponent{constructor(...e){super(...e),Object(a.a)(this,"state",{contentAppearance:null}),Object(a.a)(this,"_fetchContentAppearanceProperty",async()=>{const{contentId:e}=this.props,t=Object(u.getApolloClient)(),n=await t.query({query:m,variables:{contentId:e,status:["current","draft"]},fetchPolicy:"cache-first",errorPolicy:"all",context:{single:"true"}}),a=i()(n.data,"content.nodes[0]");return a?Object(s.b)(a):this._getDefaultContentAppearance()}),Object(a.a)(this,"_getDefaultContentAppearance",()=>({appearance:d.b.DEFAULT,version:0}))}async componentDidMount(){const e=await this._fetchContentAppearanceProperty();this.setState({contentAppearance:e})}render(){const{contentId:e,spaceKey:t,draftShareId:n,priority:a}=this.props,{contentAppearance:c}=this.state;return o.a.createElement(r.Fragment,null,o.a.createElement(P,{priority:a,contentId:e,spaceKey:t,draftShareId:n}),o.a.createElement(y.a.Provider,{value:c},o.a.createElement(O,{priority:a,contentId:e,spaceKey:t,draftShareId:n})))}}j.displayName="Loader";t.c=j},"k8+f":function(e,t,n){"use strict";function a(e){const t=e.split(".");let n=window[t.shift()];for(;void 0!==n&&t.length;)n=n[t.shift()];return n}n.d(t,"a",(function(){return o}));function r(e){0}function o({listener:e,globalProperty:t,interval:n=250},o){if(a(t))return r("window.".concat(t," is already available for use by ").concat(e,".")),o(),null;const c=setInterval(()=>{r("".concat(e," is waiting for window.").concat(t," to be available")),a(t)&&(r("window.".concat(t," now available!")),clearInterval(c),o())},n);return{cancel(){c&&clearInterval(c)}}}},rQmM:function(e,t,n){"use strict";var a=n("RfuI");t.a=Object(a.a)({name:"packages/confluence-fabric-editor/src/components/FullPageEditor/FullPageEditorLoader.ts",loader:()=>Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e(1),n.e(2),n.e(3),n.e(4),n.e(5),n.e(6),n.e(7),n.e(8),n.e(9),n.e(10),n.e(11),n.e(12),n.e(14),n.e(15),n.e(17),n.e(18),n.e(19),n.e(23),n.e(46),n.e(54),n.e(81),n.e("fullpage.editor.container~493df0b3")]).then(n.bind(null,"goqy")),loading:()=>null})}}]);
//# sourceMappingURL=pseudo-wizard-create-dialog~493df0b3.EFLeWbQ1-v39.js.map