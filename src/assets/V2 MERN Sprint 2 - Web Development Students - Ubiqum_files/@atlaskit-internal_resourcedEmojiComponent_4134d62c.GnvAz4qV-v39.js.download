/*! For license information please see @atlaskit-internal_resourcedEmojiComponent~4134d62c.GnvAz4qV-v39.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([["@atlaskit-internal_resourcedEmojiComponent~4134d62c"],{"4CAG":function(e,t,n){"use strict";(function(t){function n(e){var t,n,i,o,a,s,c=Object.create(null);if(this[u]=c,e)if("string"==typeof e)for("?"===e.charAt(0)&&(e=e.slice(1)),a=0,s=(o=e.split("&")).length;a<s;a++)-1<(t=(i=o[a]).indexOf("="))?l(c,h(i.slice(0,t)),h(i.slice(t+1))):i.length&&l(c,h(i),"");else if(r(e))for(a=0,s=e.length;a<s;a++)l(c,(i=e[a])[0],i[1]);else for(n in e)l(c,n,e[n])}var r=Array.isArray,i=n.prototype,o=/[!'\(\)~]|%20|%00/g,a=/\+/g,s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},c=function(e){return s[e]},u="__URLSearchParams__:"+Math.random();function l(e,t,n){t in e?e[t].push(""+n):e[t]=r(n)?n:[""+n]}function h(e){return decodeURIComponent(e.replace(a," "))}function f(e){return encodeURIComponent(e).replace(o,c)}i.append=function(e,t){l(this[u],e,t)},i.delete=function(e){delete this[u][e]},i.get=function(e){var t=this[u];return e in t?t[e][0]:null},i.getAll=function(e){var t=this[u];return e in t?t[e].slice(0):[]},i.has=function(e){return e in this[u]},i.set=function(e,t){this[u][e]=[""+t]},i.forEach=function(e,t){var n=this[u];Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)},i.toJSON=function(){return{}},i.toString=function(){var e,t,n,r,i=this[u],o=[];for(t in i)for(n=f(t),e=0,r=i[t];e<r.length;e++)o.push(n+"="+f(r[e]));return o.join("&")},function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}();"forEach"in e||(e.forEach=function(e,t){var n=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(r){!r.length||r in n||(n[r]=this.getAll(r)).forEach((function(n){e.call(t,n,r,this)}),this)}),this)}),"keys"in e||(e.keys=function(){var e=[];this.forEach((function(t,n){e.push(n)}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),"values"in e||(e.values=function(){var e=[];this.forEach((function(t){e.push(t)}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),"entries"in e||(e.entries=function(){var e=[];this.forEach((function(t,n){e.push([n,t])}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),!t||Symbol.iterator in e||(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var e,t,n,r=this.entries(),i=r.next(),o=i.done,a=[],s=Object.create(null);!o;)t=(n=i.value)[0],a.push(t),t in s||(s[t]=[]),s[t].push(n[1]),o=(i=r.next()).done;for(a.sort(),e=0;e<a.length;e++)this.delete(a[e]);for(e=0;e<a.length;e++)t=a[e],this.append(t,s[t].shift())})}((n=e.exports=t.URLSearchParams||n).prototype)}).call(this,n("fRV1"))},BtZz:function(e,t,n){"use strict";function r(e){return!(0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}n.d(t,"a",(function(){return r}))},F00T:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"requestService",(function(){return f}));var i=function(){function e(){this.listeners=new Set}return e.prototype.subscribe=function(e){this.listeners.add(e),this.lastResult&&e.result(this.lastResult)},e.prototype.unsubscribe=function(e){this.listeners.delete(e)},e.prototype.notifyResult=function(e){this.listeners.forEach((function(t){t.result(e)}))},e.prototype.notifyError=function(e){this.listeners.forEach((function(t){t.error&&t.error(e)}))},e.prototype.notifyInfo=function(e){this.listeners.forEach((function(t){t.info&&t.info(e)}))},e.prototype.notifyNotReady=function(){this.listeners.forEach((function(e){e.notReady&&e.notReady()}))},e}(),o=n("D57K"),a=n("EfWO"),s=n("4CAG"),c=n.n(s),u=c.a.default||c.a,l={},h=function(e,t){if(t)for(var n in t)if({}.hasOwnProperty.call(t,n)){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)e[n]=r[i];else e[n]=r}},f=function(e,t){var n=e.url,r=e.securityProvider,i=e.refreshedSecurityProvider,s=t||l,c=s.path,p=s.queryParams,d=s.requestInit,m=r&&r(),j=function(e,t,n,r){void 0===t&&(t="");var i=new u(a.parse(e).search||void 0);if(e=e.split("?")[0],n)for(var o in n)({}).hasOwnProperty.call(n,o)&&i.append(o,n[o]);if(r&&r.params)for(var o in r.params)if({}.hasOwnProperty.call(r.params,o)){var s=r.params[o];if(Array.isArray(s))for(var c=0;c<s.length;c++)i.append(o,s[c]);else i.append(o,s)}var l="";t&&"/"!==e.substr(-1)&&(l="/");var h=i.toString();return h&&(h="?"+h),""+e+l+t+h}(n,c,p,m),v=function(e,t){var n={};return h(n,t),e&&h(n,e.headers),n}(m,d&&d.headers),b=function(e){return e&&e.omitCredentials?"omit":"include"}(m),g=Object(o.__assign)(Object(o.__assign)({},d),{headers:v,credentials:b});return fetch(j,g).then((function(e){return 204===e.status?Promise.resolve():e.ok?e.json():401===e.status&&i?i().then((function(e){return f({url:n,securityProvider:function(){return e}},t)})):Promise.reject({code:e.status,reason:e.statusText})}))};n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return i}));var p=r},OsBP:function(e,t,n){"use strict";n.r(t);var r=n("D57K"),i=n("aWzz"),o=n("ERkP"),a=n("aJ+w"),s=n("nYST"),c=n("ZhrY"),u=n("T7u3"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.ready=!1,n.state={emoji:void 0,loaded:!1},n}return Object(r.__extends)(t,e),t.prototype.getChildContext=function(){return{emoji:{emojiProvider:this.props.emojiProvider}}},t.prototype.refreshEmoji=function(e,t){var n=this,r=e.findByEmojiId(t);Object(s.n)(r)?(this.setState({loaded:!1}),r.then((function(e){n.ready&&n.setState({emoji:e,loaded:!0})}))):this.setState({emoji:r,loaded:!0})},t.prototype.UNSAFE_componentWillMount=function(){this.ready=!0,this.state.emoji||this.refreshEmoji(this.props.emojiProvider,this.props.emojiId)},t.prototype.componentWillUnmount=function(){this.ready=!1},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.emojiProvider===this.props.emojiProvider&&e.emojiId===this.props.emojiId||this.refreshEmoji(e.emojiProvider,e.emojiId)},t.prototype.render=function(){var e=this.props,t=e.emojiId,n=e.fitToHeight,r=void 0===n?a.f:n,i=e.showTooltip,s=this.state,l=s.emoji,h=s.loaded,f=t.shortName,p=t.fallback;return l?this.emojiWrapper(o.createElement(c.a,{emoji:l,showTooltip:i,fitToHeight:r})):h?this.emojiWrapper(o.createElement("span",null,p||f)):this.emojiWrapper(o.createElement(u.a,{shortName:f,showTooltip:i,size:r||a.f}))},t.prototype.emojiWrapper=function(e){var t=this.props.emojiId,n=t.shortName,r=t.id,i=t.fallback;return o.createElement("span",{"data-emoji-id":r,"data-emoji-short-name":n,"data-emoji-text":i||n},e)},t.childContextTypes={emoji:i.object},t}(o.Component);t.default=l},ZhrY:function(e,t,n){"use strict";var r=n("D57K"),i=n("aWzz"),o=n("ERkP"),a=n("xN70"),s=n("nYST"),c=n("rhKZ"),u=n("sdcR"),l=n("T7u3"),h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.mounted=!1,r.handleLoadError=function(e,t){!r.state.invalidImage&&t&&r.setState({cachedEmoji:r.loadEmoji(t,r.context,!0)})},r.state={cachedEmoji:r.loadEmoji(t.emoji,n,!1)},r}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.UNSAFE_componentWillReceiveProps=function(e,t){e.emoji!==this.props.emoji&&this.mounted&&this.setState({cachedEmoji:this.loadEmoji(e.emoji,t,!1)})},t.prototype.loadEmoji=function(e,t,n){var r=this;if(t.emoji){var i=t.emoji.emojiProvider;if(i){var o=this.props.fitToHeight,u=Object(a.d)(e,o);if(i.optimisticMediaRendering(e,u)&&!n)return Object(c.a)("Optimistic rendering",e.shortName),e;Object(c.a)("Loading image via media cache",e.shortName);var l=i.loadMediaEmoji(e,u);if(!Object(s.n)(l))return Object(s.f)(l)?l:void 0;l.then((function(e){r.mounted&&r.setState({cachedEmoji:e,invalidImage:!e})})).catch((function(){r.mounted&&r.setState({cachedEmoji:void 0,invalidImage:!0})}))}}},t.prototype.render=function(){var e,t=this.state.cachedEmoji,n=this.props,i=(n.children,n.placeholderSize,Object(r.__rest)(n,["children","placeholderSize"]));if(t)e=o.createElement(u.a,Object(r.__assign)({},i,{emoji:t,onLoadError:this.handleLoadError}));else{var a=this.props,s=a.emoji,c=a.placeholderSize,h=a.showTooltip,f=a.fitToHeight,p=s.shortName,d=s.representation;e=o.createElement(l.a,{size:f||c,shortName:p,showTooltip:h,representation:d})}return e},t.contextTypes={emoji:i.object},t}(o.PureComponent);t.a=function(e){e.placeholderSize;var t=Object(r.__rest)(e,["placeholderSize"]);return Object(s.k)(e.emoji)?o.createElement(h,Object(r.__assign)({},e)):o.createElement(u.a,Object(r.__assign)({},t))}},rhKZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=!1;function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];i&&console.log.apply(console,Object(r.__spread)([e],t))}},sdcR:function(e,t,n){"use strict";var r=n("D57K"),i=n("/sMe"),o=n("wMvT"),a=n.n(o),s=n("dDc+"),c=n("IJlJ"),u=n("O94r"),l=n.n(u),h=n("ERkP"),f=n("xN70"),p=n("aJ+w"),d=n("nYST"),m=n("BtZz"),j=n("dHKo"),v=function(e,t){if(!(t.target instanceof Element&&t.target.getAttribute("aria-label")===p.g)){var n=e.emoji,r=e.onSelected;t.preventDefault(),r&&Object(m.a)(t)&&r(Object(d.q)(n),n,t)}},b=function(e,t){var n=e.emoji,r=e.onMouseMove;r&&r(Object(d.q)(n),n,t)},g=function(e){var t,n,o,u,m=e.emoji,g=e.fitToHeight,y=e.selected,E=e.selectOnHover,O=e.className,_=e.showTooltip,S=e.showDelete,P=((t={})[j.k]=!0,t[j.p]=!0,t[j.F]=y,t[j.E]=E,t);O&&(P[O]=!0);var w,x=Object(f.d)(m,g)?m.altRepresentation:m.representation;Object(d.i)(x)?(u=x.imagePath,n=x.width,o=x.height):Object(d.l)(x)&&(u=x.mediaPath,n=x.width,o=x.height),S&&(w=h.createElement("span",{className:j.g},h.createElement(i.a,{iconBefore:h.createElement(a.a,{label:p.g,primaryColor:s.colors.N500,size:"small"}),onClick:function(t){return function(e,t){var n=e.emoji,r=e.onDelete;r&&r(Object(d.q)(n),n,t)}(e,t)},appearance:"subtle-link",spacing:"none"})));var N={};g&&n&&o&&(N={width:g/o*n,height:g});var R=h.createElement("img",Object(r.__assign)({src:u,key:u,alt:m.shortName,"data-emoji-short-name":m.shortName,"data-emoji-id":m.id,"data-emoji-text":m.fallback||m.shortName,className:"emoji",style:{visibility:"visible"},onError:function(t){!function(e,t){var n=e.emoji,r=e.onLoadError;t.target&&(t.target.style.visibility="hidden");r&&r(Object(d.q)(n),n,t)}(e,t)}},N));return h.createElement("span",{className:l()(P),onMouseDown:function(t){v(e,t)},onMouseMove:function(t){b(e,t)},"aria-label":m.shortName},w,_?h.createElement(c.a,{tag:"span",content:m.shortName},R):R)};t.a=function(e){var t=e.emoji;return Object(d.o)(t.representation)?function(e){var t,n=e.emoji,i=e.fitToHeight,o=e.selected,a=e.selectOnHover,s=e.className,u=e.showTooltip,f=n.representation,p=f.sprite,d=((t={})[j.n]=!0,t[j.p]=!0,t[j.F]=o,t[j.E]=a,t);s&&(d[s]=!0);var m={};i&&(m={width:i+"px",height:i+"px"});var g=100/(p.column-1)*(f.xIndex-0),y=100/(p.row-1)*(f.yIndex-0),E=Object(r.__assign)({backgroundImage:"url("+p.url+")",backgroundPosition:g+"% "+y+"%",backgroundSize:100*p.column+"% "+100*p.row+"%"},m),O=h.createElement("span",{className:j.t,style:E}," ");return h.createElement("span",{className:l()(d),onMouseDown:function(t){v(e,t)},onMouseMove:function(t){b(e,t)},"aria-label":n.shortName},u?h.createElement(c.a,{tag:"span",content:n.shortName},O):O)}(e):g(e)}},xN70:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return d}));var r=n("D57K"),i=n("F00T"),o=n("nYST"),a=n("rhKZ"),s=function(e,t){var n=e.getRatio,o=void 0===n?u:n,a=Object(r.__rest)(e,["getRatio"]),s=c(o),l=t||{},h=l.queryParams,f=void 0===h?{}:h,p=Object(r.__rest)(l,["queryParams"]),d=Object(r.__assign)(Object(r.__assign)({},p),{queryParams:Object(r.__assign)(Object(r.__assign)({},s),f)});return i.b.requestService(a,d)},c=function(e){return e()>1?{scale:"XHDPI",altScale:"XXXHDPI"}:{altScale:"XHDPI"}},u=function(){return window.devicePixelRatio},l=function(e){return e[c(u).altScale]},h=function(e,t){if(Object(o.p)(e)&&t&&t.spriteSheets){var n=e,r=n.height,i=n.width,s=n.x,c=n.y,u=n.xIndex,l=n.yIndex,h=n.spriteRef,f=t.spriteSheets[h];if(f)return{sprite:f,height:r,width:i,x:s,y:c,xIndex:u,yIndex:l}}else if(Object(o.i)(e)){r=e.height,i=e.width;var p=e.imagePath;return function(e,t){return!(!t||!t.mediaApiToken||0!==e.indexOf(t.mediaApiToken.url))}(p,t)?Object(o.c)(e):{height:r,width:i,imagePath:p}}Object(a.a)("failed conversion for representation",e,t)},f=function(e,t){return e&&e!=={}?h(l(e),t):void 0},p=function(e){return{emojis:e.emojis.map((function(t){var n=h(t.representation,e.meta),i=f(t.altRepresentations,e.meta),a=function(e,t){if(!e.skinVariations)return[];var n=e.skinVariations,i=e.id;return n.map((function(e){var n=e.representation,o=e.altRepresentations,a=Object(r.__rest)(e,["representation","altRepresentations"]);return Object(r.__assign)({baseId:i,representation:h(n,t),altRepresentation:f(o,t)},a)}))}(t,e.meta),s=(t.representation,t.skinVariations,t.altRepresentations,Object(r.__rest)(t,["representation","skinVariations","altRepresentations"])),c=Object(r.__assign)(Object(r.__assign)({},s),{representation:n,skinVariations:a});return Object(o.a)(c,i)})),mediaApiToken:e.meta&&e.meta.mediaApiToken}},d=function(e,t){return!!(t&&e.altRepresentation&&function(e){return u()>1?2*e:e}(t)>e.representation.height)}}}]);
//# sourceMappingURL=@atlaskit-internal_resourcedEmojiComponent~4134d62c.GnvAz4qV-v39.js.map