/*! For license information please see 15.Grxom1tJ-v39.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"4CAG":function(e,t,n){"use strict";(function(t){function n(e){var t,n,i,o,s,a,c=Object.create(null);if(this[u]=c,e)if("string"==typeof e)for("?"===e.charAt(0)&&(e=e.slice(1)),s=0,a=(o=e.split("&")).length;s<a;s++)-1<(t=(i=o[s]).indexOf("="))?f(c,h(i.slice(0,t)),h(i.slice(t+1))):i.length&&f(c,h(i),"");else if(r(e))for(s=0,a=e.length;s<a;s++)f(c,(i=e[s])[0],i[1]);else for(n in e)f(c,n,e[n])}var r=Array.isArray,i=n.prototype,o=/[!'\(\)~]|%20|%00/g,s=/\+/g,a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},c=function(e){return a[e]},u="__URLSearchParams__:"+Math.random();function f(e,t,n){t in e?e[t].push(""+n):e[t]=r(n)?n:[""+n]}function h(e){return decodeURIComponent(e.replace(s," "))}function l(e){return encodeURIComponent(e).replace(o,c)}i.append=function(e,t){f(this[u],e,t)},i.delete=function(e){delete this[u][e]},i.get=function(e){var t=this[u];return e in t?t[e][0]:null},i.getAll=function(e){var t=this[u];return e in t?t[e].slice(0):[]},i.has=function(e){return e in this[u]},i.set=function(e,t){this[u][e]=[""+t]},i.forEach=function(e,t){var n=this[u];Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)},i.toJSON=function(){return{}},i.toString=function(){var e,t,n,r,i=this[u],o=[];for(t in i)for(n=l(t),e=0,r=i[t];e<r.length;e++)o.push(n+"="+l(r[e]));return o.join("&")},function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}();"forEach"in e||(e.forEach=function(e,t){var n=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(r){!r.length||r in n||(n[r]=this.getAll(r)).forEach((function(n){e.call(t,n,r,this)}),this)}),this)}),"keys"in e||(e.keys=function(){var e=[];this.forEach((function(t,n){e.push(n)}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),"values"in e||(e.values=function(){var e=[];this.forEach((function(t){e.push(t)}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),"entries"in e||(e.entries=function(){var e=[];this.forEach((function(t,n){e.push([n,t])}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),!t||Symbol.iterator in e||(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var e,t,n,r=this.entries(),i=r.next(),o=i.done,s=[],a=Object.create(null);!o;)t=(n=i.value)[0],s.push(t),t in a||(a[t]=[]),a[t].push(n[1]),o=(i=r.next()).done;for(s.sort(),e=0;e<s.length;e++)this.delete(s[e]);for(e=0;e<s.length;e++)t=s[e],this.append(t,a[t].shift())})}((n=e.exports=t.URLSearchParams||n).prototype)}).call(this,n("fRV1"))},Bq3e:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("F00T"),o=n("cDcQ"),s=n("mV1e"),a=function(){return{params:{},headers:{}}},c=function(){function e(){this.changeListeners=new Map,this.allResultsListeners=new Map,this.errListeners=new Map,this.infoListeners=new Map}return e.prototype.subscribe=function(e,t,n,r,i){t&&this.changeListeners.set(e,t),n&&this.errListeners.set(e,n),r&&this.infoListeners.set(e,r),i&&this.allResultsListeners.set(e,i)},e.prototype.unsubscribe=function(e){this.changeListeners.delete(e),this.errListeners.delete(e),this.infoListeners.delete(e),this.allResultsListeners.delete(e)},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.shouldHighlightMention=function(e){return!1},t.prototype.filter=function(e){throw new Error("not yet implemented.\nParams: query="+e)},t.prototype.recordMentionSelection=function(e){},t.prototype.isFiltering=function(e){return!1},t.prototype._notifyListeners=function(e,t){Object(s.a)("ak-mention-resource._notifyListeners",e&&e.mentions&&e.mentions.length,this.changeListeners),this.changeListeners.forEach((function(n,r){try{n(e.mentions.slice(0,20),e.query,t)}catch(e){Object(s.a)("error from listener '"+r+"', ignoring",e)}}))},t.prototype._notifyAllResultsListeners=function(e){Object(s.a)("ak-mention-resource._notifyAllResultsListeners",e&&e.mentions&&e.mentions.length,this.changeListeners),this.allResultsListeners.forEach((function(t,n){try{t(e.mentions.slice(0,20),e.query)}catch(e){Object(s.a)("error from listener '"+n+"', ignoring",e)}}))},t.prototype._notifyErrorListeners=function(e,t){this.errListeners.forEach((function(n,r){try{n(e,t)}catch(e){Object(s.a)("error from listener '"+r+"', ignoring",e)}}))},t.prototype._notifyInfoListeners=function(e){this.infoListeners.forEach((function(t,n){try{t(e)}catch(e){Object(s.a)("error from listener '"+n+"', ignoring",e)}}))},t}(c),f=function(e){function t(t){var n=e.call(this)||this;return n.verifyMentionConfig(t),n.config=t,n.lastReturnedSearch=0,n.activeSearches=new Set,n}return Object(r.__extends)(t,e),t.prototype.shouldHighlightMention=function(e){return!!this.config.shouldHighlightMention&&this.config.shouldHighlightMention(e)},t.prototype.notify=function(e,t,n){if(e>this.lastReturnedSearch)this.lastReturnedSearch=e,this._notifyListeners(t,{duration:Date.now()-e});else{var r=new Date(e).toISOString().substr(17,6);Object(s.a)("Stale search result, skipping",r,n)}this._notifyAllResultsListeners(t)},t.prototype.notifyError=function(e,t){this._notifyErrorListeners(e,t),t&&this.activeSearches.delete(t)},t.prototype.filter=function(e,t){var n=this,r=Date.now();e?(this.activeSearches.add(e),this.search(e,t).mentions.then((function(t){n.notify(r,t,e)}),(function(t){return n.notifyError(t,e)}))):this.initialState(t).then((function(t){return n.notify(r,t,e)}),(function(t){return n.notifyError(t,e)}))},t.prototype.recordMentionSelection=function(e,t){return this.recordSelection(e,t).then((function(){}),(function(e){return Object(s.a)("error recording mention selection: "+e,e)}))},t.prototype.isFiltering=function(e){return this.activeSearches.has(e)},t.prototype.resolveMentionName=function(e){return this.config.mentionNameResolver?this.config.mentionNameResolver.lookupName(e):{id:e,name:"",status:o.a.UNKNOWN}},t.prototype.cacheMentionName=function(e,t){this.config.mentionNameResolver&&this.config.mentionNameResolver.cacheName(e,t)},t.prototype.supportsMentionNameResolving=function(){return!!this.config.mentionNameResolver},t.prototype.updateActiveSearches=function(e){this.activeSearches.add(e)},t.prototype.verifyMentionConfig=function(e){if(!e.url)throw new Error("config.url is a required parameter");e.securityProvider||(e.securityProvider=a)},t.prototype.initialState=function(e){return this.remoteInitialState(e)},t.prototype.clearContext=function(e){return void 0===e&&(e={}),Object.keys(e).filter((function(t){return e[t]})).reduce((function(t,n){var i;return Object(r.__assign)(((i={})[n]=e[n],i),t)}),{})},t.prototype.getQueryParams=function(e){var t={};return this.config.containerId&&(t.containerId=this.config.containerId),this.config.productId&&(t.productIdentifier=this.config.productId),Object(r.__assign)(Object(r.__assign)({},t),this.clearContext(e))},t.prototype.remoteInitialState=function(e){var t=this,n={path:"bootstrap",queryParams:this.getQueryParams(e)};return i.b.requestService(this.config,n).then((function(e){return t.transformServiceResponse(e,"")}))},t.prototype.search=function(e,t){return{mentions:this.remoteSearch(e,t)}},t.prototype.remoteSearch=function(e,t){var n=this,o={path:"search",queryParams:Object(r.__assign)({query:e,limit:100},this.getQueryParams(t))};return i.b.requestService(this.config,o).then((function(t){return n.transformServiceResponse(t,e)}))},t.prototype.transformServiceResponse=function(e,t){var n=e.mentions.map((function(e){var n;return Object(o.e)(e)?n=e.userType:Object(o.j)(e)&&(n=e.userType),Object(r.__assign)(Object(r.__assign)({},e),{lozenge:n,query:t})}));return Object(r.__assign)(Object(r.__assign)({},e),{mentions:n,query:e.query||t})},t.prototype.recordSelection=function(e,t){var n={path:"record",queryParams:Object(r.__assign)({selectedUserId:e.id},this.getQueryParams(t)),requestInit:{method:"POST"}};return i.b.requestService(this.config,n)},t}(u),h=function(e){return!!(e&&e.supportsMentionNameResolving&&e.supportsMentionNameResolving())};t.c=f},F00T:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"requestService",(function(){return l}));var i=function(){function e(){this.listeners=new Set}return e.prototype.subscribe=function(e){this.listeners.add(e),this.lastResult&&e.result(this.lastResult)},e.prototype.unsubscribe=function(e){this.listeners.delete(e)},e.prototype.notifyResult=function(e){this.listeners.forEach((function(t){t.result(e)}))},e.prototype.notifyError=function(e){this.listeners.forEach((function(t){t.error&&t.error(e)}))},e.prototype.notifyInfo=function(e){this.listeners.forEach((function(t){t.info&&t.info(e)}))},e.prototype.notifyNotReady=function(){this.listeners.forEach((function(e){e.notReady&&e.notReady()}))},e}(),o=n("D57K"),s=n("EfWO"),a=n("4CAG"),c=n.n(a),u=c.a.default||c.a,f={},h=function(e,t){if(t)for(var n in t)if({}.hasOwnProperty.call(t,n)){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)e[n]=r[i];else e[n]=r}},l=function(e,t){var n=e.url,r=e.securityProvider,i=e.refreshedSecurityProvider,a=t||f,c=a.path,p=a.queryParams,d=a.requestInit,y=r&&r(),m=function(e,t,n,r){void 0===t&&(t="");var i=new u(s.parse(e).search||void 0);if(e=e.split("?")[0],n)for(var o in n)({}).hasOwnProperty.call(n,o)&&i.append(o,n[o]);if(r&&r.params)for(var o in r.params)if({}.hasOwnProperty.call(r.params,o)){var a=r.params[o];if(Array.isArray(a))for(var c=0;c<a.length;c++)i.append(o,a[c]);else i.append(o,a)}var f="";t&&"/"!==e.substr(-1)&&(f="/");var h=i.toString();return h&&(h="?"+h),""+e+f+t+h}(n,c,p,y),g=function(e,t){var n={};return h(n,t),e&&h(n,e.headers),n}(y,d&&d.headers),v=function(e){return e&&e.omitCredentials?"omit":"include"}(y),b=Object(o.__assign)(Object(o.__assign)({},d),{headers:g,credentials:v});return fetch(m,b).then((function(e){return 204===e.status?Promise.resolve():e.ok?e.json():401===e.status&&i?i().then((function(e){return l({url:n,securityProvider:function(){return e}},t)})):Promise.reject({code:e.status,reason:e.statusText})}))};n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return i}));var p=r},NvSU:function(e,t,n){"use strict";var r=n("D57K"),i=n("mV1e"),o=n("Bq3e"),s=function(){function e(e,t){this.presence=e,this.expiry=Date.now()+t}return e.prototype.expired=function(){return Date.now()>this.expiry},e}(),a=function(e){function t(n){var r=e.call(this)||this;if(!n.url)throw new Error("config.url is a required parameter");if(!n.cloudId)throw new Error("config.cloudId is a required parameter");return r.config=n,r.config.url=t.cleanUrl(n.url),r.presenceCache=n.cache||new c(n.cacheExpiry),r.presenceParser=n.parser||new u,r}return Object(r.__extends)(t,e),t.prototype.refreshPresence=function(e){var t=this.presenceCache.getBulk(e);this.notifyListeners(t);var n=this.presenceCache.getMissingUserIds(e);n.length&&this.retrievePresence(n)},t.prototype.retrievePresence=function(e){var t=this;this.queryDirectoryForPresences(e).then((function(e){return t.presenceParser.parse(e)})).then((function(e){t.notifyListeners(e),t.presenceCache.update(e)}))},t.prototype.queryDirectoryForPresences=function(e){var t={query:"query getPresenceForMentions($organizationId: String!, $userIds: [String!], $productId: String) {\n                PresenceBulk(organizationId: $organizationId, product: $productId, userIds: $userIds) {\n                  userId\n                  state\n                  stateMetadata\n                }\n              }",variables:{organizationId:this.config.cloudId,userIds:e}};this.config.productId&&(t.variables.productId=this.config.productId);var n={method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)};return fetch(this.config.url,n).then((function(e){return e.json()}))},t.cleanUrl=function(e){return"/"!==e.substr(-1)&&(e+="/"),e},t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.refreshPresence=function(e){throw new Error("not yet implemented.\nParams: userIds="+e)},t.prototype.notifyListeners=function(e){this.changeListeners.forEach((function(t,n){try{t(e)}catch(e){Object(i.a)("error from listener '"+n+"', ignoring",e)}}))},t}(o.b)),c=function(){function e(t,n){this.expiryInMillis=t||e.defaultTimeout,this.flushTrigger=n||e.defaultFlushTrigger,this.cache={},this.size=0}return e.prototype._delete=function(e){delete this.cache[e],this.size--},e.prototype._deleteIfExpired=function(e){this.contains(e)&&this.cache[e].expired()&&this._delete(e)},e.prototype._removeExpired=function(){var e=this;Object.keys(this.cache).forEach((function(t){e._deleteIfExpired(t)}))},e.prototype.contains=function(e){return this.cache.hasOwnProperty(e)},e.prototype.get=function(e){return this._deleteIfExpired(e),this.contains(e)?this.cache[e].presence:{}},e.prototype.getBulk=function(e){var t,n,i={};try{for(var o=Object(r.__values)(e),s=o.next();!s.done;s=o.next()){var a=s.value;this.contains(a)&&(i[a]=this.get(a))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.getMissingUserIds=function(e){var t=this;return e.filter((function(e){return!t.contains(e)}))},e.prototype.update=function(e){var t=this;this.size>=this.flushTrigger&&this._removeExpired(),Object.keys(e).forEach((function(n){t.cache[n]=new s(e[n],t.expiryInMillis),t.size++}))},e.defaultTimeout=2e4,e.defaultFlushTrigger=50,e}(),u=function(){function e(){}return e.prototype.mapState=function(e){return"unavailable"===e?"offline":"available"===e?"online":e},e.prototype.parse=function(t){var n,i,o={};if(t.hasOwnProperty("data")&&t.data.hasOwnProperty("PresenceBulk")){var s=t.data.PresenceBulk;try{for(var a=Object(r.__values)(s),c=a.next();!c.done;c=a.next()){var u=c.value;if(u.userId&&u.state){var f=e.extractState(u)||u.state;o[u.userId]={status:this.mapState(f)}}else u.hasOwnProperty("userId")&&u.hasOwnProperty("state")||console.error("Unexpected response from presence service contains keys: "+Object.keys(u))}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}return o},e.extractState=function(t){return e.isFocusState(t)?e.FOCUS_STATE:t.state},e.isFocusState=function(e){if(e.stateMetadata)try{var t=JSON.parse(e.stateMetadata);return t&&!!t.focus}catch(t){console.error("Failed to parse presence's stateMetadata for user with id "+e.userId+": "+e.stateMetadata),console.error(t)}return!1},e.FOCUS_STATE="focus",e}();t.a=a},cDcQ:function(e,t,n){"use strict";var r,i,o,s;function a(e){return!!e&&e!==i[i.CONTAINER]}function c(e){return!!e.userType&&e.userType===o[o.SPECIAL]}function u(e){return e.userType&&e.userType===o[o.APP]}function f(e){return e.userType&&e.userType===o[o.TEAM]}function h(e){return e&&("@all"===e||"@here"===e)}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"j",(function(){return f})),n.d(t,"i",(function(){return h})),n.d(t,"f",(function(){return l})),function(e){e[e.SELF=0]="SELF",e[e.RESTRICTED=1]="RESTRICTED",e[e.DEFAULT=2]="DEFAULT"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.SITE=1]="SITE",e[e.APPLICATION=2]="APPLICATION",e[e.CONTAINER=3]="CONTAINER"}(i||(i={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SPECIAL=1]="SPECIAL",e[e.APP=2]="APP",e[e.TEAM=3]="TEAM",e[e.SYSTEM=4]="SYSTEM"}(o||(o={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SERVICE_ERROR=1]="SERVICE_ERROR",e[e.OK=2]="OK"}(s||(s={}));var l=function(e){return!(!e||!e.then)}},jkYY:function(e,t,n){"use strict";var r=n("D57K"),i=n("F00T"),o=n("cDcQ"),s=n("Bq3e"),a=n("mV1e"),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.lastSearchQuery="",r.mentionTypeaheadHighlightEnabled=function(){return r.teamMentionConfig.teamHighlightEnabled||!1},r.mentionTypeaheadCreateTeamPath=function(){return r.teamMentionConfig.createTeamPath},r.verifyMentionConfig(n),r.teamMentionConfig=n,r.lastReturnedSearchTeam=0,r}return Object(r.__extends)(t,e),t.prototype.filter=function(e,t){if(this.lastSearchQuery=e,e){this.updateActiveSearches(e);var n=this.remoteUserSearch(e,t),r=this.remoteTeamSearch(e,t);this.handleBothRequests(e,n,r)}else this.remoteInitialStateTeamAndUsers(t)},t.prototype.remoteInitialStateTeamAndUsers=function(t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o,s,a;return Object(r.__generator)(this,(function(r){return"",n=e.prototype.remoteInitialState.call(this,t),o=this.getQueryParamsOfTeamMentionConfig(t),s={path:"bootstrap",queryParams:o},a=i.b.requestService(this.teamMentionConfig,s),this.handleBothRequests("",n,a),[2]}))}))},t.prototype.handleBothRequests=function(t,n,i){return Object(r.__awaiter)(this,void 0,void 0,(function(){var o,s,c,u,f,h,l,p,d,y=this;return Object(r.__generator)(this,(function(m){switch(m.label){case 0:o=Date.now(),s={mentions:[],query:t},c=function(n,i){t===y.lastSearchQuery&&(s={mentions:Object(r.__spread)(s.mentions,n.mentions),query:t},i?y.notify(o,s,t):e.prototype.notify.call(y,o,s,t))},f=null,h=null,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,n];case 2:return u=m.sent(),c(u,!1),[3,4];case 3:return l=m.sent(),f=l,[3,4];case 4:return m.trys.push([4,6,,7]),[4,i];case 5:return p=m.sent(),c(Array.isArray(p)?this.convertTeamResultToMentionResult(p,t):p,!0),[3,7];case 6:return d=m.sent(),h=d,[3,7];case 7:return f&&h&&(this.notifyError(f,t),Object(a.a)("User mention request fails. ",f),Object(a.a)("Team mention request fails. ",h)),[2]}}))}))},t.prototype.notify=function(e,t,n){if(e>this.lastReturnedSearchTeam)this.lastReturnedSearchTeam=e,this._notifyListeners(t,{teamMentionDuration:Date.now()-e});else{var r=new Date(e).toISOString().substr(17,6);Object(a.a)("Stale search result, skipping",r,n)}this._notifyAllResultsListeners(t)},t.prototype.getQueryParamsOfTeamMentionConfig=function(e){var t={};return this.teamMentionConfig.containerId&&(t.containerId=this.teamMentionConfig.containerId),this.teamMentionConfig.productId&&(t.productIdentifier=this.teamMentionConfig.productId),Object(r.__assign)(Object(r.__assign)({},t),e)},t.prototype.remoteUserSearch=function(t,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(r){return[2,e.prototype.remoteSearch.call(this,t,n)]}))}))},t.prototype.remoteTeamSearch=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o;return Object(r.__generator)(this,(function(s){switch(s.label){case 0:return n={path:"search",queryParams:Object(r.__assign)({query:e,limit:20},this.getQueryParamsOfTeamMentionConfig(t))},[4,i.b.requestService(this.teamMentionConfig,n)];case 1:return o=s.sent(),[2,this.convertTeamResultToMentionResult(o,e)]}}))}))},t.prototype.convertTeamResultToMentionResult=function(e,t){var n=this,r=this.teamMentionConfig.teamLinkResolver;return{mentions:e.map((function(e){var t="",i=window.location.origin+"/people/team/"+e.id;return"function"==typeof r&&(t=r(e.id)),{id:n.trimTeamARI(e.id),avatarUrl:e.smallAvatarImageUrl,name:e.displayName,accessLevel:o.c[o.c.CONTAINER],userType:o.d[o.d.TEAM],highlight:e.highlight,context:{members:e.members,includesYou:e.includesYou,memberCount:e.memberCount,teamLink:t||i}}})),query:t}},t.prototype.trimTeamARI=function(e){void 0===e&&(e="");return e.replace("ari:cloud:teams::team/","")},t}(s.c);t.a=c},mV1e:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=!1;function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];i&&console.log.apply(console,Object(r.__spread)([e],t))}}}]);
//# sourceMappingURL=15.Grxom1tJ-v39.js.map