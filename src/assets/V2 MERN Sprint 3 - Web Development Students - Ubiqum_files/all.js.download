var AP=function(){function n(){}function u(a,b){return function(){a.apply(b,arguments)}}function h(a){if(!(this instanceof h))throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];e(a,this)}function v(a,b){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(b):(a._handled=!0,h._immediateFn(function(){var c=1===a._state?b.onFulfilled:b.onRejected;if(null===
c)(1===a._state?q:y)(b.promise,a._value);else{var d;try{d=c(a._value)}catch(m){y(b.promise,m);return}q(b.promise,d)}}))}function q(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"===("undefined"===typeof b?"undefined":B(b))||"function"===typeof b)){var c=b.then;if(b instanceof h){a._state=3;a._value=b;g(a);return}if("function"===typeof c){e(u(c,b),a);return}}a._state=1;a._value=b;g(a)}catch(d){y(a,d)}}function y(a,b){a._state=2;a._value=b;g(a)}function g(a){2===
a._state&&0===a._deferreds.length&&h._immediateFn(function(){a._handled||h._unhandledRejectionFn(a._value)});for(var b=0,c=a._deferreds.length;b<c;b++)v(a,a._deferreds[b]);a._deferreds=null}function z(a,b,c){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.promise=c}function e(a,b){var c=!1;try{a(function(d){c||(c=!0,q(b,d))},function(d){c||(c=!0,y(b,d))})}catch(d){c||(c=!0,y(b,d))}}function f(a,b){b=b||da;var c=[];if(a)if("string"===typeof a)a=b.querySelectorAll(a),
a=Array.prototype.slice.call(a),Array.prototype.push.apply(c,a);else if(1===a.nodeType)c.push(a);else if(a===window)c.push(a);else if("function"===typeof a)f.onDomLoad(a);p.extend(c,{each:function(c){X(this,c);return this},bind:function(c,b){this.each(function(d,a){this.bind(a,c,b)})},attr:function(c){var d;this.each(function(b,a){d=a[c]||a.getAttribute&&a.getAttribute(c);return!d});return d},removeClass:function(c){return this.each(function(d,b){b.className&&(b.className=b.className.replace(new RegExp("(^|\\s)"+
c+"(\\s|$)")," "))})},html:function(c){return this.each(function(d,b){b.innerHTML=c})},append:function(c){return this.each(function(d,a){var m=b.createElement(c.tag);X(c,function(c,d){"$text"===c?m.styleSheet?m.styleSheet.cssText=d:m.appendChild(b.createTextNode(d)):"tag"!==c&&(m[c]=d)});a.appendChild(m)})}});return c}function r(a,b){a+="EventListener";b+="Event";return function(c,d,m){if(c[a])c[a](d,m,!1);else if(c[b])c[b]("on"+d,m)}}function A(){var a=f(".ac-content, #content");return 0<a.length?
a[0]:document.body}function D(){this.q=[];this.add=function(c){this.q.push(c)};var a,b;this.call=function(){a=0;for(b=this.q.length;a<b;a++)this.q[a].call()}}function F(a,b){if(!a.resizedAttached)a.resizedAttached=new D,a.resizedAttached.add(b);else if(a.resizedAttached){a.resizedAttached.add(b);return}"BODY"===a.nodeName&&["padding","margin"].forEach(function(c){a.style[c+"-bottom"]="0px";a.style[c+"-top"]="0px"},this);a.resizeSensor=document.createElement("div");a.resizeSensor.className="ac-resize-sensor";
a.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;";a.resizeSensor.innerHTML='<div class="ac-resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0;"></div></div><div class="ac-resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; width: 200%; height: 200%"></div></div>';
a.appendChild(a.resizeSensor);"BODY"!==a.nodeName&&window.getComputedStyle&&"static"===window.getComputedStyle(a).position&&(a.style.position="relative");var c=a.resizeSensor.childNodes[0],d=c.childNodes[0],m=a.resizeSensor.childNodes[1],l,w,e=function(){d.style.width=c.offsetWidth+10+"px";d.style.height=c.offsetHeight+10+"px";c.scrollLeft=c.scrollWidth;c.scrollTop=c.scrollHeight;m.scrollLeft=m.scrollWidth;m.scrollTop=m.scrollHeight;l=a.offsetWidth;w=a.offsetHeight};e();b=function(){(a.offsetWidth!==
l||a.offsetHeight!==w)&&a.resizedAttached&&a.resizedAttached.call();e()};c.addEventListener("scroll",b);m.addEventListener("scroll",b);b=new MutationObserver(b);a.resizeObserver=b;b.observe(a,{attributes:!0,attributeFilter:["style"]})}function H(a,b){var c,d;if(a)if(c=a.length,null!=c&&"function"!==typeof a)for(d=0;d<c&&!1!==b.call(a[d],d,a[d]);)d+=1;else for(d in a)if(a.hasOwnProperty(d)&&!1===b.call(a[d],d,a[d]))break}function t(a,b){a+="EventListener";b+="Event";return function(c,d,m){if(c[a])c[a](d,
m,!1);else if(c[b])c[b]("on"+d,m)}}function Y(){var a=this.console;if(a&&a.log){var b=[].slice.call(arguments);if(a.log.apply)a.log.apply(a,b);else{for(var c=0,d=b.length;c<d;c+=1)b[c]=JSON.stringify(b[c]);a.log(b.join(" "))}return!0}}function ea(a,b){if((a=I[a])&&0!==a.length)try{a.forEach(function(c){c.call(null,b)})}catch(c){console.error(c)}}function fa(a,b){var c=I[a],d="close"!==a,m=null;if(!d||"undefined"!==typeof b.button){"submit"===a&&k.dialog._disableCloseOnSubmit&&(d=!1);try{c&&(b&&b.button&&
b.button.name&&(m=k.dialog.getButton(b.button.name)),d=c.reduce(function(c,d){return d.call(m,b)&&c},d))}catch(l){console.error(l)}finally{delete I[a]}d&&k.dialog.close()}}function R(a,b){"function"===typeof b&&(I[a]||(I[a]=[]),I[a].push(b))}function Z(a,b){var c=[],d=0,m=a.length;if(a&&0<a.length)for(;d<m;d+=1){var l=aa(a[d]);c.push(l);if(c.length===m){for(var l=[],w=0;w<m;w+=1)l[w]=c[w].exports;b&&b.apply(window,l)}}else b&&b()}function aa(a){if(N[a])return N[a];var b=ga(a);return b?N[a]=b:N[a]=
{name:a,exports:function(){function c(){var d=c.__target__;if(d)return d.apply(window,arguments)}return c}()}}function ga(a){var b;if(k._hostModules&&(k._hostModules[a]&&(b=k._hostModules[a]),k._hostModules._globals&&k._hostModules._globals[a]&&(b=k._hostModules._globals[a]),b))return{name:a,exports:b}}function S(a){return K("meta[name='ap-"+a+"']").attr("content")}var B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&
a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},C=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},ha=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},O=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},P=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b},ba=Function.prototype.bind,p={locationOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:
"")},randomString:function(){return Math.floor(1E9*Math.random()).toString(16)},isString:function(a){return"string"===typeof a||a instanceof String},argumentsToArray:function(a){return Array.prototype.slice.call(a)},argumentNames:function(a){return a.toString().replace(/((\/\/.*$)|(\/\*[^]*?\*\/))/mg,"").replace(/[^(]+\(([^)]*)[^]+/,"$1").match(/([^\s,]+)/g)||[]},hasCallback:function(a){var b=a.length;return 0<b&&"function"===typeof a[b-1]},error:function(a){if(window.console&&window.console.error){var b=
[];"string"===typeof a?(b.push("[Simple-XDM] "+a),b=b.concat(Array.prototype.slice.call(arguments,1))):(b.push("[Simple-XDM] "),b=b.concat(Array.prototype.slice.call(arguments)));window.console.error.apply(null,b)}},warn:function(a){window.console&&console.warn("[Simple-XDM] "+a)},log:function(a){window.console&&window.console.log("[Simple-XDM] "+a)},_bind:function(a,b){return ba&&b.bind===ba?b.bind(a):function(){return b.apply(a,arguments)}},throttle:function(a,b,c){var d=0;return function(){var m=
Date.now();m-d>b&&(d=m,a.apply(c,arguments))}},each:function(a,b){var c,d;if(a)if(c=a.length,null!=c&&"function"!==typeof a)for(d=0;d<c&&!1!==b.call(a[d],d,a[d]);)d+=1;else for(d in a)if(a.hasOwnProperty(d)&&!1===b.call(a[d],d,a[d]))break},extend:function(a){var b=arguments;[].slice.call(b,1,b.length).forEach(function(c){"object"===("undefined"===typeof c?"undefined":B(c))&&Object.getOwnPropertyNames(c).forEach(function(d){a[d]=c[d]})});return a},sanitizeStructuredClone:function(a){function b(a){if("function"===
typeof a)return m("A function was detected and removed from the message."),null;if(d.some(function(c){return a instanceof c?(m(c.name+" object was detected and removed from the message."),!0):!1}))return{};if(a&&"object"===("undefined"===typeof a?"undefined":B(a))&&c.every(function(c){return!(a instanceof c)})){var e=void 0;if(Array.isArray(a))e=a.map(function(c){return b(c)});else{if(-1<l.indexOf(a))return m("A circular reference was detected and removed from the message."),null;l.push(a);var e=
{},w;for(w in a)if(a.hasOwnProperty(w)){var f=b(a[w]);null!==f&&(e[w]=f)}l.pop()}return e}return a}var c=[Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer],d=[Error,Node],m=p.warn,l=[];return b(a)},getOrigin:function(a,b){if("function"===typeof URL)try{return(new URL(a,b)).origin}catch(m){}var c=document.implementation.createHTMLDocument("");if(b){var d=c.createElement("base");d.href=b;c.head.appendChild(d)}b=c.createElement("a");b.href=a;c.body.appendChild(b);c=b.protocol+"//"+b.hostname;
a.match(/\/\/[^/]+:[0-9]+\//)&&(c+=b.port?":"+b.port:"");return c}},E=function(){function a(b){C(this,a);this._registerListener((b||{}).listenOn)}a.prototype._registerListener=function(b){b&&b.addEventListener||(b=window);b.addEventListener("message",p._bind(this,this._receiveMessage),!1)};a.prototype._receiveMessage=function(b){var c=this._messageHandlers[b.data.type],d=b.data.eid,a=void 0;d&&this._registeredExtensions&&(a=this._registeredExtensions[d]);if(!c||!this._checkOrigin(b,a))return!1;c.call(this,
b,a)};return a}(),ja=function(a){function b(c){C(this,b);c=c||{};var d=P(this,a.call(this,c));d._registeredExtensions=c.extensions||{};d._registeredAPIModules={};d._registeredAPIModules._globals={};d._pendingCallbacks={};d._keycodeCallbacks={};d._clickHandler=null;d._pendingEvents={};d._messageHandlers={init:d._handleInit,req:d._handleRequest,resp:d._handleResponse,broadcast:d._handleBroadcast,event_query:d._handleEventQuery,key_triggered:d._handleKeyTriggered,addon_clicked:d._handleAddonClick,get_host_offset:d._getHostOffset,
unload:d._handleUnload,sub:d._handleSubInit};return d}O(b,a);b.prototype._padUndefinedArguments=function(c,d){return c.length>=d?c:c.concat(Array(d-c.length))};b.prototype._verifyAPI=function(c,d){function a(c,d){Object.getOwnPropertyNames(d).forEach(function(b){"object"===B(d[b])&&c[b]?a(c[b],d[b]):"parent"===d[b]&&c[b]&&(f=!0)})}var b=c.data.targets;if(b){var e=this.getApiSpec(),f=!1;a(e,b);c.source.postMessage({type:"api_tamper",tampered:f},d.extension.url)}};b.prototype._handleInit=function(c,
d){this._registeredExtensions[d.extension_id].source=c.source;d.initCallback&&(d.initCallback(c.data.eid),delete d.initCallback);c.data.targets&&this._verifyAPI(c,d)};b.prototype._handleSubInit=function(c,d){this.registerExtension(c.data.ext.id,{extension:c.data.ext})};b.prototype._getHostOffset=function(c,d){var b=c.source,a=null;d=d||window;d===d.top&&"function"===typeof d.getHostOffsetFunctionOverride&&(a=d.getHostOffsetFunctionOverride(b));if("number"!==typeof a)for(a=0;!this._hasSameOrigin(b);)a++,
b=b.parent;c.source.postMessage({hostFrameOffset:a},c.origin)};b.prototype._hasSameOrigin=function(c){if(c===c.top)return!0;try{var d="test_var_"+Math.random().toString(16).substr(2);c[d]=!0;return c[d]}catch(m){}return!1};b.prototype._handleResponse=function(c){c=c.data;var d=this._pendingCallbacks[c.mid];d&&(delete this._pendingCallbacks[c.mid],d.apply(window,c.args))};b.prototype.registerRequestNotifier=function(c){this._registeredRequestNotifier=c};b.prototype._handleRequest=function(c,d){function b(){var a=
p.sanitizeStructuredClone(p.argumentsToArray(arguments));c.source.postMessage({mid:c.data.mid,type:"resp",forPlugin:!0,args:a},d.extension.url)}var a=c.data,e=this._registeredAPIModules[a.mod],f=this.getRegisteredExtensions(d.extension)[0];if(e){var k=a.fn;if(a._cls){var t=e[a._cls],r=a.mod+"-"+a._cls+"-";b._id=a._id;"constructor"===k?(t._construct||(t.constructor.prototype._destroy=function(){delete this._context._proxies[r+this._id]},t._construct=function(){for(var c=arguments.length,a=Array(c),
b=0;b<c;b++)a[b]=arguments[b];c=new (Function.prototype.bind.apply(t.constructor,[null].concat(a)));a=a[a.length-1];c._id=a._id;c._context=a._context;return c._context._proxies[r+c._id]=c}),e=t,k="_construct"):e=f._proxies[r+a._id]}var g=e[k];if(g){var h=a.args,A=g.length-1;"_construct"===k&&(A=e.constructor.length-1);b._context=f;h=this._padUndefinedArguments(h,A);h.push(b);e=g.apply(e,h);g.returnsPromise&&(e&&e instanceof Promise?e.then(function(c){b(void 0,c)}).catch(function(c){c=c instanceof
Error?c.message:c;b(c)}):b("Defined module method did not return a promise."));this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,{module:a.mod,fn:a.fn,type:a.type,addon_key:d.extension.addon_key,key:d.extension.key,extension_id:d.extension_id})}}};b.prototype._handleBroadcast=function(c,a){c=c.data;this.dispatch(c.etyp,function(c){return c.extension.addon_key===a.extension.addon_key&&c.extension_id!==a.extension_id},c.evnt,null,null)};b.prototype._handleKeyTriggered=function(c,
a){var b=c.data;c=this._keycodeKey(b.keycode,b.modifiers,a.extension_id);(c=this._keycodeCallbacks[c])&&c.forEach(function(c){c.call(null,{addon_key:a.extension.addon_key,key:a.extension.key,extension_id:a.extension_id,keycode:b.keycode,modifiers:b.modifiers})},this)};b.prototype.defineAPIModule=function(c,a){a=a||"_globals";this._registeredAPIModules[a]=p.extend({},this._registeredAPIModules[a]||{},c);return this._registeredAPIModules};b.prototype._pendingEventKey=function(c,a){var b=c.addon_key||
"global";c.key&&(b=b+"@@"+c.key);return b+"@@"+a};b.prototype.queueEvent=function(c,a,b,l){if(this._findRegistrations(a).some(function(c){return void 0!==c.registered_events},this))this.dispatch(c,a,b,l);else{this._cleanupInvalidEvents();var d=(new Date).getTime();this._pendingEvents[this._pendingEventKey(a,d)]={type:c,targetSpec:a,event:b,callback:l,time:d,uid:p.randomString()}}};b.prototype._cleanupInvalidEvents=function(){var c=this,a=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(b){3E4>=
a-c._pendingEvents[b].time||delete c._pendingEvents[b]})};b.prototype._handleEventQuery=function(c,a){var b=this,d={},e=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(m){var l=b._pendingEvents[m],f=3E4>=e-l.time,w=!l.targetSpec||0!==b._findRegistrations(l.targetSpec).length;w&&l.targetSpec.key&&(w=l.targetSpec.addon_key===a.extension.addon_key&&l.targetSpec.key===a.extension.key);f&&w?(d[m]=l,l.targetSpec=l.targetSpec||{},b.dispatch(l.type,l.targetSpec,l.event,l.callback,c.source)):
f||delete b._pendingEvents[m]});this._registeredExtensions[a.extension_id].registered_events=c.data.args;return d};b.prototype._handleUnload=function(c,a){a&&(a.extension_id&&this._registeredExtensions[a.extension_id]&&delete this._registeredExtensions[a.extension_id].source,a.unloadCallback&&a.unloadCallback(c.data.eid))};b.prototype.dispatch=function(c,a,b,l,e){function d(a,b){if(a.source&&a.source.postMessage){var d;l&&(d=p.randomString(),this._pendingCallbacks[d]=l);a.source.postMessage({type:"evt",
mid:d,etyp:c,evnt:b},a.extension.url)}}this._findRegistrations(a||{}).forEach(function(c){e&&!c.source&&(c.source=e);c.source&&p._bind(this,d)(c,b)},this)};b.prototype._findRegistrations=function(c){var a=this;if(0===this._registeredExtensions.length)return p.error("no registered extensions",this._registeredExtensions),[];var b=Object.getOwnPropertyNames(c),l=Object.getOwnPropertyNames(this._registeredExtensions).map(function(c){return a._registeredExtensions[c]});return c instanceof Function?l.filter(c):
l.filter(function(a){return b.every(function(b){return a.extension[b]===c[b]})})};b.prototype.registerExtension=function(c,a){a._proxies={};a.extension_id=c;this._registeredExtensions[c]=a};b.prototype._keycodeKey=function(c,a,b){var d=c;a&&("string"===typeof a&&(a=[a]),a.sort(),a.forEach(function(c){d+="$$"+c},this));return d+"__"+b};b.prototype.registerKeyListener=function(c,a,b,l){"string"===typeof b&&(b=[b]);var d=this._registeredExtensions[c];c=this._keycodeKey(a,b,c);this._keycodeCallbacks[c]||
(this._keycodeCallbacks[c]=[],d.source.postMessage({type:"key_listen",keycode:a,modifiers:b,action:"add"},d.extension.url));this._keycodeCallbacks[c].push(l)};b.prototype.unregisterKeyListener=function(c,a,b,l){var d=this._keycodeKey(a,b,c),m=this._keycodeCallbacks[d];c=this._registeredExtensions[c];m&&(l?(l=m.indexOf(l),this._keycodeCallbacks[d].splice(l,1)):delete this._keycodeCallbacks[d],c.source&&c.source.postMessage&&c.source.postMessage({type:"key_listen",keycode:a,modifiers:b,action:"remove"},
c.extension.url))};b.prototype.registerClickHandler=function(c){if("function"!==typeof c)throw Error("callback must be a function");if(null!==this._clickHandler)throw Error("ClickHandler already registered");this._clickHandler=c};b.prototype._handleAddonClick=function(c,a){"function"===typeof this._clickHandler&&this._clickHandler({addon_key:a.extension.addon_key,key:a.extension.key,extension_id:a.extension_id})};b.prototype.unregisterClickHandler=function(){this._clickHandler=null};b.prototype.getApiSpec=
function(){function c(c){function b(c){return Object.getOwnPropertyNames(c).reduce(function(a,d){var l=c[d];switch("undefined"===typeof l?"undefined":B(l)){case "function":a[d]={args:p.argumentNames(l),returnsPromise:l.returnsPromise||!1};break;case "object":l.hasOwnProperty("constructor")&&(a[d]=b(l))}return a},{})}var d=a._registeredAPIModules[c];if(!d)throw Error("unregistered API module: "+c);return b(d)}var a=this;return Object.getOwnPropertyNames(this._registeredAPIModules).reduce(function(a,
b){a[b]=c(b);return a},{})};b.prototype._originEqual=function(c,a){function b(c){return"string"===typeof c&&0<c.length}var d=p.getOrigin(c);return b(c)&&b(a)&&b(d)?a===d:!1};b.prototype._checkOrigin=function(c,a){var b=["init"],d=a&&!a.source&&-1<b.indexOf(c.data.type),b=a&&c.source===a.source;a=a&&this._originEqual(a.extension.url,c.origin)&&(d||b);"get_host_offset"===c.data.type&&window===window.top&&(a=!0);"unload"!==c.data.type||!b&&void 0!==c.source||(a=!0);a||p.log("Failed to validate origin: "+
c.origin);return a};b.prototype.getRegisteredExtensions=function(a){return a?this._findRegistrations(a):this._registeredExtensions};b.prototype.unregisterExtension=function(a){a=this._findRegistrations(a);0!==a.length&&a.forEach(function(a){var c=this;Object.keys(this._pendingEvents).forEach(function(b){var d=c._pendingEvents[b].targetSpec||{};d.addon_key===a.extension.addon_key&&d.key===a.extension.key&&delete c._pendingEvents[b]});delete this._registeredExtensions[a.extension_id]},this)};return b}(E),
T=function(){function a(){C(this,a);this._xdm=new ja}a.prototype.dispatch=function(a,c,d,m){this._xdm.queueEvent(a,c,d,m);return this.getExtensions(c)};a.prototype.broadcast=function(a,c,d){this._xdm.dispatch(a,c,d,null,null);return this.getExtensions(c)};a.prototype._createId=function(a){if(!a.addon_key||!a.key)throw Error("Extensions require addon_key and key");return a.addon_key+"__"+a.key+"__"+p.randomString()};a.prototype.create=function(a,c,d){c=this.registerExtension(a,c,d);d=a.options||{};
d={extension_id:c,api:this._xdm.getApiSpec(),origin:p.locationOrigin(),options:d};return{id:c,name:JSON.stringify(d),src:a.url}};a.prototype.registerRequestNotifier=function(a){this._xdm.registerRequestNotifier(a)};a.prototype.registerExtension=function(a,c,d){var b=this._createId(a);this._xdm.registerExtension(b,{extension:a,initCallback:c,unloadCallback:d});return b};a.prototype.registerKeyListener=function(a,c,d,m){this._xdm.registerKeyListener(a,c,d,m)};a.prototype.unregisterKeyListener=function(a,
c,d,m){this._xdm.unregisterKeyListener(a,c,d,m)};a.prototype.registerClickHandler=function(a){this._xdm.registerClickHandler(a)};a.prototype.unregisterClickHandler=function(){this._xdm.unregisterClickHandler()};a.prototype.defineModule=function(a,c,d){this._xdm.defineAPIModule(c,a,d)};a.prototype.defineGlobals=function(a){this._xdm.defineAPIModule(a)};a.prototype.getExtensions=function(a){return this._xdm.getRegisteredExtensions(a)};a.prototype.unregisterExtension=function(a){return this._xdm.unregisterExtension(a)};
a.prototype.returnsPromise=function(a){a.returnsPromise=!0};return a}(),ka=setTimeout;h.prototype["catch"]=function(a){return this.then(null,a)};h.prototype.then=function(a,b){var c=new this.constructor(n);v(this,new z(a,b,c));return c};h.prototype["finally"]=function(a){var b=this.constructor;return this.then(function(c){return b.resolve(a()).then(function(){return c})},function(c){return b.resolve(a()).then(function(){return b.reject(c)})})};h.all=function(a){return new h(function(b,c){function d(a,
e){try{if(e&&("object"===("undefined"===typeof e?"undefined":B(e))||"function"===typeof e)){var f=e.then;if("function"===typeof f){f.call(e,function(c){d(a,c)},c);return}}m[a]=e;0===--l&&b(m)}catch(ia){c(ia)}}if(!a||"undefined"===typeof a.length)throw new TypeError("Promise.all accepts an array");var m=Array.prototype.slice.call(a);if(0===m.length)return b([]);for(var l=m.length,e=0;e<m.length;e++)d(e,m[e])})};h.resolve=function(a){return a&&"object"===("undefined"===typeof a?"undefined":B(a))&&a.constructor===
h?a:new h(function(b){b(a)})};h.reject=function(a){return new h(function(b,c){c(a)})};h.race=function(a){return new h(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})};h._immediateFn="function"===typeof setImmediate&&function(a){setImmediate(a)}||function(a){ka(a,0)};h._unhandledRejectionFn=function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};var X=p.each,da=window.document;f.bind=r("add","attach");f.unbind=r("remove","detach");f.onDomLoad=
function(a){var b=window;"complete"===b.document.readyState?a.call(b):f.bind(b,"load",function(){a.call(b)})};var L=new (function(){function a(){C(this,a);this.options={}}a.prototype._flush=function(){this.options={}};a.prototype.get=function(a){return a?this.options[a]:this.options};a.prototype.set=function(a,c){var b=this;if(a){if(c){var e;a=(e={},e[a]=c,e)}Object.getOwnPropertyNames(a).forEach(function(c){b.options[c]=a[c]},this)}};return a}()),U=function(a,b,c){var d=function(){var a=window.innerWidth-
c.clientWidth,a=0>a?0:a;return 50<a?50:a},e=function(){var a=window.innerHeight-Math.min(c.clientHeight,document.documentElement.clientHeight),a=0>a?0:a;return 50<a?50:a};a=null==a?"100%":a;var l,f=!!L.get("widthinpx");(c=c||A())||p.warn("size called before container or body appeared, ignoring");f&&"string"===typeof a&&-1!==a.search("%")&&(a=Math.max(c.scrollWidth,c.offsetWidth,c.clientWidth));if(b)l=b;else if(b=Math.max(c.scrollHeight,document.documentElement.scrollHeight,c.offsetHeight,document.documentElement.offsetHeight,
c.clientHeight,document.documentElement.clientHeight),c===document.body)l=b;else{var k=window.getComputedStyle(c);l=c.getBoundingClientRect().height;0===l?l=b:["margin-top","margin-bottom"].forEach(function(a){a=parseFloat(k[a]);l+=a})}a="number"===typeof a&&Math.min(c.scrollHeight,document.documentElement.scrollHeight)>Math.min(c.clientHeight,document.documentElement.clientHeight)?a+d():a;l="number"===typeof l&&c.scrollWidth>c.clientWidth?l+e():l;return{w:a,h:l}},la={add:function(a){var b=A();F(b,
a)},remove:function(){var a=A();a.resizeSensor&&(a.resizeObserver.disconnect(),a.removeChild(a.resizeSensor),delete a.resizeSensor,delete a.resizedAttached)}},ma=function(){function a(b){C(this,a);this.resizeError=p.throttle(function(a){console.info(a)},1E3);this.dimensionStores={width:[],height:[]};this.callback=b}a.prototype._setVal=function(a,c,d){this.dimensionStores[c]=this.dimensionStores[c].filter(function(a){return 400>d-a.setAt});this.dimensionStores[c].push({val:parseInt(a,10),setAt:d})};
a.prototype._isFlicker=function(a,c){return 5<=this.dimensionStores[c].length};a.prototype.triggered=function(a){a=a||U();var c=Date.now();this._setVal(a.w,"width",c);this._setVal(a.h,"height",c);var b=this._isFlicker(a.w,"width",c),c=this._isFlicker(a.h,"height",c);b&&(a.w="100%",this.resizeError("SIMPLE XDM: auto resize flickering width detected, setting to 100%"));c&&(b=this.dimensionStores.height.map(function(a){return a.val}),a.h=Math.max.apply(null,b)+"px",this.resizeError("SIMPLE XDM: auto resize flickering height detected, setting to: "+
a.h));this.callback(a.w,a.h)};return a}(),G=new (function(){function a(){C(this,a)}a.prototype._elementExists=function(a){return a&&1===a.length};a.prototype._elementOptions=function(a){return a.attr("data-options")};a.prototype._getConsumerOptions=function(){var a={},c=f("#ac-iframe-options"),d=f("script[src*='/atlassian-connect/all']"),e=f("script[src*='/connect-cdn.atl-paas.net/all']");this._elementExists(c)&&this._elementOptions(c)||(this._elementExists(d)?c=d:this._elementExists(e)&&(c=e));this._elementExists(c)&&
(c=this._elementOptions(c))&&c.split(";").forEach(function(c){if(c=c.trim()){var b=c.split(":");c=b[0].trim();b=b[1].trim();c&&null!=b&&(a[c]="true"===b||"false"===b?"true"===b:b)}});return a};a.prototype._flush=function(){delete this._options};a.prototype.get=function(a){this._options||(this._options=this._getConsumerOptions());return a?this._options[a]:this._options};return a}()),na=["ctrl","shift","alt","meta"],oa=function(a){function b(c){C(this,b);var d=P(this,a.call(this));L.set(c);d._data=
d._parseInitData();L.set(d._data.options);d._data.options=d._data.options||{};d._hostOrigin=d._data.options.hostOrigin||"*";d._top=window.top;d._host=window.parent||window;d._topHost=d._getHostFrame(d._data.options.hostFrameOffset);d._topHost!==d._top&&d._verifyHostFrameOffset();d._isKeyDownBound=!1;d._hostModules={};d._eventHandlers={};d._pendingCallbacks={};d._keyListeners=[];d._version="5.2.4";d._apiTampered=void 0;d._isSubIframe=d._topHost!==window.parent;d._onConfirmedFns=[];d._promise=h;d._data.api&&
(d._setupAPI(d._data.api),d._setupAPIWithoutRequire(d._data.api));d._messageHandlers={resp:d._handleResponse,evt:d._handleEvent,key_listen:d._handleKeyListen,api_tamper:d._handleApiTamper};d._data.origin&&(d._sendInit(d._host,d._data.origin),d._isSubIframe&&d._sendInit(d._topHost,d._hostOrigin));d._registerOnUnload();d.resize=p._bind(d,function(a,c){if(A()){var b=U();a||(a=b.w);c||(c=b.h);d._hostModules.env&&d._hostModules.env.resize&&d._hostModules.env.resize(a,c)}else p.warn("resize called before container or body appeared, ignoring")});
f(p._bind(d,d._autoResizer));d.container=A;d.size=U;window.addEventListener("click",function(a){d._host.postMessage({eid:d._data.extension_id,type:"addon_clicked"},d._hostOrigin)});return d}O(b,a);b.prototype._getHostFrame=function(a){if(a&&"number"===typeof a){for(var c=window,b=0;b<a;b++)c=c.parent;return c}return this._top};b.prototype._verifyHostFrameOffset=function(){var a=this;window.addEventListener("message",function m(c){c.source===a._top&&c.data&&"number"===typeof c.data.hostFrameOffset&&
(window.removeEventListener("message",m),a._getHostFrame(c.data.hostFrameOffset)!==a._topHost&&(p.error("hostFrameOffset tampering detected, setting host frame to top window"),a._topHost=a._top))});this._top.postMessage({type:"get_host_offset"},this._hostOrigin)};b.prototype._handleApiTamper=function(a){!1!==a.data.tampered?(this._host=void 0,this._apiTampered=!0,p.error("XDM API tampering detected, api disabled")):(this._apiTampered=!1,this._onConfirmedFns.forEach(function(a){a.apply(null)}));this._onConfirmedFns=
[]};b.prototype._registerOnUnload=function(){f.bind(window,"unload",p._bind(this,function(){this._sendUnload(this._host,this._data.origin);this._isSubIframe&&this._sendUnload(this._topHost,this._hostOrigin)}))};b.prototype._sendUnload=function(a,b){a.postMessage({eid:this._data.extension_id,type:"unload"},b||"*")};b.prototype._bindKeyDown=function(){this._isKeyDownBound||(f.bind(window,"keydown",p._bind(this,this._handleKeyDownDomEvent)),this._isKeyDownBound=!0)};b.prototype._autoResizer=function(){this._enableAutoResize=
!!L.get("autoresize");if(!1===G.get("resize")||!0===G.get("sizeToParent"))this._enableAutoResize=!1;this._enableAutoResize&&this._initResize()};b.prototype._parseInitData=function(a){try{return JSON.parse(a||window.name)}catch(d){return{}}};b.prototype._findTarget=function(a,b){return this._data.options&&this._data.options.targets&&this._data.options.targets[a]&&this._data.options.targets[a][b]?this._data.options.targets[a][b]:"top"};b.prototype._createModule=function(a,b){var c=this;return Object.getOwnPropertyNames(b).reduce(function(d,
e){var l=b[e];l.hasOwnProperty("constructor")?d[e]=c._createProxy(a,l,e):d[e]=c._createMethodHandler({mod:a,fn:e,returnsPromise:l.returnsPromise});return d},{})};b.prototype._setupAPI=function(a){var c=this;this._hostModules=Object.getOwnPropertyNames(a).reduce(function(b,d){b[d]=c._createModule(d,a[d],a[d]._options);return b},{});Object.getOwnPropertyNames(this._hostModules._globals||{}).forEach(function(a){c[a]=c._hostModules._globals[a]})};b.prototype._setupAPIWithoutRequire=function(a){var c=
this;Object.getOwnPropertyNames(a).forEach(function(b){if("undefined"!==typeof c[b])throw Error("XDM module: "+b+" will collide with existing variable");c[b]=c._createModule(b,a[b])},this)};b.prototype._pendingCallback=function(a,b,e){e&&Object.getOwnPropertyNames(e).forEach(function(a){b[a]=e[a]});this._pendingCallbacks[a]=b};b.prototype._createProxy=function(a,b,e){function c(a){if(!(this instanceof c))return new c(arguments);this._cls=e;this._id=p.randomString();d.constructor.apply(this,a);return this}
var d=this._createModule(a,b);Object.getOwnPropertyNames(d).forEach(function(a){"constructor"!==a&&(c.prototype[a]=d[a])});return c};b.prototype._createMethodHandler=function(a){var c=this;return function(){var b=p.argumentsToArray(arguments),d={eid:c._data.extension_id,type:"req",mod:a.mod,fn:a.fn},e,f,k=void 0,t=p.randomString();"top"===c._findTarget(a.mod,a.fn)?(f=c._topHost,e=c._hostOrigin):(f=c._host,e=c._data.origin);p.hasCallback(b)?(d.mid=t,c._pendingCallback(d.mid,b.pop(),{useCallback:!0,
isPromiseMethod:!!a.returnsPromise})):a.returnsPromise&&(d.mid=t,k=new h(function(b,e){c._pendingCallback(d.mid,function(a,c){a||"undefined"===typeof c&&"undefined"===typeof a?e(a):b(c)},{useCallback:!1,isPromiseMethod:!!a.returnsPromise})}),k.catch(function(a){p.warn("Failed promise: "+a)}));this&&this._cls&&(d._cls=this._cls,d._id=this._id);d.args=p.sanitizeStructuredClone(b);c._isSubIframe&&"undefined"===typeof c._apiTampered?c._onConfirmedFns.push(function(){f.postMessage(d,e)}):f.postMessage(d,
e);if(k)return k}};b.prototype._handleResponse=function(a){a=a.data;if(a.forPlugin){var c=this._pendingCallbacks[a.mid];if(c){delete this._pendingCallbacks[a.mid];try{c.useCallback&&c.isPromiseMethod&&a.args.shift(),c.apply(window,a.args)}catch(m){p.error(m.message,m.stack)}}}};b.prototype._handleEvent=function(a){function c(a){return a?(Array.isArray(a)||(a=[a]),a):[]}var b=function(){var c=p.argumentsToArray(arguments);a.source.postMessage({eid:this._data.extension_id,mid:a.data.mid,type:"resp",
args:c},this._data.origin)},e=a.data,b=p._bind(this,b);b._context={eventName:e.etyp};var f=c(this._eventHandlers[e.etyp]),f=f.concat(c(this._eventHandlers._any));f.forEach(function(a){try{a(e.evnt,b)}catch(ua){p.error("exception thrown in event callback for:"+e.etyp)}},this);e.mid&&b()};b.prototype._handleKeyDownDomEvent=function(a){var c=[];na.forEach(function(b){a[b+"Key"]&&c.push(b)},this);var b=this._keyListenerId(a.keyCode,c);0<=this._keyListeners.indexOf(b)&&this._host.postMessage({eid:this._data.extension_id,
keycode:a.keyCode,modifiers:c,type:"key_triggered"},this._data.origin)};b.prototype._keyListenerId=function(a,b){var c=a;b&&("string"===typeof b&&(b=[b]),b.sort(),b.forEach(function(a){c+="$$"+a},this));return c};b.prototype._handleKeyListen=function(a){var c=this._keyListenerId(a.data.keycode,a.data.modifiers);"remove"===a.data.action?(a=this._keyListeners.indexOf(c),this._keyListeners.splice(a,1)):"add"===a.data.action&&(this._bindKeyDown(),this._keyListeners.push(c))};b.prototype._checkOrigin=
function(a){var c=["api_tamper"];return a.data&&-1<c.indexOf(a.data.type)||this._isSubIframe&&a.source===this._topHost?!0:a.origin===this._data.origin&&a.source===this._host};b.prototype._sendInit=function(a,b){var c;a===this._topHost&&this._topHost!==window.parent&&(c=L.get("targets"));a.postMessage({eid:this._data.extension_id,type:"init",targets:c},b||"*")};b.prototype.sendSubCreate=function(a,b){b.id=a;this._topHost.postMessage({eid:this._data.extension_id,type:"sub",ext:b},this._hostOrigin)};
b.prototype.broadcast=function(a,b){if(!p.isString(a))throw Error("Event type must be string");this._host.postMessage({eid:this._data.extension_id,type:"broadcast",etyp:a,evnt:b},this._data.origin)};b.prototype.require=function(a,b){var c=this;a=(Array.isArray(a)?a:[a]).map(function(a){return c._hostModules[a]||c._hostModules._globals[a]});b.apply(window,a)};b.prototype.register=function(a){"object"===("undefined"===typeof a?"undefined":B(a))&&(this._eventHandlers=ha({},this._eventHandlers,a)||{},
this._host.postMessage({eid:this._data.extension_id,type:"event_query",args:Object.getOwnPropertyNames(a)},this._data.origin))};b.prototype.registerAny=function(a){this.register({_any:a})};b.prototype._initResize=function(){this.resize();var a=new ma(this.resize);la.add(p._bind(a,a.triggered))};return b}(E),k=new (function(a){function b(){C(this,b);var c=P(this,a.call(this));c.parentTargets={_globals:{}};var d=new oa;Object.getOwnPropertyNames(d).forEach(function(a){-1===["_hostModules","_globals"].indexOf(a)&&
void 0===this[a]&&(this[a]=d[a])},c);["registerAny","register"].forEach(function(a){this[a]=Object.getPrototypeOf(d)[a].bind(d)},c);var e=d._data.api;"object"===("undefined"===typeof e?"undefined":B(e))&&Object.getOwnPropertyNames(e).forEach(function(a){var c={};Object.getOwnPropertyNames(e[a]).forEach(function(b){e[a][b].hasOwnProperty("constructor")?c[b]=d._hostModules[a][b].prototype:c[b]=d._hostModules[a][b]},this);this._xdm.defineAPIModule(c,a)},c);c._hostModules=d._hostModules;c.defineGlobal=
function(a){this.parentTargets._globals=p.extend({},this.parentTargets._globals,a);this._xdm.defineAPIModule(a)};c.defineModule=function(a,b){this._xdm.defineAPIModule(b,a);this.parentTargets[a]={};Object.getOwnPropertyNames(b).forEach(function(b){this.parentTargets[a][b]="parent"},this)};c.subCreate=function(a,b){a.options=a.options||{};a.options.targets=p.extend({},this.parentTargets,a.options.targets);b=this.create(a,b);d.sendSubCreate(b.id,a);return b};return c}O(b,a);return b}(T)),J=function(a,
b,c,d){var e=!1;return function(){!e&&"undefined"!==typeof console&&console.warn&&(e=!0,console.warn("DEPRECATED API - "+b+" has been deprecated since ACJS "+d+(" and will be removed in a future release. "+(c?"Use "+c+" instead.":"No alternative will be provided."))),k._analytics&&k._analytics.trackDeprecatedMethodUsed(b));return a.apply(void 0,arguments)}},x={each:H,log:Y,decodeQueryComponent:function(a){return null==a?null:decodeURIComponent(a.replace(/\+/g,"%20"))},bind:t("add","attach"),unbind:t("remove",
"detach"),extend:function(a){var b=arguments,b=[].slice.call(b,1,b.length);H(b,function(b,d){H(d,function(b,c){a[b]=c})});return a},trim:function(a){return a&&a.replace(/^\s+|\s+$/g,"")},debounce:function(a,b){var c;return function(){var d=this,e=[].slice.call(arguments);c&&clearTimeout(c);c=setTimeout(function(){c=null;a.apply(d,e)},b||50)}},isFunction:function(a){return"function"===typeof a},handleError:function(a){if(!Y.apply(this,a&&a.message?[a,a.message]:[a]))throw a;}},V=x.each,ca=x.extend,
pa=window.document,K=ca(function(a,b){b=b||pa;var c=[];a&&("string"===typeof a?(a=b.querySelectorAll(a),V(a,function(a,b){c.push(b)})):1===a.nodeType?c.push(a):a===window&&c.push(a));ca(c,{each:function(a){V(this,a);return this},bind:function(a,b){this.each(function(c,d){x.bind(d,a,b)})},attr:function(a){var b;this.each(function(c,d){b=d[a]||d.getAttribute&&d.getAttribute(a);return!b});return b},removeClass:function(a){return this.each(function(b,c){c.className&&(c.className=c.className.replace(new RegExp("(^|\\s)"+
a+"(\\s|$)")," "))})},html:function(a){return this.each(function(b,c){c.innerHTML=a})},append:function(a){return this.each(function(c,d){var e=b.createElement(a.tag);V(a,function(a,c){"$text"===a?e.styleSheet?e.styleSheet.cssText=c:e.appendChild(b.createTextNode(c)):"tag"!==a&&(e[a]=c)});d.appendChild(e)})}});return c},x),E=function(){function a(){C(this,a);this._events={};this.ANY_PREFIX="_any";this.methods="off offAll offAny on onAny once".split(" ")}a.prototype._anyListener=function(a,c){var b=
c._context.eventName;c=this._events[this.ANY_PREFIX]||[];var e=this._events[b]||[];Array.isArray(a)||(a=[a]);c.forEach(function(c){var d=a.slice(0);d.unshift(b);d.push({args:a,name:b});c.apply(null,d)});e.forEach(function(b){b.apply(null,a)})};a.prototype.off=function(a,c){this._events[a]&&(c=this._events[a].indexOf(c),-1<c&&this._events[a].splice(c,1),0===this._events[a].length&&delete this._events[a])};a.prototype.offAll=function(a){delete this._events[a]};a.prototype.offAny=function(a){this.off(this.ANY_PREFIX,
a)};a.prototype.on=function(a,c){this._events[a]||(this._events[a]=[]);this._events[a].push(c)};a.prototype.onAny=function(a){this.on(this.ANY_PREFIX,a)};a.prototype.once=function(a,c){function b(){c.apply(null,arguments);e.off(a,b)}var e=this;this.on(a,b)};return a}(),M=new E,W=new (function(a){function b(){C(this,b);var c=P(this,a.call(this));c.methods="offPublic offAllPublic offAnyPublic onPublic onAnyPublic oncePublic".split(" ");return c}O(b,a);b.prototype._filterEval=function(a,b){var c=!0;
if(!a)return c;switch("undefined"===typeof a?"undefined":B(a)){case "function":c=!!a.call(null,b);break;case "object":c=Object.getOwnPropertyNames(a).every(function(c){return b[c]===a[c]})}return c};b.prototype.once=function(a,b,e){function c(e){b.apply(null,e);d.off(a,c)}var d=this;this.on(a,c,e)};b.prototype.on=function(c,b,e){b._wrapped=function(a){this._filterEval(e,a.sender)&&b.apply(null,a.event)}.bind(this);a.prototype.on.call(this,c,b._wrapped)};b.prototype.off=function(c,b){b._wrapped?a.prototype.off.call(this,
c,b._wrapped):a.prototype.off.call(this,c,b)};b.prototype.onAny=function(b,d){b._wrapped=function(a){a.sender&&this._filterEval(d,a.sender)&&b.apply(null,a.event)};a.prototype.onAny.call(this,b._wrapped)};b.prototype.offAny=function(b){b._wrapped?a.prototype.offAny.call(this,name,b._wrapped):a.prototype.offAny.call(this,name,b)};return b}(E)),qa=1,E=J(function(){return k._data.options.customData},"AP.dialog.customData","AP.dialog.getCustomData()","5.0");k._hostModules&&k._hostModules.dialog&&(Object.defineProperty(k._hostModules.dialog,
"customData",{get:E}),Object.defineProperty(k.dialog,"customData",{get:E}),k.dialog._disableCloseOnSubmit=!1,k.dialog.disableCloseOnSubmit=function(){k.dialog._disableCloseOnSubmit=!0});var I={};M.onAny(function(a,b){var c=a.match(/^dialog\.(\w+)/);c&&("dialog.button.click"===a?ea(b.button.identifier,b):fa(c[1],b))});if(k.dialog&&k.dialog.create){var ra=k.dialog.create.prototype.constructor.bind({});k.dialog.create=k._hostModules.dialog.create=function(){var a=ra.apply(void 0,arguments);a.on=J(R,
'AP.dialog.on("close", callback)','AP.events.on("dialog.close", callback)',"5.0");return a}}if(k.dialog&&k.dialog.getButton){var sa=k.dialog.getButton.prototype.constructor.bind({});k.dialog.getButton=k._hostModules.dialog.getButton=function(a){try{var b=sa(a);b.bind=J(function(b){return R(a,b)},"AP.dialog.getDialogButton().bind()",'AP.events.on("dialog.message", callback)',"5.0");return b}catch(c){return{}}}}if(k.dialog&&k.dialog.createButton){var ta=k.dialog.createButton.prototype.constructor.bind({});
k.dialog.createButton=k._hostModules.dialog.createButton=function(a){var b={};"object"!==("undefined"===typeof a?"undefined":B(a))?(b.text=a,b.identifier=a):b=a;b.identifier||(b.identifier="user.button."+qa++);ta(b);return k.dialog.getButton(b.identifier)}}k.dialog&&(k.dialog.onDialogMessage=k._hostModules.dialog.onDialogMessage=J(R,"AP.dialog.onDialogMessage()",'AP.events.on("dialog.message", callback)',"5.0"));k.Dialog||(k.Dialog=k._hostModules.Dialog=k.dialog);var N={},Q={define:function(a,b,c){var d=
aa(a),e;c||(c=b,b=[]);c&&(e="function"!==typeof c?function(){return c}:c,Z(b,function(){var a=e.apply(window,arguments);if(a){"function"===typeof a&&(d.exports.__target__=a);for(var b in a)a.hasOwnProperty(b)&&(d.exports[b]=a[b])}}))},require:function(a,b){Z("string"===typeof a?[a]:a,b)}},E=new (function(){function a(){C(this,a);this.store={}}a.prototype.set=function(a,c){if(c){var b={};b[a]=c}else b=a;x.extend(this.store,b)};a.prototype.get=function(a){return a?this.store[a]:x.extend({},this.store)};
return a}());k._hostModules._dollar=K;k._hostModules["inline-dialog"]=k._hostModules.inlineDialog;!0===G.get("sizeToParent")?k.env.sizeToParent(!0===G.get("hideFooter")):k.env.hideFooter(!0===G.get("hideFooter"));!0===G.get("base")&&k.env.getLocation(function(a){K("head").append({tag:"base",href:a,target:"_parent"})});K.each(M.methods,function(a,b){k._hostModules&&k._hostModules.events&&(k._hostModules.events[b]=k.events[b]=M[b].bind(M),k._hostModules.events[b+"Public"]=k.events[b+"Public"]=W[b].bind(W))});
k.define=J(function(){return Q.define.apply(Q,arguments)},"AP.define()",null,"5.0");k.require=J(function(){return Q.require.apply(Q,arguments)},"AP.require()",null,"5.0");T=k._data.options.isDialog?"10px 10px 0 10px":"0";!1!==G.get("margin")&&K("head").append({tag:"style",type:"text/css",$text:"body {margin: "+T+" !important;}"});k.Meta={get:S};k.meta=S;k.localUrl=function(a){var b=S("local-base-url");return"undefined"===typeof b||"undefined"===typeof a?b:""+b+a};k._hostModules._util=k._util={each:x.each,
log:x.log,decodeQueryComponent:x.decodeQueryComponent,bind:x.bind,unbind:x.unbind,extend:x.extend,trim:x.trim,debounce:x.debounce,isFunction:x.isFunction,handleError:x.handleError};k.defineModule&&k.defineModule("env",{resize:function(a,b,c){c=document.getElementById(c._context.extension_id);c.style.width=a+("number"===typeof a?"px":"");c.style.height=b+("number"===typeof b?"px":"")}});k._data&&k._data.origin&&k.registerAny(function(a,b){a&&a.event&&a.sender?W._anyListener(a,b):M._anyListener(a,b)});
E.set(k._data.options.globalOptions);return k}();(function(){function n(e){var f;if("string"===typeof e&&1<e.length)try{f=JSON.parse(e)}catch(r){console.error("ACJS: failed to decode context",e)}"object"!==typeof f&&(f={});return f}function u(e,f){if("number"!==typeof e)return window.top;f=f||window;for(var r=0;r<e;r++)f=f.parent;return f}function h(e,f,r){r=r||100;if("undefined"!==typeof window[e])f(window[e]);else var g=setInterval(function(){"undefined"!==typeof window[e]&&(clearInterval(g),f(window[e]))},r)}function v(e){window._AP.isSubHost=
u(e.hostFrameOffset)!==window;var f=window._AP._convertConnectOptions(e);window._AP.addonAttemptCounter[f.containerId]=0;var r;window._AP.isSubHost?(window.AP&&window.AP._data&&window.AP._data.options&&window.AP._data.options.globalOptions&&(f.options.globalOptions=window.AP._data.options.globalOptions),r=window._AP._createSub(f),q(r,f)):h("connectHost",function(e){g(e,{addon_key:f.addon_key,key:f.key}).forEach(function(g){if(g.extension.options.uniqueKey===f.options.uniqueKey){var r=document.getElementById(g.extension_id);
e.destroy(g.extension_id);r&&AJS.$(r).closest(".ap-iframe-container").remove()}},this);r=e.create(f);q(r,f)})}function q(e,f){var g=document.getElementById(f.containerId);window._AP.addonAttemptCounter[f.containerId]++;if(g)if(delete window._AP.addonAttemptCounter[f.containerId],window._AP.isSubHost)g.appendChild(e),e=e.contentDocument,f="(function(){ var w = window; for (var i=0; i<"+f.options.hostFrameOffset+"; i++){w = w.parent; } w.postMessage("+JSON.stringify({type:"set_inner_iframe_url",iframeData:f})+
', "*");}());',e.open(),e.write("<script>"+f+"\x3c/script>"),e.close();else{var h=g.querySelector(".ap-iframe-container");h&&(h.parentNode.removeChild(h),AJS.log&&AJS.log("AJS: duplicate iframe removed",f,g));e.appendTo(g);e.data("addon-key",f.addon_key);e.data("key",f.key)}else 10>=window._AP.addonAttemptCounter[f.containerId]&&y(q)}var y=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,50)}}(),g=
function(e,f){return e.getExtensions(f).filter(function(e){return!!document.getElementById(e.extension_id)})},z=function(e,f,g){try{var h=require(e);f(h)}catch(D){0>=g?(console.error("Unable to load module: "+e),f(null)):setTimeout(function(){z(e,f,g-1)},500)}};window._AP=window._AP||{};window._AP.addonAttemptCounter=window._AP.addonAttemptCounter||{};window._AP._convertConnectOptions=function(e){var f={url:e.url,ns:e.uniqueKey,addon_key:e.addon_key,key:e.key,containerId:"embedded-"+e.uniqueKey,options:{history:{state:""},
uniqueKey:e.uniqueKey,origin:e.origin,hostOrigin:e.hostOrigin,moduleType:e.moduleType,moduleLocation:e.moduleLocation,isFullPage:"1"===e.general,autoresize:!0,user:{timeZone:e.timeZone,fullName:e.fullName,uid:e.uid,ukey:e.ukey},productContext:n(e.productCtx),structuredContext:n(e.structuredContext),contextJwt:e.contextJwt,contextPath:e.cp,width:e.w||e.width,height:e.h||e.height,targets:{env:{resize:"both"}}}};"string"===typeof e.contentClassifier&&(f.options.contentClassifier=e.contentClassifier);
"number"===typeof e.hostFrameOffset&&(f.options.hostFrameOffset=e.hostFrameOffset+1);window._AP.isSubHost||(f.options.history.state=window.location.hash?window.location.hash.substr(2):"");return f};window._AP._createSub=function(e){var f=document.createElement("iframe"),g=(window.connectHost||window.AP).subCreate(e);g.width=e.options.width||"";g.height=e.options.height||"";g.style="border:0;";g["class"]="ap-iframe";g["data-addon-key"]=e.addon_key;g["data-key"]=e.key;delete g.src;Object.getOwnPropertyNames(g).forEach(function(e){f.setAttribute(e,
g[e])});return f};window._AP.appendConnectAddon=function(e){var f=!1;try{window.top.karma&&(f=!0)}catch(A){}if(window===window.top||f)/com\.atlassian\.(jira|confluence)\.emcee($|\.local|\.staging|\.development\..*)/g.test(e.addon_key)?z("ac/marketplace",function(f){f&&h("connectHost",function(e){e.defineModule("marketplace",f)});v(e)},20):v(e);else{var g=function(f){f.source===window.top&&f.data&&void 0!==f.data.hostFrameOffset&&(window.removeEventListener("message",g),e.hostFrameOffset=f.data.hostFrameOffset,
v(e))};window.addEventListener("message",g);window.top.postMessage({type:"get_host_offset"},"*")}}})();function _defineProperty(n,u,h){return u in n?Object.defineProperty(n,u,{value:h,enumerable:!0,configurable:!0,writable:!0}):n[u]=h,n}
!function(){function n(e,f){for(var g=0,t=e.length;g<t;g+=1)if(f(e[g]))return e[g]}function u(g){var t=this,h={pop:e,push:f,replace:r,change:A};if(!g.listener)throw Error("missing listener for subscription");if(!g.type)throw Error("missing type for subscription");if(!h[g.type])throw Error("invalid type for subscription");this.listener=g.listener;this.type=g.type;this.eventName=h[this.type];this.lastValue=g.lastValue;this.attribute=g.attribute;this.handler=function(e){return"string"!=typeof t.attribute?
t.listener(e):t.lastValue!==e[t.attribute]?(e.newURL=e[t.attribute],e.oldURL=t.lastValue,t.lastValue=e[t.attribute],t.listener(e)):void 0}}function h(e){return e.models=e.models||[],e.models instanceof Array||(e.models=[e.models]),e.models=e.models.map(function(e){return e instanceof u?e:new u(e)}),this.models=e.models,this}function v(e){return function(f){D.models.filter(function(f){return f.eventName===e}).forEach(function(e){e.handler(f)})}}function q(e){AP.history._registerWindowListeners();var f=
D.find("change",e);f||(f=new u({type:"change",attribute:"hash",listener:e}),D.add(f))}function y(e,f){AP.history._registerWindowListeners();var g=D.find(e,f);g||(g=new u({type:e,listener:f}),D.add(g))}function g(e,f){(e=D.find(e,f))&&D.remove(e)}var z;if(AP._hostModules.history){var e="history_popstate",f="history_pushstate",r="history_replacestate",A="history_changestate";h.prototype.add=function(e){this.models.push(e)};h.prototype.remove=function(e){this.models.splice(this.models.indexOf(e),1)};
h.prototype.find=function(e,f){return n(this.models,function(g){return g.type===e&&g.listener===f})};var D=new h({models:[]});AP.register((z={},_defineProperty(z,e,v(e)),_defineProperty(z,f,v(f)),_defineProperty(z,r,v(r)),_defineProperty(z,A,v(A)),z));AP._hostModules.history.popState=q;AP.history.popState=q;AP._hostModules.history.subscribeState=y;AP.history.subscribeState=y;AP._hostModules.history.unsubscribeState=g;AP.history.unsubscribeState=g;var F=null;AP._data.options&&AP._data.options.history&&
AP._data.options.history.state&&(F={hash:AP._data.options.history.state});AP.history.getState("all",function(e){F=e});AP.history.subscribeState("change",function(e){F=e});var H=AP._hostModules.history.getState.bind({});AP.history.getState=AP._hostModules.history.getState=function(e,f){if(f=arguments[arguments.length-1],"function"==typeof f)return"string"==typeof e?H(e,f):H(f);if(e=e||"hash","hash"===e)return F&&F.hash?F.hash:"";if("all"===e)return F;throw Error("invalid type for getState");}}}();(function(){function n(e){return"function"===typeof e}if(AP.jira){var u,h,v=function(){},q,y={onSaveValidation:function(e){h=e},onSave:function(e){u=e},trigger:function(){var e=!0;n(h)&&(e=h.call());var f;u&&(f=u.call());e={valid:e,value:e?""+f:void 0};AP.jira._submitWorkflowConfigurationResponse(e);return e}};AP.register({jira_workflow_post_function_submit:function(){y.trigger()}});AP.jira.WorkflowConfiguration=AP._hostModules.jira.WorkflowConfiguration=y;AP.register({jira_dashboard_item_edit:function(){v.call()}});
AP.jira.DashboardItem=AP._hostModules.jira.DashboardItem={onDashboardItemEdit:function(e){v=e}};var g=AP._hostModules.jira.openDatePicker.bind({});AP.jira.openDatePicker=AP._hostModules.jira.openDatePicker=function(e){if(!e.position||"object"!==typeof e.position){var f=e.element;if(!f||!f.nodeType||1!=f.nodeType)throw Error("Providing either options.position or options.element is required.");e.position={}}if(!e.onSelect||!n(e.onSelect))throw Error("options.onSelect function is a required parameter.");
e={element:e.element,position:{top:e.position.top||0,left:e.position.left||0},date:e.date,showTime:!!e.showTime,onSelect:e.onSelect};q=e.onSelect;delete e.onSelect;e.element&&(f=e.element.getBoundingClientRect(),e.position={left:f.left,top:f.top+f.height},delete e.element);g(e)};AP.register({jira_date_selected:function(e){n(q)&&q.call({},e.isoDate,e.date)}});var z=AP._hostModules.jira.openCreateIssueDialog.bind({});AP.jira.openCreateIssueDialog=AP._hostModules.jira.openCreateIssueDialog=function(e,
f){z(f,e)}}})();(function(){if(AP.dropdownList){var n={},u={},h=AP._hostModules.dropdownList.create,v=function(){var q=h();q.onSelect=function(h){n[q._id]=h};q.onHide=function(h){u[q._id]=h};return q};AP._hostModules.dropdownList.create=v;AP.dropdownList.create=v;AP.register({dropdown_list_select:function(h){var q=n[h.id];q&&q.call({},h.data)},dropdown_list_hide:function(h){(h=u[h.id])&&h.call({})}})}})();(function(){function n(g,h){var e,f;if(g)if(e=g.length,null!=e&&"function"!==typeof g)for(f=0;f<e&&!1!==h.call(g[f],f,g[f]);)f+=1;else for(f in g)if(g.hasOwnProperty(f)&&!1===h.call(g[f],f,g[f]))break}function u(g){var h=arguments,h=[].slice.call(h,1,h.length);n(h,function(e,f){n(f,function(e,f){g[e]=f})});return g}function h(g){return g instanceof Blob&&g.name?{blob:g,name:g.name,_isBlob:!0}:g}function v(g){var h=u({},g),e=g.headers||{};delete h.headers;return u(h,{getResponseHeader:function(f){var g=
null;f&&(f=f.toLowerCase(),n(e,function(e,h){if(e.toLowerCase()===f)return g=h,!1}));return g},getAllResponseHeaders:function(){var f="";n(e,function(e,g){f+=(f?"\r\n":"")+e+": "+g});return f}})}function q(g,n){return new AP._promise(function(e,f){"string"===typeof g&&("object"===typeof n?(n.url=g,g=n):g={url:g});if(g.success){var r=g.success;delete g.success;var q=g.error||function(){};delete g.error;n=function(e,f,g){!1===e?r(g,"success",v(f)):q(v(f),"error",e)}}else"function"!==typeof n&&(n=function(g,
h,n){!1===g?e({body:n,xhr:v(h)}):f({xhr:v(h),err:g})});"multipart/form-data"===g.contentType&&Object.keys(g.data).forEach(function(e){var f=g.data[e];Array.isArray(f)?f.forEach(function(f,n){g.data[e][n]=h(f)}):g.data[e]=h(f)});y(g,n)})}if(AP._hostModules&&AP._hostModules._globals&&AP._hostModules._globals.request){try{new File([],"")}catch(g){File=function(g,e,f){g=new Blob(g,f);g.name=e;g.lastModifiedDate=new Date;return g}}var y=AP._hostModules._globals.request.bind({});AP._hostModules._globals.request=
q;AP.request=q}})();AP._hostModules.user&&AP._hostModules.env&&Object.getOwnPropertyNames(AP._hostModules.user).forEach(function(n){AP[n]=AP.env[n]=AP._hostModules.env[n]=AP._hostModules.user[n]});AP.env&&(AP.getLocation=AP._hostModules._globals.getLocation=AP._hostModules.env.getLocation,AP.sizeToParent=AP._hostModules._globals.sizeToParent=AP._hostModules.env.sizeToParent);
if(AP._hostModules.dialog&&AP._hostModules.Dialog){var isCloseOnEscape=function(n){n(!AP._data.options.preventDialogCloseOnEscape)};AP._hostModules.dialog.isCloseOnEscape=AP._hostModules.Dialog.isCloseOnEscape=isCloseOnEscape;AP.dialog.isCloseOnEscape=AP.Dialog.isCloseOnEscape=isCloseOnEscape};if(AP._hostModules.confluence){var original_onMacroPropertyPanelEvent=AP._hostModules.confluence.onMacroPropertyPanelEvent.bind({});AP.confluence.onMacroPropertyPanelEvent=AP._hostModules.confluence.onMacroPropertyPanelEvent=function(n){AP.register(n);original_onMacroPropertyPanelEvent()}};
