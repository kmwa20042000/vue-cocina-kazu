(window.webpackJsonp=window.webpackJsonp||[]).push([["initialize-editor-plugins~493df0b3"],{"+WIo":function(e,t,n){var o=n("NGBq")("keys"),r=n("9FWt");e.exports=function(e){return o[e]||(o[e]=r(e))}},"09V9":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"0On3":function(e,t){t.f={}.propertyIsEnumerable},"2kJU":function(e,t,n){"use strict";n.r(t);var o=n("Jygk"),r=n.n(o),i=n("bfgX"),c=n("kw4U"),s=n("cGYM"),a=n("KkZ4");const u="confluence.editor.autocomplete.fabric.mentions";let l,p=!1;function d(){l=Date.now(),p=!1,Object(i.b)("analytics",{name:"".concat(u,".trigger"),data:{}})}async function f(e,t){const n=m(!1);p=!0,Object(i.b)("analytics",{name:"".concat(u,".").concat(b("insert",n)),data:{sessionDurationInMillis:n}});const o={sessionDurationInMillis:n,queryLength:t.queryLength,mentioneeId:Object(s.a)(t.mentioneeId),contentId:Object(s.a)(t.contentId),userType:t.userType,memberCount:t.memberCount,includesYou:t.includesYou};Object(i.b)("analytics",{name:"confluence.spa.editor.autocomplete.fabric.mentions.insert",data:o}),(await Object(a.getAnalyticsWebClient)()).sendUIEvent({action:"inserted",actionSubject:"mentionTypeahead",source:"legacyEditor",attributes:o})}function h(){if(!p){const e=m(!0);Object(i.b)("analytics",{name:"".concat(u,".").concat(b("close",e)),data:{sessionDurationInMillis:e}})}p=!1}function m(e){let t=-1;return l&&(t=Date.now()-l,e&&(l=null)),t}function b(e,t){return-1===t?e:"".concat(e,t<1e3?".less.than.1s":t<5e3?".less.than.5s":t<1e4?".less.than.10s":t<2e4?".less.than.20s":".more.than.20s")}n.d(t,"triggerEditorPluginsLoaded",(function(){return y}));const g=n("8cd6").default;Object(i.a)("init.rte",()=>{Object(i.a)("mention-autocomplete-on-start",d),Object(i.a)("mention-autocomplete-on-select",f),Object(i.a)("mention-autocomplete-on-death",h)}),Object(i.a)("rte-destroyed",()=>{Object(i.c)("mention-autocomplete-on-death",h),Object(i.c)("mention-autocomplete-on-select",f),Object(i.c)("mention-autocomplete-on-start",d)}),Object(i.a)("rte-pre-resolveplugins",()=>{const e=Object(c.b)();r.a.tinymce.create("tinymce.plugins.MentionsAutoComplete",g),r.a.tinymce.PluginManager.add("fabricmention",r.a.tinymce.plugins.MentionsAutoComplete),e.addTinyMcePluginInit(e=>{e.plugins+=",fabricmention"})});const y=()=>{Object(i.b)("frontend.editor.plugins.resources.loaded")}},"3WEy":function(e,t,n){var o=n("JaYb"),r=n("CwQO"),i=n("r2uX")(!1),c=n("+WIo")("IE_PROTO");e.exports=function(e,t){var n,s=r(e),a=0,u=[];for(n in s)n!=c&&o(s,n)&&u.push(n);for(;t.length>a;)o(s,n=t[a++])&&(~i(u,n)||u.push(n));return u}},"44Vk":function(e,t,n){var o=n("DozX"),r=n("uv4k"),i=n("JaYb"),c=n("9FWt")("src"),s=Function.toString,a=(""+s).split("toString");n("XFAF").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(i(n,"name")||r(n,"name",t)),e[t]!==n&&(u&&(i(n,c)||r(n,c,e[t]?""+e[t]:a.join(String(t)))),e===o?e[t]=n:s?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[c]||s.call(this)}))},"6qOv":function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"7zcn":function(e,t,n){var o=n("DozX"),r=n("XFAF"),i=n("uv4k"),c=n("44Vk"),s=n("EkxP"),a=function(e,t,n){var u,l,p,d,f=e&a.F,h=e&a.G,m=e&a.S,b=e&a.P,g=e&a.B,y=h?o:m?o[t]||(o[t]={}):(o[t]||{}).prototype,v=h?r:r[t]||(r[t]={}),E=v.prototype||(v.prototype={});for(u in h&&(n=t),n)p=((l=!f&&y&&void 0!==y[u])?y:n)[u],d=g&&l?s(p,o):b&&"function"==typeof p?s(Function.call,p):p,y&&c(y,u,p,e&a.U),v[u]!=p&&i(v,u,d),b&&E[u]!=p&&(E[u]=p)};o.core=r,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},"8cd6":function(e,t,n){"use strict";n.r(t);var o=n("pkwY"),r=n("jUyC"),i=n("2srY"),c=n.n(i),s=n("Jygk"),a=n.n(s),u=n("bfgX"),l=n("8TdO"),p=n("/FQd"),d=n("kw4U"),f=n("jqY8"),h=n("btMZ");function m(e){0}var b,g,y,v,E,C,x=n("GHF8"),O=n("zjfJ"),P=n("bR0+"),k=n("KkZ4"),j=n("hz1Q"),w=n("eG2X"),T=n("D57K"),I=function(e,t,n){if(0===t)return e;var o=new Array(t);return o.fill(n),e.length>0?Object(T.__spread)(e,o):o},S=function(){function e(e,t){var n=this;this.callWithContextIds=function(e,t){return function(){for(var o,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var c=r?r.length:0,s=c!==t?I(r,t-c,void 0):r;return(o=n.mentionProvider)[e].apply(o,Object(T.__spread)(s,[n.contextIdentifier]))}},this.callDefault=function(e){return function(){for(var t,o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return(t=n.mentionProvider)[e].apply(t,Object(T.__spread)(o))}},this.subscribe=this.callDefault("subscribe"),this.unsubscribe=this.callDefault("unsubscribe"),this.filter=this.callWithContextIds("filter",1),this.recordMentionSelection=this.callWithContextIds("recordMentionSelection",1),this.shouldHighlightMention=this.callDefault("shouldHighlightMention"),this.isFiltering=this.callDefault("isFiltering"),this.mentionProvider=e,this.contextIdentifier=t}return e.prototype.getContextIdentifier=function(){return this.contextIdentifier},e}(),_=n("2sr0"),A=n("ERkP"),R=n.n(A),N=n("aN4M"),M=n("fN3Q"),L=n.n(M),D=function(e){return void 0===e&&(e=""),e+"_"+L()()},K=n("mV1e"),H=n("7nmT"),F=n.n(H),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(T.__extends)(t,e),t.prototype.componentDidMount=function(){this.popup=document.createElement("div"),document.body.appendChild(this.popup),this.popup.style.position="absolute",this._applyAbsolutePosition(),this._renderContent()},t.prototype.componentDidUpdate=function(){this._renderContent()},t.prototype.componentWillUnmount=function(){this.popup&&(H.unmountComponentAtNode(this.popup),document.body.removeChild(this.popup))},t.prototype._applyBelowPosition=function(){var e=this.props.target&&document.getElementById(this.props.target);if(e){var t=e.getBoundingClientRect(),n=t.bottom+(this.props.offsetY||0),o=t.left+(this.props.offsetX||0);this.popup&&(this.popup.style.top=n+"px",this.popup.style.bottom="",this.popup.style.left=o+"px")}},t.prototype._applyAbovePosition=function(){var e=this.props.target&&document.getElementById(this.props.target);if(e){var t=e.getBoundingClientRect(),n=window.innerHeight-t.top+(this.props.offsetY||0),o=t.left+(this.props.offsetX||0);this.popup&&(this.popup.style.top="",this.popup.style.bottom=n+"px",this.popup.style.left=o+"px")}},t.prototype._applyAbsolutePosition=function(){if("above"===this.props.relativePosition)this._applyAbovePosition();else if("below"===this.props.relativePosition)this._applyBelowPosition();else{var e=this.props.target&&document.getElementById(this.props.target);if(e){var t=e.getBoundingClientRect(),n=window.innerHeight;t.top<n/2?this._applyBelowPosition():this._applyAbovePosition()}}this.props.zIndex&&this.popup&&(this.popup.style.zIndex=""+this.props.zIndex)},t.prototype._renderContent=function(){this.popup&&H.render(this.props.children,this.popup)},t.prototype.render=function(){return A.createElement("div",null)},t.defaultProps={relativePosition:"auto",offsetX:0,offsetY:0,zIndex:0},t}(A.PureComponent),U=n("1v/X"),Q=n("Hjkb"),Y=n("bFjS"),q=n("KsTJ"),G=n("dDc+"),W=n("RZTm"),X=q.default.div(b||(b=Object(T.__makeTemplateObject)(["\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  background-color: white;\n  color: ",";\n  border: 1px solid #fff;\n  border-radius: ","px;\n"],["\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  background-color: white;\n  color: ",";\n  border: 1px solid #fff;\n  border-radius: ","px;\n"])),G.colors.N500,Object(W.f)()),V=q.default.div(g||(g=Object(T.__makeTemplateObject)(["\n  height: 108px;\n  margin-bottom: 8px;\n  margin-top: 36px;\n  width: 83px;\n"],["\n  height: 108px;\n  margin-bottom: 8px;\n  margin-top: 36px;\n  width: 83px;\n"]))),z=q.default.div(y||(y=Object(T.__makeTemplateObject)(["\n  ",";\n  margin-bottom: 8px;\n"],["\n  ",";\n  margin-bottom: 8px;\n"])),G.typography.h400()),J=q.default.div(v||(v=Object(T.__makeTemplateObject)(["\n  margin-bottom: 48px;\n"],["\n  margin-bottom: 48px;\n"]))),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(T.__extends)(t,e),t.prototype.render=function(){return A.createElement(V,null,A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 163.3 212","aria-labelledby":"title"},A.createElement("defs",null,A.createElement("style",{dangerouslySetInnerHTML:{__html:".cls-1{fill:url(#linear-gradient);}.cls-2,.cls-5{opacity:0.6;}.cls-3{fill:#c1c7d0;}.cls-4{fill:#b3bac5;}.cls-5{isolation:isolate;}"}}),A.createElement("linearGradient",{id:"linear-gradient",x1:"25.54",y1:"806.64",x2:"137.75",y2:"694.44",gradientTransform:"translate(0 -578)",gradientUnits:"userSpaceOnUse"},A.createElement("stop",{offset:0,stopColor:"#c1c7d0"}),A.createElement("stop",{offset:"0.24",stopColor:"#c4cad2",stopOpacity:"0.97"}),A.createElement("stop",{offset:"0.5",stopColor:"#cdd1d9",stopOpacity:"0.89"}),A.createElement("stop",{offset:"0.78",stopColor:"#dcdee4",stopOpacity:"0.75"}),A.createElement("stop",{offset:1,stopColor:"#ebecf0",stopOpacity:"0.6"}))),A.createElement("title",null,this.props.title?this.props.title:"Generic Error"),A.createElement("g",{"data-name":"Layer 2"},A.createElement("g",{"data-name":"Layer 1-2"},A.createElement("path",{className:"cls-1",d:"M94.8,74.2l66.4,115.1a15.16,15.16,0,0,1-5.5,20.7,15.4,15.4,0,0,1-7.6,2H15.2A15.19,15.19,0,0,1,0,196.8a15.4,15.4,0,0,1,2-7.6l66.5-115a15.21,15.21,0,0,1,20.7-5.6A15.81,15.81,0,0,1,94.8,74.2Zm-7.6,83.5,2.9-44.3a9.26,9.26,0,0,0-8.6-9.8h-.6a9.18,9.18,0,0,0-9.2,9.2v.6l2.9,44.3a6.33,6.33,0,0,0,6.3,5.9h0A6.26,6.26,0,0,0,87.2,157.7ZM71.4,181.2a9.5,9.5,0,0,0,9.4,9.6h.9a9.79,9.79,0,0,0,8.8-10.5,9.69,9.69,0,0,0-9.7-8.8A9.58,9.58,0,0,0,71.4,181.2Z"}),A.createElement("g",{className:"cls-2"},A.createElement("path",{className:"cls-3",d:"M92.7,27.2,85.3.4a.57.57,0,0,0-.7-.4c-.2.1-.4.2-.4.5L79.5,25.6l-5.8-1.1c-.3-.1-.6.2-.7.5v.3L80.3,52a.75.75,0,0,0,.7.5.82.82,0,0,0,.5-.5l4.7-25.1,5.8,1c.3.1.6-.2.7-.5Z"}),A.createElement("path",{className:"cls-3",d:"M66.1,41.8,55.2,33.2a.3.3,0,0,0-.4,0,.19.19,0,0,0,0,.3L60.4,45l-2.7,1.3c-.1.1-.2.2-.1.4a.1.1,0,0,0,.1.1l10.9,8.5a.3.3,0,0,0,.4,0,.19.19,0,0,0,0-.3L63.4,43.6l2.7-1.3a.33.33,0,0,0,0-.5Z"})),A.createElement("g",{className:"cls-2"},A.createElement("path",{className:"cls-4",d:"M102.1,56.8a1.42,1.42,0,0,1-.6-.2,1,1,0,0,1-.3-1.2c-.2-.8-2.3-2.8-3.5-4.1-3-3-4.9-5-3.8-6.5s3.6-.2,7.3,1.7a28.41,28.41,0,0,0,4.5,2,21.58,21.58,0,0,0-3.3-3.6c-3-3-4.9-5-3.8-6.5s3.6-.2,7.4,1.7a27.65,27.65,0,0,0,4.4,2,21.58,21.58,0,0,0-3.3-3.6c-3-3-4.9-5-3.8-6.5s3.6-.2,7.3,1.7c1.6.8,4.2,2.1,5,2.1a.91.91,0,0,1,1.2,0,1.08,1.08,0,0,1,.2,1.4c-1.1,1.5-3.6.2-7.3-1.7a27.65,27.65,0,0,0-4.4-2,21.58,21.58,0,0,0,3.3,3.6c3,3,4.9,5,3.8,6.5s-3.6.2-7.3-1.7a28.41,28.41,0,0,0-4.5-2,21.58,21.58,0,0,0,3.3,3.6c3,3,4.9,5,3.8,6.5s-3.6.2-7.3-1.7a28.41,28.41,0,0,0-4.5-2,21.58,21.58,0,0,0,3.3,3.6c3,3,4.9,5,3.8,6.5A1.8,1.8,0,0,1,102.1,56.8Z"})),A.createElement("g",{className:"cls-5"},A.createElement("path",{className:"cls-4",d:"M107.7,71.1a1.05,1.05,0,0,1-.9-.5c-1-1.9-2.2-4-.9-5.2s3.3.2,5.5,1.6a19.31,19.31,0,0,0,2.9,1.7,15.89,15.89,0,0,0-1.4-3.1c-1.3-2.3-2.5-4.4-1.1-5.6s3.3.2,5.5,1.6c1,.6,2.5,1.7,3.1,1.7a1,1,0,0,1,1.3.1,1,1,0,0,1-.1,1.4c-1.3,1.2-3.3-.2-5.5-1.6a19.31,19.31,0,0,0-2.9-1.7,13.64,13.64,0,0,0,1.4,3.1c1.3,2.3,2.4,4.4,1.1,5.6s-3.3-.2-5.5-1.6a19.31,19.31,0,0,0-2.9-1.7,13.07,13.07,0,0,0,1.2,2.7,1,1,0,0,1-.4,1.4A.6.6,0,0,1,107.7,71.1Zm12.5-7.6Z"})),A.createElement("g",{className:"cls-5"},A.createElement("path",{className:"cls-4",d:"M53.4,68.1a2,2,0,0,1-.7-.1c-1.6-.7-1.2-3.1-.8-5.6a10.87,10.87,0,0,0,.3-3.4A15,15,0,0,0,50,61.6c-1.5,2.1-3,4.1-4.6,3.4a1,1,0,0,1-.5-1.3,1,1,0,0,1,1.2-.6,11.23,11.23,0,0,0,2.3-2.7c1.5-2.1,3-4.1,4.7-3.4s1.3,3.1.8,5.7a13.86,13.86,0,0,0-.3,3.3,11.82,11.82,0,0,0,2.1-2.6c1.5-2.1,3-4.1,4.7-3.4s1.2,3.1.9,5.2a1,1,0,1,1-1.9-.3,14.28,14.28,0,0,0,.3-2.9,15,15,0,0,0-2.2,2.6C56,66.4,54.7,68.1,53.4,68.1Z"}))))))},t}(A.PureComponent),$={401:Y.d,403:Y.c,default:Y.a},ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(T.__extends)(t,e),t.getAdvisedActionMessage=function(e){return e&&e.hasOwnProperty("statusCode")&&$[e.statusCode.toString()]||$.default},t.prototype.render=function(){var e=this.props.error,n=t.getAdvisedActionMessage(e);return A.createElement(X,null,A.createElement(Z,null),A.createElement(z,null,A.createElement(Y.b,null)),A.createElement(J,null,A.createElement(n,null)))},t}(A.PureComponent),te=G.colors.N40,ne=Object(W.f)()+"px",oe=q.default.div(E||(E=Object(T.__makeTemplateObject)(["\n  display: block;\n  overflow-x: hidden;\n  overflow-y: auto;\n\n  padding: 4px 0;\n  margin: 0;\n\n  background: white;\n  max-height: ",";\n\n  border-radius: ","px;\n"],["\n  display: block;\n  overflow-x: hidden;\n  overflow-y: auto;\n\n  padding: 4px 0;\n  margin: 0;\n\n  background: white;\n  max-height: ",";\n\n  border-radius: ","px;\n"])),"264px",Object(W.f)()),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reveal=function(e){if(e&&t.scrollableDiv){var n=Object(H.findDOMNode)(e),o=t.scrollableDiv.getBoundingClientRect(),r=n.getBoundingClientRect();r.top<o.top?t.scrollableDiv.scrollTop+=r.top-o.top:r.bottom>o.bottom&&(t.scrollableDiv.scrollTop+=r.bottom-o.bottom)}},t.handleRef=function(e){t.scrollableDiv=e},t}return Object(T.__extends)(t,e),t.prototype.render=function(){return A.createElement(oe,{innerRef:this.handleRef},this.props.children)},t}(A.PureComponent),ie=q.default.div(C||(C=Object(T.__makeTemplateObject)(["\n  display: ",";\n\n  /* list style */\n  width: ",";\n  color: #333;\n\n  border: 1px solid ",";\n  border-radius: ",";\n  box-shadow: ",";\n"],["\n  display: ",";\n\n  /* list style */\n  width: ",";\n  color: #333;\n\n  border: 1px solid ",";\n  border-radius: ",";\n  box-shadow: ",";\n"])),(function(e){return e.empty?"none":"block"}),"340px",te,ne,"0 4px 8px -2px rgba(9, 30, 66, 0.25), 0 0 1px rgba(9, 30, 66, 0.31)");function ce(e,t){for(var n=e.length,o=t;o<0&&n>0;)o+=n;return o%n}function se(e,t){return t&&t[e]&&t[e].id}var ae=function(e){function t(t){var n=e.call(this,t)||this;return n.selectNext=function(){var e=ce(n.props.mentions,n.state.selectedIndex+1);n.selectIndex(e)},n.selectPrevious=function(){var e=ce(n.props.mentions,n.state.selectedIndex-1);n.selectIndex(e)},n.selectIndex=function(e,t){var o=n.props.mentions;n.setState({selectedIndex:e,selectedKey:se(e,o)},t)},n.selectId=function(e,t){var o=function(e,t){var n;if(t){for(n=0;n<t.length&&t[n].id!==e;)n++;n===t.length&&(n=void 0)}return n}(e,n.props.mentions);void 0!==o&&n.setState({selectedIndex:o,selectedKey:e},t)},n.chooseCurrentSelection=function(){var e=n.props,t=e.mentions,o=e.onSelection,r=n.state.selectedIndex,i=t&&t[r||0];Object(K.a)("ak-mention-list.chooseCurrentSelection",i),o&&i&&o(i)},n.mentionsCount=function(){var e=n.props.mentions;return e&&e.length||0},n.selectIndexOnHover=function(e,t){if(t){var o=Object(U.c)(t);Object(U.a)(n.lastMousePosition,o)&&n.selectId(e.id),n.lastMousePosition=o}},n.itemSelected=function(e){n.selectId(e.id,(function(){n.chooseCurrentSelection()}))},n.handleScrollableRef=function(e){n.scrollable=e},n.setDefaultSelectionState(),n}return Object(T.__extends)(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.mentions,n=this.state.selectedKey;if(t){if(!n)return;for(var o=0;o<t.length;o++)if(n===t[o].id)return void this.setState({selectedIndex:o});this.setDefaultSelectionState()}},t.prototype.componentDidUpdate=function(){var e=this.props.mentions,t=this.state.selectedIndex;e&&e[t]&&this.revealItem(e[t].id)},t.prototype.revealItem=function(e){var t=this.items[e];t&&this.scrollable&&this.scrollable.reveal(t)},t.prototype.setDefaultSelectionState=function(){this.state={selectedIndex:0,selectedKey:void 0}},t.prototype.renderItems=function(){var e=this,t=this.props.mentions;return t&&t.length?(this.items={},A.createElement("div",null,this.props.initialHighlightElement,t.map((function(t,n){var o=t.id;return A.createElement(Q.a,{mention:t,selected:e.isSelectedMention(t,n),key:o,onMouseMove:e.selectIndexOnHover,onSelection:e.itemSelected,ref:function(t){t?e.items[o]=t:delete e.items[o]}})})))):null},t.prototype.isSelectedMention=function(e,t){var n=this.state.selectedKey;return n?n===e.id:0===t},t.prototype.render=function(){var e,t,n=this.props,o=n.mentions,r=n.resourceError,i=o&&o.length;return r&&!i?e=A.createElement(ee,{error:r}):i&&(t=A.createElement(re,{ref:this.handleScrollableRef},this.renderItems())),A.createElement(ie,{empty:!i&&!r},e,t)},t}(A.PureComponent),ue=n("Uo4y"),le=n("Yhtg");function pe(e,t){for(var n=[],o=0;o<e.length;o++){var r=Object(T.__assign)({},e[o]),i=t[r.id];i&&(r.presence=i),n.push(r)}return n}var de,fe,he=function(e){function t(t){var n=e.call(this,t)||this;return n.selectNext=function(){n.mentionListRef&&n.mentionListRef.selectNext()},n.selectPrevious=function(){n.mentionListRef&&n.mentionListRef.selectPrevious()},n.selectIndex=function(e,t){n.mentionListRef&&n.mentionListRef.selectIndex(e,t)},n.selectId=function(e,t){n.mentionListRef&&n.mentionListRef.selectId(e,t)},n.chooseCurrentSelection=function(){n.mentionListRef&&n.mentionListRef.chooseCurrentSelection()},n.mentionsCount=function(){return n.mentionListRef?n.mentionListRef.mentionsCount():0},n.filterChange=function(e){var t=function(e){for(var t={},n=0;n<e.length;n++){var o=e[n];o.presence&&(t[o.id]=o.presence)}return t}(n.state.mentions);n.setState({resourceError:void 0,mentions:pe(e,t)}),n.refreshPresences(e)},n.filterError=function(e){Object(K.a)("ak-resourced-mentions-list._filterError",e),n.setState({resourceError:e})},n.presenceUpdate=function(e){n.setState({mentions:pe(n.state.mentions,e)})},n.notifySelection=function(e){n.props.resourceProvider.recordMentionSelection(e),n.props.onSelection&&n.props.onSelection(e)},n.handleMentionListRef=function(e){n.mentionListRef=e},n.closeHighlight=function(){le.a.registerClosed()},n.mentionsHighlight=function(){var e=n.state.mentions,t=n.props,o=t.isTeamMentionHighlightEnabled,r=t.createTeamPath;return le.a.isHighlightEnabled()&&o&&e&&e.length>0?A.createElement(ue.a,{createTeamLink:r,onClose:n.closeHighlight}):null},n.subscriberKey=D("ak-resourced-mention-list"),n.state={resourceError:void 0,mentions:[]},n.applyPropChanges({},t),n}return Object(T.__extends)(t,e),t.prototype.componentDidMount=function(){this.subscribeMentionProvider(this.props.resourceProvider),this.subscribePresenceProvider(this.props.presenceProvider)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.applyPropChanges(this.props,e)},t.prototype.componentWillUnmount=function(){this.unsubscribeMentionProvider(this.props.resourceProvider),this.unsubscribePresenceProvider(this.props.presenceProvider)},t.prototype.subscribeMentionProvider=function(e){e&&e.subscribe(this.subscriberKey,this.filterChange,this.filterError)},t.prototype.subscribePresenceProvider=function(e){e&&e.subscribe(this.subscriberKey,this.presenceUpdate)},t.prototype.unsubscribeMentionProvider=function(e){e&&e.unsubscribe(this.subscriberKey)},t.prototype.unsubscribePresenceProvider=function(e){e&&e.unsubscribe(this.subscriberKey)},t.prototype.applyPropChanges=function(e,t){var n=e.resourceProvider,o=e.presenceProvider,r=e.query,i=t.resourceProvider,c=t.presenceProvider,s=t.query,a=n!==i,u=!("string"!=typeof s||!i)&&(r!==s||a);a&&(this.unsubscribeMentionProvider(n),this.subscribeMentionProvider(i)),o!==c&&(this.unsubscribePresenceProvider(o),this.subscribePresenceProvider(c)),u&&i.filter(s)},t.prototype.refreshPresences=function(e){if(this.props.presenceProvider){var t=e.map((function(e){return e.id}));this.props.presenceProvider.refreshPresence(t)}},t.prototype.render=function(){var e=this.state,t=e.mentions,n=e.resourceError;return A.createElement(ae,{initialHighlightElement:this.mentionsHighlight(),mentions:t,resourceError:n,onSelection:this.notifySelection,ref:this.handleMentionListRef})},t}(A.PureComponent),me=q.default.div(de||(de=Object(T.__makeTemplateObject)(["\n  display: ",";\n"],["\n  display: ",";\n"])),(function(e){return e.visible?"block":"none"})),be=q.default.div(fe||(fe=Object(T.__makeTemplateObject)(["\n  background: #fff;\n  color: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  box-shadow: ",";\n  display: block;\n  width: ",";\n  white-space: nowrap;\n\n  & {\n    p {\n      margin: 0;\n      overflow: hidden;\n      padding: 9px;\n      text-overflow: ellipsis;\n    }\n  }\n"],["\n  background: #fff;\n  color: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  box-shadow: ",";\n  display: block;\n  width: ",";\n  white-space: nowrap;\n\n  & {\n    p {\n      margin: 0;\n      overflow: hidden;\n      padding: 9px;\n      text-overflow: ellipsis;\n    }\n  }\n"])),G.colors.N100,te,ne,"0 4px 8px -2px rgba(9, 30, 66, 0.25), 0 0 1px rgba(9, 30, 66, 0.31)","340px"),ge=function(e){function t(t){var n=e.call(this,t)||this;return n.selectNext=function(){n.mentionListRef&&n.mentionListRef.selectNext()},n.selectPrevious=function(){n.mentionListRef&&n.mentionListRef.selectPrevious()},n.selectIndex=function(e,t){n.mentionListRef&&n.mentionListRef.selectIndex(e,t)},n.selectId=function(e,t){n.mentionListRef&&n.mentionListRef.selectId(e,t)},n.chooseCurrentSelection=function(){n.mentionListRef&&n.mentionListRef.chooseCurrentSelection()},n.mentionsCount=function(){return n.mentionListRef?n.mentionListRef.mentionsCount():0},n.onFilterVisibilityChange=function(e,t){e!==t&&(t?n.props.onOpen&&n.props.onOpen():n.props.onClose&&n.props.onClose())},n.filterChange=function(e,t,o){Object(K.a)("ak-mention-picker.filterChange",e.length);var r=n.state.visible,i=e.length>0;n.setState({visible:i}),n.onFilterVisibilityChange(r,i),N.e(n.props)("rendered",o&&o.duration,e.map((function(e){return e.id})),t)},n.filterError=function(e){Object(K.a)("ak-mention-picker.filterError",e);var t=n.state.visible;n.setState({visible:!0,info:void 0}),n.onFilterVisibilityChange(t,!0)},n.filterInfo=function(e){Object(K.a)("ak-mention-picker.filterInfo",e),n.setState({info:e})},n.handleMentionListRef=function(e){n.mentionListRef=e},n.subscriberKey=D("ak-mention-picker"),n.state={visible:!1},n.applyPropChanges({},t),n}return Object(T.__extends)(t,e),t.prototype.componentDidMount=function(){this.subscribeResourceProvider(this.props.resourceProvider)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.applyPropChanges(this.props,e)},t.prototype.componentWillUnmount=function(){this.unsubscribeResourceProvider(this.props.resourceProvider)},t.prototype.applyPropChanges=function(e,t){var n=e.resourceProvider,o=t.resourceProvider;n!==o&&(this.unsubscribeResourceProvider(n),this.subscribeResourceProvider(o))},t.prototype.subscribeResourceProvider=function(e){e&&e.subscribe(this.subscriberKey,this.filterChange,this.filterError,this.filterInfo)},t.prototype.unsubscribeResourceProvider=function(e){e&&e.unsubscribe(this.subscriberKey)},t.prototype.render=function(){var e,t=this.props,n=t.createTeamPath,o=t.resourceProvider,r=t.presenceProvider,i=t.onSelection,c=t.query,s=t.target,a=t.position,u=t.zIndex,l=t.offsetX,p=t.offsetY,d=t.showTeamMentionsHighlight,f=this.state,h=f.visible,m=f.info,b=A.createElement(he,{resourceProvider:o,presenceProvider:r,onSelection:i,query:c,ref:this.handleMentionListRef,isTeamMentionHighlightEnabled:!!d,createTeamPath:n}),g=m&&!h?A.createElement(be,null,A.createElement("p",null,m)):null;return a?(Object(K.a)("target, position",s,a),e=s?A.createElement(B,{target:s,relativePosition:a,zIndex:u,offsetX:l,offsetY:p},A.createElement("div",null,b,g)):null):e=A.createElement("div",null,b,g),A.createElement(me,{className:"ak-mention-picker",visible:h||m},e)},t.defaultProps={onSelection:function(){},onOpen:function(){},onClose:function(){}},t}(A.PureComponent),ye=Object(_.a)({})(ge),ve=n("R4H1"),Ee=n("L21V"),Ce=n("bQlP"),xe=n("7M9M"),Oe=n("HbzK"),Pe=n("utTn");var ke=function(e){return e.replace(/[&"'<>`]/g,e=>{const t={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return"string"==typeof t[e]?t[e]:"&quot;"})};const je={adjustY:2};function we(e){const t=Object(Pe.a)(),n=ke(e.name);let o;const r="TEAM"===e.userType;o=r?{href:Object(P.c)(e.id,"tinymce",xe.CONTEXT_PATH)}:{href:Object(P.a)(e.id,null,xe.CONTEXT_PATH),accountid:e.id,"data-linked-resource-default-alias":n};const i={attrs:o,body:{html:n,text:n},classes:[r?"":"confluence-link"]};t.fromData(i).insert()}function Te(e,t,n){setTimeout(()=>{!function(e,t,n){const o=t.jquery?t:Object(r.default)(t),i=a.a.AJS.Position.spaceAboveBelow(a.a.AJS.Rte.getEditorFrame(),e),c=a.a.AJS.Rte.Content.offset(e),s=Object(r.default)(a.a).width(),u=Math.max(o.width()+c.left-s,0),l=n&&n.adjustX||0,p=n&&n.adjustY||0,d=c.left-u+l,f=o.outerHeight(!0);let h;h=1===function(e){return e.below>e.above?2:1}(i)?c.top-f-p:c.top+e.height()+p,t.css({left:d,top:h,display:"block"})}(e,t,n)},1)}class Ie{constructor(e){Object(O.a)(this,"_mentionSelected",e=>{e?this.options.update(e):this.options.die()}),Object(O.a)(this,"_getAnalyticsContext",()=>({attributes:{editorType:"tinyMCE"},fabricElementsCtx:{editorType:"tinyMCE"}})),this._mentionSelected=this._mentionSelected.bind(this),this._setPickerRef=this._setPickerRef.bind(this),this.options=e,this.resourceProvider=function(e){const{mentionResource:t,contextIdentifier:n}=e||{};return n?new S(t,Object(o.a)({},n,{sessionId:L()()})):t}(e),Object(Ce.x)(Ce.n)&&(this.presenceProvider=e.presenceResource),this.$mentionPickerContainer=Object(r.default)("<div/>"),this.mentionPickerContainer=this.$mentionPickerContainer[0],this.query=e.query,this.$mentionPickerContainer.css({position:"absolute","z-index":1e4,display:"none"}),Object(r.default)("body").append(this.mentionPickerContainer),this._renderPicker(),this.resourceProvider.subscribe("@atlaskit/mentions",e=>{e&&e.length>0&&this.reposition()},()=>{this.reposition()})}_setPickerRef(e){this.mentionPickerRef=e}async _renderPicker(){const{locale:e,featureFlags:t}=await Object(p.b)(Object(l.getApolloClient)()),[n,o]=function(e){const[,t,n]=/([a-z]*)[_-]?([A-Z]*)/i.exec(e||"");return[t.toLowerCase(),n.toUpperCase()]}(e),r=ve["".concat(n,"_").concat(o)]||ve[n],i=t["confluence.frontend.people.directory"]?xe.CONTEXT_PATH:"",c=R.a.createElement(Ee.e,{locale:n,messages:r},R.a.createElement(j.b,{client:Object(k.getAnalyticsWebClient)()},R.a.createElement(w.a,{data:this._getAnalyticsContext()},R.a.createElement(ye,{resourceProvider:this.resourceProvider,presenceProvider:this.presenceProvider,query:this.query,onSelection:this._mentionSelected,ref:this._setPickerRef,showTeamMentionsHighlight:t[Ce.o],createTeamPath:"".concat(i,"/people/search#createTeam")}))));F.a.render(c,this.mentionPickerContainer)}update(e){const t="TEAM"===e.userType&&!!e.context;if(Object(u.b)("mention-autocomplete-on-select",{mentioneeId:e.id,contentId:Oe.a.get("content-id"),queryLength:(this.query||"").length,userType:e.userType,memberCount:t?e.context.memberCount:null,includesYou:t?e.context.includesYou:null}),we(e),t){le.a.registerTeamMention();const t=Object(d.c)().getEditor(),n=e.context.members,o=n.length;for(let e=0;e<o;e++)0===e&&t.execCommand("mceInsertContent",!1," ("),we(n[e]),e+1===o?t.execCommand("mceInsertContent",!1,")"):t.execCommand("mceInsertContent",!1,", ")}}onTextChange(e){this.query=e,this._renderPicker()}isDataValid(){return!0}die(){F.a.unmountComponentAtNode(this.mentionPickerContainer),this.$mentionPickerContainer.remove(),this.resourceProvider.unsubscribe("@atlaskit/mentions")}onKeyUp(){this.mentionPickerRef.selectPrevious()}onKeyDown(){this.mentionPickerRef.selectNext()}onKeyEnter(){this.mentionPickerRef.chooseCurrentSelection()}onKeyTab(){this.mentionPickerRef.chooseCurrentSelection()}reposition(){Te(this.options.anchor,this.$mentionPickerContainer,je)}}n("PN9k");var Se=n("DvoV"),_e=n("fLXQ");const Ae=new h.a(a.a.navigator.userAgent),Re={leadingChar:"",isDataValid:()=>!1,backWords:0,onBeforeDie:()=>{}};class Ne{constructor(e){this.ed=Object(d.c)().getEditor(),this.settings=Object.assign({},Re,e),this.control=null,this.picker=null}start(){console.debug("startAutoComplete (FE) - Started"),this.control=Object(d.a)().Control(this.ed,this.settings),this.control&&(Object(u.b)("mention-autocomplete-on-start"),this.attachEventsToControl())}attachEventsToControl(){const e=this,t=e.control;if("function"==typeof this.settings.onBeforeDie){const t=this.control.die;this.control.die=function(...n){e.settings.onBeforeDie.apply(e.control,n),t.apply(e.control,n)}}const n={onBeforeKey(t,n){return t.keyCode!==Se.a.ESCAPE&&e.control&&Object(_e.a)(e.control.getContainer()[0],"isDirty"),t.keyCode===Se.a.DOWN?(this.settings.onKeyDown&&this.settings.onKeyDown(),a.a.tinymce.dom.Event.cancel(t),!1):t.keyCode===Se.a.UP?(this.settings.onKeyUp&&this.settings.onKeyUp(),a.a.tinymce.dom.Event.cancel(t),!1):t.keyCode===Se.a.ENTER?(e.settings.onBeforeEnter&&e.settings.onBeforeEnter(e.ed.undoManager),this.settings.onKeyEnter&&this.settings.onKeyEnter(),a.a.tinymce.dom.Event.cancel(t),!1):t.keyCode===Se.a.TAB?(this.settings.onKeyTab&&this.settings.onKeyTab(),a.a.tinymce.dom.Event.cancel(t),!1):!(t.keyCode===Se.a.ESCAPE||t.keyCode===Se.a.BACKSPACE&&!n)||(console.debug("autoCompleteControl.onBeforeKey - killing autoCompleteControl"),this.die(t.keyCode===Se.a.BACKSPACE),!1)},onKeyPress(e){const n=Ae.isIE()?e.keyCode:e.which;if(e.keyCode===Se.a.ENTER)return a.a.tinymce.dom.Event.cancel(e),!1;const o=String.fromCharCode(n);return this.settings.endChars.indexOf(o)>=0&&(console.debug("autoCompleteControl.onKeyPress - caught autocomplete-closing char - character"),t.die()),!0},onAfterKey(t,n){const o=e.control.getContainer()[0].querySelectorAll("#autocomplete-trigger"),r=o[0].innerText;return o.length>0&&r!==e.settings.leadingChar?(console.debug("after","dying because of: trigger text is modified"),e.reset(),!1):t.keyCode===Se.a.ENTER?(a.a.tinymce.dom.Event.cancel(t),!1):(this.settings.onTextChange&&this.settings.onTextChange(r,n),!0)},onDeath(){console.debug("autoCompleteControl.onDeath called"),e.control=null,Object(u.b)("mention-autocomplete-on-death")},onScroll(){e.picker&&e.picker.reposition()}};Object.assign(t,n)}reset(){this.control&&(this.control.die(),this.control=null)}}var Me=n("KD1n"),Le=n("H5qd");function De(){const e=Object(Me.a)(["\n  query SpaceIDQuery($spaceKey: String!) {\n    space(key: $spaceKey) {\n      id\n    }\n  }\n"]);return De=function(){return e},e}const Ke=n.n(Le)()(De()),He=new h.a(Object(f.c)().navigator.userAgent);let Fe,Be;function Ue(e){0}function Qe(){if((!Fe.control||Fe.control.dying)&&Be&&(Fe.start(),Fe.control)){const e=Fe.control.getContainer();return e&&e.addClass("fabric-mentions-autocomplete"),Fe.picker=new Ie({mentionResource:Be.mentionResource,presenceResource:Be.presenceResource,anchor:e,query:Fe.control.word,update:function(e){Fe&&Fe.control&&Fe.control.update(e)},die:function(){Fe&&Fe.control&&Fe.control.die()},contextIdentifier:Be.contextIdentifier}),!0}return!1}function Ye(e){const t=a.a.location.href.match(/\/spaces\/([^/]+)\//),n=t?t[1]:null;Object(p.b)(Object(l.getApolloClient)()).then(({cloudId:t})=>(e=>Object(l.getApolloClient)().query({query:Ke,variables:{spaceKey:e}}))(n).then(n=>Object(x.a)(t,null,Object(o.a)({},e,{spaceId:n.data.space.id})).then(e=>Be=e).catch(e=>Ue())).catch(e=>{Object(x.a)(t).then(e=>Be=e).catch(e=>Ue())})).catch(e=>{})}const qe=e=>{const t=c()(e,"formElement.offsetParent.id","");return t.includes("comment-")||t.includes("addcomment")?t.replace("comment-",""):null},Ge=e=>c()(e,"settings.page_id"),We={init(e){const t=Object(d.c)();m(),Ye({contentId:Ge(e),commentId:qe(e)}),e.addCommand("mceConfInsertFabricMentionsAutocomplete",Qe),function(){Object(d.a)().Settings["@"]={ch:"@",endChars:[],onTextChange(e,t){Fe.picker.onTextChange&&Fe.picker.onTextChange(t)},isDataValid:()=>!0,onKeyUp(){Fe.picker.onKeyUp&&Fe.picker.onKeyUp()},onKeyDown(){Fe.picker.onKeyDown&&Fe.picker.onKeyDown()},onKeyEnter(){Fe.picker.onKeyEnter&&Fe.picker.onKeyEnter()},onKeyTab(){Fe.picker.onKeyTab&&Fe.picker.onKeyTab()},update(e,t){Fe.picker.update&&Fe.picker.update(t),Fe.picker.die&&Fe.picker.die(),Fe.reset()}};const e={leadingChar:"@",onBeforeDie(){if(Fe.picker&&Fe.picker.die(),Fe.control){const e=Object(r.default)(Fe.control.getContainer()),t=e.find(".inserting");e.hasClass("isDirty")||t.closest("#autocomplete-search-text").remove()}},onBeforeEnter(e){if(Fe.control){const t=Object(r.default)(Fe.control.getContainer()).find("#autocomplete-search-text");t.text().length>0&&(t.prepend("@"),e&&"function"==typeof e.add&&e.add())}}};Fe=new Ne(e)}(),Object(u.a)("confluence.editor.registerHandlers",(e,t)=>{const n=t.handlerManager,o=t.ed,r=(0,t.createHandler)(/(?:\s|\xA0|^|\ufeff|\u200b)()$/,(...e)=>{m(),Qe()},!0,"#autocomplete");o.onKeyPress.addToTop((e,t)=>{if(t.metaKey)return!0;const n=He.isIE()?t.keyCode:t.which;return"@"!==String.fromCharCode(n)||(Qe()&&a.a.tinymce.dom.Event.cancel(t),!1)}),n.registerHandler("@".charCodeAt(0),r)}),e.onContextMenu.add(()=>{Fe.reset()}),Object(r.default)("#insertmention-button").click(e=>{e.stopPropagation(),e.preventDefault(),Qe()}),Object(u.a)("editor.text-placeholder.activated",(t,n)=>{var o;n&&"mention"===n.placeholderType&&(!(o=n.triggerEvent)||!o.shiftKey||o.ctrlKey||o.altKey||o.altGraphKey||o.metaKey||64!==o.which||a.a.tinymce.dom.Event.cancel(n.triggerEvent),a.a.tinymce.execCommand("mceFocus",!1,e.id),Qe())}),t.Placeholder&&t.Placeholder.addPlaceholderType&&t.Placeholder.addPlaceholderType({type:"mention",label:"User mention",tooltip:"Instructional text is replaced with suggested people when a person types."})},getInfo:()=>({longname:"Fabric Mentions",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(a.a.tinymce.majorVersion,".").concat(a.a.tinymce.minorVersion)}),getServiceUrl:()=>Be.mentionServiceUrl};t.default=We},"9FWt":function(e,t){var n=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},AqZj:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("KD1n");var o=n("daKX");Object(o.a)("wrm");function r(e,t){if(!t.length)return Promise.resolve();const n=window.document.createDocumentFragment(),o=t.map(e=>new Promise((t,o)=>{const r=window.document.createElement("script");r.async=!1,r.src=e,r.onload=t,r.onerror=o,n.appendChild(r)}));return e.appendChild(n),Promise.all(o).catch((...e)=>{0})}},CwQO:function(e,t,n){var o=n("rsBL"),r=n("yK4D");e.exports=function(e){return o(r(e))}},DozX:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},DvoV:function(e,t,n){"use strict";t.a={BACKSPACE:8,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,INS:45,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,META:91}},EkxP:function(e,t,n){var o=n("09V9");e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}}},GHF8:function(e,t,n){"use strict";var o=n("pkwY"),r=n("2srY"),i=n.n(r),c=n("/FQd"),s=n("8TdO"),a=n("bQlP"),u=n("7M9M"),l=n("D57K"),p=n("cDcQ"),d=n("aN4M"),f=function(){function e(e,t){var n=this;void 0===t&&(t={}),this.nameCache=new Map,this.nameQueue=new Map,this.nameStartTime=new Map,this.processingQueue=new Map,this.debounce=0,this.processQueue=function(){clearTimeout(n.debounce),n.debounce=0;var e=n.splitQueueAtLimit(),t=e.queue,o=e.extraQueue;n.nameQueue=o,n.processingQueue=new Map(Object(l.__spread)(n.processingQueue,t)),n.client.lookupMentionNames(Array.from(t.keys())).then((function(e){e.forEach((function(e){var o=e.id;t.delete(o),n.resolveQueueItem(e)})),t.forEach((function(e,t){n.resolveQueueItem({id:t,status:p.a.UNKNOWN})}))})).catch((function(){t.forEach((function(e,t){n.resolveQueueItem({id:t,status:p.a.SERVICE_ERROR})}))})),n.nameQueue.size>0&&n.scheduleProcessQueue()},this.client=e,this.fireHydrationEvent=Object(d.d)(t)}return e.prototype.lookupName=function(e){var t=this,n=this.nameCache.get(e);return n?(this.fireAnalytics(!0,n),n):new Promise((function(n){var o=t.processingQueue.get(e);o&&t.processingQueue.set(e,Object(l.__spread)(o,[n]));var r=t.nameQueue.get(e)||[];t.nameQueue.set(e,Object(l.__spread)(r,[n])),0!==r.length||o||t.nameStartTime.set(e,Date.now()),t.scheduleProcessQueue(),t.isQueueAtLimit()&&t.processQueue()}))},e.prototype.cacheName=function(e,t){this.nameCache.set(e,{id:e,name:t,status:p.a.OK})},e.prototype.scheduleProcessQueue=function(){this.debounce||(this.debounce=window.setTimeout(this.processQueue,e.waitForBatch))},e.prototype.isQueueAtLimit=function(){return this.nameQueue.size>=this.client.getLookupLimit()},e.prototype.splitQueueAtLimit=function(){var e=Array.from(this.nameQueue.entries()),t=this.client.getLookupLimit();return{queue:new Map(e.slice(0,t)),extraQueue:new Map(e.slice(t))}},e.prototype.resolveQueueItem=function(e){var t=e.id,n=this.processingQueue.get(t);n&&(this.processingQueue.delete(t),this.nameCache.set(t,e),n.forEach((function(t){try{t(e)}catch(e){}})),this.fireAnalytics(!1,e))},e.prototype.fireAnalytics=function(e,t){var n=t.id,o=t.status===p.a.OK?"completed":"failed",r=this.nameStartTime.get(n),i=r?Date.now()-r:0;this.nameStartTime.delete(n),this.fireHydrationEvent(o,n,e,i)},e.waitForBatch=100,e}(),h=n("jkYY"),m=n("NvSU"),b=n("bR0+"),g=n("kC4U");class y{getLookupLimit(){return 100}lookupMentionNames(e){const t=e.reduce((e,t,n)=>"".concat(e).concat(n>0?"&":"","accountId=").concat(encodeURIComponent(t)),"");return Object(g.a)("".concat("/wiki/rest/api/user/bulk","?").concat(t),{credentials:"same-origin"}).then(e=>e.json()).then(e=>e&&e.results&&e.results.length?e.results.map(e=>({id:e.accountId,name:e.displayName,status:p.a.OK})):[])}}n.d(t,"a",(function(){return v}));async function v(e,t,n,r){const l=i()(n,"spaceId",null);if(!e)throw new Error("MentionResource cannot be configured without a cloud id");return{mentionResource:await async function(e,t,n,r){const i={url:"".concat("/gateway/api/mentions","/").concat(e),productId:"micros-group/confluence",containerId:t||null,shouldHighlightMention:e=>e.id===n},l=await Object(c.b)(Object(s.getApolloClient)()),{featureFlags:p}=l,d=p["confluence.frontend.people.directory"]?u.CONTEXT_PATH:"",m=Object(o.a)({},i,{url:"/gateway/api/teams/mentions",teamLinkResolver:e=>Object(b.c)(e,"fabric",u.CONTEXT_PATH),teamHighlightEnabled:p[a.o],createTeamPath:"".concat(d,"/people/search#createTeam")});return p[a.m]&&(i.mentionNameResolver=new f(new y,r)),new h.a(i,m)}(e,l,t,r),presenceResource:new m.a({url:"/gateway/api/directory/graphql",cloudId:e,productId:"confluence"}),mentionServiceUrl:"".concat("/gateway/api/mentions","/").concat(e),contextIdentifier:{containerId:l,objectId:i()(n,"contentId",null),childObjectId:i()(n,"commentId",null)}}}},GU4h:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},JaYb:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"L+HE":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o="fabric-elements"},NGBq:function(e,t,n){var o=n("DozX"),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},PN9k:function(e,t,n){var o=n("7zcn");o(o.S+o.F,"Object",{assign:n("qyOa")})},PYUJ:function(e,t,n){e.exports=!n("oSRv")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},R4H1:function(e,t){},XFAF:function(e,t){var n=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=n)},XbFG:function(e,t,n){"use strict";var o=n("D57K"),r=n("ERkP"),i=n.n(r),c=n("l1C2"),s=n("RZTm"),a=Object(s.f)()+"px",u=function(e){var t=e.backgroundColor,n=e.textColor,o=e.children,r=e.testId;return Object(c.f)("span",{css:{backgroundColor:t,borderRadius:a,boxSizing:"border-box",color:n,display:"inline-block",fontSize:"11px",fontWeight:700,lineHeight:1,maxWidth:"100%",padding:"2px 0 3px 0",textTransform:"uppercase",verticalAlign:"baseline"},"data-testid":r},o)},l=Object(s.l)()/2+"px",p=function(e){var t=e.maxWidth,n=e.children;return Object(c.f)("span",{css:{display:"inline-block",verticalAlign:"top",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",boxSizing:"border-box",padding:"0 "+l,maxWidth:"number"==typeof t?t+"px":t,width:"100%"}},n)},d=n("mn8z"),f=n("m7kQ"),h={default:{light:f.N40,dark:f.N40},inprogress:{light:f.B50,dark:f.B50},moved:{light:f.Y75,dark:f.Y75},new:{light:f.P50,dark:f.P50},removed:{light:f.R50,dark:f.R50},success:{light:f.G50,dark:f.G50}},m={default:{light:f.N500,dark:f.N500},inprogress:{light:f.B500,dark:f.B500},moved:{light:f.N800,dark:f.N800},new:{light:f.P500,dark:f.P500},removed:{light:f.R500,dark:f.R500},success:{light:f.G500,dark:f.G500}},b={default:{light:f.N500,dark:f.N500},inprogress:{light:f.B400,dark:f.B400},moved:{light:f.Y500,dark:f.Y500},new:{light:f.P400,dark:f.P400},removed:{light:f.R400,dark:f.R400},success:{light:f.G400,dark:f.G400}},g={default:{light:f.N0,dark:f.N0},inprogress:{light:f.N0,dark:f.N0},moved:{light:f.N800,dark:f.N800},new:{light:f.N0,dark:f.N0},removed:{light:f.N0,dark:f.N0},success:{light:f.N0,dark:f.N0}},y=Object(d.a)((function(e){var t=e.appearance,n=e.isBold,r=e.maxWidth;return Object(o.__assign)(Object(o.__assign)({},"object"==typeof t?Object(o.__assign)({backgroundColor:(n?b:h).default.light,textColor:(n?g:m).default.light},t):{backgroundColor:(n?b[t]:h[t]).light,textColor:(n?g[t]:m[t]).light}),{maxWidth:r})})),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.theme,n=e.children,r=e.testId;return i.a.createElement(y.Provider,{value:t},i.a.createElement(y.Consumer,Object(o.__assign)({},this.props),(function(e){return i.a.createElement(u,Object(o.__assign)({testId:r},e),i.a.createElement(p,Object(o.__assign)({},e),n))})))},t.defaultProps={isBold:!1,appearance:"default",maxWidth:200},t}(r.PureComponent);t.a=v},aN4M:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return d}));var o,r,i=n("NV3J"),c=n("L+HE"),s=n("oswQ"),a=n("cDcQ");!function(e){e.TYPEAHEAD="mentionTypeahead",e.MENTION="mention",e.TEAM_MENTION_HIGHLIGHT="teamMentionHighlight"}(o||(o={})),function(e){e.VIEWED="viewed",e.CLICKED="clicked",e.CLOSED="closed"}(r||(r={}));var u=function(e){return function(t,n,r,a){if(void 0===r&&(r=[]),e.createAnalyticsEvent){var u={action:t,actionSubject:o.TYPEAHEAD,attributes:{packageName:s.a,packageVersion:s.b,componentName:o.MENTION,duration:Math.round(n),userIds:r,queryLength:a?a.length:0},eventType:i.OPERATIONAL_EVENT_TYPE};e.createAnalyticsEvent(u).fire(c.a)}}},l=function(e){return function(t,n,r,a,u){if(e){var l={action:n,actionSubject:t,actionSubjectId:a,eventType:i.UI_EVENT_TYPE,attributes:{source:r,packageName:s.a,packageVersion:s.b,componentName:o.TEAM_MENTION_HIGHLIGHT,viewedCount:u}};e(l).fire(c.a)}}},p=function(e){return function(t,n,r,u,l){var p={action:n,actionSubject:t,eventType:i.UI_EVENT_TYPE,attributes:{packageName:s.a,packageVersion:s.b,componentName:o.MENTION,accessLevel:l,isSpecial:Object(a.i)(r),userId:u}},d=e(p);return d.fire(c.a),d}},d=function(e){return function(t,n,r,a){if(e.createAnalyticsEvent){var u={action:t,actionSubject:o.MENTION,actionSubjectId:"hydration",attributes:{packageName:s.a,packageVersion:s.b,componentName:o.MENTION,userId:n,fromCache:r,duration:Math.round(a)},eventType:i.OPERATIONAL_EVENT_TYPE};e.createAnalyticsEvent(u).fire(c.a)}}}},"bR0+":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return p}));var o=n("/FQd"),r=n("8TdO"),i=n("7M9M");const c=(e,t,n="")=>e?"".concat(n,"/people/").concat(e,"?ref=confluence").concat(t?"&src=".concat(encodeURIComponent(t)):""):"",s=async(e,t)=>{if(!e)return"";let n="";try{const{featureFlags:e}=await Object(o.b)(Object(r.getApolloClient)());n=e["confluence.frontend.people.directory"]?i.CONTEXT_PATH:""}catch(e){}return"".concat(n,"/people/").concat(e,"?ref=confluence").concat(t?"&src=".concat(encodeURIComponent(t)):"")},a=(e,t,n="")=>e?"".concat(n,"/people/team/").concat(e,"?ref=confluence").concat(t?"&src=".concat(encodeURIComponent(t)):""):"",u=e=>e.getAttribute("data-account-id"),l=e=>{const t={class:"className"},n={};return(e=>Array.from(e.attributes).map(e=>e.name))(e).forEach(o=>{n[t[o]||o]=e.getAttribute(o)}),n.dangerouslySetInnerHTML={__html:e.innerHTML},n};function p(e){return e.filter(u).map(e=>{const t=l(e);t["data-user-hover-bound"]="true",t.href=c(t["data-account-id"],null);const n=window.document.createElement("span");return e.parentNode?(e.parentNode.replaceChild(n,e),{props:t,placeholder:n}):{}})}},btMZ:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));class o{constructor(t){t?this.userAgent=t:e.window&&(this.userAgent=e.window.navigator.userAgent)}isFirefox(){return-1!==this.userAgent.indexOf("Firefox/")}notFirefox(){return!this.isFirefox()}isMSEdge(){return-1!==this.userAgent.indexOf("Edge/")}notMSEdge(){return!this.isMSEdge()}isIE(){return-1!==this.userAgent.indexOf("MSIE")||-1!==this.userAgent.indexOf("Trident/")||this.isMSEdge()}notIE(){return!this.isIE()}isChrome(){return-1!==this.userAgent.indexOf("Chrome/")}notChrome(){return!this.isChrome()}isSafari(){return-1!==this.userAgent.indexOf("Safari/")&&-1===this.userAgent.indexOf("Chrome/")}notSafari(){return!this.isSafari()}isPhantom(){return-1!==this.userAgent.indexOf("PhantomJS")}notPhantom(){return!this.isPhantom()}version(){if(this.isIE()){const e=this.userAgent.match(/MSIE\s([\d.]+)/)||this.userAgent.match(/rv:([\d.]+)/)||this.userAgent.match(/Edge\/([\d.]+)/);return parseInt(e[1])}return this.isChrome()?parseInt(this.userAgent.match(/Chrome\/([\d.]+)/)[1]):this.isSafari()?parseInt(this.userAgent.match(/Version\/([\d.]+)/)[1]):this.isFirefox()?parseInt(this.userAgent.match(/Firefox\/([\d.]+)/)[1]):void 0}friendlyName(){return this.isMSEdge()?"MSEdge":this.isIE()?"IE":this.isChrome()?"Chrome":this.isSafari()?"Safari":this.isFirefox()?"Firefox":void 0}}}).call(this,n("fRV1"))},bw3G:function(e,t,n){var o=n("jH7Z"),r=n("zTCs"),i=n("eNNV"),c=Object.defineProperty;t.f=n("PYUJ")?Object.defineProperty:function(e,t,n){if(o(e),t=i(t,!0),o(n),r)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},eNNV:function(e,t,n){var o=n("GU4h");e.exports=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},ecHh:function(e,t,n){var o=n("yK4D");e.exports=function(e){return Object(o(e))}},fLXQ:function(e,t,n){"use strict";n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return b}));n("pkwY");var o=n("Jygk"),r=n.n(o),i=n("S2j0"),c=n("AqZj"),s=n("Xzcx");function a(e,t,n,o){if(n<=0||!n||t===e.scrollTop)return e.scrollTop=t,void(o&&o());const i=t-e.scrollTop,c=i/n*(1e3/60);let s=e.scrollTop;const a=()=>{const n=s+c;if(i<0&&n<=t||i>0&&n>=t)return e.scrollTop=t,void(o&&o());s=n,e.scrollTop=s,r.a.requestAnimationFrame(a)};r.a.requestAnimationFrame(a)}function u(e,t={}){if(!e)return;t.container||(t.container=Object(s.h)());const{container:n,topGap:o=0,bottomGap:r=0,duration:i=0}=t,c=e.getBoundingClientRect(),{top:u,bottom:l}=c,{clientHeight:p,scrollTop:d}=t.container,f=-u+o,h=l-p+r;return f>0?a(n,d-f,i):h>0?a(n,d+h,i):void 0}function l(e,t,n){e&&t.split(" ").forEach(t=>e.classList[n](t))}function p(e,t){l(e,t,"add")}function d(e,t){const n=t?t.documentElement:document.documentElement;if(!e||!n)return;const o=e.getBoundingClientRect(),{top:r,bottom:i}=o,c=n.offsetHeight;return 0<=r&&r<c||0<=i&&i<=c||r<=0&&0<=i&&i>=c}function f(e,t){const n=t?t.documentElement:document.documentElement;if(!e||!n)return;const o=e.getBoundingClientRect(),{top:r}=o,i=n.offsetHeight;return 0<=r&&r<i}function h(e){let t=e.offsetTop;for(;e.offsetParent;)t+=(e=e.offsetParent).offsetTop;return t}function m(e){if(!e||e===document)return null;const t=r.a.getComputedStyle(e);return e.scrollHeight>e.clientHeight&&"hidden"!==e.style.overflow&&"visible"!==t.overflow?e:m(e.parentNode)}const b=(e,t,n)=>n?e.length?new Promise(o=>{Object(i.a)(e,()=>{Object(c.a)(n,t).then(o)},()=>{0})}):Object(c.a)(n,t):Promise.reject(new Error("script container is not present"))},gQmS:function(e,t){t.f=Object.getOwnPropertySymbols},iZYR:function(e,t,n){var o=n("3WEy"),r=n("6qOv");e.exports=Object.keys||function(e){return o(e,r)}},jH7Z:function(e,t,n){var o=n("GU4h");e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},kw4U:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var o=n("Jygk"),r=n.n(o),i=n("5PxA"),c=n("WHVE"),s=n("bQlP");function a(){return Object(s.x)("fd-87.editor.spa")&&(Object(i.a)(),Object(c.a)()),r.a.AJS.Rte.BootstrapManager}function u(){return Object(s.x)("fd-87.editor.spa")&&Object(i.a)(),r.a.AJS.Rte}function l(){return r.a.Confluence.Editor.Autocompleter}},m4ZL:function(e,t,n){var o=n("GU4h"),r=n("DozX").document,i=o(r)&&o(r.createElement);e.exports=function(e){return i?r.createElement(e):{}}},nmGk:function(e,t){var n=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},oSRv:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},oswQ:function(e){e.exports=JSON.parse('{"a":"@atlaskit/mention","b":"18.16.0"}')},qyOa:function(e,t,n){"use strict";var o=n("iZYR"),r=n("gQmS"),i=n("0On3"),c=n("ecHh"),s=n("rsBL"),a=Object.assign;e.exports=!a||n("oSRv")((function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!=a({},e)[n]||Object.keys(a({},t)).join("")!=o}))?function(e,t){for(var n=c(e),a=arguments.length,u=1,l=r.f,p=i.f;a>u;)for(var d,f=s(arguments[u++]),h=l?o(f).concat(l(f)):o(f),m=h.length,b=0;m>b;)p.call(f,d=h[b++])&&(n[d]=f[d]);return n}:a},r2uX:function(e,t,n){var o=n("CwQO"),r=n("u2Rj"),i=n("rbMR");e.exports=function(e){return function(t,n,c){var s,a=o(t),u=r(a.length),l=i(c,u);if(e&&n!=n){for(;u>l;)if((s=a[l++])!=s)return!0}else for(;u>l;l++)if((e||l in a)&&a[l]===n)return e||l||0;return!e&&-1}}},rY2j:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},rbMR:function(e,t,n){var o=n("nmGk"),r=Math.max,i=Math.min;e.exports=function(e,t){return(e=o(e))<0?r(e+t,0):i(e,t)}},rsBL:function(e,t,n){var o=n("tzX3");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},tzX3:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},u2Rj:function(e,t,n){var o=n("nmGk"),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},utTn:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return u}));var o=n("Jygk"),r=n.n(o),i=n("M2LZ");const c=function(){i.a.require(["wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:resources"]).then(()=>{r.a.Confluence.SpaceBlueprint.Dialog.launch()})},s=function(){i.a.require(["wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:resources"]).then(()=>{r.a.Confluence.Blueprint.loadDialogAndOpenTemplate({})})},a=function(){return Confluence.Link};"undefined"!=typeof Confluence&&Confluence;const u=()=>"undefined"!=typeof Confluence&&Confluence.Binder&&Confluence.Binder.userHover&&Confluence.Binder.userHover()},uv4k:function(e,t,n){var o=n("bw3G"),r=n("rY2j");e.exports=n("PYUJ")?function(e,t,n){return o.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},yK4D:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},zTCs:function(e,t,n){e.exports=!n("PYUJ")&&!n("oSRv")((function(){return 7!=Object.defineProperty(n("m4ZL")("div"),"a",{get:function(){return 7}}).a}))}}]);
//# sourceMappingURL=initialize-editor-plugins~493df0b3.UwieEAU1-v39.js.map