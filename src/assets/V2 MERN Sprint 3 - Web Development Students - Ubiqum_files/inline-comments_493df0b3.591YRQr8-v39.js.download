/*! For license information please see inline-comments~493df0b3.591YRQr8-v39.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([["inline-comments~493df0b3","dashboard.popular~675cf4e2"],{"+ypV":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("ERkP")),o=r(n("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var s=function(e){return i.default.createElement(o.default,a({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M4 12v7a.971.971 0 0 0 .278.704.99.99 0 0 0 .701.296H6v-9H4.98a.99.99 0 0 0-.701.296A.971.971 0 0 0 4 12zm15.281-.96a3.046 3.046 0 0 0-2.321-1.061h-2.634c.04-.181.08-.36.11-.532.515-2.934 0-4-.504-4.594A2.432 2.432 0 0 0 12.075 4a3.078 3.078 0 0 0-2.968 2.751c-.393 1.839-.454 2-.968 2.725l-.768 1.089a2.011 2.011 0 0 0-.363 1.141v6.273c.001.532.216 1.041.596 1.416s.896.585 1.433.584h7.247a3.014 3.014 0 0 0 2.997-2.507l.677-4a2.963 2.963 0 0 0-.677-2.432zm-1.998 6.1a1.007 1.007 0 0 1-1 .835H9.038v-6.269l.767-1.089a7.577 7.577 0 0 0 1.302-3.509c.036-.543.255-1.209.969-1.108.714.1.575 1.916.363 3.1a19.712 19.712 0 0 1-.868 2.882l5.39-.008c.297-.001.58.128.773.352a.993.993 0 0 1 .226.813l-.676 4.001z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};s.displayName="LikeIcon";var c=s;t.default=c},"03Pf":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u}));var i=n("KD1n"),o=n("daKX");function r(){const e=Object(i.a)(["window.scroll() is not supported"]);return r=function(){return e},e}const a=Object(o.a)("scroll-to-element"),s=new Set;function c(e){return s.add(e),()=>s.delete(e)}function l(){s.forEach(e=>{try{e()}catch(e){Promise.all([n.e("monitoring~60420017").then(n.bind(null,"fFmz")),n.e("error-boundary~3652a975").then(n.bind(null,"fEZm"))]).then(([{getMonitoringClient:t},{Attribution:n}])=>{t().submitError(e,{attribution:n.CONTENT_EXPERIENCE})}).catch(()=>{})}})}function d(){l(),window.scrollTo(0,0)}function u(e,t){let n=0,i=e.offsetParent;for(;i instanceof HTMLElement;)n+=i.offsetTop,i=i.offsetParent;const o=e.offsetTop+(t||0)+n;l();try{window.scroll({top:o,behavior:"auto"})}catch(e){a.error(r())}}},"08ix":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("ERkP"),o=n.n(i),r=n("FdGg");function a(e){return function(t){return n=>o.a.createElement(r.a,e,o.a.createElement(t,n))}}},"0LOj":function(e,t,n){"use strict";t.a=function(e){return e.displayName||e.name||"Component"}},"1esp":function(e,t,n){"use strict";var i=n("7Otk"),o=n("7hB0"),r=n("mQlO");t.a=Object(i.a)(Object(o.a)(r.a))},"3oRx":function(e,t,n){"use strict";var i=n("pkwY"),o=n("ERkP"),r=n.n(o),a=n("q9qF"),s=n("Iy7w"),c=n("1U1M"),l=n("L21V"),d=n("EFtY"),u=n.n(d),h=n("p+ff"),m=n("dDc+"),p=n("8gCJ"),f=n("hATe"),g=n("EcEE");const b=Object(s.a)("div",{target:"e1s8o7tt0"})({name:"60afig",styles:"display:flex;padding-top:16px;"}),v=Object(s.a)("div",{target:"e1s8o7tt1"})({name:"qnh8h2",styles:"display:flex;flex-direction:column;padding-left:8px;> span{padding-top:4px;}"}),y=({onClose:e,content:t,user:n})=>r.a.createElement(p.a,{actions:[{text:"Close",onClick:()=>{e(!1)}}],width:"large"},r.a.createElement(b,null,r.a.createElement(f.a,{userId:n.userId,src:n.avatarUrl}),r.a.createElement(v,{onClick:t=>{t.target instanceof HTMLImageElement&&e(!1)}},r.a.createElement(g.a,{userId:n.userId,fullName:n.displayName}),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:t}}))));y.displayName="LegacyContentModal";var E=n("KD1n"),C=n("H5qd");function k(){const e=Object(E.a)(["\n  query LegacyContentQuery($contentId: ID!) {\n    content(id: $contentId) {\n      nodes {\n        id\n        body {\n          view {\n            value\n          }\n        }\n        history {\n          createdBy {\n            ... on KnownUser {\n              accountId\n            }\n            ... on User {\n              accountId\n            }\n            profilePicture {\n              path\n            }\n            displayName\n          }\n        }\n        type\n      }\n    }\n  }\n"]);return k=function(){return e},e}const w=n.n(C)()(k()),O=Object(s.a)("span",{target:"e1e3cud20"})({name:"1r5b1jx",styles:"display:flex;padding:12px 0;> span:first-of-type{padding-right:8px;}> span:last-of-type{margin-top:-4px;}"}),I=Object(s.a)("div",{target:"e1e3cud21"})({name:"suayju",styles:"margin:0 auto;width:100%;"}),M=Object(s.a)("div",{target:"e1e3cud22"})({name:"13tntgw",styles:"display:flex;padding:12px 0 16px 0;span{padding-right:8px;}"}),_=Object(s.a)("div",{target:"e1e3cud23"})("background-color:",m.colors.N60,";border-radius:3px;height:12px;margin-bottom:8px;width:",e=>e.width,"%;"),T=({contentId:e})=>{var t;const[n,i]=Object(o.useState)(!1),{data:a,loading:s}=Object(c.c)(w,{variables:{contentId:e}}),d=Object(o.useCallback)(()=>{i(!0)},[e]),m=(e=>{var t,n,i;return{userId:null!=(i=e)&&null!=(i=i.content)&&null!=(i=i.nodes)&&null!=(i=i[0])&&null!=(i=i.history)&&null!=(i=i.createdBy)?i.accountId:i,avatarUrl:null!=(n=e)&&null!=(n=n.content)&&null!=(n=n.nodes)&&null!=(n=n[0])&&null!=(n=n.history)&&null!=(n=n.createdBy)&&null!=(n=n.profilePicture)?n.path:n,displayName:null!=(t=e)&&null!=(t=t.content)&&null!=(t=t.nodes)&&null!=(t=t[0])&&null!=(t=t.history)&&null!=(t=t.createdBy)?t.displayName:t}})(a),p=(null!=(t=a)&&null!=(t=t.content)&&null!=(t=t.nodes)&&null!=(t=t[0])&&null!=(t=t.body)&&null!=(t=t.view)?t.value:t)||"";return s?r.a.createElement(M,null,r.a.createElement(u.a,{label:"legacy-modal-shortcut"}),r.a.createElement(I,null,r.a.createElement(_,{width:100}),r.a.createElement(_,{width:100}),r.a.createElement(_,{width:75}))):r.a.createElement(o.Fragment,null,r.a.createElement(O,null,r.a.createElement(u.a,{label:"legacy-modal-shortcut"}),r.a.createElement("span",null,r.a.createElement("a",{href:"#",onClick:d},r.a.createElement(l.c,{id:"fabric-extension-handlers.fallback.action",defaultMessage:"Click to view content",description:"clickable link to display more content"}))," ",r.a.createElement(l.c,{id:"fabric-extension-handlers.fallback.reason",defaultMessage:"that can't display inline as it was created in a legacy version of Confluence.",description:"reason for why we cannot display the fallback content"}))),r.a.createElement(h.b,null,n&&r.a.createElement(y,{onClose:i,content:p,user:m})))};T.displayName="FallbackComponent",n.d(t,"a",(function(){return N}));const N=(e,t)=>{const n={[a.b.MACRO_CORE]:R(e)},o={[a.b.MIGRATION]:x(e,t)};return Object(i.a)({},n,o)},R=e=>t=>{const{extensionKey:n}=t;return e&&e(n),null},x=(e,t)=>n=>{const{extensionKey:i}=n;return i===a.d.INVALID&&e&&e(),i===a.a.INLINE_EXTERNAL_IMAGE?(e&&e(i),t?r.a.createElement(T,{contentId:t}):null):i===a.a.INLINE_MEDIA_IMAGE?(e&&e(i),t?r.a.createElement(T,{contentId:t}):null):null}},"5NZs":function(e,t,n){"use strict";var i=function(){};e.exports=i},"7Otk":function(e,t,n){"use strict";var i=n("97Jx"),o=n.n(i),r=n("m3Bd"),a=n.n(r),s=n("VrFO"),c=n.n(s),l=n("Y9Ll"),d=n.n(l),u=n("N+ot"),h=n.n(u),m=n("AuHH"),p=n.n(m),f=n("1Pcy"),g=n.n(f),b=n("5Yy7"),v=n.n(b),y=n("KEM+"),E=n.n(y),C=n("ERkP"),k=n.n(C),w=n("aWzz"),O=n.n(w),I=n("0LOj"),M=n("xbH5"),_=n("S6DC");t.a=function(e){var t,n;return n=t=function(t){function n(){var e,t;c()(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=h()(this,(e=p()(n)).call.apply(e,[this].concat(o))),E()(g()(t),"callContextFn",Object(M.a)(g()(t),_.a)),E()(g()(t),"shouldCloseAfterClick",(function(){return!t.props.isDisabled&&!t.props.href})),E()(g()(t),"handleClick",(function(e){t.props.onClick(e),t.shouldCloseAfterClick()&&t.callContextFn("itemClicked")})),E()(g()(t),"handleKeyDown",(function(e){t.props.onKeyDown?t.props.onKeyDown(e):"Space"!==e.key&&"Enter"!==e.key||t.handleClick(e)})),t}return v()(n,t),d()(n,[{key:"render",value:function(){var t=this.props,n=t.children,i=a()(t,["children"]);return k.a.createElement(e,o()({},i,{onClick:this.handleClick,onKeyDown:this.handleKeyDown}),n)}}]),n}(C.Component),E()(t,"displayName","WithItemClick(".concat(Object(I.a)(e),")")),E()(t,"defaultProps",{onClick:function(){}}),E()(t,"contextTypes",E()({},_.a,O.a.object)),n}},"7hB0":function(e,t,n){"use strict";var i=n("97Jx"),o=n.n(i),r=n("m3Bd"),a=n.n(r),s=n("VrFO"),c=n.n(s),l=n("Y9Ll"),d=n.n(l),u=n("N+ot"),h=n.n(u),m=n("AuHH"),p=n.n(m),f=n("1Pcy"),g=n.n(f),b=n("5Yy7"),v=n.n(b),y=n("KEM+"),E=n.n(y),C=n("ERkP"),k=n.n(C),w=n("aWzz"),O=n.n(w),I=n("7nmT"),M=n.n(I),_=n("fN3Q"),T=n.n(_),N=n("0LOj"),R=n("xbH5"),x=n("S6DC");t.a=function(e){var t,n;return n=t=function(t){function n(){var e,t;c()(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=h()(this,(e=p()(n)).call.apply(e,[this].concat(o))),E()(g()(t),"contextId",void 0),E()(g()(t),"callContextFn",Object(R.a)(g()(t),x.b)),E()(g()(t),"isFocusable",(function(){return!t.props.isDisabled&&!t.props.isHidden})),E()(g()(t),"handleFocus",(function(){t.isFocusable()&&t.callContextFn("itemFocused",t.contextId)})),t}return v()(n,t),d()(n,[{key:"componentDidMount",value:function(){this.isFocusable()&&(this.contextId=T()(),this.callContextFn("registerItem",this.contextId,M.a.findDOMNode(this)))}},{key:"componentDidUpdate",value:function(){this.isFocusable()&&this.callContextFn("updateItem",this.contextId,M.a.findDOMNode(this))}},{key:"componentWillUnmount",value:function(){this.isFocusable()&&this.callContextFn("deregisterItem",this.contextId)}},{key:"render",value:function(){var t=this.props,n=t.children,i=a()(t,["children"]);return k.a.createElement(e,o()({onFocus:this.handleFocus,role:"menuitem"},i),n)}}]),n}(C.Component),E()(t,"displayName","WithItemFocus(".concat(Object(N.a)(e),")")),E()(t,"contextTypes",E()({},x.b,O.a.object)),n}},"96U/":function(e,t,n){"use strict";var i=n("ERkP"),o=n.n(i),r=n("7nmT"),a=n.n(r),s=n("Jygk"),c=n.n(s),l=n("8TdO"),d=n("/FQd"),u=n("oE0q"),h=n("zjfJ"),m=n("aWzz"),p=n.n(m),f=n("uDfI"),g=n("gwLK"),b=n("lZoD"),v=n("kD2R"),y=n("nWyW"),E=n("JxFu"),C=n("zdBD"),k=n("Clud"),w=n("7M9M"),O=n("cptV"),I=n("FuAq"),M=n("gzs+"),_=n("M5Dj"),T=n("W3C3"),N=n("i66J"),R=n("frB3"),x=n("pkwY");class D extends i.Component{render(){const{children:e,eventHandlers:t}=this.props;return Object(i.cloneElement)(e,Object(x.a)({},t))}}D.displayName="Hover",D.defaultProps={eventHandlers:{}},D.displayName="Hover";var j,S=n("cxan"),P=(n("0iyY"),n("w0mW")),A=n.n(P);const F={HOVER:"hover",NONE:"none"};let L=Object(f.connect)()(j=class extends i.Component{constructor(){super(),this._refCallback=this._refCallback.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onComponentToShowMouseEnter=this.onComponentToShowMouseEnter.bind(this),this.onComponentToShowMouseLeave=this.onComponentToShowMouseLeave.bind(this),this.hoverId=A()("hover_")}componentDidMount(){const{open:e}=this.props;e&&this._showHoverAfterDelay()}componentDidUpdate(e){const{open:t}=this.props;e.open!==t&&(t?this._showHoverAfterDelay():this._hideHoverAfterDelay())}componentWillUnmount(){this._hideHover()}onMouseLeave(){this.props.shouldHide&&(this.isHoveringTarget=!1,this.toggleHover())}onMouseEnter(){this.isHoveringTarget=!0,this.toggleHover()}onComponentToShowMouseEnter(){this.isHoveringComponentToShow=!0,this.toggleHover()}onComponentToShowMouseLeave(){this.props.shouldHide&&(this.isHoveringComponentToShow=!1,this.toggleHover())}_showHoverAfterDelay(){this.showTimer=setTimeout(()=>{this._showHover()},this.props.delayShow)}_showHover(){this.isShowing=!0;const{gravity:e,componentToShow:t,dispatch:n,gap:o,zIndex:r,fixed:a,shouldPersistOnScrollAndResize:s}=this.props;this._hoverTarget&&n(Object(N.b)({hoverId:this.hoverId,gravity:e,componentToShow:Object(i.cloneElement)(t,{onMouseEnter:this.onComponentToShowMouseEnter,onMouseLeave:this.onComponentToShowMouseLeave}),gap:o,target:this._hoverTarget,zIndex:r,fixed:a,shouldPersistOnScrollAndResize:s}))}_hideHoverAfterDelay(){this.hideTimer=setTimeout(()=>{this._hideHover()},this.props.delayHide)}_hideHover(){this.isShowing=!1;const{dispatch:e}=this.props;e(Object(N.a)({hoverId:this.hoverId}))}_clearTimers(){clearTimeout(this.hideTimer),clearTimeout(this.showTimer)}isHovering(){return this.isHoveringTarget||this.isHoveringComponentToShow}toggleHover(){const e=this.isHovering();this._clearTimers(),this.isShowing&&!e?this._hideHoverAfterDelay():!this.isShowing&&e&&this._showHoverAfterDelay()}_getEventHandlers(e){switch(e){case F.HOVER:return{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave};case F.NONE:return{}}}_refCallback(e){this._hoverTarget=e}render(){const{children:e,showOn:t,className:n,style:i}=this.props,r=this._getEventHandlers(t),a={className:n,style:i};return o.a.createElement(D,{eventHandlers:r},o.a.createElement(this.props.tagName,Object(S.a)({ref:this._refCallback},a),e))}})||j;L.defaultProps={delayHide:150,delayShow:200,gravity:"n",gap:0,showOn:F.HOVER,open:!1,tagName:"div",shouldHide:!0,shouldPersistOnScrollAndResize:!1},L.displayName="ReduxHover";n("TgF9");var H=n("r0pP"),$=n("HEM+"),V=n("lPJD"),U=n("qdfj"),B=n("cphC"),z=n("r9hL"),W=n("d3tz"),q=n("gHio"),K=n.n(q),G=n("L21V"),Y=n("KD1n"),J=n("dDc+"),Q=n("KsTJ");function X(){const e=Object(Y.a)(["\n  flex: 0 0 auto;\n  appearance: none;\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n  }\n"]);return X=function(){return e},e}function Z(){const e=Object(Y.a)(["\n  flex-grow: 1;\n  color: ",";\n  text-align: center;\n"]);return Z=function(){return e},e}function ee(){const e=Object(Y.a)(["\n  display: flex;\n  background-color: ",";\n  border-radius: 5px;\n  align-items: center;\n  overflow: hidden;\n  height: ","px;\n  transition: height 0.25s linear;\n"]);return ee=function(){return e},e}const te=Q.default.div(ee(),J.colors.P300,({isOpen:e})=>e?50:0),ne=Q.default.p(Z(),"white"),ie=Q.default.button(X(),"white");class oe extends i.Component{constructor(...e){super(...e),Object(h.a)(this,"onDismiss",e=>{const{onDismiss:t}=this.props;e.stopPropagation(),e.preventDefault(),t()})}render(){const{isOpen:e}=this.props;return o.a.createElement(te,{isOpen:e},o.a.createElement(ne,null,o.a.createElement(G.b,{id:"changeboarding.dnd.pagetree.spacesettings.banner"})),o.a.createElement(ie,{onClick:this.onDismiss},o.a.createElement(K.a,null)))}}var re;oe.displayName="ReorderPagesBannerComponent";let ae=Object(z.b)(W.a.CHANGEBOARDING)(re=class extends i.Component{constructor(...e){super(...e),Object(h.a)(this,"state",{isOpen:!1}),Object(h.a)(this,"onDismiss",()=>{const{triggerAnalytics:e,stop:t}=this.props;this.setState({isOpen:!1}),e("reorderpages-banner-dismissed"),t()})}componentWillMount(){this.el=c.a.document.getElementById("reorderpages-changeboarding-react-portal-placeholder")}componentDidMount(){setTimeout(()=>{this.setState({isOpen:!0})},200)}render(){const{isOpen:e}=this.state;return this.el?a.a.createPortal(o.a.createElement(oe,{isOpen:e,onDismiss:this.onDismiss}),this.el):null}})||re;var se;let ce=Object(B.a)(se=Object(U.a)(se=class extends i.Component{constructor(...e){super(...e),Object(h.a)(this,"shouldShowSpaceSettingChangeboarding",()=>this.isOnReorderPages()),Object(h.a)(this,"isOnReorderPages",()=>{const{matchRoute:e,location:t}=this.props,n=e(t.pathname+t.search);return n&&n.name===w.SPACE_SETTINGS_REORDERPAGES.name})}render(){const{coordinationClient:e}=this.props;return this.shouldShowSpaceSettingChangeboarding()?o.a.createElement(V.a,{client:e,messageId:"confluence-dragdrop-spacesettings-banner"},o.a.createElement(ae,null)):null}})||se)||se;class le extends i.Component{render(){return o.a.createElement(d.a,null,({featureFlags:e})=>o.a.createElement(ce,{featureFlags:e}))}}le.displayName="DragDropChangeboarding";const de=e=>!e;class ue extends i.Component{constructor(...e){super(...e),Object(h.a)(this,"browserHistory",Object(I.a)())}getChildContext(){const{context:e}=this.props;return{insertCss:e.insertCss||(()=>{})}}render(){const{store:e,locale:t}=this.props;return o.a.createElement(b.b,null,o.a.createElement(g.b,{client:Object(l.getApolloClient)()},o.a.createElement(f.Provider,{store:e},o.a.createElement(T.a,null,o.a.createElement(E.a,null,o.a.createElement(C.a,null,o.a.createElement($.a,{locale:t},o.a.createElement(v.ConnectedRouter,{history:this.browserHistory},o.a.createElement(i.Fragment,null,o.a.createElement(O.a,null),o.a.createElement(_.a,null),o.a.createElement(y.a,null),o.a.createElement(k.a,{namedRoutes:w},o.a.createElement(M.a,{featureFlag:"confluence.frontend.unwrap-shortcuts-provider",condition:de,wrapper:o.a.createElement(H.a,null)},this.props.children,o.a.createElement(R.a,null),o.a.createElement(le,null))))))))))))}}ue.displayName="ComponentWrapper",Object(h.a)(ue,"childContextTypes",{insertCss:p.a.func.isRequired});var he=n("AeT/"),me=n("Al9w");const pe=Object(he.a)({isServerRenderedPage:!0});Object(me.a)(pe);const fe={insertCss:e=>e._insertCss()};t.a=(e,t,n=!1)=>{"string"==typeof t&&(t=c.a.document.getElementById(t)),Object(d.b)(Object(l.getApolloClient)()).then(i=>{a.a.render(o.a.createElement(u.a.Provider,{value:i},o.a.createElement(ue,{store:pe,context:fe,locale:c.a.__INITIAL_STATE__.i18n.locale,renderAsRoot:n},e)),t)})}},"9zwH":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i={supportsIntersectionObserver:!1,supportsResizeObserver:!1};"undefined"!=typeof navigator&&(i.supportsIntersectionObserver="undefined"!=typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,i.supportsResizeObserver="undefined"!=typeof window&&"ResizeObserver"in window&&"ResizeObserverEntry"in window);var o=i},Cam2:function(e,t,n){"use strict";var i,o=n("D57K"),r=n("ERkP"),a=n.n(r),s=n("OEBU"),c=n("YGBU"),l=n("2sr0"),d=n("JEzt"),u=n.n(d),h=n("gp2w"),m=n("NI0Q"),p=n("RLdS"),f=n("FmgO"),g=n("KsTJ"),b=n("+3hD"),v=n("RZTm"),y=n("m7kQ"),E=n("hd9Z"),C=n("tD4N"),k=Object(b.a)({light:y.N0,dark:y.DN50}),w=Object(b.a)({light:y.N900,dark:y.DN600}),O=g.default.div(i||(i=Object(o.__makeTemplateObject)(["\n  background: ",";\n  border-radius: ","px;\n  box-sizing: content-box; /* do not set this to border-box or it will break the overflow handling */\n  color: ",";\n  max-height: ","px;\n  max-width: ","px;\n  padding: ","px ","px;\n  z-index: ",";\n\n  ",";\n\n  &:focus {\n    outline: none;\n  }\n"],["\n  background: ",";\n  border-radius: ","px;\n  box-sizing: content-box; /* do not set this to border-box or it will break the overflow handling */\n  color: ",";\n  max-height: ","px;\n  max-width: ","px;\n  padding: ","px ","px;\n  z-index: ",";\n\n  ",";\n\n  &:focus {\n    outline: none;\n  }\n"])),k,v.f,w,Object(E.multiply)(v.l,56),Object(E.multiply)(v.l,56),Object(E.multiply)(v.l,2),Object(E.multiply)(v.l,3),v.m.dialog,C.e200),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickOutside=function(e){var n=t.props,i=n.isOpen,o=n.onClose;if(!e.defaultPrevented){var r=t.containerRef,a=t.triggerRef,s=e.target;a&&a.contains(s)||i&&r&&!r.contains(s)&&o&&o({isOpen:!1,event:e})}},t}return Object(o.__extends)(t,e),t.prototype.componentDidUpdate=function(e){"undefined"!=typeof window&&(!e.isOpen&&this.props.isOpen?window.addEventListener("click",this.handleClickOutside,!0):e.isOpen&&!this.props.isOpen&&window.removeEventListener("click",this.handleClickOutside,!0))},t.prototype.componentDidMount=function(){"undefined"!=typeof window&&this.props.isOpen&&window.addEventListener("click",this.handleClickOutside,!0)},t.prototype.componentWillUnmount=function(){"undefined"!=typeof window&&window.removeEventListener("click",this.handleClickOutside,!0)},t.prototype.render=function(){var e=this,t=this.props,n=t.children,i=t.placement,o=t.isOpen,r=t.content,s=t.onContentBlur,c=t.onContentFocus,l=t.onContentClick,d=t.testId,f=o?a.a.createElement(h.a,{placement:i},(function(t){var n=t.ref,i=t.style;return a.a.createElement(O,{onBlur:s,onFocus:c,onClick:l,innerRef:function(t){e.containerRef=t,"function"==typeof n?n(t):n.current=t},style:i,"data-testid":d},r)})):null;return a.a.createElement(m.c,null,a.a.createElement(p.a,null,(function(t){var i=t.ref;return a.a.createElement(u.a,{innerRef:function(t){e.triggerRef=t,"function"==typeof i?i(t):i.current=t}},n)})),f)},t.defaultProps={isOpen:!1,onContentBlur:function(){},onContentClick:function(){},onContentFocus:function(){},onClose:function(){},placement:"bottom-start"},t}(r.Component),M=Object(s.a)("atlaskit");t.a=Object(c.a)({componentName:"inlineDialog",packageName:f.a,packageVersion:f.b})(Object(l.a)({onClose:M({action:"closed",actionSubject:"inlineDialog",attributes:{componentName:"inlineDialog",packageName:f.a,packageVersion:f.b}})})(I))},DErM:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("D57K"),o=n("ERkP"),r=n.n(o),a=n("9zwH");function s(e){void 0===e&&(e={});var t=r.a.useRef(),n=Object(i.__read)(r.a.useState({inView:!1,entry:void 0,target:void 0}),2),o=n[0],s=n[1],c=e.threshold,l=e.root,d=e.rootMargin;return[r.a.useCallback((function(e){if(!a.a.supportsIntersectionObserver)return s({inView:!0,entry:void 0,target:e}),null;var n=new IntersectionObserver((function(t){if(t&&t.length){var n=t[0],i=n.isIntersecting,o=n.intersectionRatio;if(o>=0){var r=o>=(c||0);void 0!==i&&(r=r&&i),s({inView:r,entry:n,target:e})}}}),{threshold:c,root:l,rootMargin:d});t.current&&n.unobserve(t.current),e&&n.observe(e),t.current=e}),[c,l,d]),o.inView,o.target,o.entry]}},DZ5j:function(e,t,n){"use strict";e.exports=function(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);n=n||this;var i,o=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(i=0;i<o;i++)if(t.call(n,e[i],i,e))return e[i]}},Dsoe:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ERkP"),o=n("hpu0");class r extends i.Component{constructor(e){super(e),this.markExperienceStart()}markExperienceStart(){const{id:e,name:t,attributes:n,collect:i,onSuccess:r}=this.props;Object(o.a)().start({attributes:n,name:t,id:e,collect:i,onSuccess:r})}render(){return null}}r.displayName="ExperienceStart"},EcEE:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ERkP"),o=n.n(i),r=n("L21V"),a=n("WA38"),s=n("TVRZ"),c=n("bR0+");const l=({userId:e,fullName:t,isAnonymous:n=!1,onUserLinkClick:i=(()=>{}),canViewProfile:l=!0,referralSource:d})=>n?o.a.createElement(r.c,{id:"profile.anonymous.name",defaultMessage:"Anonymous",description:"Text for Anonymous user profile link."}):o.a.createElement(s.a,{isAnonymous:n,canViewProfile:l,userId:e},o.a.createElement(a.a,{target:"_blank",onClick:i,href:Object(c.a)(e,d)},t))},EiJY:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var i=function(e){return{}},o=function(e,t){if(void 0===t&&(t=Object.create(Object.prototype)),!e)throw new Error("a default set of overrides *must* be passed in as the first argument");return function(n){var i=e[n],o=i.cssFn,r=i.attributesFn,a=i.component;if(!t[n])return{cssFn:o,attributesFn:r,component:a};var s=t[n],c=s.cssFn,l=s.attributesFn,d=s.component;return{cssFn:c?function(e){return c(o(e),e)}:o,attributesFn:l||r,component:d||a}}}},FmgO:function(e){e.exports=JSON.parse('{"a":"@atlaskit/inline-dialog","b":"12.1.7"}')},JEzt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("JnXH");Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=i,e&&e.__esModule?e:{default:e}).default;var e}})},JnXH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n("ERkP"),r=n("7nmT");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.innerRef((0,r.findDOMNode)(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),t}(o.Component);t.default=c},KuFb:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("7+Q0");const o={[i.b.DEFAULT]:"full-page",[i.b.FULL_WIDTH]:"full-width"},r=e=>{const t=o[e];return t||a()},a=()=>o[i.b.DEFAULT]},"M/rd":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("pkwY"),o=n("ERkP"),r=n.n(o),a=n("xBue"),s=n("Ua4J");const c=Object(o.forwardRef)(({children:e,className:t,target:n,testId:c,name:l,href:d=null,to:u=null,params:h={},onClick:m=(()=>{})},p)=>{const{toUrl:f,matchSupportedRoute:g,onPageReload:b}=Object(o.useContext)(s.a),v=e=>{b(e.target.getAttribute("href"),!1),m(e)},y=i=>r.a.createElement("a",{href:i,className:t,onClick:v,target:n,rel:"_blank"===n?"noreferrer":void 0,"data-testid":c,ref:p},e),E=d||u;if(!E&&!l)return y("");const C=E&&{href:E},k=f(l,Object(i.a)({},h,C)),w=g(k);return w?r.a.createElement(a.a,{to:"".concat(w.pathname).concat(w.search).concat(w.hash),className:t,onClick:m,innerRef:p},e):y(k)})},MV18:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ERkP"),o=n("hpu0");function r({name:e,attributes:t}){return Object(i.useEffect)(()=>Object(o.a)().succeed({name:e,attributes:t}),[e]),null}},N4KI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("ERkP")),o=r(n("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var s=function(e){return i.default.createElement(o.default,a({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><g fill-rule="evenodd"><rect fill="currentColor" x="6" y="6" width="12" height="12" rx="2"/><rect fill="inherit" x="8" y="11" width="8" height="2" rx="1"/></g></svg>'},e))};s.displayName="CheckboxIndeterminateIcon";var c=s;t.default=c},NsQF:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("zjfJ"),o=n("ERkP"),r=n.n(o),a=(n("aWzz"),n("7nmT")),s=n.n(a),c=n("/FQd"),l=n("7M9M"),d=n("TVRZ"),u=n("bR0+");const h=["a.user-mention","a.confluence-userlink","a.userLogoLink","span.user-hover-trigger","img.confluence-userlink"];class m extends o.Component{constructor(...e){super(...e),Object(i.a)(this,"renderPortal",e=>{const{position:t}=this.props,n=e.props["data-account-id"];return s.a.createPortal(r.a.createElement(c.a,null,({featureFlags:i})=>(e.props.href=Object(u.a)(e.props["data-account-id"],null,i["confluence.frontend.people.directory"]?l.CONTEXT_PATH:""),r.a.createElement(d.a,{isAnonymous:!n,userId:n,position:t},r.a.createElement("a",e.props,e.props.children)))),e.placeholder)})}shouldComponentUpdate(e){return e.node!==this.props.node}getLegacyUserElements(){const{node:e}=this.props;return e?Array.from(e.querySelectorAll(h.join(","))):[]}render(){return Object(u.d)(this.getLegacyUserElements()).map(e=>this.renderPortal(e))}}m.displayName="LegacyUserElementsHover"},OKa2:function(e){e.exports=JSON.parse('{"a":"@atlaskit/checkbox","b":"10.1.3"}')},PLaw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("ERkP")),o=r(n("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var s=function(e){return i.default.createElement(o.default,a({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M8.292 10.293a1.009 1.009 0 0 0 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955a1.01 1.01 0 0 0 0-1.419.987.987 0 0 0-1.406 0l-2.298 2.317-2.307-2.327a.99.99 0 0 0-1.406 0z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};s.displayName="ChevronDownIcon";var c=s;t.default=c},RLdS:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("97Jx"),o=n.n(i),r=n("1Pcy"),a=n.n(r),s=n("W/Kd"),c=n.n(s),l=n("KEM+"),d=n.n(l),u=n("ERkP"),h=n("8z1j"),m=n.n(h),p=n("NI0Q"),f=n("3eOh"),g=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,d()(a()(t),"refHandler",(function(e){Object(f.b)(t.props.innerRef,e),Object(f.a)(t.props.setReferenceNode,e)})),t}c()(t,e);var n=t.prototype;return n.componentWillUnmount=function(){Object(f.b)(this.props.innerRef,null)},n.render=function(){return m()(Boolean(this.props.setReferenceNode),"`Reference` should not be used outside of a `Manager` component."),Object(f.c)(this.props.children)({ref:this.refHandler})},t}(u.Component);function b(e){return u.createElement(p.b.Consumer,null,(function(t){return u.createElement(g,o()({setReferenceNode:t},e))}))}},S6DC:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var i=function(e){return"@atlaskit-private-do-not-use/dropdown-menu:".concat(e)},o=i("focus-manager"),r=(i("selection-cache"),i("selection-manager"),i("click-manager"))},WA38:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("cxan"),o=n("HbGN"),r=n("ERkP"),a=n.n(r),s=(n("aWzz"),n("/FQd")),c=n("M/rd"),l=n("7M9M");const d=e=>{const{href:t,to:n}=e,r=Object(o.a)(e,["href","to"]),d=t||n;return a.a.createElement(s.a,null,({featureFlags:t})=>{const n=d&&0!==d.indexOf("/")?"/".concat(d):d,o=t["confluence.frontend.people.directory"]&&!n.startsWith(l.CONTEXT_PATH)?"".concat(l.CONTEXT_PATH).concat(n):n;return a.a.createElement(c.a,Object(i.a)({},e,{href:o},r))})};d.displayName="PeopleLink"},bLx2:function(e,t,n){"use strict";var i=n("D57K"),o=n("ERkP"),r=n.n(o),a=n("U6Bd"),s=n("KsTJ"),c=n("9zwH"),l=n("v7Hp"),d=n("DErM"),u=r.a.memo((function(e){var t=e.setWidth,n=c.a.supportsResizeObserver,o=Object(i.__read)(Object(d.a)({threshold:0}),3),a=o[0],s=o[1],l=o[2],u=r.a.useRef((function(){return"undefined"!=typeof window&&n?new ResizeObserver((function(e){if(Array.isArray(e)&&e.length){var n=e[0].contentRect.width;t(Math.round(n))}})):null}));return r.a.useEffect((function(){var e=(0,u.current)();if(null!==e)return l&&(s?e.observe(l):e.unobserve(l)),function(){e.disconnect()}}),[l,s]),r.a.createElement("div",{style:{display:"block",width:"100%",position:"absolute"},ref:a})})),h=r.a.memo((function(e){var t=c.a.supportsResizeObserver,n=c.a.supportsIntersectionObserver;return t?r.a.createElement(u,{setWidth:e.setWidth}):r.a.createElement(l.a,{setWidth:e.setWidth,useIntersectionObserver:n})}));n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return y}));var m={S:"S",M:"M",L:"L"};function p(e){return void 0===e&&(e=0),e>=1266&&e<2146?m.M:e>=2146?m.L:m.S}function f(e){return void 0===e&&(e=0),{width:e,breakpoint:p(e)}}var g,b=o.createContext(f()),v=b.Provider,y=b.Consumer,E=o.memo(s.default.div(g||(g=Object(i.__makeTemplateObject)(["\n  position: relative;\n  width: 100%;\n"],["\n  position: relative;\n  width: 100%;\n"])))),C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={width:0},n.setWidth=Object(a.a)((function(e){Math.abs(n.state.width-e)<30||n.setState({width:e})})),n.state.width=document.body.offsetWidth,n}return Object(i.__extends)(t,e),t.prototype.render=function(){return o.createElement(E,{className:this.props.className},o.createElement(h,{setWidth:this.setWidth}),o.createElement(v,{value:f(this.state.width)},this.props.children))},t}(o.Component)},"bR0+":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u}));var i=n("/FQd"),o=n("8TdO"),r=n("7M9M");const a=(e,t,n="")=>e?"".concat(n,"/people/").concat(e,"?ref=confluence").concat(t?"&src=".concat(encodeURIComponent(t)):""):"",s=async(e,t)=>{if(!e)return"";let n="";try{const{featureFlags:e}=await Object(i.b)(Object(o.getApolloClient)());n=e["confluence.frontend.people.directory"]?r.CONTEXT_PATH:""}catch(e){}return"".concat(n,"/people/").concat(e,"?ref=confluence").concat(t?"&src=".concat(encodeURIComponent(t)):"")},c=(e,t,n="")=>e?"".concat(n,"/people/team/").concat(e,"?ref=confluence").concat(t?"&src=".concat(encodeURIComponent(t)):""):"",l=e=>e.getAttribute("data-account-id"),d=e=>{const t={class:"className"},n={};return(e=>Array.from(e.attributes).map(e=>e.name))(e).forEach(i=>{n[t[i]||i]=e.getAttribute(i)}),n.dangerouslySetInnerHTML={__html:e.innerHTML},n};function u(e){return e.filter(l).map(e=>{const t=d(e);t["data-user-hover-bound"]="true",t.href=a(t["data-account-id"],null);const n=window.document.createElement("span");return e.parentNode?(e.parentNode.replaceChild(n,e),{props:t,placeholder:n}):{}})}},bShy:function(e,t){function n(e){this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap={}}n.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},n.prototype.put=function(e,t){var n=this._keymap[e];return n?(n.value=t,void this._markEntryAsUsed(n)):(this._keymap[e]=n={key:e,value:t,older:void 0,newer:void 0},this.newest?(this.newest.newer=n,n.older=this.newest):this.oldest=n,this.newest=n,this.size++,this.size>this.limit?this.shift():void 0)},n.prototype.shift=function(){var e=this.oldest;return e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),e.newer=e.older=void 0,delete this._keymap[e.key],this.size--),e},n.prototype.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return this._markEntryAsUsed(n),t?n:n.value},n.prototype.find=function(e){return this._keymap[e]},n.prototype.set=function(e,t){var n,i=this.get(e,!0);return i?(n=i.value,i.value=t):(n=this.put(e,t))&&(n=n.value),n},n.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.oldest=t.newer):t.older?(t.older.newer=void 0,this.newest=t.older):this.oldest=this.newest=void 0,this.size--,t.value},n.prototype.removeAll=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?n.prototype.keys=function(){return Object.keys(this._keymap)}:n.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},n.prototype.forEach=function(e,t,n){var i;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(i=this.newest;i;)e.call(t,i.key,i.value,this),i=i.older;else for(i=this.oldest;i;)e.call(t,i.key,i.value,this),i=i.newer},n.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,n=this.oldest;n;)e[t++]={key:n.key,value:n.value},n=n.newer;return e},n.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=n)},cphC:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("cxan"),o=n("zjfJ"),r=n("ERkP"),a=n.n(r),s=n("fYnN"),c=n.n(s),l=n("C+A9"),d=n("/FQd");const u=()=>{};function h(e){var t,n;return n=t=class extends r.Component{constructor(...e){super(...e),Object(o.a)(this,"isEngagementDisabledForTests",Boolean(c.a.get("confluence.disable-engagement-for-tests")))}render(){return a.a.createElement(d.a,null,({cloudId:t})=>{const n=this.isEngagementDisabledForTests?{start:u,stop:u}:new l.a(t,"/gateway/api");return a.a.createElement(e,Object(i.a)({},this.props,{coordinationClient:n}))})}},Object(o.a)(t,"displayName","withCoordinationClient(".concat(e.displayName||e.name,")")),n}},dIe6:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ERkP"),o=n.n(i),r=n("X2PC"),a=n("ZVoB");function s({children:e,error:t}){const[n,s]=Object(i.useState)(!1);Object(i.useEffect)(()=>{const e=e=>{e.error===t&&e.preventDefault()};return window.addEventListener("error",e),s(!0),()=>{window.removeEventListener("error",e),s(!1)}},[t,s]);const l=Object(i.useCallback)(t=>o.a.createElement(i.Fragment,null,e),[e]);return o.a.createElement(a.a,{attribution:r.a.INHERIT,renderOnError:l},n?o.a.createElement(c,{error:t}):null)}function c({error:e}){throw e}s.displayName="ErrorDisplay"},i4Pk:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("cxan"),o=n("HbGN"),r=n("ERkP"),a=n.n(r),s=n("1U1M"),c=n("82Bo"),l=n("jPWM"),d=n("3VMZ"),u=n("hpu0"),h=n("KuFb"),m=n("adTp"),p=n("08ix"),f=n("X2PC");const g=Object(r.memo)(Object(p.a)({attribution:f.a.BACKBONE})(e=>{var t;let{contentId:n,contentType:p,appearance:f}=e,g=Object(o.a)(e,["contentId","contentType","appearance"]);const[b,v]=Object(r.useState)(null),{data:y,error:E}=Object(s.c)(l.a,{variables:{contentId:n},fetchPolicy:"cache-and-network",context:{single:!0}}),C=Object(r.useCallback)((e,t)=>{let n=d.a.VIEW_INLINE_COMMENT_TOP_LEVEL;"inlineReply"===e&&(n=d.a.VIEW_INLINE_COMMENT_REPLY),Object(u.a)().fail({name:n,error:t})},[p,E]);if(!n)return null;if(E)throw C(p,E),E;let k=null,w=f;const O=null!=(t=y)&&null!=(t=t.content)&&null!=(t=t.nodes)?t[0]:t;try{var I;!w&&O&&(w=Object(h.a)(Object(m.d)(O).appearance));const e=null!=(I=y)&&null!=(I=I.content)&&null!=(I=I.nodes)&&null!=(I=I[0])&&null!=(I=I.body)&&null!=(I=I.atlas_doc_format)?I.value:I;k=e?JSON.parse(e):null}catch(e){throw C(p,e),e}return a.a.createElement("div",{ref:e=>v(e),"data-test-appearance":w},a.a.createElement(c.a,Object(i.a)({contentId:n,document:k,appearance:w,portalRef:b},g)))}))},i8tr:function(e,t,n){"use strict";n.r(t);var i=n("jUyC"),o=n("HvGa"),r=n.n(o),a=n("jqY8"),s=n("Jygk"),c=n.n(s),l=n("+frj"),d=n.n(l),u=n("UYEP"),h=n.n(u),m=n("KkZ4"),p=n("kC4U"),f=n("94Z3"),g=n("6esG"),b=n("3VMZ");var v=new(h.a.View.extend({initialize(){this.setPageContentElByCSSSelector("#content"),this.pageHeader=null},destroy(){this.el&&(this.el.style.minHeight="",this.el.classList.remove("ic-shrink-to-show-sidebar")),this.pageHeader&&this.pageHeader.classList.remove("ic-shrink-to-show-sidebar")},setPageContentElByCSSSelector(e){let t=!1;if(e){const n=c.a.document.querySelector(e);n?this.setElement(n):t=!0}else t=!0;if(t){const e=c.a.document.querySelector("#content");this.setElement(e)}},setPageHeaderElByCSSSelector(e){this.pageHeader=e?c.a.document.querySelector(e):null},shrinkToShowSideBar(){this.el.classList.add("ic-shrink-to-show-sidebar"),this.pageHeader&&this.pageHeader.classList.add("ic-shrink-to-show-sidebar")},updateMinHeight(e){const t=e-this.$el.offset().top,n=parseInt(this.el.style.minHeight,10);(t>n||isNaN(n))&&(this.el.style.minHeight="".concat(t,"px"))}}));const y=c.a.top,E={INLINE_COMMENTS:r.a.DarkFeatures.isEnabled("confluence-inline-comments"),RESOLVED_INLINE_COMMENTS_V2:r.a.DarkFeatures.isEnabled("frontend.resolved-inline-comments-dialog.v2"),RESOLVED_INLINE_COMMENTS:r.a.DarkFeatures.isEnabled("confluence-inline-comments-resolved"),RICH_TEXT_EDITOR:r.a.DarkFeatures.isEnabled("confluence-inline-comments-rich-editor"),DANGLING_COMMENT:r.a.DarkFeatures.isEnabled("confluence-inline-comments-dangling-comment"),LIKES_ADMIN_TOGGLE:r.a.DarkFeatures.isEnabled("optional-likes-CONFDEV-53297")},C=["dateautocomplete","confluencemacrobrowser","propertypanel","jiraconnector","dfe"],k=["autoresize","confluenceleavecomment"],w=["code"];function O(e,t,n,i,o){null!=t&&(t.isResolved()?E.RESOLVED_INLINE_COMMENTS_V2||new n({collection:e,focusCommentId:t.get("id"),formatMessage:o}).render():t.isDangling()||h.a.trigger("ic:view",t,"permalink",{isReplyComment:i}))}function I(){return r.a.Meta.get("user-display-name")||r.a.Meta.get("current-user-fullname")}function M(){return r.a.Meta.get("atlassian-account-id")}function _(e){if("number"==typeof e.selectionStart){const t=e.value.length;e.selectionStart=t,e.selectionEnd=t}else if(null!=typeof e.createTextRange){e.focus();const t=e.createTextRange();t.collapse(!1),t.select()}}function T(e){let t=Object(i.default)(e).closest("a");return t.length||(t=Object(i.default)(e).find("a")),t}function N(){return!!Object(i.default)(".ic-sidebar #wysiwygTextarea_ifr").length}function R(e,t,n){n=n||1,e=e||Object(i.default)(y).scrollTop();const o=i.default.Deferred(),r={duration:100,step(e){Object(i.default)(y).scrollTop(e)},complete(){setTimeout(o.resolve,n)}};return Object(i.default)({scrollTop:e}).animate({scrollTop:t},r),o.promise()}function x(){const e=c.a.frameElement&&c.a.frameElement.getAttribute("name"),t=c.a.frameElement&&"true"===c.a.frameElement.getAttribute("data-is-fallback-mode-iframe");return c.a.top!==c.a.self&&e&&"fallback-mode-iframe"===e||t}const D=function(){let e=null,t=null;function n(t){const n=((t||{}).data||{}).user||{},i=(n.photos||[]).find(e=>e.isPrimary);return e={authorAccountId:n.id,authorDisplayName:n.displayName,authorAvatarUrl:(i||{}).value},e}function i(){return e={authorAccountId:M(),authorDisplayName:I(),authorAvatarUrl:r.a.contextPath()+r.a.Meta.get("current-user-avatar-url")},e}return()=>{if(e)return Promise.resolve(e);if(!t){const e=e=>e.json();t=Object(p.a)("/cgraphql?q=InlineCommentCurrentUserData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n          query {\n            user(current: true) {\n              id\n              displayName\n              photos {\n                value\n                isPrimary\n              }\n            }\n          }\n        ",variables:null})}).then(e,t=>{if(t instanceof f.a)return e(t.response);throw t}).then(n).catch(i)}return t}}();D();var j={overlappedSelection:function(e,t){let n;if(!e||!t)return;let o=Object(i.default)(e.containingElement);if(o.is(".inline-comment-marker.valid")||(o=Object(i.default)("<div/>").append(e.html).find(".inline-comment-marker.valid")),o.length>0&&function(e){return e.filter((function(){return Object(i.default)(this).text().length>0})).length>0}(o)){const e=o.first().data("ref");return n=t.findWhere({markerRef:e}),n}},focusedCommentUrl:function(e){return"".concat(r.a.contextPath(),"/pages/viewpage.action?pageId=").concat(r.a.Meta.get("latest-page-id"),"&focusedCommentId=").concat(e,"#comment-").concat(e)},showFocusedComment:function(e,t,n,o){const a=t.match(/(focusedCommentId|replyToComment)=(\d+)/);if(null==a)return;const s="replyToComment"===a[1],c=parseInt(a[2],10);if(!e.findWhere)return;let l=e.findWhere({id:c});null!=l?O(e,l,n,s,o):i.default.ajax({url:"".concat(r.a.contextPath(),"/rest/inlinecomments/1.0/comments/replies/").concat(c,"/commentId")}).done(t=>{l=e.findWhere({id:t}),O(e,l,n,s,o)})},getAuthorAvatarUrl:function(){return r.a.Meta.get("current-user-avatar-url")?r.a.contextPath()+r.a.Meta.get("current-user-avatar-url"):"".concat(r.a.Meta.get("static-resource-url-prefix"),"/images/icons/profilepics/anonymous.png")},moveCaretToEnd:function(e){_(e),c.a.setTimeout(()=>{_(e)},1)},animateSidebar:function(e,t){const n="webkitAnimationEnd oanimationend msAnimationEnd animationend",o=e.$wikiContent,r=i.default.Deferred();if(t){const t=Object(i.default)(".inline-comment-marker.active");o.addClass("ic-fade-in-animation"),o.one(n,(function(){Object(i.default)(this).removeClass("ic-fade-in-animation")})),e.$el.addClass("ic-slide-in"),e.$el.one(n,(function(){Object(i.default)(this).removeClass("ic-slide-in"),t.addClass("ic-highlight-pulse"),t.one(n,()=>{t.removeClass("ic-highlight-pulse")})})),r.resolve()}else{o.bind(n,t=>{"ic-fade-out-animation"==t.originalEvent.animationName?(e.$wikiContent.removeClass("ic-fade-out-animation"),e.$wikiContent.css("opacity","0.5")):"ic-fade-in-animation"==t.originalEvent.animationName&&(e.$wikiContent.css("opacity","1"),e.$wikiContent.removeClass("ic-fade-in-animation"),e.$wikiContent.unbind(n))}),o.addClass("ic-fade-out-animation"),e.$el.addClass("ic-slide-out");const t=function t(){e.$el.removeClass("ic-slide-out"),e._emptySidebar(),v.destroy(),o.addClass("ic-fade-in-animation"),o.css("position","static"),r.resolve(),e.$el.off(n,t)};e.$el.on(n,t)}return r.promise()},getDarkFeatures:function(){return d.a.clone(E)},getInlineLinks:T,removeInlineLinksDialog:function(e){e.each((function(){const e=T(this);e.length&&e.off("mousemove")}))},isAnimationSupported:function(){return void 0!==document.body.style.animation||void 0!==document.body.style.webkitAnimation},showHighlightContent:function(e){e.parents(".expand-content.expand-hidden").each((function(){Object(i.default)(this).siblings(".expand-control").click()}))},getUnsupportedRtePlugins:function(){return d.a.clone(C)},getSupportedRtePlugins:function(){return d.a.clone(k)},confirmProcess:function(e,t=!1,n=!1){if(n)return!!confirm(e({id:"inline.comments.editor.lost"}))&&(h.a.trigger(h.a,"ic:fabric-editor-dirty",!1),!0);{const n=r.a&&r.a.Rte&&r.a.Rte.getEditor&&r.a.Rte.getEditor();if(n&&n.isDirty()&&(t&&N()||c.a.Confluence.Editor&&!c.a.Confluence.Editor.getContentType))return confirm(e({id:"inline.comments.editor.lost"}))}return!0},getAuthorDisplayName:I,isKeyboardShortcutsEnable:function(){return r.a.Meta.get("use-keyboard-shortcuts")&&c.a.Confluence.KeyboardShortcuts&&c.a.Confluence.KeyboardShortcuts.enabled},addSidebarHeadingTooltip:function(e){e.$("button.ic-action-hide").tooltip({gravity:"se"}),e.$("#ic-nav-next").tooltip({gravity:"s"}),e.$("#ic-nav-previous").tooltip({gravity:"s"})},hasEditorInSidebar:N,recalculateContentHeight:function(e){const t=e.height(),n=e.offset().top+t;v.updateMinHeight(n)},resizeContentAfterLoadingImages:function(e){e=e.closest(".ic-display-comment-view");const t=this,n=Object(i.default)(".confluence-embedded-image, .confluence-embedded-file img",e),o=n.length;let r=0;o>0&&n.off("load").one("load",()=>{++r===o&&t.recalculateContentHeight(e)}).each((function(){this.complete&&Object(i.default)(this).load()}))},scrollToCommentAfterToggleSideBar:function(e,t,n){const o=function(){const n=t&&t.is(":visible");if(e&&n){const n=t.offset().top-e;Object(i.default)(y).scrollTop(n)}};(n=void 0!==n?n:x())?setTimeout(o,1):o()},getEditorFormat:function(e){const t=i.default.Deferred();return i.default.ajax({url:"".concat(r.a.contextPath(),"/rest/api/content/").concat(e,"?expand=body.editor"),type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"}).then(e=>{const n=e.body.editor.value;t.resolve(n)}).fail((e,n,i)=>{t.reject(e,n,i)}),t.promise()},containUnsupportedMacro:function(e){const t=e.closest(".conf-macro");return!1===t.data("hasbody")||e.find('.conf-macro[data-hasbody="false"]').length>0||-1!=w.indexOf(t.data("macro-name"))},containInternalLink:function(e){return e.closest(".user-mention").length>0||e.find(".user-mention").length>0},containUserMetion:function(e){return e.closest("a[href^='/']:not('.user-mention')").length>0||e.find("a[href^='/']:not('.user-mention')").length>0},getCurrentUserInfo:function(){let e={isDefault:!0,path:"".concat(r.a.Meta.get("static-resource-url-prefix"),"/images/icons/profilepics/default.png")};return"/images/icons/profilepics/default.png"!==r.a.Meta.get("current-user-avatar-url")&&(e={isDefault:!1,path:r.a.contextPath()+r.a.Meta.get("current-user-avatar-url")}),{accountId:r.a.Meta.get("atlassian-account-id"),displayName:r.a.Meta.get("current-user-fullname"),profilePicture:e}},getOffsetTopRelativeInWindowCoordinate:function(e){return e.offset().top-Object(i.default)(y).scrollTop()},scrollToActiveHighlight:function(e,t){const n=Object(i.default)(y).scrollTop();return R(n,n+e-t)},scrollToTop:function(){return R(null,0,100)},sendMessageToParent:function(e){e.bridgeId="".concat(c.a.frameElement&&c.a.frameElement.getAttribute("data-bridge-id")),c.a.parent.postMessage(e,c.a.location.origin)},isFallbackModeIframe:x,isSPAPage:function(){return Object(i.default)("#confluence-ui").length>0},getPageContentClassName:function(){return"view-page-body"},getAuthorAccountId:M,getCurrentUserData:D,getAnalyticsClient:Object(m.getAnalyticsWebClient)(),getUnresolvedComments:e=>e.models?e.models.filter(e=>!e.attributes.resolveProperties.resolved):[],failEditDisplay:function(e,{errorThrown:t}){const n=t instanceof Error?t:new Error(t);Object(g.b)(b.a.EDIT_INLINE_COMMENT_LOAD,n),h.a.trigger("ic:error",e)}};var S=n("IC1n"),P=n.n(S),A=n("uIYj"),F=n("J7sl"),L=h.a.Model.extend({defaults:{authorDisplayName:j.getAuthorDisplayName(),authorAccountId:r.a.Meta.get("atlassian-account-id"),authorAvatarUrl:r.a.contextPath()+r.a.Meta.get("current-user-avatar-url"),body:"",commentId:"0",hasDeletePermission:!0,hasEditPermission:Boolean(r.a.Meta.get("atlassian-account-id"))},urlRoot(){return"".concat(r.a.contextPath(),"/rest/inlinecomments/1.0/comments/").concat(this.get("commentId"),"/replies")},sync(e,t,n){return n=n||{},"create"===e&&(n.url="".concat(this.urlRoot(),"?containerId=").concat(r.a.Meta.get("latest-page-id"))),h.a.sync.call(this,e,t,n)},validate(){if(!this.get("body"))return!0}}),H=h.a.Collection.extend({model:L}),$=h.a.Model.extend({defaults:{authorDisplayName:j.getAuthorDisplayName(),authorAvatarUrl:r.a.contextPath()+r.a.Meta.get("current-user-avatar-url"),body:"",originalSelection:"",parentCommentId:"0",lastFetchTime:Object(i.default)("meta[name=confluence-request-time]").attr("content"),hasDeletePermission:!0,hasEditPermission:!0,hasResolvePermission:!0,resolveProperties:{resolved:!1,resolvedTime:0},serializedHighlights:"",deleted:!1},urlRoot:"".concat(r.a.contextPath(),"/rest/inlinecomments/1.0/comments"),initialize(e){e=e||{},this._setHighlights(e.markerRef);const t=this;this.replies=new H,this.replies.url=function(){return"".concat(t.url(),"/replies")},this.set({containerId:r.a.Meta.get("latest-page-id")},{silent:!0}),this.set({containerType:r.a.Meta.get("content-type")},{silent:!0}),j.getDarkFeatures().DANGLING_COMMENT&&r.a.Meta.get("page-id")===r.a.Meta.get("latest-page-id")&&this.isDangling()&&!this.isResolved()&&this.resolve(!0,{wait:!0,dangling:!0,success:d.a.bind((function(){h.a.trigger("ic:open:dangled",this)}),this),error:d.a.bind((function(){h.a.trigger("ic:resolve:dangled:failed",this)}),this)})},validate(){if(!this.get("body"))return!0},resolve(e,t){t=t||{},this.save({},d.a.extend(t,{url:"".concat(this.urlRoot,"/").concat(this.get("id"),"/resolve/").concat(e,"/dangling/").concat(!0===t.dangling)}))},isResolved(){return this.get("resolveProperties").resolved},isDangling(){return void 0===this.highlight},isDeleted(){return this.get("deleted")},_setHighlights(e){let t;t=void 0!==e?Object(i.default)("[data-inline-comments-target=true]:first").find('.inline-comment-marker[data-ref="'.concat(e,'"],')+'span[data-mark-type=confluenceInlineComment][data-reference="'.concat(e,'"],')+'span[data-mark-type=annotation][data-mark-annotation-type=inlineComment][data-id="'.concat(e,'"]')):Object(i.default)(".ic-current-selection"),0!==t.length?(this.highlights=t,this.highlight=t.first()):(this.highlights=void 0,this.highlight=void 0)},destroy(e){e=e?d.a.clone(e):{};const t=this,n=e.success;return e.success=function(i){n&&n(t,i,e)},function(e,t){const n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}}(this,e),this.sync("delete",this,e)}}),V=h.a.Collection.extend({model:$,initialize(){this.listenTo(this,"sort",this._removeCachedMarkers)},url(){const e=r.a.contextPath(),t=r.a.Meta.get("page-id");return"".concat(e,"/rest/inlinecomments/1.0/comments?")+"containerId=".concat(t)},getResolvedCount(){return this.getResolvedComments().length},getUnresolveCount(){return this.reject(e=>!0===e.isResolved()&&!1===e.isDeleted()).length},getResolvedComments(){return this.filter(e=>!0===e.isResolved()&&!1===e.isDeleted())},getResolvedCommentsDesc(){return d.a.sortBy(this.getResolvedComments(),e=>0-e.get("resolveProperties").resolvedTime)},getNextCommentOnPage(){return this._getCommentAtRelativeOffset(1)},getPrevCommentOnPage(){return this._getCommentAtRelativeOffset(-1)},_getCommentAtRelativeOffset(e){const t=this.getCommentsOnPage(),n=this.findWhere({active:!0});if(void 0===n||t.length<=1)return null;const i=d.a.pluck(t,"id");return t[(d.a.indexOf(i,n.get("id"))+e+t.length)%t.length]},getCommentsOnPage(){return this.filter(e=>!1===e.isResolved()&&!e.isDangling()&&!1===e.isDeleted()||!0===e.get("active"))},getCommentsOnPageCount(){return this.getCommentsOnPage().length},getActiveIndexWithinPageComments(){const e=d.a.pluck(this.getCommentsOnPage(),"id"),t=this.findWhere({active:!0});if(void 0===t)return null;const n=t.get("id");return d.a.indexOf(e,n)},comparator(e,t){return void 0===this.markers&&(this.markers=Object(i.default)("[data-inline-comments-target=true]:first").find("[data-mark-annotation-type='inlineComment'],.inline-comment-marker")),void 0===e.highlight?1:void 0===t.highlight?-1:this.markers.index(e.highlight)-this.markers.index(t.highlight)},_removeCachedMarkers(){this.markers=void 0}});const U={};d.a.extend(U,h.a.Events),U.start=function(){!0!==this.running&&(this.running=!0,this.send=function(e,t){r.a.trigger("analytics",{name:e,data:t})},this.listenTo(h.a,"ic:highlight-panel-click",(function(){this.send("confluence.highlight.actions.comment.inline")})),this.listenTo(h.a,"ic:view",(function(e,t){this.send("confluence.comment.inline.view"),"nav"===t&&this.send("confluence.comment.inline.view.nav"),"permalink"===t&&this.send("confluence.comment.inline.view.permalink")})),this.listenTo(h.a,"ic:overlap",(function(){this.send("confluence.comment.inline.overlap")})),this.listenTo(h.a,"ic:edit",(function(){this.send("confluence.comment.inline.edit")})),this.listenTo(h.a,"ic:persist",(function(){this.send("confluence.comment.inline.create")})),this.listenTo(h.a,"ic:sidebar:close",(function(){this.send("confluence.comment.inline.sidebar.close")})),this.listenTo(h.a,"ic:reply:persist",(function(){this.send("confluence.comment.inline.reply")})),this.listenTo(h.a,"ic:delete ic:reply:delete",(function(){this.send("confluence.comment.inline.delete")})),this.listenTo(h.a,"ic:resolved",(function(){this.send("confluence.comment.inline.resolved")})),this.listenTo(h.a,"ic:unresolved",(function(){this.send("confluence.comment.inline.unresolved")})),this.listenTo(h.a,"ic:resolved:view",(function(e){const t={total:e};this.send("confluence.comment.inline.resolved.view",t)})),this.listenTo(h.a,"ic:resolved:dismiss:recovery",(function(){this.send("confluence.comment.inline.resolved.dismiss")})),this.listenTo(h.a,"ic:resolved:show:recovery",(function(){this.send("confluence.comment.inline.resolved.discovery")})),this.listenTo(h.a,"ic:open:dangled",(function(e){const t={commentId:e.get("id"),pageId:r.a.Meta.get("page-id")};this.send("confluence.comment.inline.open.dangled",t)})),this.listenTo(h.a,"ic:editor:load:fail",(function(){const e={pageId:r.a.Meta.get("page-id")};this.send("confluence.comment.inline.editor.load.fail",e)})),this.listenTo(h.a,"ic:resolve:dangled:failed",(function(e){const t={commentId:e.get("id"),pageId:r.a.Meta.get("page-id")};this.send("confluence.comment.inline.resolved.dangled.failed",t)})))},U.stop=function(){this.running=!1,this.stopListening()};var B=U,z=n("hpu0"),W=n("0wgO");const q="FABRIC",K="TINY_MCE",G="add",Y="add-reply",J="edit",Q="edit-reply",X="reply",Z="view",ee="Comment with provided comment id not found",te="Page with provided page id not found",ne="Reading a comment not permitted for this user",ie="Creating a comment not permitted for this user",oe="Deleting a comment not permitted for this user",re="Resolving a comment not permitted for this user",ae="Editing a comment not permitted for this user",se="Comment id in the input was not expected to be null",ce="Cannot create inline comments on macros (mentions, images, emojis, etc.)",le="creationBean can not be null",de="body for creationBean can not be null",ue="Incorrect data in the request",he="Captcha check failed",me="Captcha check successfull";n("wS3D");function pe(){i.default.textHighlighter.createWrapper=function(e){return Object(i.default)("<span></span>").addClass(e.highlightedClass)},this.$el=Object(i.default)("[data-inline-comments-target=true]").first(),this.$el.length>0&&this.$el.textHighlighter({highlightedClass:"ic-current-selection"})}pe.prototype.highlight=function(e){if(0===this.$el.length)return;const t=Object(i.default)(this.$el.getHighlighter().doHighlight(e));return this.$el.getHighlighter().serializeHighlights(t)},pe.prototype.removeHighlight=function(){if(0!==this.$el.length)return this.$el.getHighlighter().removeHighlights(),this},pe.prototype.deserializeHighlights=function(e,t){if(0===this.$el.length)return;const n='<span class="inline-comment-marker" data-ref="'.concat(t,'"></span>');return this.$el.getHighlighter().deserializeHighlights(e,n)};var fe=pe;function ge(e,t){return'<div class="ic-sidebar-heading"><div id="ic-nav-container">'.concat(1==e.createComment?Ee({disabled:!0,showIndex:!1},t):"",'</div><div class="ic-right-toolbar">').concat(e.showMenu?function(e,t){return"".concat(e.darkFeatures.INLINE_COMMENTS&&(e.hasDeletePermission||e.hasReplyPermission||e.hasResolvePermission&&e.darkFeatures.RESOLVED_INLINE_COMMENTS)?c.a.aui.buttons.button({type:"subtle",extraClasses:"aui-button-compact aui-dropdown2-trigger-arrowless aui-style-default ic-action-menu",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-more",text:"",dropdown2Target:"ic-menu-items"})+c.a.aui.dropdown2.contents({id:"ic-menu-items",extraClasses:"aui-style-default",content:'<ul class="aui-list-truncate">'.concat(e.hasResolvePermission&&e.darkFeatures.RESOLVED_INLINE_COMMENTS?'<li class="ic-action-resolve"><a href="#">'.concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.sidebar.resolve"})),"</a></li>"):"").concat(e.hasReplyPermission?'<li class="ic-action-reply"><a href="#">'.concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.sidebar.reply"})),"</a></li>"):"").concat(e.hasEditPermission?'<li class="ic-action-edit"><a href="#">'.concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.sidebar.edit"})),"</a></li>"):"").concat(e.hasDeletePermission?'<li class="ic-action-delete"><a href="#">'.concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.sidebar.delete"})),"</a></li>"):"","</ul>")}):"")}(e,t):"").concat(c.a.aui.buttons.button({type:"text",extraClasses:"aui-button-text ic-action-hide",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-close-dialog",text:"",extraAttributes:{title:t({id:"inline.comments.sidebar.tooltip.close.description"})}}),'</div></div><div class="ic-error"></div>')}function be(e,t){const n=function(e){return"".concat(""==e.authorAccountId?c.a.aui.avatar.avatar({size:e.size,avatarImageUrl:e.authorAvatarUrl,extraClasses:"ic-author-avatar-fabric"}):'<a data-account-id="'.concat(c.a.soy.$$escapeHtml(e.authorAccountId),'" href="').concat(c.a.soy.$$escapeHtml("/people"),"/").concat(c.a.soy.$$escapeHtml("".concat(e.authorAccountId,"?ref=confluence")),'" title="" data-user-hover-bound="true">').concat(c.a.aui.avatar.avatar({size:e.size,avatarImageUrl:e.authorAvatarUrl,extraClasses:"ic-author-avatar-fabric"}),"</a>"))}({authorAvatarUrl:e.authorAvatarUrl,authorAccountId:e.authorAccountId,size:"small"}),i=function(e){return"".concat(e.accountId&&""!=e.accountId?'<a href="'.concat(function(e){return"".concat(c.a.soy.$$escapeHtml("/people"),"/").concat(c.a.soy.$$escapeHtml("".concat(e.accountId,"?ref=confluence")))}(e),'"').concat(e.canView?'class="url fn confluence-userlink" data-account-id="'.concat(c.a.soy.$$escapeHtml(e.accountId),'"'):'class="url fn"',">").concat(c.a.soy.$$escapeHtml(e.fullName),"</a>"):c.a.soy.$$escapeHtml("Anonymous"))}({canView:!!e.authorAccountId,fullName:e.authorDisplayName,accountId:e.authorAccountId});return'<div class="ic-author">'.concat(n).concat(i,"</div>")}function ve(e,t){let n='<div class="ic-container ic-create-comment">'.concat(be(e),'<div class="ic-body"><form class="aui" action="">');if(e.darkFeatures.RICH_TEXT_EDITOR)"true"!==e.isFabricEditorEnabled&&(n+='<div class="loading-container" />');else{const i="".concat("reply"==e.type?c.a.soy.$$escapeHtml(t({id:"inline.comments.create.reply.placeholder"})):c.a.soy.$$escapeHtml(t({id:"inline.comments.create.placeholder"})));n+='<textarea class="textarea ic-textarea" name="body" placeholder="'.concat(c.a.soy.$$escapeHtml(i),'">').concat(c.a.soy.$$escapeHtml(e.text),'</textarea><div class="ic-actions"><ul><li>').concat(c.a.aui.buttons.button({tagName:"button",text:t({id:"inline.comments.sidebar.save"}),type:"link",extraClasses:"ic-action-save",isDisabled:!0}),"</li>").concat("topLevel"!=e.type?"<li>".concat(c.a.aui.buttons.button({text:t({id:"inline.comments.sidebar.cancel"}),type:"link",extraClasses:"ic-action-discard"}),"</li>"):"","</ul></div>")}return n+="</form></div></div>",n}function ye(e,t){return'<div data-comment-id="'.concat(c.a.soy.$$escapeHtml(e.id),'" class="ic-container ic-display-comment">').concat(be(e),'<div class="ic-body wiki-content"><div class="ic-content">').concat(e.resolveProperties.resolved?'<blockquote><span class="ic-resolved-marker">'.concat(c.a.soy.$$escapeHtml(e.originalSelection),"</span></blockquote>"):"").concat(c.a.soy.$$filterNoAutoescape(e.body),"</div></div>").concat(e.resolveProperties.resolved?function(e,t){return"".concat(e.darkFeatures.INLINE_COMMENTS?'<div class="ic-actions"><ul class="aui-list-truncate">'.concat(e.hasResolvePermission&&!e.isDangling?"<li>".concat(c.a.aui.buttons.button({text:t({id:"inline.comments.resolved.menu.unresolve"}),type:"link",extraClasses:"ic-action-unresolve"}),"</li>"):"",'<li class="hidden">').concat(c.a.aui.buttons.button({type:"link",extraClasses:"ic-action-show-reply"}),"</li>").concat((e.hasReply,"")).concat(e.resolveProperties.resolvedTime>0?'<li class="ic-resolved-message">'.concat(c.a.aui.icons.icon({useIconFont:!0,size:"small",icon:"success"}),"  <span>").concat(Ce({time:"".concat(e.isDangling&&e.resolveProperties.resolvedByDangling?c.a.soy.$$filterNoAutoescape(t({id:"inline.comments.resolved.dangling.message"},{0:e.resolveProperties.resolvedUser,1:e.resolveProperties.resolvedFriendlyDate})):c.a.soy.$$filterNoAutoescape(t({id:"inline.comments.resolved.message"},{0:e.resolveProperties.resolvedUser,1:e.resolveProperties.resolvedFriendlyDate}))),commentUrl:e.commentDateUrl}),"</span></li>"):"","</ul></div>"):"")}(e,t):function(e,t){if(!e.darkFeatures.INLINE_COMMENTS)return"";const n=e.hasResolvePermission&&e.darkFeatures.RESOLVED_INLINE_COMMENTS;return'\n    <div class="ic-actions">\n      <ul class="aui-list-truncate">\n        '.concat("true"===e.isFabricRendererEnabled?'<li class="ic-action-like"></li>':"","\n        ").concat(n?"<li>\n            ".concat(c.a.aui.buttons.button({text:t({id:"inline.comments.sidebar.resolve"}),type:"link",extraClasses:"ic-action-resolve"}),"\n          </li>"):"","\n        ").concat("true"===e.isFabricRendererEnabled?"":'<li class="ic-action-like"></li>',"\n        ").concat("true"===e.isFabricRendererEnabled?"":'<li class="ic-date">\n            '.concat(Ce({time:e.lastModificationDate,commentUrl:e.commentDateUrl}),"\n          </li>"),"\n      </ul>\n    </div>")}(e,t),"</div>").concat(!e.resolveProperties.resolved&&e.resolveProperties.resolvedTime>0&&e.resolveProperties.resolvedUser?'<div class="ic-unresolved-message">'.concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.unresolved.message"},{0:e.resolveProperties.resolvedUser,1:e.resolveProperties.resolvedFriendlyDate})),"</div>"):"")}function Ee(e,t){return"".concat(c.a.aui.buttons.button({type:"text",id:"ic-nav-next",extraClasses:"aui-button-text",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-arrow-down",text:"",isDisabled:e.disabled,extraAttributes:{tabIndex:e.disabled?"":0,title:t({id:"inline.comments.sidebar.tooltip.next.ic.description"})}})).concat(c.a.aui.buttons.button({type:"text",id:"ic-nav-previous",extraClasses:"aui-button-text",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-arrow-up",text:"",isDisabled:e.disabled,extraAttributes:{tabIndex:e.disabled?"":0,title:t({id:"inline.comments.sidebar.tooltip.previous.ic.description"})}})).concat(e.showIndex?'<span class="ic-nav-x-out-of-y">'.concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.navigation.index.of"},{0:e.index,1:e.size})),"</span>"):"")}function Ce(e){return'<a class="ic-date-link" title="'.concat(c.a.soy.$$escapeHtml(e.time),'" href="').concat(c.a.soy.$$escapeHtml("/wiki".concat(e.commentUrl)),'"><span>').concat(c.a.soy.$$escapeHtml(e.time),"</span></a>")}var ke={comment:ye,commentForm:ve,confirmDialog:function(e,t){return'<strong class="ic-confirm-label">'.concat(c.a.soy.$$escapeHtml(e.label),'</strong><div class="ic-confirm-message">').concat(c.a.soy.$$escapeHtml(e.message),'</div><div class="ic-confirm-buttons">').concat(c.a.aui.buttons.button({text:t({id:"inline.comments.sidebar.delete"}),tagName:"button",extraClasses:["ic-action-delete-confirm","aui-button-compact"]})).concat(c.a.aui.buttons.button({text:t({id:"inline.comments.sidebar.cancel"}),tagName:"button",type:"link",extraClasses:["ic-action-cancel-confirm","aui-button-compact"]}),"</div>")},createComment:function(e,t){return'<div class="ic-comment-container">'.concat("topLevel"==e.type||"pageComment"==e.type?ge({showMenu:!1,createComment:!0,darkFeatures:e.darkFeatures},t):"").concat(ve(e,t),"</div>")},deleteComment:function(e){return'<div class="ic-comment-container ic-deleted">'.concat(ge({createComment:!1,showMenu:!1},e),'<div class="ic-delete-comment-view"><h2><span class="aui-icon ic-delete-image line">::before</span>').concat(c.a.soy.$$escapeHtml(e({id:"inline.comments.sidebar.deleted"})),"</h2></div></div>")},displayComment:function(e,t){return'\n    <div class="ic-comment-container">\n      '.concat(ge({hasDeletePermission:e.hasDeletePermission,hasResolvePermission:e.hasResolvePermission,hasEditPermission:e.hasEditPermission,hasReplyPermission:e.hasReplyPermission,showMenu:e.showMenu&&!e.resolveProperties.resolved,darkFeatures:e.darkFeatures},t),"\n      ").concat(e.resolveProperties.resolved?function(e,t){return'<div class="ic-resolved-mask"><div class="ic-resolved-mask-content"><h2 class="ic-resolved-icon">'.concat(c.a.aui.icons.icon({useIconFont:!0,size:"large",icon:"success",extraClasses:"line"})).concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.sidebar.resolved"})),'</h2></div><div class="resolved-message-container"><div class="resolved-message-sideline"><p>').concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.resolved.dialog.message"})),"</p>").concat(c.a.aui.buttons.button({text:t({id:"adg3.onboarding.docs.link"}),href:"https://confluence.atlassian.com/display/ConfCloud/Comment+on+pages+and+blog+posts#Commentonpagesandblogposts-Resolveinlinecomments",type:"link",extraAttributes:{target:"_blank"},id:"show-resolved-comments"}),"</div></div></div>")}(0,t):ye(e,t),"\n    </div>\n    ").concat(e.resolveProperties.resolved?"":'<div class="ic-list"></div>\n      '.concat("true"===e.isFabricRendererEnabled&&e.hasReplyPermission||"true"!==e.isFabricRendererEnabled?'<div class="ic-reply-container">\n          '.concat(e.darkFeatures.INLINE_COMMENTS&&e.hasReplyPermission?'<div class="ic-reply-placeholder">\n              '.concat(be({authorAvatarUrl:e.currentAuthorAvatarUrl,authorDisplayName:e.currentAuthorDisplayName,authorAccountId:e.currentAuthorAccountId,isGDPRInlineCommentsEnabled:e.isGDPRInlineCommentsEnabled}),'\n              <div class="ic-body">\n                <form class="aui">\n                  <textarea class="textarea ic-textarea" name="body" placeholder="').concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.create.reply.placeholder"})),'" />\n                </form>\n              </div>\n            </div>'):"","\n        </div>"):""))},highlightTextLink:function(e){return"".concat(c.a.aui.icons.icon({useIconFont:!0,size:"small",icon:"link"}),"<a href='").concat(c.a.soy.$$escapeHtml(e.link),"'>").concat(c.a.soy.$$escapeHtml(e.link),"</a>")},likes:function(e,t){return"".concat(e.showLikeButton?c.a.aui.buttons.button({text:e.isLikedByUser?t({id:"inline.comments.likes.unlike"}):t({id:"inline.comments.likes.like"}),type:"link",extraClasses:"ic-like-button"}):"").concat(e.likesCount>0?'<span class="ic-like-summary"><span class="ic-small-like-icon"></span><a class="ic-likes-count" data-content-id="'.concat(c.a.soy.$$escapeHtml(e.contentId),'"><span class="ic-like-summary">').concat(c.a.soy.$$escapeHtml(e.likesCount),"</span></a></span>"):"")},navigation:Ee,pageComment:function(e,t){return'<div class="ic-comment-container">'.concat(ge({createComment:!1,showMenu:!1},t),'<div class="ic-page-comment-view"><div class="ic-page-comment"><div class="ic-page-comment-content"><h2 class="ic-resolved-icon">').concat(c.a.aui.icons.icon({useIconFont:!0,size:"large",icon:"success",extraClasses:"line"})).concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.sidebar.saved"})),'</h2></div><div class="ic-page-comment-message-container"><div class="ic-page-comment-message-sideline"><p>').concat(c.a.soy.$$escapeHtml(t({id:"page.comments.saved.dialog.message"})),'</p><button id="show-page-comment" class="aui-button aui-button-link" data-comment-id="').concat(c.a.soy.$$escapeHtml(e.commentId),'">').concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.resolved.dialog.show.me"})),"</button></div></div></div></div></div>")},renderReply:function(e,t){return"".concat(be(e),'<div class="ic-body wiki-content"><div class="ic-content ic-reply-content">').concat(c.a.soy.$$filterNoAutoescape(e.body),"</div></div>").concat(e.darkFeatures.INLINE_COMMENTS&&!e.resolved?function(e,t){return'\n    <div class="ic-actions">\n      <ul>\n        '.concat("true"===e.isFabricRendererEnabled?'<li class="ic-action-like-reply"></li>':"","\n        ").concat(e.hasDeletePermission?"<li>\n            ".concat(c.a.aui.buttons.button({text:t({id:"inline.comments.sidebar.delete"}),type:"link",extraClasses:"ic-action-delete-reply"}),"\n          </li>"):"","\n        ").concat(e.hasEditPermission?"<li>\n            ".concat(c.a.aui.buttons.button({text:t({id:"inline.comments.sidebar.edit"}),type:"link",extraClasses:"ic-action-edit-reply"}),"\n          </li>"):"","\n        ").concat("true"===e.isFabricRendererEnabled?"":'<li class="ic-action-like-reply"></li>',"\n        ").concat("true"===e.isFabricRendererEnabled?"":'<li class="ic-date">\n            '.concat(Ce({time:e.lastModificationDate,commentUrl:e.commentDateUrl}),"\n          </li>"),"\n      </ul>\n    </div>")}(e,t):"<div>".concat(Ce({time:e.lastModificationDate,commentUrl:e.commentDateUrl}),"</div>"))},resolvedCommentDialog:function(e,t){return"".concat(c.a.aui.dialog.dialog2({id:"ic-resolved-comment-dialog",removeOnHide:!0,extraClasses:"ic-resolved-comment-dialog-content",modal:!0,titleText:t({id:"inline.comments.resolved.view.menu"}),footerActionContent:"".concat(c.a.aui.buttons.button({id:"resolved-dialog-close-button",text:t({id:"inline.comments.sidebar.close"}),type:"link"})),content:'\x3c!-- Placeholder for error message --\x3e<div id="ic-resolved-comment-dialog-error" />'}))},showmoreReply:function(e,t){return'<div id="ic-showmore-container"><div class="ic-decor-line"/><div class="ic-decor-line"/><div class="ic-collapse-decor-center"><span>'.concat(c.a.soy.$$escapeHtml(t({id:"inline.comments.expand.replies"},{0:e.totalReplies})),"</span></div></div>")}};var we=h.a.View.extend({el:"[data-inline-comments-target=true]:first",events:{"click .inline-comment-marker.valid":"commentClick","click span[data-mark-type=confluenceInlineComment].valid":"commentClick","click span[data-mark-type=annotation][data-mark-annotation-type=inlineComment].valid":"commentClick"},initialize(e){this.formatMessage=e.formatMessage,this.isFabricEditorEnabled=e.isFabricEditorEnabled,this.isFabricRendererEnabled=e.isFabricRendererEnabled,this.isFabricEditorDirty=!1,this.collection&&(this.listenTo(this.collection,"sync remove change:deleted",this.render),this.listenTo(this.collection,"change:active",this.setActive)),this.listenTo(h.a,"ic:view ic:overlap ic:sidebar-hidden",this.clearSelection),this.listenTo(h.a,"ic:persist",this.persistComment),this.listenTo(h.a,"ic:delete",this.render),this.listenTo(h.a,"ic:fabric-editor-dirty",this.setIsFabricEditorDirty),r.a.bind("qr:add-new-highlight-text".concat(".ic-highlight"),this._addQuickReloadMarker)},destroy(){r.a.unbind(".ic-highlight"),this.stopListening(),this.undelegateEvents()},render(){this.inlineLinks=[],this.$(".inline-comment-marker,span[data-mark-type=confluenceInlineComment],span[data-mark-type=annotation][data-mark-annotation-type=inlineComment]").removeClass("valid"),this.collection.each((function(e){e.isResolved()||e.get("deleted")||!e.highlights||(e.highlights.addClass("valid"),this._pushToInlineLinks(e.highlights))}),this),this._setupLinkDialog(),r.a.trigger("ic-highlight-rendered",this.collection)},_pushToInlineLinks(e){const t=this;e.each((function(){j.getInlineLinks(this).each((function(){Object(i.default)(this).attr("href")&&t.inlineLinks.push(Object(i.default)(this))}))}))},_setupLinkDialog(){const e={width:200,onHover:!0,noBind:!0,calculatePositions:this._calculatePositions,hideDelay:1e3};Object(i.default)(this.inlineLinks).each((function(){const t=this;r.a.InlineDialog(t,"inline-comment-link",(e,n,i)=>(e.addClass("inline-comment-link"),e.html(ke.highlightTextLink({link:t.attr("href")})),i(),!1),e)}))},_calculatePositions:(e,t,n)=>({displayAbove:!0,popupCss:{top:t.target.offset().top-e.height()-10,left:n.x-e.width()/2},arrowCss:{top:e.height(),left:e.width()/2-4}}),setActive(e){this.$(".inline-comment-marker,span[data-mark-type=confluenceInlineComment],span[data-mark-type=annotation][data-mark-annotation-type=inlineComment]").removeClass("active");const t=this.$('.inline-comment-marker[data-ref="'.concat(e.get("markerRef"),'"],')+'span[data-mark-type=confluenceInlineComment][data-reference="'.concat(e.get("markerRef"),'"],')+'span[data-mark-type=annotation][data-mark-annotation-type=inlineComment][data-id="'.concat(e.get("markerRef"),'"]'));e.get("active")&&t.length&&t.addClass("active")},commentClick(e){e.preventDefault(),e.stopPropagation(),Object(z.a)().start({name:b.a.VIEW_INLINE_COMMENT,id:P()(),collect:(e,t)=>{Object(W.a)([b.a.VIEW_INLINE_COMMENT_TOP_LEVEL,b.a.VIEW_INLINE_COMMENT_REPLY])(e,t)},attributes:{renderer:this.isFabricRendererEnabled?q:K}});try{const t=this.$(e.currentTarget),n=t.parentsUntil(".active",".inline-comment-marker.valid");t.hasClass("active")?h.a.trigger("ic:hide-sidebar",e,!0):n.length>0?this.displayComment(n.last()):this.displayComment(t)}catch(e){Object(z.a)().fail({name:b.a.VIEW_INLINE_COMMENT,error:e})}},displayComment(e,t){if(j.confirmProcess(this.formatMessage,!1,"true"===this.options.isFabricEditorEnabled&&this.isFabricEditorDirty)){const n=e.data("ref")||e.data("reference")||e.data("id"),i=this.collection.findWhere({markerRef:n});this.sendAnalytics(i),h.a.trigger("ic:view",i,t)}},clearSelection(){(new fe).removeHighlight()},persistComment(e){Object(i.default)("button[data-test-id='fabric-edit-button']")?this.$(".ic-current-selection").removeClass("ic-current-selection").attr("data-mark-type","annotation").attr("data-mark-annotation-type","inlineComment").attr("data-id",e.get("markerRef")).addClass("valid"):this.$(".ic-current-selection").removeClass("ic-current-selection").addClass("inline-comment-marker").attr("data-ref",e.get("markerRef")),this.collection.add(e)},_addQuickReloadMarker(e,t,n){const i=t.comment;this.$('.inline-comment-marker[data-ref="'.concat(i.dataRef,'"],')+'span[data-mark-type=confluenceInlineComment][data-reference="'.concat(i.dataRef,'"],')+'span[data-mark-type=annotation][data-mark-annotation-type=inlineComment][data-id="'.concat(i.dataRef,'"]')).length?n.resolve(t):(new fe).deserializeHighlights(i.serializedHighlights,i.dataRef)?n.resolve(t):n.reject(t)},setIsFabricEditorDirty(e){this.isFabricEditorDirty=e},async sendAnalytics(e){const t=await j.getAnalyticsClient,{attributes:{containerId:n},collection:i}=e,o=j.getUnresolvedComments(i);t.sendTrackEvent({source:"viewPageScreen",actionSubject:"inlineCommentsSidebar",action:"viewed",objectType:"page",objectId:n,attributes:{pageType:r.a.Meta.get("draft-type"),commentsDeckSize:o.length,resolvedComments:i.length-o.length}})}}),Oe=n("7nmT"),Ie=n.n(Oe),Me=n("cxan"),_e=n("HbGN"),Te=n("ERkP"),Ne=n.n(Te),Re=n("7M9M"),xe=n("96U/"),De=n("aWzz"),je=n.n(De),Se=n("2srY"),Pe=n.n(Se),Ae=n("EcEE");class Fe extends Te.Component{render(){const{userId:e}=this.props,t=Pe()(this.props,"dangerouslySetInnerHTML.__html");return Ne.a.createElement(Ae.a,{userId:e,fullName:t,isAnonymous:!e,referralSource:"inline-comments-header"})}}Fe.displayName="InlineCommentHeader";var Le=n("bR0+");const He=e=>e.getAttribute("data-account-id"),$e=e=>{const t={class:"className"},n={};return(e=>Array.from(e.attributes).map(e=>e.name))(e).forEach(i=>{n[t[i]||i]=e.getAttribute(i)}),n.dangerouslySetInnerHTML={__html:e.innerHTML},n};const Ve=e=>{const t=Array.from(e.el.querySelectorAll(".ic-author")).filter(e=>null!==e.querySelector(".confluence-userlink")).map(e=>e.querySelector(".confluence-userlink"));var n,i;(n=t,n.filter(He).map(e=>{const t=$e(e);t["data-user-hover-bound"]="true",t.href=Object(Le.a)(t["data-account-id"],null,i);const n=c.a.document.createElement("span");return e.parentNode?(e.parentNode.replaceChild(n,e),{props:t,placeholder:n}):{}})).forEach(e=>{const t=e.props,{"data-account-id":n}=t,i=Object(_e.a)(t,["data-account-id"]);Object(xe.a)(Ne.a.createElement(Fe,Object(Me.a)({userId:n},i),e.props.children),e.placeholder)})},Ue=e=>{Array.from(e.el.querySelectorAll(".ic-author a[data-account-id]")).filter(e=>e.getAttribute("href").startsWith("/people/")).forEach(e=>e.setAttribute("href","".concat(Re.CONTEXT_PATH).concat(e.getAttribute("href"))))};var Be=n("yLoQ"),ze=h.a.View.extend({className:"ic-likes",render(){return this.el&&Object(xe.a)(Ne.a.createElement(Be.a,{contentId:"".concat(this.options.contentId),containerId:"".concat(this.options.containerId),containerType:this.options.containerType,isForInlineComment:!0}),this.el),this}}),We=n("A79P");function qe(){r.a.Confluence.EditorLoader.resourcesLoaded()||this.$form.find(".loading-container").spin("small")}function Ke(){r.a.Meta.set("content-type","comment"),r.a.Meta.set("use-inline-tasks","false"),r.a.Meta.set("min-editor-height",80)}function Ge(e){var t,n;e.$form.find(".loading-container").hide(),e.$form.find("#rte-button-publish").text(this.formatMessage({id:"inline.comments.sidebar.save"})).removeAttr("title"),e.$form.find("#toolbar-hints-draft-status").hide(),this.hideCancelButton&&e.$form.find("#rte-button-cancel").hide(),e.editor.onPostProcess.add((t="onPostProcess",n=e.editor,function e(){c.a.tinymce.DOM.setStyle(c.a.tinymce.DOM.get("".concat(n.id,"_ifr")),"height","80px"),n.execCommand("mceAutoResize",{forceExec:!0}),n[t].remove(e)})),c.a.Confluence.Editor&&!c.a.Confluence.Editor.getContentType&&r.a.Confluence.QuickEdit.QuickEditPage.disable(),c.a.Confluence.Editor.removeAllCancelHandlers(),c.a.Confluence.Editor.removeAllSaveHandlers()}var Ye={init:function(e){return"true"!==e.isMacroBrowserCheckEnabled||r.a.MacroBrowser&&r.a.MacroBrowser.setMacroJsOverride?(this.formatMessage=e.formatMessage,r.a.Confluence.QuickEdit.activateEditor({preActivate:qe,preInitialise:Ke,postInitialise:i.default.proxy(Ge,e),toolbar:!1,$container:e.container,$form:e.form,saveHandler:e.saveHandler,cancelHandler:e.cancelHandler,fetchContent:e.fetchContent(),closeAnyExistingEditor:!0,postDeactivate:e.postDeactivate,plugins:j.getSupportedRtePlugins(),excludePlugins:j.getUnsupportedRtePlugins()})):i.default.Deferred().reject()},remove:function(){return r.a.Rte&&r.a.Rte.getEditor()?r.a.Confluence.QuickEdit.deactivateEditor():i.default.Deferred().resolve()},getContent:function(){return r.a.Rte.Content.getHtml()},setEditorBusy:function(e){e?Object(i.default)(".ic-sidebar #rte-spinner").spin():Object(i.default)(".ic-sidebar #rte-spinner").spinStop(),Object(i.default)("#rte-button-publish").prop("disabled",e)}},Je=n("gwLK"),Qe=n("L21V"),Xe=n("lZoD"),Ze=n("hz1Q"),et=n("JxFu"),tt=n("FdGg"),nt=n("X2PC"),it=n("8TdO"),ot=n("5NZs"),rt=n.n(ot),at=n("W47X"),st=n("mGwS");function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var dt=function(e){function t(){var n,i;ct(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=i=lt(this,e.call.apply(e,[this].concat(r))),i.history=Object(at.a)(i.props),lt(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){rt()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return Ne.a.createElement(st.a,{history:this.history,children:this.props.children})},t}(Ne.a.Component);dt.propTypes={basename:je.a.string,forceRefresh:je.a.bool,getUserConfirmation:je.a.func,keyLength:je.a.number,children:je.a.node};var ut=dt,ht=n("Clud"),mt=n("/FQd"),pt=n("oE0q"),ft=n("MV18"),gt=n("NsQF");const bt=({container:e})=>{const[t,n]=Object(Te.useState)(e);return Object(Te.useEffect)(()=>{let t;e&&(t=e.querySelector(".ic-content"),n(t))},[e]),Ie.a.createPortal(Ne.a.createElement(gt.a,{node:t,position:"bottom-end"}),t)};var vt=n("KD1n"),yt=n("1U1M"),Et=n("KsTJ"),Ct=n("wMvT"),kt=n.n(Ct),wt=n("VPHB"),Ot=n("/sMe"),It=n("dDc+"),Mt=n("qkqg"),_t=n("gOoR"),Tt=n("ltac"),Nt=n("dIe6"),Rt=n("vdGo"),xt=n("o0lc"),Dt=n("H5qd"),jt=n.n(Dt);function St(){const e=Object(vt.a)(["\n  mutation InlineCommentsFabricSaveReplyMutation(\n    $params: ExperimentalFabricInlineReplyInput\n  ) @experimental {\n    experimentalSaveFabricInlineReply(params: $params) {\n      result {\n        id\n        authorAccountId\n        authorDisplayName\n        authorUserName\n        authorAvatarUrl\n        body\n        commentDateUrl\n        hasDeletePermission\n        hasEditPermission\n        lastModificationDate\n        commentId\n      }\n      error {\n        errorId\n        message\n      }\n    }\n  }\n"]);return St=function(){return e},e}function Pt(){const e=Object(vt.a)(["\n  mutation InlineCommentsFabricSaveCommentMutation(\n    $params: ExperimentalFabricInlineCommentInput\n  ) @experimental {\n    experimentalSaveFabricInlineComment(params: $params) {\n      result {\n        id\n        authorAccountId\n        authorDisplayName\n        authorUserName\n        authorAvatarUrl\n        body\n        commentDateUrl\n        hasDeletePermission\n        hasEditPermission\n        hasReplyPermission\n        hasResolvePermission\n        lastModificationDate\n        markerRef\n        parentCommentId\n        originalSelection\n        resolveProperties {\n          resolved\n          resolvedTime\n          resolvedByDangling\n        }\n      }\n      error {\n        errorId\n        message\n      }\n    }\n  }\n"]);return Pt=function(){return e},e}function At(){const e=Object(vt.a)(["\n  query InlineCommentNewQuery($contentId: ID!) {\n    content(id: $contentId) {\n      edges {\n        node {\n          id\n          space {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return At=function(){return e},e}function Ft(){const e=Object(vt.a)(["\n  query InlineCommentEditQuery($contentId: ID!) {\n    content(id: $contentId) {\n      edges {\n        node {\n          id\n          body {\n            atlas_doc_format {\n              value\n            }\n          }\n          space {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return Ft=function(){return e},e}const Lt=jt()(Ft()),Ht=jt()(At()),$t=jt()(Pt()),Vt=jt()(St());function Ut(){const e=Object(vt.a)(['\n  & [aria-label="calendar"] td > div {\n    margin: 0 -1px;\n  }\n']);return Ut=function(){return e},e}function Bt(){const e=Object(vt.a)(["\n  padding: 30px 0;\n"]);return Bt=function(){return e},e}function zt(){const e=Object(vt.a)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n  display: flex;\n  justify-content: flex-end;\n"]);return zt=function(){return e},e}function Wt(){const e=Object(vt.a)(["\n  height: 143px;\n  width: 97%;\n  background: ",";\n"]);return Wt=function(){return e},e}const qt=Et.default.div(Wt(),It.colors.N0);qt.displayName="StyledLoadingContainer";const Kt=Et.default.div(zt()),Gt=Et.default.div(Bt()),Yt=Et.default.div(Ut()),Jt=({container:e,model:t,type:n,onCancel:i,onSaveSuccess:o,onSaveError:r,onContentChange:a})=>{const{attributes:{id:s,containerId:c,containerType:l}}=t,[d,u]=Object(Te.useState)(e),[h,m]=Object(Te.useState)(!1),[p,f]=Object(Te.useState)(b.a.ADD_INLINE_COMMENT_LOAD),[g,v]=Object(Te.useState)(b.a.ADD_INLINE_COMMENT_PUBLISH),y=Object(Te.useRef)(()=>{});Object(Te.useEffect)(()=>{e&&u(e.querySelector(".ic-body"))},[e]),Object(Te.useEffect)(()=>{switch(n){case G:f(b.a.ADD_INLINE_COMMENT_LOAD),v(b.a.ADD_INLINE_COMMENT_PUBLISH);break;case Y:f(b.a.REPLY_TO_INLINE_COMMENT_LOAD),v(b.a.REPLY_TO_INLINE_COMMENT_PUBLISH);break;case J:case Q:f(b.a.EDIT_INLINE_COMMENT_LOAD),v(b.a.EDIT_INLINE_COMMENT_PUBLISH);break;default:throw new Error("Unknown inline comment type name: ".concat(n))}},[n]);const E=n===G||n===Y,C=E?Ht:Lt,k=E?c:s,{data:w,loading:O,error:I}=Object(yt.c)(C,{variables:{contentId:k}}),[M]=Object(yt.b)($t),[_]=Object(yt.b)(Vt),T=e=>{const{formattedErrorToken:t,errorToLog:n}=(e=>{const{message:t,errorId:n}=e;let i;switch(t){case ne:i="inline.comments.fabric.editor.error.view.not.permitted";break;case ie:i="inline.comments.fabric.editor.error.create.not.permitted";break;case oe:i="inline.comments.fabric.editor.error.delete.not.permitted";break;case re:i="inline.comments.fabric.editor.error.resolve.not.permitted";break;case ae:i="inline.comments.fabric.editor.error.edit.not.permitted";break;case ce:i="inline.comments.fabric.editor.error.invalid.selection";break;case de:i="inline.comments.fabric.editor.error.cannot.be.empty";break;case he:i="inline.comments.fabric.editor.error.captcha.check.failed";break;case me:i="inline.comments.fabric.editor.error.captcha.check.succeeded";break;case se:case ee:case te:case le:case ue:default:i="inline.comments.fabric.editor.error.unexpected"}return{formattedErrorToken:i,errorToLog:"".concat(t).concat(n?" (errorId: ".concat(n,")"):"")}})(e);m(!0),Object(z.a)().fail({name:g,error:n}),r(t),m(!1)},N=Object(Te.useCallback)(({isEditorAborted:e})=>{e&&i()},[g]),R=Object(Te.useCallback)(({adf:e})=>{const i=n===G||n===J;if(m(!1),Object(z.a)().start({name:g,timeout:We.a.EDITOR_PUBLISH}),Object(Mt.a)(e))return void T({message:de});const{attributes:{originalSelection:r,serializedHighlights:a,numMatches:s,matchIndex:d,authorDisplayName:u,authorAvatarUrl:h,parentCommentId:p,lastFetchTime:f,id:b,authorAccountId:v,commentId:y,lastModificationDate:E,commentDateUrl:C,hasDeletePermission:k,hasEditPermission:w}}=t;let O,I;i?(O=M,I={variables:{params:{contentId:c,contentType:l||"page",adfContent:JSON.stringify(e),commentId:b,requestType:n===G?"add":"edit",originalSelection:r,serializedHighlights:a,numMatches:s,matchIndex:d,authorDisplayName:u,authorAvatarUrl:h,parentCommentId:p,lastFetchTime:f}}}):(O=_,I={variables:{params:{contentId:c,adfContent:JSON.stringify(e),replyId:b,requestType:n===Y?"reply":"edit-reply",authorDisplayName:u,authorAvatarUrl:h,authorAccountId:v,parentCommentId:y,hasDeletePermission:k,hasEditPermission:w,lastModificationDate:E,commentDateUrl:C}}}),O(I).then(({data:e})=>{let r,a;i?(r=e.experimentalSaveFabricInlineComment.error,a=e.experimentalSaveFabricInlineComment.result):(r=e.experimentalSaveFabricInlineReply.error,a=e.experimentalSaveFabricInlineReply.result),r?T(r):(n===Q&&(a.authorAccountId=t.attributes.authorAccountId,a.authorUserName=t.attributes.authorUserName),o(a))}).catch(e=>{let{message:t}=e;if(-1!==t.indexOf("{")){const e=t.substr(t.lastIndexOf("}")+3);t="GraphQL Error: ".concat(e)}T({message:t})})},[g]),x=Object(Te.useCallback)(()=>{a()},[]),D=Object(Te.useCallback)(()=>{Object(z.a)().succeed({name:p})},[p]),j=Object(Te.useCallback)(e=>{if(e&&!Object(Tt.b)(e)){let t=e;for(;t&&!t.classList.contains("ic-create-comment-view");)t=t.parentElement;y.current(t)}},[y.current]),{adfContent:S,spaceId:P}=(e=>{var t,n;const i=null!=(n=e)&&null!=(n=n.content)&&null!=(n=n.edges)&&null!=(n=n[0])&&null!=(n=n.node)&&null!=(n=n.body)&&null!=(n=n.atlas_doc_format)?n.value:n,o=(null!=(t=e)&&null!=(t=t.content)&&null!=(t=t.edges)&&null!=(t=t[0])&&null!=(t=t.node)&&null!=(t=t.space)?t.id:t)||"";return{adfContent:i?JSON.parse(i):null,spaceId:o}})(w);return Ie.a.createPortal(Ne.a.createElement(Te.Fragment,null,O&&Ne.a.createElement(Te.Fragment,null,Ne.a.createElement(qt,null),Ne.a.createElement(Kt,null,Ne.a.createElement(wt.a,null,Ne.a.createElement(Ot.a,{appearance:"primary",isDisabled:!0},Ne.a.createElement(Qe.c,{id:"inline-comments.inline.button.save",defaultMessage:"Save",description:"Button label for save button for inline comments"})),n!==G&&Ne.a.createElement(Ot.a,{appearance:"subtle",isDisabled:!0},Ne.a.createElement(Qe.c,{id:"inline-comments.inline.button.cancel",defaultMessage:"Cancel",description:"Button label for cancel button for inline comments"}))))),I&&Ne.a.createElement(Nt.a,{error:I},Ne.a.createElement(Gt,null,Ne.a.createElement(kt.a,{size:"medium",primaryColor:It.colors.R400}),Ne.a.createElement("span",null,"An error occured, please close the comment window and try again")),Ne.a.createElement(Rt.a,{name:p,error:I})),w&&Ne.a.createElement(Yt,null,Ne.a.createElement(_t.a,{content:S,contentId:c,contentType:l,spaceId:P,saveHandler:R,cancelHandler:N,onEditorLoaded:D,afterActivate:j,shouldWatch:!1,chromeless:!0,showCancelButton:n!==G,error:h,onContentChange:x}),Ne.a.createElement(xt.a,null,({scrollToElement:e})=>(y.current=e,null)))),d)};var Qt=n("hATe");function Xt(){const e=Object(vt.a)(["\n  font-size: 11px;\n  line-height: 16px;\n\n  &.ic-date-link {\n    color: ",";\n\n    &:visited,\n    &:hover {\n      color: ",";\n    }\n  }\n"]);return Xt=function(){return e},e}function Zt(){const e=Object(vt.a)(["\n  display: flex;\n  flex-direction: column;\n  padding-left: 4px;\n  font-size: 14px;\n  line-height: 20px;\n\n  a:first-of-type {\n    font-weight: 500;\n    color: ",";\n\n    &:visited,\n    &:hover {\n      color: ",";\n    }\n  }\n"]);return Zt=function(){return e},e}function en(){const e=Object(vt.a)(["\n  padding-left: 4px;\n"]);return en=function(){return e},e}function tn(){const e=Object(vt.a)(["\n  height: ",";\n  width: ",";\n"]);return tn=function(){return e},e}function nn(){const e=Object(vt.a)(["\n  display: flex;\n  align-items: center;\n"]);return nn=function(){return e},e}const on=Et.default.div(nn()),rn=Et.default.div(tn(),({avatarSize:e})=>"medium"===e?"36px":"28px",({avatarSize:e})=>"medium"===e?"36px":"28px"),an=Et.default.div(en()),sn=Et.default.div(Zt(),It.colors.N600,It.colors.N600),cn=Et.default.a(Xt(),It.colors.N200,It.colors.N200);cn.displayName="StyledCommentDateLink";const ln=({model:e,container:t,header:n,avatarSize:i,showDate:o})=>{const[r,a]=Object(Te.useState)(n),{attributes:{authorAccountId:s,authorAvatarUrl:c,authorDisplayName:l,lastModificationDate:d,commentDateUrl:u}}=e;Object(Te.useEffect)(()=>{const e=t.querySelector(".ic-author");for(;e.firstChild;)e.removeChild(e.firstChild);a(e)},[t]);return Ie.a.createPortal(Ne.a.createElement(on,null,Ne.a.createElement(rn,{avatarSize:i},Ne.a.createElement(Qt.a,{userId:s,src:c,size:i,trigger:"click"})),o?Ne.a.createElement(sn,null,Ne.a.createElement(Ae.a,{userId:s,fullName:l,referralSource:"inline-comment",canViewProfile:!1}),Ne.a.createElement(cn,{className:"ic-date-link",href:"/wiki".concat(u)},d)):Ne.a.createElement(an,null,Ne.a.createElement(Ae.a,{userId:s,fullName:l,referralSource:"inline-comment",canViewProfile:!1}))),r)},dn=({container:e,model:t,selector:n})=>{const{attributes:{id:i,containerId:o,containerType:r,commentId:a}}=t,[s,c]=Object(Te.useState)(e);return Object(Te.useEffect)(()=>{if(e){const t=e.querySelector(n);c(t)}},[e]),s?Ie.a.createPortal(Ne.a.createElement(Be.a,{contentId:"".concat(i),containerId:o||String(a),containerType:r||"page",isForInlineComment:!0}),s):null};var un=n("vdYO"),hn=n("i4Pk"),mn=n("3oRx"),pn=n("Iy7w"),fn=n("Cam2");const gn=Object(pn.a)("span",{target:"e19gntln0"})("color:",e=>e.isReply?"#707070":It.colors.N50,";font-size:12px;cursor:pointer;user-select:none;"),bn=Object(pn.a)("div",{target:"e19gntln1"})({name:"dkim4n",styles:"width:200px;user-select:none;"}),vn=Object(pn.a)("span",{target:"e19gntln2"})("color:",It.colors.B400,";display:inline;padding:0;cursor:pointer;:hover{text-decoration:underline;}"),yn=Object(pn.a)("span",{target:"e19gntln3"})({name:"kdqiw2",styles:"padding:3px 10px;font-size:14px;"}),En=({container:e,isReply:t})=>{const[n,i]=Object(Te.useState)(e),[o,r]=Object(Te.useState)(!1);Object(Te.useEffect)(()=>{let n;for(n=t?e.querySelector(".ic-actions > ul").children[1]:document.querySelector(".ic-sidebar-heading .ic-action-edit");n&&n.firstChild;)n.removeChild(n.firstChild);i(n)},[e,t]);const a=Object(Te.useCallback)(()=>{const e=document.querySelector(".ic-reply-container textarea");e&&(e.click(),r(!1))},[o]),s=Ne.a.createElement(bn,null,Ne.a.createElement("p",null,Ne.a.createElement(vn,{onClick:a},Ne.a.createElement(Qe.c,{id:"no-edit.action.text",defaultMessage:"Add a new comment",description:"option to add a new comment"}))," ",Ne.a.createElement(Qe.c,{id:"no-edit.reason",defaultMessage:"since this one cannot be edited; it contains content created in a legacy version of Confluence.",description:"reason for why we prevent editing the content"}))),c=Object(Te.useCallback)(()=>{r(!o)},[o]);return Ie.a.createPortal(Ne.a.createElement(fn.a,{content:s,isOpen:o,placement:t?"bottom":"bottom-end"},Ne.a.createElement(gn,{onClick:c,isReply:t},t?Ne.a.createElement(Qe.c,{id:"no-edit.action.label",defaultMessage:"Edit is not available",description:"clickable text that tells the user they cannot edit this content"}):Ne.a.createElement(yn,null,Ne.a.createElement(Qe.c,{id:"no-edit.menu.action",defaultMessage:"Edit",description:"clickable text that is disabled in a menu context"})))),n)};function Cn(){const e=Object(vt.a)(["\n  & .ak-renderer-document h1 {\n    font-weight: 500;\n  }\n"]);return Cn=function(){return e},e}const kn=Et.default.div(Cn()),wn=({contentId:e,container:t,isReply:n,hasEditPermission:i})=>{const[o,r]=Object(Te.useState)(t),[a,s]=Object(Te.useState)(b.a.VIEW_INLINE_COMMENT_TOP_LEVEL),[c,l]=Object(Te.useState)(!1);Object(Te.useEffect)(()=>{let e;if(t&&(e=t.querySelector(".ic-content"),e)){for(;e.firstChild;)e.removeChild(e.firstChild);r(e)}},[t]),Object(Te.useEffect)(()=>{n&&s(b.a.VIEW_INLINE_COMMENT_REPLY)},[n]);const d=Object(Te.useCallback)(()=>{Object(z.a)().succeed({name:a})},[a]),u=Object(Te.useCallback)(e=>{Object(z.a)().fail({name:a,error:e})},[a]);return Ie.a.createPortal(Ne.a.createElement(un.d,null,Ne.a.createElement(kn,null,Ne.a.createElement(hn.a,{contentId:e,appearance:"comment",extensionHandlers:Object(mn.a)(()=>{l(!0)},e),contentType:n?"inlineReply":"inlineComment",onComplete:d,onError:u,allowDynamicTextSizing:!1}),c&&i&&Ne.a.createElement(En,{container:t,isReply:n}))),o)},On=(e,t={viewToRender:Z,currentUserData:{}})=>{let n,i,o;const{viewToRender:r}=t;r===X?(n=e.el,i=".ic-action-like-reply",o=b.a.VIEW_INLINE_COMMENT_REPLY):r===Y||r===J||r===Q||r===G?n=e.el:(i=".ic-action-like",n=e.el.querySelector(".ic-container"),o=b.a.VIEW_INLINE_COMMENT_TOP_LEVEL);const a=n.querySelector(".ic-author"),s=n.innerHTML;let{model:c}=e;if(r===Y){const{currentUserData:{authorAccountId:e,authorDisplayName:n,authorAvatarUrl:i}}=t;c={attributes:{containerId:c.get("containerId"),containerType:"page",authorDisplayName:n,authorAvatarUrl:i,authorAccountId:e,commentId:c.get("id"),hasEditPermission:!0,hasDeletePermission:c.get("hasDeletePermission")}}}Ie.a.render(Ne.a.createElement(Xe.b,null,Ne.a.createElement(Ze.b,{client:Object(m.getAnalyticsWebClient)()},Ne.a.createElement(et.a,null,Ne.a.createElement(Je.b,{client:Object(it.getApolloClient)()},Ne.a.createElement(mt.a,null,e=>Ne.a.createElement(pt.a.Provider,{value:e},Ne.a.createElement(Qe.e,{locale:e.locale},Ne.a.createElement(ut,null,Ne.a.createElement(ht.a,{namedRoutes:Re},Ne.a.createElement(tt.a,{attribution:nt.a.COLLABORATION},Ne.a.createElement(Te.Fragment,null,Ne.a.createElement("div",{dangerouslySetInnerHTML:{__html:s}}),Ne.a.createElement(ln,{container:n,model:c,header:a,avatarSize:"fabric"===e.featureFlags["confluence.frontend.fabric.editor.inline.comments"]&&r!==Y&&r!==G?"medium":"small",showDate:"fabric"===e.featureFlags["confluence.frontend.fabric.renderer.inline.comments"]&&(r===Z||r===X)}),((e,i)=>{if(e===G||e===Y||e===J||e===Q){const{onCancel:i,onSaveSuccess:o,onSaveError:r,onContentChange:a}=t;return Ne.a.createElement(Jt,{container:n,model:c,type:e,onCancel:i,onSaveSuccess:o,onSaveError:r,onContentChange:a})}return"fabric"===i["confluence.frontend.fabric.renderer.inline.comments"]?Ne.a.createElement(wn,{contentId:c.id,container:n,isReply:e===X,hasEditPermission:c.get("hasEditPermission")}):Ne.a.createElement(Te.Fragment,null,Ne.a.createElement(bt,{contentId:c.id,container:n}),Ne.a.createElement(ft.a,{name:o}))})(r,e.featureFlags),i&&Ne.a.createElement(dn,{container:n,model:c,selector:i}),r===Z&&Ne.a.createElement(ft.a,{name:b.a.VIEW_INLINE_COMMENT_TOP_LEVEL})))))))))))),n)};var In=h.a.View.extend({tagName:"div",className:"ic-create-comment-view",events:{"click .ic-action-save":"saveComment","click .ic-action-discard":"discardComment","keyup .ic-textarea":"onInput","focus .ic-textarea":"onFocus","click #show-page-comment":"showPageComment"},template:ke.createComment,initialize(e){this.formatMessage=e.formatMessage,this.selection=e.selection,this.type=e.type,this.onFinished=e.onFinished||function(){},this.commentText=e.commentText||"",this.stopFocus=e.stopFocus,this.serializedHighlights=e.serializedHighlights,this.isMacroBrowserCheckEnabled=e.isMacroBrowserCheckEnabled,this.isFabricEditorDirty=!1,"edit"!==e.type&&"reply"!==e.type&&"edit-reply"!==e.type||(this.template=ke.commentForm,h.a.trigger("ic:discard-edit"),this.listenTo(h.a,"ic:discard-edit",this.discardComment)),this.listenTo(h.a,"ic:sidebar:close",this.discardComment),j.isSPAPage()?(this.isTinymceResourceReady="true"===Object(i.default)(".".concat(j.getPageContentClassName())).attr("data-editor-resource-loaded"),this.isPendingRenderEditor=!1,this.listenTo(h.a,"ic:tinymce-resource-loaded",this.tinymceResourceLoaded)):this.isTinymceResourceReady=!0},tinymceResourceLoaded(){this.isTinymceResourceReady=!0,this.isPendingRenderEditor&&(this.isPendingRenderEditor=!1,this.renderEditor())},finish(){this.onFinished(),r.a.trigger("ic-jim-async-supported")},async render(){const e=await this._getAuthorObject(),t={type:this.type,text:this.commentText,showMenu:!1,isGDPRInlineCommentsEnabled:this.options.isGDPRInlineCommentsEnabled,isFabricEditorEnabled:this.options.isFabricEditorEnabled},n=d.a.extend({},e,t,{darkFeatures:j.getDarkFeatures()});return this.$el.html(this.template(n,this.formatMessage)),"true"===this.options.isFabricEditorEnabled?this.renderEditor(!0):j.getDarkFeatures().RICH_TEXT_EDITOR?this.isTinymceResourceReady?this.renderEditor():(this.$(".loading-container").spin("small"),this.isPendingRenderEditor=!0):this.stopFocus||setTimeout(d.a.bind(this.focusEditor,this),1),Ve(this),"true"===this.options.isFrontendPeopleDirectoryEnabled&&Ue(this),j.addSidebarHeadingTooltip(this),this},onInput(e){const t=""!==this.$(e.target).val().trim();this._saveDisable(!t)},onFocus(){if("edit"===this.type||"edit-reply"===this.type){const e=this.$(".textarea");j.moveCaretToEnd(e[0]),this._saveDisable(""===e.text())}},saveComment(e){e.preventDefault(),this._isValid()&&(this._disableForm(),"reply"===this.type?this._addReply():"edit"===this.type||"edit-reply"===this.type?this._saveEdit():this._addComment())},_getAuthorObject(){let e,t,n;return"edit"===this.type||"edit-reply"===this.type?(e=this.model.get("authorAvatarUrl"),t=this.model.get("authorDisplayName"),n=this.model.get("authorAccountId"),Promise.resolve({authorAvatarUrl:e,authorDisplayName:t,authorAccountId:n})):j.getCurrentUserData()},_saveEdit(){const e=this._getContent(),t={wait:!0,beforeSend:d.a.bind(this.beforeSendAjax,this),success:d.a.bind(this._onSaveSuccess,this),error:d.a.bind(this._onEditError,this)};Object(z.a)().start({name:b.a.EDIT_INLINE_COMMENT_PUBLISH,id:P()(),timeout:We.a.EDITOR_PUBLISH,attributes:{editor:A.g.TINY_MCE}}),this.model.save({body:e},t)},_onEditError(e,t){if(this.showCaptchaError(t))return;let n,i;401===t.status?(i=this.formatMessage({id:"inline.comments.edit.permission"}),n="legacy-inline-comments edit permission error; status = ".concat(t.status)):(i=this.formatMessage({id:"inline.comments.server.edit.error"}),n="legacy-inline-comments edit error; status = ".concat(t.status)),this._triggerError(i),Object(g.b)(b.a.EDIT_INLINE_COMMENT_PUBLISH,new Error(n))},_triggerError(e,t){h.a.trigger("ic:error",e,t),this._disableForm(!1)},_addReply(){const e=new L({body:this._getContent(),commentId:this.model.get("id"),hasDeletePermission:Boolean(r.a.Meta.get("atlassian-account-id"))||this.model.get("hasDeletePermission")});Object(z.a)().start({name:b.a.REPLY_TO_INLINE_COMMENT_PUBLISH,id:P()(),timeout:We.a.EDITOR_PUBLISH,attributes:{editor:A.g.TINY_MCE}}),e.save(null,{beforeSend:d.a.bind(this.beforeSendAjax,this),success:d.a.bind(this._onSaveSuccess,this),error:d.a.bind((function(e,t){this.showCaptchaError(t)||(this._triggerError(this.formatMessage({id:"inline.comments.sidebar.error.save.reply"})),Object(g.b)(b.a.REPLY_TO_INLINE_COMMENT_PUBLISH,new Error("legacy-inline-comments reply save error; status = ".concat(t.status))))}),this)})},_addComment(){const e=new $({originalSelection:this.selection.searchText.selectedText.replace(/\n/g,""),body:this._getContent(),matchIndex:this.selection.searchText.index,numMatches:this.selection.searchText.numMatches,serializedHighlights:this.serializedHighlights});Object(z.a)().start({name:b.a.ADD_INLINE_COMMENT_PUBLISH,id:P()(),timeout:We.a.EDITOR_PUBLISH,attributes:{editor:A.g.TINY_MCE}}),e.save(null,{beforeSend:d.a.bind(this.beforeSendAjax,this),success:d.a.bind(this._onSaveSuccess,this),error:d.a.bind(this._onAddError,this)})},_onAddError(e,t){if(this.showCaptchaError(t))return;let n;409===t.status?(this._triggerError(this.formatMessage({id:"inline.comments.sidebar.error.stale"},{0:"<a href='#' class='ic-reload-page'>",1:"</a>"}),{callback:this.bindPageReloadLink}),n="legacy-inline-comments stale page; status = ".concat(t.status)):412===t.status?(r.a.trigger("analytics",{name:"confluence.comment.inline.cannot.create"}),this._triggerError(this.formatMessage({id:"inline.comments.sidebar.error.create.comment"})),n="legacy-inline-comments error create; status = ".concat(t.status)):(this._triggerError(this.formatMessage({id:"inline.comments.sidebar.error.save.comment"})),n="legacy-inline-comments error save; status = ".concat(t.status)),Object(g.b)(b.a.ADD_INLINE_COMMENT_PUBLISH,new Error(n))},_isValid(){return"<p><br /></p>"!==i.default.trim(this._getContent())||(h.a.trigger("ic:error",this.formatMessage({id:"inline.comments.sidebar.comment.empty"})),!1)},_onSaveSuccess(e){let t;switch(this.type){case"topLevel":e.set&&e.set("hasDeletePermission",!0),h.a.trigger("ic:persist",e),h.a.trigger("ic:view",e,void 0),t=b.a.ADD_INLINE_COMMENT_PUBLISH;break;case"reply":this.model.replies.push(e),h.a.trigger("ic:reply:persist",e),this.finish(),t=b.a.REPLY_TO_INLINE_COMMENT_PUBLISH;break;case"edit":case"edit-reply":h.a.trigger("ic:edit"),this.finish(),t=b.a.EDIT_INLINE_COMMENT_PUBLISH}Object(z.a)().succeed({name:t}),this.trackAnalyticEvent(e,this.type)},_setEditorIsNotDirty(){r.a.Rte.getEditor()&&(r.a.Rte.getEditor().isNotDirty=1)},_disableForm(e){void 0===e&&(e=!0),this._saveDisable(e),j.getDarkFeatures().RICH_TEXT_EDITOR||this.$(".ic-action-discard,.ic-textarea").prop("disabled",e).attr("aria-disabled",e)},_saveDisable(e){j.getDarkFeatures().RICH_TEXT_EDITOR?(Ye.setEditorBusy(e),Object(i.default)("#rte-button-cancel")[0].disabled=e):this.$(".ic-action-save").prop("disabled",e).attr("aria-disabled",e)},renderEditor(e){const t=this,n=this.$(".ic-body"),o=this.commentText,a=r.a.Confluence.QuickEdit.QuickComment;if(!e){if(r.a.Confluence.QuickEdit)try{r.a.Confluence.QuickEdit.deactivateEditor()}catch(e){}return Ye.init({formatMessage:t.formatMessage,container:n,form:n.find("form.aui"),saveHandler:"pageComment"===this.type?a.createSaveHandler(d.a.bind(this._successCreatePageComment,this),a.saveCommentErrorHandler):d.a.bind(this.saveComment,this),cancelHandler:d.a.bind(this.discardComment,this),fetchContent(){const e=new i.default.Deferred;return e.resolve({editorContent:o}),e},postDeactivate:d.a.bind((function(){h.a.trigger("ic:clearError"),this.finish()}),this),hideCancelButton:"topLevel"===this.type,isMacroBrowserCheckEnabled:this.isMacroBrowserCheckEnabled}).done(d.a.bind(this.renderEditorCompleted,this)).fail(d.a.bind(this.renderEditorFail,this))}{let e;switch(this.type){case"edit":e=J;break;case"reply":e=Y;break;case"edit-reply":e=Q,this.model.set({containerId:r.a.Meta.get("latest-page-id"),containerType:"page"});break;case"topLevel":default:e=G,this.model=new $({authorAccountId:j.getAuthorAccountId(),originalSelection:this.selection.searchText.selectedText.replace(/\n/g,""),matchIndex:this.selection.searchText.index,numMatches:this.selection.searchText.numMatches,serializedHighlights:this.serializedHighlights,parentCommentId:0})}On(this,{viewToRender:e,onCancel:this.discardComment.bind(this),onSaveSuccess:e=>this.onFabricSaveSuccess(e),onSaveError:e=>this.onFabricSaveError(e),onContentChange:()=>this.onFabricContentChange(),currentUserData:{authorAccountId:j.getAuthorAccountId(),authorAvatarUrl:j.getAuthorAvatarUrl(),authorDisplayName:j.getAuthorDisplayName()}}),this.isReactRootMounted=!0}},showPageComment(e){const t=Object(i.default)(e.target).data("comment-id"),n=Object(i.default)("#comment-".concat(t));n.addClass("focused"),n.scrollToElement()},_successCreatePageComment(e){c.a.Confluence.CommentDisplayManager.addComment(j.getCurrentUserInfo(),e,!1,!1,!0),r.a.trigger("page.commentAddedOrUpdated",{commentId:e.id}),this._setEditorIsNotDirty(),j.getDarkFeatures().RICH_TEXT_EDITOR&&(this.keepSidebar=!0,Ye.remove()),this.$el.html(ke.pageComment({commentId:e.id},this.formatMessage)),j.addSidebarHeadingTooltip(this)},renderEditorCompleted(){h.a.trigger("ic:clearError"),"topLevel"!==this.type&&"pageComment"!==this.type||(this.$("#rte-button-cancel").hide(),"pageComment"===this.type&&(h.a.trigger("ic:error",this.formatMessage({id:"page.comments.sidebar.warning"})),this.focusEditor())),this.captchaManager=new r.a.Confluence.QuickEditCaptchaManager(r.a.Confluence.EditorLoader.getEditorForm()),"topLevel"===this.type?Object(z.a)().succeed({name:b.a.ADD_INLINE_COMMENT_LOAD}):"edit"===this.type||"edit-reply"===this.type?Object(z.a)().succeed({name:b.a.EDIT_INLINE_COMMENT_LOAD}):"reply"===this.type&&Object(z.a)().succeed({name:b.a.REPLY_TO_INLINE_COMMENT_LOAD})},renderEditorFail(){const e={closeable:!0,callback:this.bindPageReloadLink};switch(this.type){case"pageComment":this._setEditorIsNotDirty();break;case"topLevel":this.$(".loading-container").hide(),this.$(".ic-create-comment").hide(),e.closeable=!1;break;case"edit":case"edit-reply":case"reply":this.finish()}h.a.trigger("ic:error",this.formatMessage({id:"inline.comments.editor.timeout"},{0:"<a href='#' class='ic-reload-page'>",1:"</a>"}),e),h.a.trigger("ic:editor:load:fail")},bindPageReloadLink(){Object(i.default)(".ic-error").off("click",".ic-reload-page").on("click",".ic-reload-page",()=>(c.a.location.reload(),!1))},discardComment(e){e&&e.preventDefault(),this.isFabricEditorDirty=!1,h.a.trigger("ic:fabric-editor-dirty",!1),"edit"!==this.type&&"edit-reply"!==this.type&&"reply"!==this.type||Object(z.a)().abort({name:"reply"===this.type?b.a.REPLY_TO_INLINE_COMMENT:b.a.EDIT_INLINE_COMMENT,reason:"cancel pressed"}),h.a.trigger("ic:clearError"),this.finish()},_getContent(){return j.getDarkFeatures().RICH_TEXT_EDITOR?Ye.getContent():this.$("textarea").val()},focusEditor(){if(j.getDarkFeatures().RICH_TEXT_EDITOR)if("pageComment"===this.type){const e=Object(i.default)(r.a.Rte.getEditor()&&r.a.Rte.getEditor().getBody()).find("div")[0];r.a.Rte.getEditor().selection.select(e,1),r.a.Rte.getEditor().selection.collapse(1),e.focus()}else r.a.Rte.getEditor()&&r.a.Rte.getEditor().focus();else this.$(".ic-textarea:visible").focus()},destroy(){j.getDarkFeatures().RICH_TEXT_EDITOR&&Ye.remove(),this.unmountReactBridge(),this.remove()},beforeSendAjax(e){const t=this.captchaManager.getCaptchaData();t&&t.id&&(e.setRequestHeader("X-Atlassian-Captcha-Id",t.id),e.setRequestHeader("X-Atlassian-Captcha-Response",t.response))},showCaptchaError(e){return!(404!==e.status||!e.responseText||-1==e.responseText.search(/captcha/i))&&(this.captchaManager.refreshCaptcha(),this._triggerError(this.formatMessage({id:"captcha.response.failed"})),!0)},trackAnalyticEvent(e,t){let n,o,a;try{n=e.attributes.id.toString(),o=e.changed.active?null:e.attributes.commentId.toString(),a=Object(i.default)(".view-page-body").get(0).dataset.spaceId}catch(e){}const s={containerType:"space",containerId:a,source:"viewPageScreen",objectType:"page",objectId:r.a.Meta.get("content-id"),action:"edit"===t||"edit-reply"===t?"updated":"created",actionSubject:"comment",actionSubjectId:n,attributes:{commentType:"inline",pageType:r.a.Meta.get("draft-type"),parentCommentId:o,editor:"true"===this.options.isFabricEditorEnabled?A.g.FABRIC:A.g.TINY_MCE}};Object(m.getAnalyticsWebClient)().then(e=>{e.sendTrackEvent(s)})},onFabricSaveSuccess(e){if(h.a.trigger("ic:clearError"),this.isFabricEditorDirty=!1,h.a.trigger("ic:fabric-editor-dirty",!1),"reply"===this.type){const t=new L(e);this._onSaveSuccess(t)}else this.model.set(e),this._onSaveSuccess(this.model)},onFabricSaveError(e){this._triggerError(this.formatMessage({id:e}))},onFabricContentChange(){this.isFabricEditorDirty||(this.isFabricEditorDirty=!0,h.a.trigger("ic:fabric-editor-dirty",!0))},unmountReactBridge(){if(this.isReactRootMounted){const e=this.el;Ie.a.unmountComponentAtNode(e)&&(this.isReactRootMounted=!1)}}}),Mn=h.a.View.extend({tagName:"div",className:"ic-confirm-container",initialize(e){this.formatMessage=e.formatMessage,this.$menuEl=e.$menuEl,this.$bodyEl=e.$bodyEl,this.$menuEl.addClass("ic-action-menu-active"),this.render(),d.a.bindAll(this,"clickOutside"),this.$bodyEl.on("click",this.clickOutside)},events:{"click .ic-action-cancel-confirm":"cancel","click .ic-action-delete-confirm":"confirm"},template:ke.confirmDialog,render(){return this.$el.html(this.template(this.model.toJSON(),this.formatMessage)),this},clickOutside(e){i.default.contains(this.el,e.target)||this.el===e.target||this.cancel()},cancel(){this.destroy()},confirm(){this.trigger("ic:confirm"),this.destroy()},destroy(){this.$bodyEl.off("click",this.clickOutside),this.$menuEl.removeClass("ic-action-menu-active"),this.remove()}}),_n=h.a.View.extend({tagName:"div",className:"ic-display-reply",template:ke.renderReply,events:{"click .ic-action-edit-reply":"editReply","click .ic-action-delete-reply":"confirmDelete"},initialize(e){this.formatMessage=e.formatMessage,this.isFabricEditorDirty=!1,this.listenTo(h.a,"ic:fabric-editor-dirty",this.setIsFabricEditorDirty),d.a.bindAll(this,"onEditCallback"),this.$el.attr("data-comment-id",this.model.get("id"))},_renderLikes(){const e=this.el&&this.el.querySelector(".ic-action-like-reply");this.options.shouldShowInlineCommentLikes?this.options.shouldShowInlineCommentLikes.then(t=>{t?(this.likesView&&this.likesView.remove(),this.likesView=new ze({contentId:this.model.id,el:e,container:this.el,selector:".ic-action-like-reply"}).render()):e&&e.remove()}):e&&e.remove()},render(){try{const e=d.a.extend(this.model.toJSON(),{resolved:this.options.resolved,darkFeatures:j.getDarkFeatures(),isGDPRInlineCommentsEnabled:this.options.isGDPRInlineCommentsEnabled,isFabricRendererEnabled:this.options.isFabricRendererEnabled});if(!0===this.isReactRootMounted){Ie.a.unmountComponentAtNode(this.el)&&(this.isReactRootMounted=!1)}const t=this.template(e,this.formatMessage);this.$el.html(t),On(this,{viewToRender:X}),this.isReactRootMounted=!0}catch(e){Object(z.a)().fail({name:b.a.VIEW_INLINE_COMMENT_REPLY,error:e})}return"true"===this.options.isFrontendPeopleDirectoryEnabled&&Ue(this),this},editReply(e){if(j.confirmProcess(this.formatMessage,!1,"true"===this.options.isFabricEditorEnabled&&this.isFabricEditorDirty)){Object(F.a)({name:b.a.EDIT_INLINE_COMMENT,id:P()(),attributes:{editor:"true"===this.options.isFabricEditorEnabled?A.g.FABRIC:A.g.TINY_MCE,type:"reply"}},{name:b.a.EDIT_INLINE_COMMENT_LOAD},{name:b.a.EDIT_INLINE_COMMENT_PUBLISH}),j.getEditorFormat(this.model.get("id")).done(e=>{Ie.a.unmountComponentAtNode(this.el)&&(this.isReactRootMounted=!1),this.editView=new In({model:this.model,type:"edit-reply",selection:{},onFinished:this.onEditCallback,commentText:e,formatMessage:this.formatMessage,isGDPRInlineCommentsEnabled:this.options.isGDPRInlineCommentsEnabled,isFrontendPeopleDirectoryEnabled:this.options.isFrontendPeopleDirectoryEnabled,isMacroBrowserCheckEnabled:this.options.isMacroBrowserCheckEnabled,isFabricEditorEnabled:this.options.isFabricEditorEnabled}),this.$el.html(this.editView.$el),this.editView.render()}).fail((e,t,n)=>{j.failEditDisplay(this.formatMessage({id:"inline.comments.server.error.edit.reply"}),{errorThrown:n})})}else e&&e.currentTarget.blur()},onEditCallback(){this.editView&&this.editView.destroy(),this.editView=null,this.render()},deleteFail(e,t){401===t.status?h.a.trigger("ic:error",this.formatMessage({id:"inline.comments.delete.permission"})):h.a.trigger("ic:error",this.formatMessage({id:"inline.comments.server.error"}))},confirmDelete(e){!0===window.confirm(this.formatMessage({id:"inline.comments.delete.reply.confirmation.message"}))&&this.deleteReply(e)},deleteReply(e){Object(i.default)(e.target).attr("aria-disabled",!0).prop("disabled",!0),this.model.destroy({wait:!0,error:this.deleteFail,success(){h.a.trigger("ic:reply:delete")}})},destroy(){this.likesView&&this.likesView.remove(),this.editView&&this.editView.destroy(),this.remove()},setIsFabricEditorDirty(e){this.isFabricEditorDirty=e}}),Tn=h.a.View.extend({tagName:"div",className:"ic-replies",events:{"click #ic-showmore-container":"forceShowAllReplies"},initialize(e){if(this.formatMessage=e.formatMessage,!e.commentModel)throw new Error("Inline Comment Model should be passed as a parameter when init ReplyListView","ReplyListView");this.replyViews=[],this.collection=e.commentModel.replies,this.source=e.source,this.listenTo(this.collection,"add remove",this.render),!0!==this.collection.isFetched&&(this.listenToOnce(this.collection,"sync",this.fetchComplete),this.collection.fetch({reset:!0,cache:!1})),this.expandReplies=!1,this.COMMENT_NUMBER_TO_COLLAPSE=4},fetchComplete(){this.collection.isFetched=!0,this.render(),j.resizeContentAfterLoadingImages(this.$el)},render(e){if(!0!==this.collection.isFetched)return this;this.replyExperienceHasStarted||(this.replyExperienceHasStarted=!0,Object(z.a)().start({id:P()(),name:b.a.VIEW_INLINE_COMMENT_REPLY}));try{return e&&this.collection.last()===e?void this.appendReply(e):(this.cleanUpReplyViews(),this.$el.empty(),this.collection.length>this.COMMENT_NUMBER_TO_COLLAPSE&&!1===this.expandReplies&&"permalink"!==this.source&&this.options.commentModel&&!this.options.commentModel.isResolved()?this.renderCollapsibleReplies():this.renderFullReplies(),this.trigger("ic:reply-rendered",this.options.commentModel),this._hightlightReply(),r.a.trigger("ic-jim-async-supported"),this)}catch(e){Object(z.a)().fail({name:b.a.VIEW_INLINE_COMMENT_REPLY,error:e})}},renderFullReplies(){0===this.collection.length&&Object(z.a)().succeed({name:b.a.VIEW_INLINE_COMMENT_REPLY}),this.collection.each((function(e){this.appendReply(e)}),this)},forceShowAllReplies(){this.expandReplies=!0,this.render()},renderCollapsibleReplies(){this.renderExpendButton();const e=this.collection.last();this.appendReply(e)},appendReply(e){const t=this.createReplyView(e);this.replyViews.push(t),this.$el.append(t.render().el)},renderExpendButton(){this.$el.append(ke.showmoreReply({totalReplies:this.collection.length-1},this.formatMessage))},createReplyView(e){return new _n({formatMessage:this.formatMessage,model:e,resolved:this.options.commentModel.isResolved(),shouldShowInlineCommentLikes:this.options.shouldShowInlineCommentLikes,isGDPRInlineCommentsEnabled:this.options.isGDPRInlineCommentsEnabled,isFrontendPeopleDirectoryEnabled:this.options.isFrontendPeopleDirectoryEnabled,isMacroBrowserCheckEnabled:this.options.isMacroBrowserCheckEnabled,isFabricEditorEnabled:this.options.isFabricEditorEnabled,isFabricRendererEnabled:this.options.isFabricRendererEnabled})},_hightlightReply(){if("permalink"!==this.source)return;const e=c.a.location.search.match(/(focusedCommentId|replyToComment)=(\d+)/);if(null==e)return;const t=parseInt(e[2],10);t&&0!==t&&this.$("[data-comment-id=".concat(t,"]")).addClass("ic-comment-reply-highlight")},cleanUpReplyViews(){let e;for(e=0;e<this.replyViews.length;e++)this.replyViews[e].destroy(),this.replyViews[e]=null;this.replyViews=[]},destroy(){this.cleanUpReplyViews(),this.remove()}});let Nn=!1;var Rn=h.a.View.extend({tagName:"div",events:{"click #ic-nav-previous":"showPrevious","click #ic-nav-next":"showNext"},template:ke.navigation,initialize(e){this.formatMessage=e.formatMessage,this.isFabricEditorDirty=!1,this.collection=this.model.collection,this.listenTo(this.collection,"change:resolveProperties",this.onResolveToggle),this.disabled=this.collection.getCommentsOnPageCount()<=1,this.listenTo(h.a,"ic:show-previous",this.showPrevious),this.listenTo(h.a,"ic:show-next",this.showNext),this.listenTo(h.a,"ic:fabric-editor-dirty",this.setIsFabricEditorDirty)},render(){return this.$el.html(this.template({disabled:this.disabled,showIndex:!(this.model.isResolved()||this.model.get("deleted")),index:this.collection.getActiveIndexWithinPageComments()+1,size:this.collection.getCommentsOnPageCount()},this.formatMessage)),this},onResolveToggle(){this.disabled=this.collection.getCommentsOnPageCount()<=1,this.render()},showPrevious(e){if(!this.disabled&&!Nn&&j.confirmProcess(this.formatMessage,!1,"true"===this.options.isFabricEditorEnabled&&this.isFabricEditorDirty)){const t=this.collection.getPrevCommentOnPage();null!=t&&(h.a.trigger("ic:view",t,"nav"),e.clientX>0||e.clientY>0?this.sendAnalytics("clicked","previous"):this.sendAnalytics("pressed","previous")),e.view||(Nn=!0,setTimeout(()=>{Nn=!1},500))}},showNext(e){if(!this.disabled&&!Nn&&j.confirmProcess(this.formatMessage,!1,"true"===this.options.isFabricEditorEnabled&&this.isFabricEditorDirty)){const t=this.collection.getNextCommentOnPage();null!=t&&(h.a.trigger("ic:view",t,"nav"),e.clientX>0||e.clientY>0?this.sendAnalytics("clicked","next"):this.sendAnalytics("pressed","next")),e.view||(Nn=!0,setTimeout(()=>{Nn=!1},500))}},setIsFabricEditorDirty(e){this.isFabricEditorDirty=e},async sendAnalytics(e,t){const n=await j.getAnalyticsClient,{attributes:{containerId:i}}=this.model,o={source:"inlineCommentsSideBar",actionSubjectId:t,objectType:"comment",objectId:String(this.model.id),attributes:{pageId:i}};"pressed"===e?(o.action="pressed",o.attributes.key="previous"===t?"p":"n",o.actionSubject="keyboardShortcut"):(o.action="clicked",o.actionSubject="button"),n.sendUIEvent(o)}}),xn=h.a.View.extend({tagName:"div",className:"ic-display-comment-view",template:ke.displayComment,events:{"click .ic-action-reply":"replyComment","click .ic-action-resolve":"resolveComment","click .ic-action-edit":"editComment","click #show-resolved-comments":"showResolvedDialogDiscovery","click .ic-reply-placeholder .textarea":"replyComment","focus .ic-reply-container .textarea":"onReplyPlaceholderFocus"},initialize(e){this.formatMessage=e.formatMessage,this.isFabricEditorDirty=!1,d.a.bindAll(this,"confirm","destroy","deleteFail","replyComment","resolveComment","editComment","renderCommentOnly"),this.model.set("active",!0),this.listenTo(this.model,"change:resolveProperties",this.render),this.listenTo(this.model,"remove",this.destroy),this.listenTo(h.a,"ic:fabric-editor-dirty",this.setIsFabricEditorDirty),Object(i.default)("body").on("click",".ic-action-delete a",this.confirm),Object(i.default)("body").on("click",".ic-action-reply a",this.replyComment),Object(i.default)("body").on("click",".ic-action-resolve a",this.resolveComment),Object(i.default)("body").on("click",".ic-action-edit a",this.editComment),this.replyListView=new Tn({formatMessage:this.formatMessage,commentModel:this.model,source:e.source,shouldShowInlineCommentLikes:this.options.shouldShowInlineCommentLikes,isGDPRInlineCommentsEnabled:this.options.isGDPRInlineCommentsEnabled,isMacroBrowserCheckEnabled:this.options.isMacroBrowserCheckEnabled,isFrontendPeopleDirectoryEnabled:this.options.isFrontendPeopleDirectoryEnabled,isFabricEditorEnabled:this.options.isFabricEditorEnabled,isFabricRendererEnabled:this.options.isFabricRendererEnabled})},render(){return Object(z.a)().start({id:P()(),name:b.a.VIEW_INLINE_COMMENT_TOP_LEVEL,attributes:{totalReplies:this.model.replies&&this.model.replies.length}}),j.getCurrentUserData().then(e=>{this.$el.html(this.template(d.a.extend(this.model.toJSON(),{showMenu:!0,currentAuthorAvatarUrl:e.authorAvatarUrl,currentAuthorDisplayName:e.authorDisplayName,currentAuthorAccountId:e.authorAccountId,darkFeatures:j.getDarkFeatures(),isGDPRInlineCommentsEnabled:this.options.isGDPRInlineCommentsEnabled,isFabricRendererEnabled:this.options.isFabricRendererEnabled}),this.formatMessage)),this.model.isResolved()?this.$(".ic-comment-container").addClass("ic-resolved"):this.$(".ic-list").append(this.replyListView.render().el),this._renderNavigation(),j.addSidebarHeadingTooltip(this),On(this),this.isReactRootMounted=!0,"true"===this.options.isFrontendPeopleDirectoryEnabled&&Ue(this)}).catch(e=>{Object(g.b)(b.a.VIEW_INLINE_COMMENT_TOP_LEVEL,e)}),this},_renderNavigation(){this.navigationView&&this.navigationView.remove(),this.navigationView=new Rn({model:this.model,formatMessage:this.formatMessage,isFabricEditorEnabled:this.options.isFabricEditorEnabled}),this.navigationView.render(),this.$("#ic-nav-container").html(this.navigationView.el)},_renderLikes(){const e=this.el&&this.el.querySelector(".ic-action-like");this.options.shouldShowInlineCommentLikes?this.options.shouldShowInlineCommentLikes.then(t=>{t?(this.likesView&&this.likesView.remove(),this.likesView=new ze({contentId:this.model.id,containerId:this.model.get("containerId"),containerType:this.model.get("containerType"),el:e,container:this.el,selector:".ic-action-like"}).render()):e&&e.remove()}):e&&e.remove()},editComment(e){if(e.preventDefault(),Object(F.a)({name:b.a.EDIT_INLINE_COMMENT,id:P()(),attributes:{editor:"true"===this.options.isFabricEditorEnabled?A.g.FABRIC:A.g.TINY_MCE,type:"topLevel"}},{name:b.a.EDIT_INLINE_COMMENT_LOAD},{name:b.a.EDIT_INLINE_COMMENT_PUBLISH}),this.editView)this.editView.focusEditor();else if(j.confirmProcess(this.formatMessage,!1,"true"===this.options.isFabricEditorEnabled&&this.isFabricEditorDirty)){j.getEditorFormat(this.model.get("id")).done(e=>{const t=this.el.querySelector(".ic-container");Ie.a.unmountComponentAtNode(t)&&(this.isReactRootMounted=!1),this.editView=new In({model:this.model,type:"edit",selection:{},onFinished:this.renderCommentOnly,commentText:e,formatMessage:this.formatMessage,isGDPRInlineCommentsEnabled:this.options.isGDPRInlineCommentsEnabled,isUnifiedProfileCardsEnabled:this.options.isUnifiedProfileCardsEnabled,isFrontendPeopleDirectoryEnabled:this.options.isFrontendPeopleDirectoryEnabled,isFabricEditorEnabled:this.options.isFabricEditorEnabled,isMacroBrowserCheckEnabled:this.options.isMacroBrowserCheckEnabled}),this.$(".ic-display-comment").html(this.editView.$el),this.editView.render()}).fail((e,t,n)=>{j.failEditDisplay(this.formatMessage({id:"inline.comments.server.error.edit.comment"}),{errorThrown:n})})}},renderCommentOnly(){this.editView&&this.editView.destroy(),this.editView=null;const e=d.a.extend(this.model.toJSON(),{darkFeatures:j.getDarkFeatures(),isFabricRendererEnabled:this.options.isFabricRendererEnabled});if(this.isReactRootMounted){const e=this.el.querySelector(".ic-container");Ie.a.unmountComponentAtNode(e)&&(this.isReactRootMounted=!1)}this.$(".ic-display-comment").html(Object(i.default)(ke.comment(e,this.formatMessage)).children()),this.isReactRootMounted||(On(this),this.isReactRootMounted=!0)},replyComment(e){e&&e.preventDefault(),Object(F.a)({name:b.a.REPLY_TO_INLINE_COMMENT,id:P()(),attributes:{editor:"true"===this.options.isFabricEditorEnabled?A.g.FABRIC:A.g.TINY_MCE}},{name:b.a.REPLY_TO_INLINE_COMMENT_LOAD},{name:b.a.REPLY_TO_INLINE_COMMENT_PUBLISH}),this.createReplyView?this.createReplyView.focusEditor():j.confirmProcess(this.formatMessage,!1,"true"===this.options.isFabricEditorEnabled&&this.isFabricEditorDirty)?(this.createReplyView=new In({formatMessage:this.formatMessage,model:this.model,type:"reply",isGDPRInlineCommentsEnabled:this.options.isGDPRInlineCommentsEnabled,onFinished:d.a.bind((function(){this.createReplyView&&this.createReplyView.destroy(),this.createReplyView=null}),this),isFrontendPeopleDirectoryEnabled:this.options.isFrontendPeopleDirectoryEnabled,isFabricEditorEnabled:this.options.isFabricEditorEnabled,isMacroBrowserCheckEnabled:this.options.isMacroBrowserCheckEnabled}),this.$(".ic-reply-container").prepend(this.createReplyView.$el),this.createReplyView.render()):e&&e.currentTarget.blur()},confirm(e){if(e.preventDefault(),this.model.replies.length>0)return h.a.trigger("ic:error",this.formatMessage({id:"inline.comments.delete.with.reply"})),!1;const t=new Mn({formatMessage:this.formatMessage,model:new h.a.Model({label:this.formatMessage({id:"inline.comments.sidebar.delete"}),message:this.formatMessage({id:"inline.comments.delete.confirmation.message"})}),$menuEl:Object(i.default)(".ic-action-menu"),$bodyEl:Object(i.default)("body")});this.$(".ic-sidebar-heading").append(t.$el),this.listenTo(t,"ic:confirm",this.deleteComment)},deleteComment(){Object(z.a)().start({id:P()(),name:b.a.DELETE_INLINE_COMMENT}),this.model.destroy({wait:!0,success:()=>{this.$el.html(ke.deleteComment(this.formatMessage)),this.model.set("deleted",!0),this._renderNavigation(),j.removeInlineLinksDialog(this.model.highlights),j.addSidebarHeadingTooltip(this),Object(z.a)().succeed({name:b.a.DELETE_INLINE_COMMENT}),h.a.trigger("ic:delete"),this.sendAnalytics("deleted",this.model)},error:this.deleteFail})},deleteFail(e,t){let n;n=401===t.status?this.formatMessage({id:"inline.comments.delete.permission"}):409===t.status?t.responseText:this.formatMessage({id:"inline.comments.server.error"}),Object(z.a)().fail({name:b.a.DELETE_INLINE_COMMENT,error:n}),h.a.trigger("ic:error",n)},destroy(e){Object(i.default)("body").off("click",".ic-action-delete a",this.confirm),Object(i.default)("body").off("click",".ic-action-reply a",this.replyComment),Object(i.default)("body").off("click",".ic-action-resolve a",this.resolveComment),Object(i.default)("body").off("click",".ic-action-edit a",this.editComment),this.createReplyView&&this.createReplyView.destroy(),this.editView&&this.editView.destroy(),this.replyListView.destroy(),this.navigationView&&this.navigationView.remove(),this.likesView&&this.likesView.remove(),!0!==e&&this.remove()},setIsFabricEditorDirty(e){this.isFabricEditorDirty=e},resolveComment(e){e&&e.preventDefault(),j.confirmProcess(this.formatMessage,!0,"true"===this.options.isFabricEditorEnabled&&this.isFabricEditorDirty)&&(Object(z.a)().start({id:P()(),name:b.a.RESOLVE_INLINE_COMMENT,attributes:{resolved:!0}}),this.model.resolve(!0,{wait:!0,success:d.a.bind(this.onResolveComplete,this),error:this.onResolveFail}))},onResolveComplete(){this.createReplyView&&this.createReplyView.destroy(),this.createReplyView=null,Object(z.a)().succeed({name:b.a.RESOLVE_INLINE_COMMENT}),h.a.trigger("ic:resolved"),j.removeInlineLinksDialog(this.model.highlights),this.sendAnalytics("resolved",this.model)},onResolveFail(e,t){let n;n=401===t.status?this.formatMessage({id:"inline.comments.resolve.permission"}):this.formatMessage({id:"inline.comments.server.error"}),Object(z.a)().fail({name:b.a.RESOLVE_INLINE_COMMENT,error:n}),h.a.trigger("ic:error",n)},showResolvedDialogDiscovery(){h.a.trigger("ic:resolved:show:recovery")},onReplyPlaceholderFocus(e){if(j.getDarkFeatures().RICH_TEXT_EDITOR){-1!==navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&e.currentTarget.blur()}},async sendAnalytics(e,t){const n=await j.getAnalyticsClient,{attributes:{id:i,containerId:o}}=t;n.sendTrackEvent({source:"viewPageScreen",action:e,actionSubject:"comment",actionSubjectId:String(i),objectType:"page",objectId:o,attributes:{pageType:r.a.Meta.get("draft-type"),commentType:"inline"}})}});var Dn=h.a.View.extend({tagName:"div",className:"ic-sidebar",events:{"click button.ic-action-hide":function(e){this.hide(e,!0)&&(this.sendUIEvent(),h.a.trigger("ic:sidebar:close"),Object(z.a)().abort({name:b.a.ADD_INLINE_COMMENT,reason:"close sidebar"}),Object(z.a)().abort({name:b.a.EDIT_INLINE_COMMENT,reason:"close sidebar"}),Object(z.a)().abort({name:b.a.REPLY_TO_INLINE_COMMENT,reason:"close sidebar"}))},"updateYPosition .ic-display-comment-view > .ic-comment-container":function(){this.setSidebarYPos()},"requestInlineCommentsClose .ic-display-comment-view > .ic-comment-container":function(e){const t=e.originalEvent.detail;let n;if(null!=this.commentView)n=this.commentView.model.highlight;else{if(null==this.createCommentView)return;n=Object(i.default)(".ic-current-selection")}if(t.parentElement.contains(n[0])){!1===this.hide(null,!0)?e.preventDefault():h.a.trigger("ic:sidebar:close")}}},initialize(e){e=e||{};const t=this;this.analyticsClient=j.getAnalyticsClient,this.shouldSqueeze=e.shouldSqueeze,this.formatMessage=e.formatMessage,this.isFabricEditorDirty=!1,this.isScrollToActiveHighlightCalled=!1,this.listenTo(h.a,"ic:view ic:overlap",this.displayComment),this.listenTo(h.a,"ic:create",this.displayCreateComment),this.listenTo(h.a,"ic:error",this.displayError),this.listenTo(h.a,"ic:hide-sidebar",this.hide),this.listenTo(h.a,"ic:clearError",this.clearError),this.listenTo(h.a,"ic:fabric-editor-dirty",this.setIsFabricEditorDirty),j.getDarkFeatures().RICH_TEXT_EDITOR?r.a.bind("rte-quick-edit-ready".concat(".ic-sidebar"),()=>{const e=t.$el.find("#wysiwygTextarea_ifr");if(0!==e.length){new MutationObserver(()=>{e.resize()}).observe(e[0],{attributes:!0,attributeFilter:["style"]}),r.a.Rte.getEditor().getContent()||t._scrollToEditorView(e)}else{t.$el.is(":visible")||(t.$wikiContent.css("position","static"),v.destroy())}}):r.a.bind("init.rte".concat(".ic-sidebar"),d.a.bind(this.hideInEditMode,this)),this.defaultNavOffset=130,this.defaultPermalinkedCommentOffset=100,this.$wikiContent=e.$wikiContent||Object(i.default)("[data-inline-comments-target=true]").first(),this.sidebarObserver=new MutationObserver(d.a.bind(this.setSidebarYPos,this)),this.sidebarObserver.observe(this.el,{childList:!0,subtree:!0}),Object(i.default)(c.a).on("resize".concat(".ic-sidebar"),d.a.debounce(d.a.bind(this.setSidebarYPos,this),100)),r.a.bind("sidebar.expanded sidebar.collapsed".concat(".ic-sidebar"),d.a.debounce(d.a.bind(this.setSidebarYPos,this),50)),Object(i.default)("#confluence-ui .wrapper-space-view-page").length>0&&this.$el.addClass("ic-is-spa-view-page"),"true"===e.isFabricRendererEnabled&&this.$el.addClass("ic-is-fabric-renderer-enabled")},destroy(){r.a.unbind(".ic-sidebar"),Object(i.default)(c.a).off(".ic-sidebar"),this.hide(),this.remove()},displayComment(e,t,n){this.sendTrackEvent(e);(function(){if(e.highlight.is(":hidden")&&(j.showHighlightContent(e.highlight),e.highlight.is(":hidden")))return;this.isFabricEditorDirty=!1,h.a.trigger("ic:fabric-editor-dirty",!1),this.distanceToTop=this.previousHighlightOffset||this.defaultNavOffset,this._emptySidebar(!0),this.commentView=new xn({formatMessage:this.formatMessage,model:e,source:t,shouldShowInlineCommentLikes:this.options.shouldShowInlineCommentLikes,isGDPRInlineCommentsEnabled:this.options.isGDPRInlineCommentsEnabled,isFrontendPeopleDirectoryEnabled:this.options.isFrontendPeopleDirectoryEnabled,isFabricEditorEnabled:this.options.isFabricEditorEnabled,isMacroBrowserCheckEnabled:this.options.isMacroBrowserCheckEnabled,isFabricRendererEnabled:this.options.isFabricRendererEnabled}),this.show(!0);const o=this.$wikiContent.offset()||Object(i.default)("[data-inline-comments-target=true]").first().offset()||{top:0},r=e.highlight.offset().top-o.top;this.previousHighlightOffset=r;const a=this.commentView.render().$el;a.css("visibility","hidden"),"nav"===t?j.scrollToActiveHighlight(r,this.distanceToTop):"permalink"!==t||this.isScrollToActiveHighlightCalled?"quickreload"===t&&this._scrollToQuickReloadComment(e):(this.isScrollToActiveHighlightCalled=!0,j.scrollToActiveHighlight(r,this.defaultPermalinkedCommentOffset).done(()=>{n&&n.isReplyComment&&this.commentView.replyComment()})),this.$el.html(a),c.a.Confluence.Binder&&c.a.Confluence.Binder.userHover()}).call(this),r.a.trigger("ic-jim-async-supported")},_scrollToQuickReloadComment(e){const t=Object(i.default)(".qr-feedback:first");let n=this.defaultPermalinkedCommentOffset;t.length>0&&(n=t.height()+67);const o=e.highlight.position().top;j.scrollToActiveHighlight(o,n)},_scrollToEditorView(e){const t=Object(i.default)("body, html"),n=this.$(".ic-display-comment-view").position().top,o=e.closest(".ic-create-comment-view").position().top+n;(t.height()<o||t.scrollTop()>o)&&t.animate({scrollTop:o},100)},displayCreateComment(e,t,n){const o=this.isOnUnsupportedMacro();this._emptySidebar(!0),this.createCommentView=new In({formatMessage:this.formatMessage,collection:e,selection:t,type:o?"pageComment":"topLevel",isFocus:!1,stopFocus:!0,isGDPRInlineCommentsEnabled:this.options.isGDPRInlineCommentsEnabled,isFabricEditorEnabled:this.options.isFabricEditorEnabled,commentText:o?"<blockquote>".concat(Object(i.default)("<div/>").text(t.text).html(),"</blockquote> <div/>"):"",onFinished:d.a.bind((function(){this.createCommentView.keepSidebar||this.isShowing&&this.hide()}),this),serializedHighlights:n,isFrontendPeopleDirectoryEnabled:this.options.isFrontendPeopleDirectoryEnabled,isMacroBrowserCheckEnabled:this.options.isMacroBrowserCheckEnabled}),this.show(),this.createCommentView.$el.css("visibility","hidden"),this.$el.html(this.createCommentView.$el),this.createCommentView.render()},isOnUnsupportedMacro(){const e=Object(i.default)(".ic-current-selection");return j.containUnsupportedMacro(e)||j.containInternalLink(e)||j.containUserMetion(e)},displayError(e,t){t=d.a.extend({closeable:!0},t),this.clearError(),r.a.messages.warning(".ic-error",{body:e,closeable:t.closeable}),t.callback&&t.callback()},clearError(){Object(i.default)(".ic-error").empty()},show(e){this.isShowing||(this._toggleSidebar(e),this.isShowing=!0)},hideInEditMode(e){"comment"!==r.a.Meta.get("content-type")&&(this.sidebarObserver.disconnect(),this.hide(e))},hide(e,t){return e&&e.preventDefault(),!!j.confirmProcess(this.formatMessage,!0,"true"===this.options.isFabricEditorEnabled&&this.isFabricEditorDirty)&&(!this.isShowing||(this._toggleSidebar(t).done(()=>{v.destroy(),h.a.trigger("ic:sidebar-hidden"),h.a.trigger("ic:fabric-editor-dirty",!1),this.isShowing=!1}),!0))},async sendUIEvent(){const e=Object(i.default)(".view-page-body").attr("data-content-id");(await this.analyticsClient).sendUIEvent({source:"viewPageScreen",actionSubject:"button",actionSubjectId:"closeInlineCommentsSidebar",objectType:"page",objectId:String(e),action:"clicked"})},async sendTrackEvent(e){const{attributes:{id:t,containerId:n},collection:i,cid:o}=e,a=j.getUnresolvedComments(i),s=a.map(e=>e.cid).indexOf(o)+1;(await this.analyticsClient).sendTrackEvent({source:"viewPageScreen",actionSubject:"comment",actionSubjectId:String(t),objectType:"page",objectId:n,action:"viewed",attributes:{commentType:"inline",pageType:r.a.Meta.get("draft-type"),commentsDeckSize:a.length,position:s}})},_toggleSidebar(e){const t=Object(i.default)(".inline-comment-marker.active:first, .ic-current-selection:first");let n;t.length>0&&(n=j.getOffsetTopRelativeInWindowCoordinate(t));const o=i.default.Deferred();let r=o.promise();return this.isShowing?e&&j.isAnimationSupported()?r=j.animateSidebar(this,!1):(v.destroy(),this.$wikiContent.css("position","static"),this._emptySidebar(),o.resolve()):("true"===this.shouldSqueeze&&v.shrinkToShowSideBar(),e&&j.isAnimationSupported()?r=j.animateSidebar(this,!0):o.resolve(),this.$wikiContent.css("position","relative")),r.done(()=>{j.scrollToCommentAfterToggleSideBar(n,t)}),r},_emptySidebar(e){this.commentView&&(this.commentView.model.unset&&this.commentView.model.unset("active"),this.commentView.destroy(),this.commentView=null),this.createCommentView&&(this.createCommentView.keepSidebar=e,this.createCommentView.destroy(),this.createCommentView=null)},setSidebarYPos(){if(!this.isShowing)return;const e=this.$el.offset().top;let t,n;if(null!=this.commentView)t=this.commentView.$el,n=this.commentView.model.highlight;else{if(null==this.createCommentView)return;t=this.createCommentView.$el,n=Object(i.default)(".ic-current-selection")}if(!n)return;const o=this.$(".ic-sidebar-heading").height();t.css({visibility:"visible",position:"absolute",top:"".concat(n.offset().top-e-o,"px")}),j.recalculateContentHeight(t)},setIsFabricEditorDirty(e){this.isFabricEditorDirty=e}}),jn=h.a.View.extend({tagName:"div",className:"ic-display-comment-view",template:ke.comment,events:{"click .ic-action-unresolve":"unresolveComment","click .ic-action-show-reply":"showReply"},initialize(e){this.formatMessage=e.formatMessage,d.a.bindAll(this,"onUnresolveComplete","destroy"),this.replyListView=new Tn({formatMessage:this.formatMessage,commentModel:this.model}),this.listenTo(this.replyListView,"ic:reply-rendered",(function(){this.renderNumberOfReplies()}))},render(){const e=this.template(d.a.extend(this.model.toJSON(),{showMenu:!1,isDangling:this.model.isDangling(),darkFeatures:j.getDarkFeatures(),hasReply:this.model.replies.length>0}),this.formatMessage);return this.$el.html(e),this.likesView&&this.likesView.remove(),this.likesView=new ze({contentId:this.model.id,showLikeButton:!1}).render(),this.$(".ic-action-like").html(this.likesView.el),this.$el.append(this.replyListView.$el.hide()),this.replyListView.render(),this},unresolveComment(){h.a.trigger("ic:resolvedClearError"),this.model.resolve(!1,{wait:!0,success:this.onUnresolveComplete,error:this.onUnresolveFail})},onUnresolveComplete(){h.a.trigger("ic:unresolved"),this.$el.slideUp(this.destroy)},onUnresolveFail(e,t){401===t.status?h.a.trigger("ic:resolvedError",this.formatMessage({id:"inline.comments.resolve.permission"})):h.a.trigger("ic:resolvedError",this.formatMessage({id:"inline.comments.server.error"}))},showReply(){this.$(".ic-action-show-reply").parent().remove(),this.$(".ic-replies").slideDown()},renderNumberOfReplies(){const e=this.model.replies.length,t=this.$(".ic-action-show-reply");if(e>0){let n;n=1===e?this.formatMessage({id:"inline.comments.resolved.menu.show.reply"},{0:e}):this.formatMessage({id:"inline.comments.resolved.menu.show.replies"},{0:e}),t.text(n),t.parent().removeClass("hidden")}else t.parent().remove()},destroy(){this.replyListView.destroy(),this.remove()}}),Sn=h.a.View.extend({events:{"click #resolved-dialog-close-button":"destroy"},template:ke.resolvedCommentDialog,initialize(e){this.formatMessage=e.formatMessage,d.a.bindAll(this,"render","destroy","_onKeyDown"),this._resolvedCommentViews=[],this.listenTo(this.collection,"change:resolveProperties",this.onResolvedChanged),this.listenTo(h.a,"ic:resolvedError",this.displayError),this.listenTo(h.a,"ic:resolvedClearError",this.clearErrors);const t=Object(i.default)(this.template(null,this.formatMessage));this.setElement(t),this.dialog=r.a.dialog2(this.$el),Object(i.default)(c.a.document).bind("keydown",this._onKeyDown),r.a.trigger("remove-bindings.keyboardshortcuts")},render(){Object(m.getAnalyticsWebClient)().then(e=>{e.sendTrackEvent({action:"opened",actionSubject:"dialog",attributes:{componentVersion:"v1"},source:"ResolvedInlineCommentsDialog"}).fire()});const e=Object(i.default)("<div>"),t=this.collection.getResolvedCount();return 0!==t?d.a.each(this.collection.getResolvedCommentsDesc(),(function(t){const n=new jn({formatMessage:this.formatMessage,model:t});this._resolvedCommentViews.push(n),e.append(n.render().$el)}),this):this.displayNoCommentMessage(),this.$(".aui-dialog2-content").append(e),this.dialog.show(),this.options.focusCommentId&&this.scrollToComment(this.options.focusCommentId),h.a.trigger("ic:resolved:view",t),r.a.trigger("ic-jim-async-supported"),this},onResolvedChanged(){0===this.collection.getResolvedCount()&&this.displayNoCommentMessage()},displayNoCommentMessage(){r.a.messages.generic(this.$(".aui-dialog2-content"),{body:this.formatMessage({id:"inline.comments.resolved.dialog.empty"}),closeable:!1})},displayError(e){this.clearErrors(),r.a.messages.warning(this.$("#ic-resolved-comment-dialog-error"),{body:e})},clearErrors(){this.$("#ic-resolved-comment-dialog-error").empty()},scrollToComment(e){const t=this.$(r.a.format("[data-comment-id={0}]",e));return t.length?(t.addClass("focused"),this.$(".aui-dialog2-content").animate({scrollTop:t.parent().position().top},100)):(new i.default.Deferred).reject()},_onKeyDown(e){this.$el&&this.$el.is(":visible")&&e.keyCode===r.a.keyCode.ESCAPE&&this.destroy()},destroy(){r.a.trigger("add-bindings.keyboardshortcuts"),Object(i.default)(c.a.document).unbind("keydown",this._onKeyDown),this.dialog.hide(),this.dialog.remove(),d.a.each(this._resolvedCommentViews,e=>{e.destroy()}),this._resolvedCommentViews=null,this.remove()}}),Pn=h.a.Model.extend({}),An=h.a.Collection.extend({model:Pn,url:"".concat(r.a.contextPath(),"/rest/experimental/webfragment/panels?location=atl.page.content.footer.actions")});let Fn,Ln=null;var Hn={init(e,t){Fn=t,Ln=e.commentCollection;const n=new Promise(t=>{j.getDarkFeatures().LIKES_ADMIN_TOGGLE?(e.webPanelCollection||(e.webPanelCollection=new An),e.webPanelCollection.fetch({cache:!1}).done(e=>{t(e.length>0)})):t(!0)});e.views.sidebar&&e.views.sidebar.destroy(),e.views.sidebar=new Dn({formatMessage:Fn,$wikiContent:Object(i.default)("[data-inline-comments-target=true]").first(),shouldShowInlineCommentLikes:n,shouldSqueeze:e.shouldSqueeze,isGDPRInlineCommentsEnabled:e.isGDPRInlineCommentsEnabled,isFrontendPeopleDirectoryEnabled:e.isFrontendPeopleDirectoryEnabled,isFabricRendererEnabled:e.isFabricRendererEnabled,isFabricEditorEnabled:e.isFabricEditorEnabled,isMacroBrowserCheckEnabled:e.isMacroBrowserCheckEnabled}),v.$el.append(e.views.sidebar.$el),e.views.highlight&&e.views.highlight.destroy(),e.views.highlight=new we({formatMessage:Fn,collection:Ln,isFabricRendererEnabled:e.isFabricRendererEnabled,isFabricEditorEnabled:e.isFabricEditorEnabled}),e.views.highlight.render()},loadSidebarOnClick(e,t){if(j.confirmProcess(Fn,!1,t)){h.a.trigger("ic:highlight-panel-click"),Object(i.default)(".inline-comment-marker,span[data-mark-type=confluenceInlineComment],span[data-mark-type=annotation][data-mark-annotation-type=inlineComment]").removeClass("active");const t=j.overlappedSelection(e,Ln);if(t){const e=Object(i.default)('.inline-comment-marker[data-ref="'.concat(t.get("markerRef"),'"],')+'span[data-mark-type=confluenceInlineComment][data-reference="'.concat(t.get("markerRef"),'"],')+'span[data-mark-type=annotation][data-mark-annotation-type=inlineComment][data-id="'.concat(t.get("markerRef"),'"]'));c.a.Confluence.HighlightAction.clearTextSelection(),t.highlight=e,h.a.trigger("ic:overlap",t)}else{const t=(new fe).removeHighlight().highlight(e.range);h.a.trigger("ic:create",Ln,e,t)}}},updateResolvedCommentCountInToolsMenu(){Object(i.default)("#view-resolved-comments>span").text(Fn({id:"inline.comments.resolved.view.menu"})+r.a.format(" ({0})",Ln.getResolvedCount()))},afterSyncCommentCollection(){const e=this;Ln.once("sync",t=>{e.displayPermalinkedComment(t)}),Ln.on("change:resolveProperties",()=>{e.updateResolvedCommentCountInToolsMenu()}),this.updateResolvedCommentCountInToolsMenu()},displayPermalinkedComment(e){const t=c.a.location.search;j.showFocusedComment(e,t,Sn,Fn)},createResolvedCommentListView(){new Sn({formatMessage:Fn,collection:Ln}).render()}};let $n,Vn;const Un=function(e){return Hn.init(e,Vn),Hn};function Bn(){return zn.firstCaller&&(zn.firstCaller=!1,$n&&$n.isResolved()?Un(zn):($n=i.default.Deferred(),$n.resolve(Un(zn)))),zn.isSidebarLoaded=!1,$n.promise()}const zn={firstCaller:!0,isSidebarLoaded:!1,commentCollection:null,webPanelCollection:null,shouldSqueeze:!1,views:{sidebar:null},init(e){e=e||{},zn.firstCaller=!0,zn.isSidebarLoaded=!1,zn.shouldSqueeze=e.shouldSqueeze,zn.isUnifiedProfileCardsEnabled=e.isUnifiedProfileCardsEnabled,zn.isGDPRInlineCommentsEnabled=e.isGDPRInlineCommentsEnabled,zn.isFrontendPeopleDirectoryEnabled=e.isFrontendPeopleDirectoryEnabled,zn.isFabricEditorEnabled=e.isFabricEditorEnabled,zn.isMacroBrowserCheckEnabled=e.isMacroBrowserCheckEnabled,zn.isFabricRendererEnabled=e.isFabricRendererEnabled,zn.isFabricEditorDirty=!1,zn.commentCollection||(zn.commentCollection=new V),zn.commentCollection.reset(),v.setPageContentElByCSSSelector(e.pageContentCSSSelector),v.setPageHeaderElByCSSSelector(e.pageHeaderCSSSelector),zn.bindDOMEvents(),zn.fetch(),zn.bindQuickReloadEvents(),zn.bindAppEvents(),zn.focusOnComment(),zn.updateResolvedCount(),r.a.bind("ic.force-refetch",zn.fetch)},initAsync(){Bn().done(e=>{e.afterSyncCommentCollection(),e.displayPermalinkedComment(zn.commentCollection)})},destroy(){r.a.unbind(".ic-app"),v.destroy()},bindDOMEvents(){Object(i.default)("body").off("click".concat(".ic-app"),"#view-resolved-comments").on("click".concat(".ic-app"),"#view-resolved-comments",e=>{e.preventDefault(),Bn().done(e=>{e.createResolvedCommentListView()})})},bindAppEvents(){const e="ic:resolved.".concat(".ic-app");h.a.listenTo(h.a,e,()=>{zn.initAsync()}),h.a.listenTo(h.a,"ic:fabric-editor-dirty",e=>{zn.isFabricEditorDirty=e})},fetch:()=>zn.commentCollection.fetch({cache:!1}).done(()=>{zn.commentCollection.getCommentsOnPageCount()>0&&zn.initAsync(),zn.commentCollection.getResolvedCount()>0&&Bn().done(e=>{e.updateResolvedCommentCountInToolsMenu()}),r.a.trigger("ic-fetch-completed",zn.commentCollection)}),focusOnComment(){-1!==c.a.location.search.indexOf("focusedCommentId")&&zn.initAsync()},bindQuickReloadEvents(){r.a.unbind("qr:show-new-thread".concat(".ic-app")).bind("qr:show-new-thread".concat(".ic-app"),(e,t)=>{Bn().done(()=>{!function(e,t){let n=zn.commentCollection.get(t),i=!1;void 0===n&&(n=new $({id:t}),i=!0),n.fetch({success(e){e._setHighlights(e.get("markerRef")),i?zn.commentCollection.add(e):n.replies.isFetched=!1,h.a.trigger("ic:view",n,"quickreload")}})}(0,t)})}),r.a.unbind("qr:add-new-highlight".concat(".ic-app")).bind("qr:add-new-highlight",(e,t,n)=>{Bn().done(()=>{r.a.trigger("qr:add-new-highlight-text",[t,n])})})},updateResolvedCount(){Object(i.default)("#view-resolved-comments>span").text(Vn({id:"inline.comments.resolved.view.menu"})+r.a.format(" ({0})",zn.commentCollection.getResolvedCount()))}};function Wn(){c.a.removeEventListener("create-inline-comment",qn),Object(i.default)(".tipsy").remove()}function qn(e){Kn(e.detail)}function Kn(e){Object(F.a)({name:b.a.ADD_INLINE_COMMENT,id:P()(),attributes:{editor:"true"===zn.isFabricEditorEnabled?A.g.FABRIC:A.g.TINY_MCE}},{name:b.a.ADD_INLINE_COMMENT_LOAD},{name:b.a.ADD_INLINE_COMMENT_PUBLISH}),Bn().done(t=>{zn.isSidebarLoaded||(zn.isSidebarLoaded=!0,t.loadSidebarOnClick(e,"true"===zn.isFabricEditorEnabled&&zn.isFabricEditorDirty))})}var Gn={init:function(e){Vn=e.formatMessage,B.start(),Wn(),zn.init(e),c.a.addEventListener("create-inline-comment",qn),c.a.Confluence&&c.a.Confluence.HighlightAction&&c.a.Confluence.HighlightAction.registerButtonHandler("com.atlassian.confluence.plugins.confluence-inline-comments:create-inline-comment",{onClick:Kn,shouldDisplay:c.a.Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_ONLY})},destroy:function(){Wn(),zn.destroy()},notifyEditor:function(){h.a.trigger("ic:tinymce-resource-loaded")}};const Yn=Object(a.d)("skate");if(!j.isSPAPage()){const e=r.a.Meta.get("page-id"),t=r.a.Meta.get("latest-page-id");e&&e===t&&Object(i.default)(Gn.init)}t.default=e=>{var t;(t=j.getPageContentClassName(),__skate&&__skate.registry&&void 0!==__skate.registry[t])||Yn(j.getPageContentClassName(),{type:Yn.types.CLASS,attributes:{"data-content-id":{updated(e){this._init(e)}},"data-editor-resource-loaded":{updated(){Gn.notifyEditor()}}},attached(e){this._init(e)},detached(){Gn.destroy()},_init(t){const n=t.getAttribute("data-page-content-css-selector"),i=t.getAttribute("data-page-header-css-selector"),o=t.getAttribute("data-content-id"),r=t.getAttribute("data-should-squeeze"),a=t.getAttribute("data-gdpr-inline-comments"),s=t.getAttribute("data-frontend-people-directory"),c=t.getAttribute("data-fabric-editor-inline-comments"),l=t.getAttribute("data-fabric-renderer-inline-comments"),d=t.getAttribute("data-inline-comments-macro-browser");Gn.init({formatMessage:e,pageContentCSSSelector:n,pageHeaderCSSSelector:i,contentId:o,shouldSqueeze:r,isGDPRInlineCommentsEnabled:a,isFrontendPeopleDirectoryEnabled:s,isMacroBrowserCheckEnabled:d,isFabricEditorEnabled:c,isFabricRendererEnabled:l})}})}},jPWM:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("KD1n"),o=n("H5qd"),r=n.n(o),a=n("j+hl");function s(){const e=Object(i.a)(["\n  query ContentRendererQuery($contentId: ID) {\n    content(id: $contentId) {\n      nodes {\n        id\n        body {\n          atlas_doc_format {\n            value\n          }\n        }\n        space {\n          id\n          key\n        }\n        type\n        ...contentAppearancePublishedFragment\n      }\n    }\n  }\n\n  ","\n"]);return s=function(){return e},e}const c=r()(s(),a.b)},ltac:function(e,t,n){"use strict";function i(e){let t=e.offsetTop;for(;e.offsetParent;)t+=(e=e.offsetParent).offsetTop;return t}function o(e,t){if(!e)return!1;t=t||document.scrollingElement||document.body.parentNode;const n=e.offsetHeight,o=i(e),r=i(t)+t.scrollTop,a=t.offsetHeight;return o>=r&&o+n<=r+a}function r(e){if(!e||e===document)return null;const t=window.getComputedStyle(e);return e.scrollHeight>e.clientHeight&&"hidden"!==e.style.overflow&&"visible"!==t.overflow?e:r(e.parentNode)}function a(e,t){t=t||r(e),e&&t&&!o(e,t)&&(t.scrollTop=i(e)-i(t)-t.clientHeight/2)}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a}))},m3Bd:function(e,t,n){var i=n("LdEA");e.exports=function(e,t){if(null==e)return{};var n,o,r=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}},mGwS:function(e,t,n){"use strict";var i=n("xbks");t.a=i.a},nZDR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("ERkP")),o=r(n("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var s=function(e){return i.default.createElement(o.default,a({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M13 11V3.993A.997.997 0 0 0 12 3c-.556 0-1 .445-1 .993V11H3.993A.997.997 0 0 0 3 12c0 .557.445 1 .993 1H11v7.007c0 .548.448.993 1 .993.556 0 1-.445 1-.993V13h7.007A.997.997 0 0 0 21 12c0-.556-.445-1-.993-1H13z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};s.displayName="AddIcon";var c=s;t.default=c},o0lc:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ERkP"),o=n.n(i),r=n("lZoD"),a=n("WWAs"),s=n("03Pf");const c=({children:e})=>{const t=Object(i.useRef)(0),n=Object(i.useCallback)(e=>{Object(s.b)(e,-t.current)},[t]);return o.a.createElement(r.c,{to:[a.a]},i=>(t.current=i.getTotalHeight(),e({scrollToElement:n})))};c.displayName="DocumentScroller",c.displayName="DocumentScroller"},oVzP:function(e,t,n){"use strict";var i=n("D57K"),o=n("ERkP"),r=n.n(o),a=n("lSUb"),s=n("OEBU"),c=n("YGBU"),l=n("2sr0"),d=n("PcLR"),u=n("tnyy"),h=n("EiJY"),m=n("sLHe"),p=n("OKa2"),f=n("l1C2");var g={component:function(e){var t=e.attributesFn,n=e.children,o=e.isDisabled,r=e.onMouseUp,a=e.onMouseDown,s=e.onMouseLeave,c=e.onMouseEnter,l=e.tokens,d=e.cssFn,u=e.testId;return Object(f.f)("label",Object(i.__assign)({},t({isDisabled:o}),{onMouseUp:r,onMouseDown:a,onMouseLeave:s,onMouseEnter:c,css:d({isDisabled:o,tokens:l}),"data-testid":u}),n)},cssFn:function(e){var t=e.isDisabled,n=e.tokens;return Object(i.__assign)({alignItems:"flex-start",display:"flex",color:t?n.label.textColor.disabled:n.label.textColor.rest},t&&{cursor:"not-allowed"})},attributesFn:h.b};var b={component:function(e){var t=e.attributesFn,n=e.tokens,o=e.children,r=e.cssFn;return Object(f.f)("span",Object(i.__assign)({},t(),{css:r({tokens:n})}),o)},cssFn:function(e){var t=e.tokens;return{paddingTop:t.label.spacing.top,paddingRight:t.label.spacing.right,paddingBottom:t.label.spacing.bottom,paddingLeft:t.label.spacing.left}},attributesFn:h.b},v=function(e){var t=e.children;return Object(f.f)("span",{css:{display:"flex;",flexShrink:0,position:"relative"}},t)},y=Object(o.forwardRef)((function(e,t){e.createAnalyticsEvent;var n=e.attributesFn,o=e.testId,r=Object(i.__rest)(e,["createAnalyticsEvent","attributesFn","testId"]);return Object(f.f)("input",Object(i.__assign)({type:"checkbox"},n({disabled:r.disabled,checked:r.checked,required:r.required}),r,{ref:t,css:{left:"50%",margin:0,opacity:0,padding:0,position:"absolute",transform:"translate(-50%, -50%)",top:"50%"},"data-testid":o}))})),E=n("dDc+"),C=n("RZTm"),k=function(e){var t=e.tokens,n=Object(i.__rest)(e,["tokens"]);return Object(f.f)("span",Object(i.__assign)({css:{color:t.requiredIndicator.textColor.rest,paddingLeft:E.math.multiply(C.l,.25)+"px;"}},n))},w={Label:g,LabelText:b,HiddenCheckbox:{attributesFn:function(){return{}}}},O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isActive:!1,isFocused:!1,isHovered:!1,isMouseDown:!1,isChecked:void 0!==n.props.isChecked?n.props.isChecked:n.props.defaultChecked},n.checkbox=void 0,n.actionKeys=[" "],n.onChange=function(e){return n.props.isDisabled?null:(e.persist(),void 0!==e.target.checked&&n.setState({isChecked:e.target.checked}),n.props.onChange&&n.props.onChange(e),!0)},n.blur=function(){n.checkbox&&n.checkbox.blur&&n.checkbox.blur()},n.focus=function(){n.checkbox&&n.checkbox.focus&&n.checkbox.focus()},n.onBlur=function(){return n.setState({isActive:n.state.isMouseDown&&n.state.isActive,isFocused:!1})},n.onFocus=function(){return n.setState({isFocused:!0})},n.onMouseLeave=function(){return n.setState({isActive:!1,isHovered:!1})},n.onMouseEnter=function(){return n.setState({isHovered:!0})},n.onMouseUp=function(){return n.setState({isActive:!1,isMouseDown:!1})},n.onMouseDown=function(){return n.setState({isActive:!0,isMouseDown:!0})},n.onKeyDown=function(e){e.key in n.actionKeys&&n.setState({isActive:!0})},n.onKeyUp=function(e){e.key in n.actionKeys&&n.setState({isActive:!1})},n.createExtender=Object(a.a)(h.a),n}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props.isIndeterminate;this.checkbox&&(this.checkbox.indeterminate=!!e,this.props.inputRef&&this.props.inputRef(this.checkbox))},t.prototype.componentDidUpdate=function(e){var t=this.props.isIndeterminate;e.isIndeterminate!==t&&this.checkbox&&(this.checkbox.indeterminate=!!t)},t.prototype.render=function(){var e=this,t=this.props,n=t.isDisabled,o=t.isInvalid,a=t.isIndeterminate,s=t.label,c=t.name,l=t.overrides,p=t.value,f=t.isRequired,g=t.isChecked,b=t.theme,E=t.testId,C=void 0===this.props.isChecked?this.state.isChecked:g,O=this.state,I=O.isFocused,M=O.isActive,_=O.isHovered,T=Object(h.a)(w,l),N=T("Label"),R=N.component,x=Object(i.__rest)(N,["component"]),D=T("LabelText"),j=D.component,S=Object(i.__rest)(D,["component"]),P=T("HiddenCheckbox").attributesFn;return r.a.createElement(u.b.Provider,{value:b},r.a.createElement(d.a.Consumer,null,(function(t){var d=t.mode;return r.a.createElement(u.b.Consumer,{mode:d,tokens:u.a},(function(t){return r.a.createElement(R,Object(i.__assign)({},x,{isDisabled:n,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseUp:e.onMouseUp,tokens:t,testId:E&&E+"--checkbox-label"}),r.a.createElement(v,null,r.a.createElement(y,{disabled:n,checked:C,onChange:e.onChange,onBlur:e.onBlur,onFocus:e.onFocus,onKeyUp:e.onKeyUp,onKeyDown:e.onKeyDown,value:p,name:c,ref:function(t){return e.checkbox=t},required:f,attributesFn:P,testId:E&&E+"--hidden-checkbox"}),r.a.createElement(m.a,{theme:b,overrides:{IconWrapper:l&&l.IconWrapper,Icon:l&&l.Icon,IconIndeterminate:l&&l.IconIndeterminate},isChecked:C,isDisabled:n,isFocused:I,isActive:M,isHovered:_,isInvalid:o,isIndeterminate:a,primaryColor:"inherit",secondaryColor:"inherit",label:""})),r.a.createElement(j,Object(i.__assign)({},S,{tokens:t}),s,f&&r.a.createElement(k,{tokens:t,"aria-hidden":"true"},"*")))}))})))},t.defaultProps={isDisabled:!1,isInvalid:!1,defaultChecked:!1,isIndeterminate:!1,theme:function(e,t){return e(t)}},t}(o.Component),I=Object(s.a)("atlaskit");t.a=Object(c.a)({componentName:"checkbox",packageName:p.a,packageVersion:p.b})(Object(l.a)({onChange:I({action:"changed",actionSubject:"checkbox",attributes:{componentName:"checkbox",packageName:p.a,packageVersion:p.b}})})(O))},q9qF:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));const i={MACRO_CORE:"com.atlassian.confluence.macro.core",MIGRATION:"com.atlassian.confluence.migration"},o={INVALID:"__confluenceADFMigrationUnsupportedContentInternalExtension__"},r={UNSUPPORTED_EXTENSION:"unsupportedExtension",INVALID_ADF:"invalidAdf"},a={INLINE_EXTERNAL_IMAGE:"inline-external-image",INLINE_MEDIA_IMAGE:"inline-media-image"}},qp5z:function(e,t,n){"use strict";var i={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if("undefined"!=typeof navigator){var o=/Edge\/(\d+)/.exec(navigator.userAgent),r=/MSIE \d/.test(navigator.userAgent),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);i.mac=/Mac/.test(navigator.platform);var s=i.ie=!!(r||a||o);i.ie_version=r?document.documentMode||6:a?+a[1]:o?+o[1]:null,i.gecko=!s&&/gecko\/\d/i.test(navigator.userAgent),i.chrome=!s&&/Chrome\//.test(navigator.userAgent),i.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1],10),i.android=/Android \d/.test(navigator.userAgent),i.ios=!s&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),i.webkit=!s&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}t.a=i},rY4W:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){var e=1,t=new WeakMap,n=function(i,o){return"number"==typeof i||"string"==typeof i?o?"idx-"+o:"val-"+i:t.has(i)?"uid"+t.get(i):(t.set(i,e++),n(i))};return n}()},sLHe:function(e,t,n){"use strict";var i=n("D57K"),o=n("ERkP"),r=n.n(o),a=n("lSUb"),s=n("xQ8g"),c=n.n(s),l=n("PcLR"),d=n("N4KI"),u=n.n(d),h=n("tnyy"),m=n("EiJY"),p=n("l1C2"),f=function(e){var t,n=e.tokens,o=Object(i.__rest)(e,["tokens"]);return o.isDisabled?{stroke:(t=n.icon).borderColor.disabled,strokeWidth:t.borderWidth}:o.isActive?function(e){return{stroke:e.borderColor.active,strokeWidth:e.borderWidth}}(n.icon):o.isHovered&&o.isChecked?function(e){return{stroke:e.borderColor.hoveredAndChecked,strokeWidth:e.borderWidth}}(n.icon):o.isHovered?function(e){return{stroke:e.borderColor.hovered,strokeWidth:e.borderWidth}}(n.icon):o.isChecked?function(e){return{stroke:e.borderColor.checked,strokeWidth:e.borderWidth}}(n.icon):o.isFocused?function(e){return{stroke:e.borderColor.focused,strokeWidth:e.borderWidth}}(n.icon):o.isInvalid?function(e){return{stroke:e.borderColor.invalid,strokeWidth:e.borderWidth}}(n.icon):{stroke:n.icon.borderColor.rest,strokeWidth:n.icon.borderWidth}},g=function(e){var t=e.isChecked,n=e.isDisabled,i=e.isActive,o=e.tokens.icon,r=o.tickColor.checked;return n&&t?r=o.tickColor.disabledAndChecked:i&&t&&!n?r=o.tickColor.activeAndChecked:t||(r=o.tickColor.rest),r},b=function(e){var t=e.isChecked,n=e.isDisabled,i=e.isActive,o=e.isHovered,r=e.tokens.icon,a=r.boxColor.rest;return n?a=r.boxColor.disabled:i?a=r.boxColor.active:o&&t?a=r.boxColor.hoveredAndChecked:o?a=r.boxColor.hovered:t&&(a=r.boxColor.checked),a};var v={IconWrapper:{component:function(e){var t=e.attributesFn,n=e.cssFn,o=e.children,r=Object(i.__rest)(e,["attributesFn","cssFn","children"]);return Object(p.f)("span",Object(i.__assign)({css:n(r)},t(r),{children:o}))},cssFn:function(e){return{lineHeight:0,flexShrink:0,color:b(e),fill:g(e),transition:"all 0.2s ease-in-out;","& rect:first-of-type":Object(i.__assign)({transition:"stroke 0.2s ease-in-out;"},f(e)),"> span":{display:"flex"}}},attributesFn:m.b},IconIndeterminate:{component:u.a},Icon:{component:c.a}},y=function(e){function t(t){var n=e.call(this,t)||this;return n.createExtender=Object(a.a)(m.a).bind(n),n}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.isChecked,n=e.isDisabled,o=e.isInvalid,a=e.isActive,s=e.isFocused,c=e.isHovered,d=e.isIndeterminate,u=e.overrides,m=e.primaryColor,p=e.secondaryColor,f=e.theme,g=this.createExtender(v,u),b=g("IconWrapper"),y=b.component,E=Object(i.__rest)(b,["component"]),C=g("IconIndeterminate").component,k=g("Icon").component;return r.a.createElement(h.b.Provider,{value:f},r.a.createElement(l.a.Consumer,null,(function(e){var l=e.mode;return r.a.createElement(h.b.Consumer,{mode:l,tokens:h.a},(function(e){return r.a.createElement(y,Object(i.__assign)({},E,{tokens:e,isChecked:t,isDisabled:n,isFocused:s,isActive:a,isHovered:c,isInvalid:o}),d?r.a.createElement(C,{primaryColor:m,secondaryColor:p,size:e.icon.size,label:""}):r.a.createElement(k,{primaryColor:m,secondaryColor:p,size:e.icon.size,label:""}))}))})))},t.defaultProps={primaryColor:"inherit",secondaryColor:"inherit",isIndeterminate:!1,theme:function(e,t){return e(t)}},t}(o.Component);t.a=y},tnyy:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("dDc+"),o=n("mn8z"),r={label:{textColor:{rest:{light:i.colors.N900,dark:i.colors.DN600},disabled:{light:i.colors.N80,dark:i.colors.N80}},spacing:{top:"2px",right:"4px",bottom:"2px",left:"4px"}},icon:{borderWidth:"2px",borderColor:{rest:{light:i.colors.N40,dark:i.colors.DN80},disabled:{light:"",dark:""},checked:{light:"currentColor",dark:"currentColor"},active:{light:"currentColor",dark:"currentColor"},invalid:{light:i.colors.R300,dark:i.colors.R300},focused:{light:i.colors.B100,dark:i.colors.B75},hovered:{light:i.colors.N40,dark:i.colors.DN200},hoveredAndChecked:{light:"currentColor",dark:"currentColor"}},boxColor:{rest:{light:i.colors.N10,dark:i.colors.DN10},disabled:{light:i.colors.N20,dark:i.colors.DN10},active:{light:i.colors.B50,dark:i.colors.B200},hoveredAndChecked:{light:i.colors.B300,dark:i.colors.B75},hovered:{light:i.colors.N30,dark:i.colors.DN30},checked:{light:i.colors.B400,dark:i.colors.B400}},tickColor:{rest:{light:"transparent",dark:"transparent"},disabledAndChecked:{light:i.colors.N70,dark:i.colors.DN90},activeAndChecked:{light:i.colors.B400,dark:i.colors.DN10},checked:{light:i.colors.N10,dark:i.colors.DN10}},size:"medium"},requiredIndicator:{textColor:{rest:i.colors.R500}}};t.b=Object(o.a)((function(e){return function(e,t){return function e(n){return Object.keys(n).reduce((function(i,o){var r=n[o];return"object"!=typeof r||null==typeof r||Array.isArray(r)?i[o]=r:Object.keys(r).includes(t)?i[o]=r[t]:i[o]=e(n[o]),i}),{})}(e)}(e.tokens,e.mode)}))},v7Hp:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return w}));var i=n("D57K"),o=n("ERkP"),r=n.n(o),a=n("DErM"),s=n("qp5z"),c=n("9zwH"),l=function(){return function(){}},d=r.a.createContext({subscribe:null}),u=d.Consumer,h=d.Provider;function m(e){var t=e.onResize,n=Object(o.useRef)(null);return Object(o.useEffect)((function(){if(n&&n.current){var e=n.current;if(e.contentDocument&&e.contentDocument.defaultView){var i=e.contentDocument.defaultView;return i.addEventListener("resize",t),function(){i.removeEventListener("resize",t)}}}}),[n,t]),r.a.createElement("object",{ref:n,data:"about:blank",type:"text/html",style:{position:"absolute",height:"0",width:"100%"},"aria-hidden":!0,tabIndex:-1})}function p(e){var t=e.onResize,n=Object(o.useRef)(null),i=r.a.useCallback((function(){if(n&&n.current){var e=n.current;if(e.contentDocument&&e.contentDocument.defaultView)e.contentDocument.defaultView.addEventListener("resize",t)}}),[t]);return r.a.createElement("iframe",{ref:n,src:"about:blank",frameBorder:"0",style:{position:"absolute",height:"0",width:"100%"},onLoad:i,"aria-hidden":!0,tabIndex:-1})}function f(e){return 11===s.a.ie_version?r.a.createElement(p,Object(i.__assign)({},e)):r.a.createElement(m,Object(i.__assign)({},e))}var g=function(e){var t=e.children;return r.a.createElement("div",{style:{position:"absolute",height:"0",width:"100%"}},t)},b=function(){return function(){}},v=r.a.memo((function(e){var t=e.subscribe,n=e.setWidth,i=r.a.useRef(null);return Object(o.useEffect)((function(){if(i&&i.current){var e=i.current.offsetWidth;n(e)}return t((function(){if(i&&i.current){var e=i.current.offsetWidth;n(e)}}))}),[i,t,n]),r.a.createElement("div",{ref:i})})),y=r.a.memo((function(e){var t=e.subscribe,n=e.setWidth,s=Object(i.__read)(Object(a.a)({threshold:0}),4),c=s[0],l=s[1],d=s[2],u=s[3];return Object(o.useEffect)((function(){if(l&&u&&u.target instanceof HTMLElement){var e=u.boundingClientRect.width;n(e)}return t((function(){if(l&&d instanceof HTMLElement){var e=d.offsetWidth;n(e)}}))}),[l,u,n,t,d]),r.a.createElement("div",{style:{position:"absolute",height:"0",width:"100%"},ref:c})}));var E=r.a.memo((function(e){var t=Object(i.__read)(Object(o.useState)(new Map),1)[0],n=r.a.useCallback((function(e){return t.set(e,null),function(){t.delete(e)}}),[t]),a=r.a.useCallback((function(){t.forEach((function(e,t){return t()}))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,null,r.a.createElement(f,{onResize:a})),r.a.createElement(h,{value:{subscribe:n}},e.children))})),C=r.a.memo((function(e){return r.a.createElement(h,{value:{subscribe:l}},e.children)})),k=r.a.memo((function(e){var t=e.setWidth,n=function(e){return e?y:v}(e.useIntersectionObserver);return r.a.createElement(u,null,(function(e){var i=e.subscribe;return r.a.createElement(n,{setWidth:t,subscribe:i||b})}))})),w=r.a.memo((function(e){var t=c.a.supportsResizeObserver,n=c.a.supportsIntersectionObserver;return t&&n?r.a.createElement(C,null,e.children):r.a.createElement(E,null,e.children)}))},wS3D:function(e,t){!function(e,t,n,i){const o=1,r=3,a="textHighlighter";function s(t,n){this.context=t,this.$context=e(t),this.options=e.extend({},e[a].defaults,n),this.init()}s.prototype={init(){this.$context.addClass(this.options.contextClass),this.bindEvents()},destroy(){this.unbindEvents(),this.$context.removeClass(this.options.contextClass),this.$context.removeData(a)},bindEvents(){},unbindEvents(){},highlightHandler(e){e.data.self.doHighlight()},doHighlight(t){const n=t||this.getCurrentRange();if(!n||n.collapsed)return;const i=n.toString();let o="";if(1==this.options.onBeforeHighlight(n)){const t=e.textHighlighter.createWrapper(this.options),r=this.highlightRange(n,t);o=this.normalizeHighlights(r),this.options.onAfterHighlight(o,i)}return this.removeAllRanges(),o},getCurrentRange(){const e=this.getCurrentSelection();let t;return e.rangeCount>0&&(t=e.getRangeAt(0)),t},removeAllRanges(){this.getCurrentSelection().removeAllRanges()},getCurrentSelection(){const t=this.getCurrentWindow();let n;return t.getSelection?n=t.getSelection():e("iframe").length?e("iframe",top.document).each((function(){if(this.contentWindow===t)return n=rangy.getIframeSelection(this),!1})):n=rangy.getSelection(),n},getCurrentWindow(){const e=this.getCurrentDocument();return e.defaultView?e.defaultView:e.parentWindow},getCurrentDocument(){return this.context.ownerDocument?this.context.ownerDocument:this.context},highlightRange(t,n){if(t.collapsed)return;const i=["SCRIPT","STYLE","SELECT","BUTTON","OBJECT","APPLET"];let o=t.startContainer,a=t.endContainer;const s=t.commonAncestorContainer;let c=!0;if(0==t.endOffset){for(;!a.previousSibling&&a.parentNode!=s;)a=a.parentNode;a=a.previousSibling}else a.nodeType==r?t.endOffset<a.nodeValue.length&&a.splitText(t.endOffset):t.endOffset>0&&(a=a.childNodes.item(t.endOffset-1));o.nodeType==r?t.startOffset==o.nodeValue.length?c=!1:t.startOffset>0&&(o=o.splitText(t.startOffset),a==o.previousSibling&&(a=o)):o=t.startOffset<o.childNodes.length?o.childNodes.item(t.startOffset):o.nextSibling;let l=!1,d=o;const u=[];do{if(c&&d.nodeType==r){if(/\S/.test(d.nodeValue)){const t=n.clone(!0).get(0),i=d.parentNode;if(e.contains(this.context,i)||i===this.context){const n=e(d).wrap(t).parent().get(0);u.push(n)}}c=!1}d!=a||a.hasChildNodes()&&c||(l=!0),-1!=e.inArray(d.tagName,i)&&(c=!1),c&&d.hasChildNodes()?d=d.firstChild:null!=d.nextSibling?(d=d.nextSibling,c=!0):(d=d.parentNode,c=!1)}while(!l);return u},normalizeHighlights(t){return this.flattenNestedHighlights(t),this.mergeSiblingHighlights(t),e.map(t,e=>void 0!==e.parentElement?null!=e.parentElement?e:null:null!=e.parentNode?e:null)},flattenNestedHighlights(t){const i=this;e.each(t,(function(o){const r=e(this),a=r.parent(),s=a.prev(),c=a.next();if(i.isHighlight(a))if(a.css("background-color")!=r.css("background-color"))i.isHighlight(s)&&!r.get(0).previousSibling&&s.css("background-color")!=a.css("background-color")&&s.css("background-color")==r.css("background-color")&&r.insertAfter(s),i.isHighlight(c)&&!r.get(0).nextSibling&&c.css("background-color")!=a.css("background-color")&&c.css("background-color")==r.css("background-color")&&r.insertBefore(c),a.is(":empty")&&a.remove();else{const i=n.createTextNode(a.text());a.empty(),a.append(i),e(t[o]).remove()}}))},mergeSiblingHighlights(t){const n=this;function i(t,i){return!(!i||i.nodeType!=o||e(t).css("background-color")!=e(i).css("background-color")||!e(i).hasClass(n.options.highlightedClass))}e.each(t,(function(){const t=this,n=t.previousSibling,o=t.nextSibling;if(i(t,n)){var r=e(n).text()+e(t).text();e(t).text(r),e(n).remove()}if(i(t,o)){r=e(t).text()+e(o).text();e(t).text(r),e(o).remove()}}))},setColor(e){this.options.color=e},getColor(){return this.options.color},removeHighlights(t){const n=void 0!==t?t:this.context,i=this;this.getAllHighlights(n,!0).each((function(){if(1==i.options.onRemoveHighlight(this)){e(this).contents().unwrap().get(0)}}))},getAllHighlights(t,n){const i=".".concat(this.options.highlightedClass);let o=e(t).find(i);return 1==n&&e(t).hasClass(this.options.highlightedClass)&&(o=o.add(t)),o},isHighlight(e){return e.hasClass(this.options.highlightedClass)},serializeHighlights(t){const n=t||this.getAllHighlights(this.context),i=this.context,o=[];return n.each((t,n)=>{let a=0;const s=n.firstChild.length,c=function(t,n){const i=[];do{const n=e.inArray(t,t.parentNode.childNodes);i.unshift(n),t=t.parentNode}while(t!==n);return i}(n,i);e(n).clone().empty().get(0).outerHTML;n.previousSibling&&n.previousSibling.nodeType===r&&(a=n.previousSibling.length),o.push([e(n).text(),c.join(":"),a,s])}),JSON.stringify(o)},deserializeHighlights(t,n){try{var i=JSON.parse(t)}catch(e){throw new Error("Can't parse serialized highlights: ".concat(e))}const o=[],a=this;let s=!0;return e.each(i,(t,i)=>{try{!function(t){const i=t[0],s=t[1].split(":"),c=t[2],l=t[3];let d=s.pop(),u=null,h=a.context;for(;void 0!==(u=s.shift());)h=h.childNodes[u];h.childNodes[d-1]&&h.childNodes[d-1].nodeType===r&&(d-=1);const m=h.childNodes[d].splitText(c);if(m.splitText(l),m.nextSibling&&""==m.nextSibling.nodeValue&&m.parentNode.removeChild(m.nextSibling),m.previousSibling&&""==m.previousSibling.nodeValue&&m.parentNode.removeChild(m.previousSibling),i!==m.nodeValue)throw new Error("Different text");const p=e(m).wrap(n).parent().get(0);o.push(p)}(i)}catch(e){return console&&console.warn&&console.warn("Can't deserialize ".concat(t,"-th descriptor. Cause: ").concat(e)),s=!1,!0}}),s&&o}},e.fn.getHighlighter=function(){return this.data(a)},e.fn[a]=function(t){return this.each((function(){e.data(this,a)||e.data(this,a,new s(this,t))}))},e.textHighlighter={createWrapper:t=>e("<span></span>").css("backgroundColor",t.color).addClass(t.highlightedClass),defaults:{color:"#ffff7b",highlightedClass:"highlighted",contextClass:"highlighter-context",onRemoveHighlight:()=>!0,onBeforeHighlight:()=>!0,onAfterHighlight(){}}}}(jQuery,window,document)},xBue:function(e,t,n){"use strict";var i=n("ERkP"),o=n.n(i),r=n("aWzz"),a=n.n(r),s=n("I9iR"),c=n.n(s),l=n("W47X"),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},p=function(e){function t(){var n,i;u(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=i=h(this,e.call.apply(e,[this].concat(r))),i.handleClick=function(e){if(i.props.onClick&&i.props.onClick(e),!e.defaultPrevented&&0===e.button&&!i.props.target&&!m(e)){e.preventDefault();var t=i.context.router.history,n=i.props,o=n.replace,r=n.to;o?t.replace(r):t.push(r)}},h(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,i=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["replace","to","innerRef"]);c()(this.context.router,"You should not use <Link> outside a <Router>"),c()(void 0!==t,'You must specify the "to" property');var r=this.context.router.history,a="string"==typeof t?Object(l.b)(t,null,null,r.location):t,s=r.createHref(a);return o.a.createElement("a",d({},i,{onClick:this.handleClick,href:s,ref:n}))},t}(o.a.Component);p.propTypes={onClick:a.a.func,target:a.a.string,replace:a.a.bool,to:a.a.oneOfType([a.a.string,a.a.object]).isRequired,innerRef:a.a.oneOfType([a.a.string,a.a.func])},p.defaultProps={replace:!1},p.contextTypes={router:a.a.shape({history:a.a.shape({push:a.a.func.isRequired,replace:a.a.func.isRequired,createHref:a.a.func.isRequired}).isRequired}).isRequired},t.a=p},xQ8g:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("ERkP")),o=r(n("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var s=function(e){return i.default.createElement(o.default,a({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><g fill-rule="evenodd"><rect fill="currentColor" x="6" y="6" width="12" height="12" rx="2"/><path d="M9.707 11.293a1 1 0 1 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0l4-4a1 1 0 1 0-1.414-1.414L11 12.586l-1.293-1.293z" fill="inherit"/></g></svg>'},e))};s.displayName="CheckboxIcon";var c=s;t.default=c},xbH5:function(e,t,n){"use strict";t.a=function(e,t){return function(n){var i;if(!e.context[t])return null;for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return(i=e.context[t])[n].apply(i,r)}}}}]);
//# sourceMappingURL=inline-comments~493df0b3.591YRQr8-v39.js.map