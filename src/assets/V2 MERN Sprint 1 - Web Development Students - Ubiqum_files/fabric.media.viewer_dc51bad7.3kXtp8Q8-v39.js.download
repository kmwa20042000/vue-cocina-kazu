(window.webpackJsonp=window.webpackJsonp||[]).push([["fabric.media.viewer~dc51bad7"],{LFDX:function(e,t,i){"use strict";i.r(t);var n=i("uDfI"),r=i("QmUA"),s=i("pkwY"),o=i("zjfJ"),a=i("ERkP"),d=i.n(a),l=i("Jygk"),c=i.n(l),h=i("k8+f"),u=i("cxan"),p=i("pFSi"),w=i.n(p),f=i("1Y1u");const m=w()(e=>Object(f.d)({contentId:e}));class y extends a.PureComponent{constructor(...e){super(...e),Object(o.a)(this,"mounted",void 0),Object(o.a)(this,"state",{}),Object(o.a)(this,"waitForUnderscore",null),Object(o.a)(this,"onClose",()=>{const{parentId:e,closePreviewer:t}=this.props;t({parentId:e})})}componentDidMount(){this.mounted=!0,this.waitForUnderscore=Object(h.a)({listener:"MediaViewerComponent.tsx",globalProperty:"_"},()=>{const e=Promise.all([i.e(3),i.e(6),i.e("legacy.media-viewer~dc51bad7")]).then(i.bind(null,"DLpH")),t=i.e("media-viewer.all~d32f7a68").then(i.t.bind(null,"4/0j",7)),n=i.e("media-viewer.translations~7288d830").then(i.t.bind(null,"2wWp",7));Promise.all([e,t,n]).then(e=>{this.mounted&&this.setState({LegacyMediaViewer:e[0].MediaViewer,MediaViewerConstructor:e[1].default})})})}componentWillUnmount(){this.mounted=!1,this.waitForUnderscore&&this.waitForUnderscore.cancel()}renderLegacyMediaViewer(){const{mediaClientConfig:e,currentMediaItem:t,media:i,featureFlags:n}=this.props,{MediaViewerConstructor:r,LegacyMediaViewer:o}=this.state;if(!r||!o)return null;const a=i.map(e=>({id:e.id,occurrenceKey:e.occurrenceKey,type:e.mediaItemType})),l=a.find(e=>e.id===t);if(!l)return null;const h=i.find(e=>e.id===t),u={collectionName:h&&h.collectionName||"",mediaClientConfig:e,onClose:this.onClose,selectedItem:l,dataSource:{list:a},featureFlags:n},p="https://confluence-v1.prod.atl-paas.net/master/",w=p.endsWith("/")?"".concat(p).concat("mediaviewer","/"):"".concat(p,"/").concat("mediaviewer","/"),f=Object(s.a)({},u,{MediaViewer:r,mediaViewerConfiguration:{i18n:c.a.AJS.I18n.keys},basePath:w});return d.a.createElement(o,f)}render(){const{currentMediaItem:e,isOpen:t,featureFlags:i}=this.props;return t&&e&&!i.nextGen?this.renderLegacyMediaViewer():null}}y.displayName="MediaViewerComponent",Object(o.a)(y,"defaultProps",{media:[],isOpen:!1});var v=(e=>{class t extends a.Component{constructor(...e){super(...e),Object(o.a)(this,"state",{mediaClientConfig:null}),Object(o.a)(this,"setMediaClientConfig",e=>{this.setState({mediaClientConfig:e})})}componentDidMount(){this.fetchMediaClientConfig()}fetchMediaClientConfig(){const{parentId:e}=this.props;m(e).then(this.setMediaClientConfig)}render(){const{mediaClientConfig:t}=this.state;return null===t?null:d.a.createElement(e,Object(u.a)({mediaClientConfig:t},this.props))}}return t.displayName="WithMediaClientConfig",t})(y),k=i("bQlP"),C=i("kR5U");const b={closePreviewer:r.c};t.default=Object(n.connect)(e=>({isOpen:e.fabricEditor.views.media.previewer.get("isOpen"),currentMediaItem:e.fabricEditor.views.media.previewer.get("currentMediaItem"),featureFlags:{nextGen:Object(C.b)(e,k.r)}}),b)(v)},bShy:function(e,t){function i(e){this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap={}}i.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},i.prototype.put=function(e,t){var i=this._keymap[e];return i?(i.value=t,void this._markEntryAsUsed(i)):(this._keymap[e]=i={key:e,value:t,older:void 0,newer:void 0},this.newest?(this.newest.newer=i,i.older=this.newest):this.oldest=i,this.newest=i,this.size++,this.size>this.limit?this.shift():void 0)},i.prototype.shift=function(){var e=this.oldest;return e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),e.newer=e.older=void 0,delete this._keymap[e.key],this.size--),e},i.prototype.get=function(e,t){var i=this._keymap[e];if(void 0!==i)return this._markEntryAsUsed(i),t?i:i.value},i.prototype.find=function(e){return this._keymap[e]},i.prototype.set=function(e,t){var i,n=this.get(e,!0);return n?(i=n.value,n.value=t):(i=this.put(e,t))&&(i=i.value),i},i.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.oldest=t.newer):t.older?(t.older.newer=void 0,this.newest=t.older):this.oldest=this.newest=void 0,this.size--,t.value},i.prototype.removeAll=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?i.prototype.keys=function(){return Object.keys(this._keymap)}:i.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},i.prototype.forEach=function(e,t,i){var n;if(!0===t?(i=!0,t=void 0):"object"!=typeof t&&(t=this),i)for(n=this.newest;n;)e.call(t,n.key,n.value,this),n=n.older;else for(n=this.oldest;n;)e.call(t,n.key,n.value,this),n=n.newer},i.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,i=this.oldest;i;)e[t++]={key:i.key,value:i.value},i=i.newer;return e},i.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=i)}}]);
//# sourceMappingURL=fabric.media.viewer~dc51bad7.3kXtp8Q8-v39.js.map