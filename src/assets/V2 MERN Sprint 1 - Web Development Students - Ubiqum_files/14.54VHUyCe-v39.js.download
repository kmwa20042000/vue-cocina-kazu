(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"+352":function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"g",(function(){return l}));const i="https://confluence.atlassian.com/display/ConfCloud/Confluence+Cloud+plans",a="confluence-change-edition-section-message",o="confluence-change-edition-remove-restrictions-button",s="confluence-change-edition-notification-dialog",r=3,c=10,d="/admin/billing/applications/change-edition/confluence.ondemand";let l;!function(e){e.DEFAULT="default",e.FLAT="flat",e.INLINE="inline",e.INLINE_MODAL="inline-modal"}(l||(l={}))},"37V8":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ERkP"),a=n.n(i),o=n("1U1M"),s=(n("aWzz"),n("crbW")),r=n("6n9r");function c({children:e}){const{data:t,loading:n,error:c}=Object(o.c)(s.a),d=Object(r.a)(t);return a.a.createElement(i.Fragment,null,e({loading:n,error:c,edition:d}))}c.displayName="EditionQueryComponent"},"46jh":function(e,t,n){"use strict";var i=n("cxan"),a=n("ERkP"),o=n.n(a),s=n("gQ5V"),r=n("KD1n"),c=n("H5qd");function d(){const e=Object(r.a)(["\n  query IsSiteAdminQuery {\n    spaViewModel {\n      isSiteAdmin\n    }\n  }\n"]);return d=function(){return e},e}const l=n.n(c)()(d());function u(e){return function(t){return o.a.createElement(s.b,{query:l},({data:n,error:a,loading:s})=>a?null:s?null:o.a.createElement(e,Object(i.a)({},t,{isSiteAdmin:Boolean(n&&n.spaViewModel&&n.spaViewModel.isSiteAdmin)})))}}n.d(t,"a",(function(){return u}))},"6HGh":function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var i=n("KD1n"),a=n("ERkP"),o=n.n(a),s=n("KsTJ"),r=n("93GD"),c=n.n(r),d=n("dDc+"),l=n("E6Xs"),u=n("+352"),p=n("mvtW");function g(){const e=Object(i.a)(["\n          max-width: 400px;\n          "," {\n            ",";\n            margin-top: 0;\n          }\n\n          "," {\n            margin-top: 16px;\n          }\n\n          "," {\n            margin-top: 96px;\n            display: flex;\n          }\n        "]);return g=function(){return e},e}function m(){const e=Object(i.a)(["\n          max-width: 352px;\n        "]);return m=function(){return e},e}function h(){const e=Object(i.a)(["\n          padding: 16px 25px;\n          max-width: 710px;\n        "]);return h=function(){return e},e}function f(){const e=Object(i.a)(["\n          padding: 16px 25px;\n          ",";\n          max-width: 710px;\n        "]);return f=function(){return e},e}function E(){const e=Object(i.a)(["\n  background-color: ",";\n\n  border-radius: 3px;\n  display: flex;\n\n  margin: 0 auto;\n\n  ","\n"]);return E=function(){return e},e}function b(){const e=Object(i.a)(["\n  margin-top: 16px;\n"]);return b=function(){return e},e}function y(){const e=Object(i.a)(["\n  margin-top: 8px;\n"]);return y=function(){return e},e}function w(){const e=Object(i.a)(["\n  ",";\n  margin-top: 0;\n"]);return w=function(){return e},e}function O(){const e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return O=function(){return e},e}function T(){const e=Object(i.a)(["\n  width: ","px;\n  flex: 0 0 auto;\n"]);return T=function(){return e},e}const C=s.default.div(T(),({width:e})=>e),S=s.default.div(O()),A=s.default.div(w(),d.typography.h400()),j=s.default.div(y()),M=s.default.div(b()),v=s.default.div(E(),d.colors.N0,({appearanceType:e})=>{switch(e){case u.g.DEFAULT:return Object(s.css)(f(),d.elevation.e100);case u.g.FLAT:return Object(s.css)(h());case u.g.INLINE:return Object(s.css)(m());case u.g.INLINE_MODAL:return Object(s.css)(g(),A,d.typography.h600(),j,M)}});function R({actions:e,appearanceType:t=u.g.DEFAULT,body:n,edition:i,title:a}){return o.a.createElement(l.a,{mode:"light"},o.a.createElement(v,{appearanceType:t},i===p.a.PREMIUM&&o.a.createElement(C,{width:"40"},o.a.createElement(c.a,{label:"",primaryColor:d.colors.B400})),o.a.createElement(S,null,o.a.createElement(A,null,a),"string"==typeof n?o.a.createElement(j,{dangerouslySetInnerHTML:{__html:n}}):o.a.createElement(j,null,n),e&&o.a.createElement(M,{className:"actionButtons"},e))))}R.displayName="EditionSectionMessage"},"6n9r":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=e=>{var t;return e&&(null!=(t=e)&&null!=(t=t.tenant)&&null!=(t=t.editions)?t.edition:t)}},"8NHI":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ERkP"),a=n.n(i),o=n("/FQd"),s=n("AYIe"),r=n("HKB3");const c=({children:e})=>a.a.createElement(o.a,null,({cloudId:t,featureFlagClient:n})=>{const i=e=>n.getVariantValue(s.a.IN_CONTEXT_MODAL,{default:[r.a.NOT_ENROLLED],oneOf:[r.a.NOT_ENROLLED,r.a.CONTROL,r.a.EXPERIMENT],shouldTrackExposureEvent:e}),a=i(!1);return e({cloudId:t,cohort:a,showUpFlow:a===r.a.EXPERIMENT,fireExposureAnalytics:()=>i(!0)})});c.displayName="UpFlowButtonWrapper"},AYIe:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i={IN_CONTEXT_MODAL:"confluence.frontend.growth.experiments.incontext.modal.upgrade",END_USER_REQUEST:"confluence.frontend.growth.experiments.request.upgrade"}},Ec6B:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ERkP"),a=n("tvZK");const o=(e,t,n,o=!1)=>{const{featureFlagClient:s}=Object(a.a)(),r=Object(i.useCallback)(i=>s.getVariantValue(e,{default:n,oneOf:t,shouldTrackExposureEvent:i}),[e,t,n,s]);return Object(i.useMemo)(()=>({cohort:r(o),fireExposureEvent:()=>r(!0)}),[r,o])}},HKB3:function(e,t,n){"use strict";let i;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),function(e){e.NOT_ENROLLED="not-enrolled",e.CONTROL="control",e.EXPERIMENT="experiment"}(i||(i={}));const a=Object.keys(i).map(e=>i[e])},"T+Mg":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("cxan"),a=n("zjfJ"),o=n("ERkP"),s=n.n(o),r=n("lZoD"),c=n("qhEF");function d(e){var t,n;return n=t=class extends o.Component{render(){return s.a.createElement(r.c,{to:[c.a]},t=>s.a.createElement(e,Object(i.a)({},this.props,{flags:t})))}},Object(a.a)(t,"displayName","withFlags(".concat(e.displayName||e.name,")")),n}},ZUFC:function(e,t,n){"use strict";var i=n("pkwY"),a=n("zjfJ"),o=n("ERkP"),s=n.n(o),r=n("L21V"),c=n("2q8g"),d=n.n(c),l=n("2sr0"),u=n("/sMe"),p=n("FdGg"),g=n("X2PC"),m=(n("aWzz"),n("VPHB"));const h=e=>{const t=s.a.Children.toArray(e.children);return s.a.createElement(m.a,null,t)};h.displayName="ChangeEditionButtonGroup";var f=n("+352"),E=n("46jh"),b=n("cxan"),y=n("IC1n"),w=n.n(y),O=n("hpu0"),T=n("3VMZ"),C=n("8TdO"),S=n("mvtW"),A=n("crbW"),j=n("ezqO"),M=n("8NHI");const v=()=>(new Date).getTime();class R extends o.Component{constructor(...e){super(...e),Object(a.a)(this,"state",{currentEdition:null,isPolling:!1,openUpFlow:!1,pollEndTime:null}),Object(a.a)(this,"canPoll",()=>{const{isPolling:e,pollEndTime:t}=this.state;return!e&&t&&v()<t}),Object(a.a)(this,"getEditionFromResponse",e=>{var t;return null!=(t=e)&&null!=(t=t.data)&&null!=(t=t.tenant)&&null!=(t=t.editions)?t.edition:t}),Object(a.a)(this,"pollEditionChange",()=>{const{isPolling:e,pollEndTime:t}=this.state;t&&v()<t?(setTimeout(this.checkEditionChanged,1e3*f.b),e||this.setState({isPolling:!0})):this.setState({isPolling:!1})}),Object(a.a)(this,"queryEdition",e=>Object(C.getApolloClient)().query(Object(i.a)({query:A.a,errorPolicy:"all"},!e&&{fetchPolicy:"network-only"}))),Object(a.a)(this,"checkEditionChanged",()=>{this.queryEdition(!1).then(e=>{const t=this.getEditionFromResponse(e);t&&t!==this.state.currentEdition?(Object(O.a)().succeed({name:T.a.UPSELL_EDITION,attributes:{currentEdition:this.state.currentEdition,targetEdition:t,upFlowVariateFlag:this.props.upFlowVariateFlag}}),window.location.reload()):this.pollEditionChange()})}),Object(a.a)(this,"fireClickAnalytics",()=>{const{analyticsProps:{actionSubjectId:e,attributes:t,source:n},createAnalyticsEvent:i,targetEdition:a,upFlowVariateFlag:o}=this.props,{currentEdition:s}=this.state;i&&(t&&(t.currentEdition=s,t.targetEdition=a,t.upFlowVariateFlag=o),i({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:e,source:n,attributes:t}}).fire()),Object(O.a)().start({name:T.a.UPSELL_EDITION,id:w()(),attributes:{currentEdition:s,linkClicked:e,source:n,targetEdition:a,upFlowVariateFlag:o}})}),Object(a.a)(this,"onUpFlowClose",()=>{this.setState({openUpFlow:!1})}),Object(a.a)(this,"onTryItNowClick",()=>{const{fireExposureAnalytics:e,showUpFlow:t}=this.props;e(),this.fireClickAnalytics(),t?this.setState({openUpFlow:!0}):this.onTryItNowWithoutUpFlowClick()}),Object(a.a)(this,"onTryItNowWithoutUpFlowClick",()=>{var e;this.setState({pollEndTime:new Date(v()+(e=f.a,60*e*1e3)).getTime()});const{onUpgradeButtonClick:t}=this.props;t&&t()})}componentDidMount(){const{currentEdition:e}=this.state;this.queryEdition(!0).then(t=>{const n=this.getEditionFromResponse(t);n!==e&&this.setState({currentEdition:n})})}componentDidUpdate(){this.canPoll()&&this.pollEditionChange()}componentWillUnmount(){this.props.showUpFlow||Object(O.a)().abort({name:T.a.UPSELL_EDITION,reason:"Canceled by user"})}render(){const{isSiteAdmin:e}=this.props;if(!e)return null;const{autoFocus:t,analyticsProps:{source:n},cloudId:i,onUpFlowOpen:a,showUpFlow:o,targetEdition:c}=this.props,{currentEdition:l,openUpFlow:p}=this.state;return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.a,{appearance:"primary",autoFocus:t,className:"primaryButton",href:o?void 0:f.h,onClick:this.onTryItNowClick,target:o?void 0:"_blank"},s.a.createElement(r.c,{id:"change-edition.upgrade.try.now",defaultMessage:"Try it now",description:"The text of the button/link which starts the user onto the path of upgrade"})),o&&p?s.a.createElement(j.a,{canChangeEdition:e,cloudId:i,currentEdition:l,flow:"upgrade",product:"confluence",targetEdition:c,touchpointId:n,isExperienceTrackerEnabled:!0,onClose:d()(a)?void 0:this.onUpFlowClose,onOpen:a}):null)}}function I(e){return s.a.createElement(M.a,null,({cloudId:t,cohort:n,fireExposureAnalytics:i,showUpFlow:a})=>s.a.createElement(R,Object(b.a)({},e,{cloudId:t,fireExposureAnalytics:i,showUpFlow:a,upFlowVariateFlag:n})))}R.displayName="UpgradeEditionButtonComponent",Object(a.a)(R,"defaultProps",{autoFocus:!0,targetEdition:S.a.STANDARD}),I.displayName="UpgradeEditionButtonWithUpFlow";const N=Object(E.a)(Object(l.a)()(I));var F=n("psri"),U=n.n(F),P=n("1U1M"),x=n("T20J"),k=n("T+Mg"),L=n("AYIe"),D=n("HKB3"),_=n("WlwD"),B=n("tqyq"),W=n("Ec6B"),q=n("tvZK"),Y=n("6n9r"),G=n("mTU2");const V=Object(k.a)(({analyticsProps:e,autoFocus:t,onUpFlowOpen:n,targetEdition:i=S.a.STANDARD,flags:a})=>{const[c,l]=Object(o.useState)(!1),{fireExposureEvent:p}=Object(W.a)(L.a.END_USER_REQUEST,D.b,D.a.NOT_ENROLLED),{data:g}=Object(P.c)(A.a),m=Object(Y.a)(g),{cloudId:h}=Object(q.a)(),{createAnalyticsEvent:f}=Object(x.a)();Object(o.useEffect)(()=>{p()},[p]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.a,{appearance:"primary",autoFocus:t,onClick:async()=>{const t=await(async()=>{const e=await _.b.getItem(B.a.GROWTH_EXPERIMENT_REQUEST_UPGRADE_SENT);if("true"===e){const e=U()(i.toString().toLowerCase());a.showWarningFlag({title:s.a.createElement(r.c,G.a.requestUpgradeAlreadySentWarningTitle),description:s.a.createElement(r.c,Object(b.a)({},G.a.requestUpgradeAlreadySentWarningDescription,{values:{edition:e}}))})}else l(!0);return e})(),{actionSubjectId:n,attributes:o,source:c}=e;o&&(o.currentEdition=m,o.targetEdition=i,o.requestUpgradeNotificationSent=t),f({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:n,source:c,attributes:o}}).fire()}},s.a.createElement(r.c,G.a.requestUpgradeButton)),c?s.a.createElement(j.a,{canChangeEdition:!1,cloudId:h,currentEdition:m,flow:"request-upgrade",product:"confluence",targetEdition:i,touchpointId:e.source,onClose:()=>{d()(n)||l(!1)},onOpen:n}):null)});var H=n("r89S"),Q=n("6HGh"),X=n("Uo/y");const z=Object(r.h)((function({canShowUpgradeButton:e,children:t,intl:n,isSiteAdmin:i,secondaryLink:a}){const{IN_CONTEXT_MODAL:o,END_USER_REQUEST:s}=L.a,{cohort:r}=Object(W.a)(o,D.b,D.a.NOT_ENROLLED),{cohort:c}=Object(W.a)(s,D.b,D.a.NOT_ENROLLED),d=r===D.a.EXPERIMENT,l=c===D.a.EXPERIMENT;let u=!1,p=!1,g=!0,m=!0;return e&&(i?u=!0:d&&Object(X.a)(n&&n.locale)&&(p=l),(u||p)&&(g=!a,m=!1)),t({showUpgradeTryNowButton:u,showUpgradeRequestButton:p,showLearnMore:g,learnMoreIsPrimaryCTA:m})}));n.d(t,"a",(function(){return Z}));class K extends o.Component{constructor(...e){super(...e),Object(a.a)(this,"generateCTAAnalyticsProps",e=>{const{grandfathered:t,isSiteAdmin:n,source:i}=this.props;return{actionSubjectId:e,source:i,attributes:{isGrandfathered:Boolean(t),isSiteAdmin:n}}}),Object(a.a)(this,"triggerLinkClickAnalytics",(e,t)=>{const{createAnalyticsEvent:n}=this.props;if(n){const{actionSubjectId:a,attributes:o,source:s}=this.generateCTAAnalyticsProps(e);n({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:a,source:s,attributes:Object(i.a)({},o,{linkMessage:t})}}).fire()}}),Object(a.a)(this,"handleSecondaryLinkClick",()=>{const e=this.props.secondaryLink;e&&(this.triggerLinkClickAnalytics(e.actionSubjectId,e.messageDescriptor.defaultMessage),d()(e.onClick)&&e.onClick())})}componentDidMount(){const{createAnalyticsEvent:e}=this.props;if(e){const{attributes:t,source:n}=this.generateCTAAnalyticsProps("");e({type:"sendScreenEvent",data:{name:"changeEditionGatewayScreen",attributes:Object(i.a)({},t,{source:n})}}).fire()}}renderButtons(){const{autoFocus:e,isSiteAdmin:t,canShowUpgradeButton:n,learnMoreLinkActionSubjectId:i,upgradeEditionActionSubjectId:a,upgradeRequestEditionActionSubjectId:c,secondaryLink:d,onUpFlowOpen:l,targetEdition:p}=this.props;return s.a.createElement(z,{isSiteAdmin:t,canShowUpgradeButton:n,secondaryLink:d},({showUpgradeTryNowButton:t,showUpgradeRequestButton:n,showLearnMore:g,learnMoreIsPrimaryCTA:m})=>s.a.createElement(o.Fragment,null,t?s.a.createElement(N,{autoFocus:e,analyticsProps:this.generateCTAAnalyticsProps(a),onUpFlowOpen:l,targetEdition:p}):n&&s.a.createElement(V,{autoFocus:e,analyticsProps:this.generateCTAAnalyticsProps(c),onUpFlowOpen:l,targetEdition:p}),g&&s.a.createElement(H.a,{analyticsProps:this.generateCTAAnalyticsProps(i),appearance:m?"primary":"link",onUpFlowOpen:l,targetEdition:p}),d&&s.a.createElement(u.a,{appearance:"link",href:d.href?d.href:void 0,id:"secondaryLink",spacing:"default",target:"_blank",onClick:this.handleSecondaryLinkClick},s.a.createElement(r.c,d.messageDescriptor))))}render(){const{appearanceType:e=f.g.DEFAULT,body:t,targetEdition:n,title:i}=this.props;return s.a.createElement(p.a,{attribution:g.a.MISSION_CONTROL},s.a.createElement(Q.a,{appearanceType:e,edition:n,title:i,body:t,actions:s.a.createElement(h,null,this.renderButtons())}))}}K.displayName="ChangeEditionSectionMessageComponent",Object(a.a)(K,"defaultProps",{autoFocus:!0,canShowUpgradeButton:!0,learnMoreLinkActionSubjectId:"freeLearnMore",upgradeEditionActionSubjectId:"freeTryNow",upgradeRequestEditionActionSubjectId:"requestTrial"});const Z=Object(E.a)(Object(l.a)()(K))},cphC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("cxan"),a=n("zjfJ"),o=n("ERkP"),s=n.n(o),r=n("fYnN"),c=n.n(r),d=n("C+A9"),l=n("/FQd");const u=()=>{};function p(e){var t,n;return n=t=class extends o.Component{constructor(...e){super(...e),Object(a.a)(this,"isEngagementDisabledForTests",Boolean(c.a.get("confluence.disable-engagement-for-tests")))}render(){return s.a.createElement(l.a,null,({cloudId:t})=>{const n=this.isEngagementDisabledForTests?{start:u,stop:u}:new d.a(t,"/gateway/api");return s.a.createElement(e,Object(i.a)({},this.props,{coordinationClient:n}))})}},Object(a.a)(t,"displayName","withCoordinationClient(".concat(e.displayName||e.name,")")),n}},crbW:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("KD1n"),a=n("H5qd"),o=n.n(a),s=n("uMk2");function r(){const e=Object(i.a)(["\n  query EditionQuery {\n    ...EditionFragment\n  }\n\n  ","\n"]);return r=function(){return e},e}const c=o()(r(),s.a)},ezqO:function(e,t,n){"use strict";var i=n("pkwY"),a=n("HbGN"),o=n("zjfJ"),s=n("nnm9"),r=n.n(s),c=(n("aWzz"),n("ERkP")),d=n.n(c),l=n("7nmT"),u=n.n(l),p=n("L21V"),g=n("T+Mg"),m=n("jCXf"),h=n("KkZ4"),f=n("cphC"),E=n("3VMZ"),b=n("hpu0"),y=n("6esG"),w=n("WlwD"),O=n("tqyq"),T=n("HKB3"),C=n("8TdO"),S=n("+352"),A=n("crbW");const j=()=>(new Date).getTime();var M=n("/FQd");const v=async e=>{const{featureFlagClient:t}=await Object(M.b)(Object(C.getApolloClient)());return t.getVariantValue("confluence.frontend.growth.experiments.incontext.modal.upgrade.with.price",{default:[T.a.NOT_ENROLLED],oneOf:[T.a.NOT_ENROLLED,T.a.CONTROL,T.a.EXPERIMENT],shouldTrackExposureEvent:e})};n.d(t,"a",(function(){return L}));const R="INITIATE_SPA_CLOSE",I="START_EDITION_POLLING",N="FINISH_EDITION_POLLING",F="VIEWED_UPFLOW_ADMIN_SCREEN",U="SUCCESS",P="ERROR",x=Object(h.getAnalyticsWebClient)();class k extends d.a.Component{constructor(...e){super(...e),Object(o.a)(this,"upFlowSpaContainerWillUnmount",()=>{const{onClose:e,coordinationClient:t}=this.props;this.client.cleanup(),u.a.unmountComponentAtNode(this.iframeContainerElement),document.body.removeChild(this.iframeContainerElement),document.body.style.overflow="auto",e(),t.stop("confluence-up-flow-modal")}),Object(o.a)(this,"showFlagForRequestUpgrade",(e,t,n)=>{const{flags:i}=this.props;e===U?(w.b.setItem(O.a.GROWTH_EXPERIMENT_REQUEST_UPGRADE_SENT,"true"),i.showSuccessFlag({title:t,description:n})):e===P&&i.showErrorFlag({title:t,description:n})}),Object(o.a)(this,"upFlowSpaContainerWillMount",async()=>{const e=this.props,{onOpen:t,coordinationClient:n,onClose:o,isExperienceTrackerEnabled:s,currentEdition:r,targetEdition:c,intl:{locale:d},flags:l}=e,u=Object(a.a)(e,["onOpen","coordinationClient","onClose","isExperienceTrackerEnabled","currentEdition","targetEdition","intl","flags"]),p=await v(!1)===T.a.EXPERIMENT,g=(h=Object(i.a)({currentEdition:r.toLowerCase(),targetEdition:c.toLowerCase(),showPricing:p,locale:d},u),Object.keys(h).map(e=>"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(h[e]))).join("&"));var h;this.iframeContainerElement=(()=>{const e=document.createElement("div");return e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.padding="0",e.style.margin="0",e.style.height="100%",e.style.width="100%",e.style.background="transparent",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.zIndex=500,e})(),document.body.style.overflow="hidden",document.body.appendChild(this.iframeContainerElement),this.client=new m.SpaParentClient({src:"/gpa-up-flow/?".concat(g),appName:"upFlowSpa",withFullscreen:!0,withLoader:!0,withBlanket:!0,modalZIndex:500,pollingThresholdMilliSeconds:5e3}),this.client.init({containerElement:this.iframeContainerElement}),this.client.on(m.HostEvents.Message,e=>{switch(e.type){case R:if(this.upFlowSpaContainerWillUnmount(),s){const t={name:E.a.UPSELL_EDITION,attributes:{currentEdition:r,targetEdition:c,upFlowVariateFlag:T.a.EXPERIMENT}};e.editionChanged?(Object(b.a)().succeed(t),window.location.reload()):Object(b.a)().abort(Object(i.a)({},t,{reason:e.type}))}if(e.flagType){const{flagType:t,title:n,description:i}=e;this.showFlagForRequestUpgrade(t,n,i)}break;case I:this.startEditionPolling();break;case F:v(!0)}}),this.client.on(m.HostEvents.AnalyticEvent,e=>{Object(m.analyticsWrapper)(x)(Object(m.transformEvent)(e))}),t()})}componentDidMount(){const{coordinationClient:e}=this.props;e.start("confluence-up-flow-modal"),this.upFlowSpaContainerWillMount()}startEditionPolling(){(e=>{const t=new Date(j()+60*S.a*1e3).getTime(),n=(e,i,a)=>{j()>t&&a("TIMEOUT"),Object(C.getApolloClient)().query({query:A.a,errorPolicy:"all",fetchPolicy:"network-only"}).then(t=>{var o;const s=null!=(o=t)&&null!=(o=o.data)&&null!=(o=o.tenant)&&null!=(o=o.editions)?o.edition:o;s&&e!==s?i(s):setTimeout(()=>{n(e,i,a)},1e3*S.b)})};return new Promise((t,i)=>n(e,t,i))})(this.props.currentEdition).then(e=>{this.client.postMessage({type:N,edition:e})}).catch(e=>{this.client.postMessage({type:N,error:e}),Object(y.b)(E.a.UPSELL_EDITION,e)})}render(){return null}}k.displayName="UpFlow",Object(o.a)(k,"defaultProps",{onClose:r.a,onOpen:r.a,isExperienceTrackerEnabled:!1});const L=Object(p.h)(Object(f.a)(Object(g.a)(k)))},mTU2:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("L21V");const a=Object(i.g)({cancelButton:{id:"change-edition.general.button.cancel",defaultMessage:"Cancel",description:"Cancel button"},removeRestrictionButton:{id:"change-edition.notification.dialog.general.button.remove-restrictions",defaultMessage:"Remove restrictions",description:"Remove restrictions button"},grantPermissionsButton:{id:"change-edition.notification.dialog.general.button.grant-permissions",defaultMessage:"Grant permissions",description:"Grant permissions button"},removeRestrictionTitle:{id:"change-edition.notification.dialog.general.title.remove-restrictions-2",defaultMessage:"Remove page restrictions?",description:"Remove restrictions title"},grandSpacePermissionsTitle:{id:"change-edition.notification.dialog.grand-permissions.title",defaultMessage:"Grant space permissions?",description:"grand space permissions title"},removeRestrictionTextContentLevel:{id:"change-edition.notification.dialog.content.text.remove-restrictions-2",defaultMessage:"Anyone who's logged in will be able to view and edit this page. <b>This can't be undone.</b> You won't be able to reset the restrictions later.",description:"Remove restrictions title"},removeRestrictionTextSpaceLevel:{id:"change-edition.notification.dialog.space.text.remove-restrictions",defaultMessage:"You're on the free plan, so you can only <b>remove all restrictions</b> from the <b>{contentTitle}</b> page. <b>This can't be undone.</b> You won't be able to reset the restrictions later.",description:"Remove restrictions title"},grandSpacePermissionsText:{id:"change-edition.notification.dialog.grand-permissions.text",defaultMessage:"You're about to grant all users permissions for this space. <b>This can't be undone.</b> You won't be able to reset the space permissions later.",description:"Remove restrictions title"},removeRestrictionConfirmationSuccessTitle:{id:"change-edition.notification.dialog.confirmation.success.title",defaultMessage:"Page restrictions removed",description:"Success confirmation title"},removeRestrictionConfirmationSuccessDesc:{id:"change-edition.notification.dialog.confirmation.success.desc",defaultMessage:"Anyone who's logged in can now view and edit the {contentTitle} page.",description:"Success confirmation description"},removeRestrictionConfirmationFailedTitle:{id:"change-edition.notification.dialog.confirmation.failed.title",defaultMessage:"Page restrictions not removed",description:"Failed confirmation title"},removeRestrictionConfirmationFailedDesc:{id:"change-edition.notification.dialog.confirmation.failed.desc",defaultMessage:"We couldn't remove the page restrictions from the {contentTitle} page. Try again.",description:"Failed confirmation description"},grandSpacePermissionsConfirmationSuccessTitle:{id:"change-edition.notification.dialog.grand-permissions.confirmation.success.title",defaultMessage:"Space permissions granted",description:"Success confirmation title for space"},grandSpacePermissionsConfirmationSuccessDesc:{id:"change-edition.notification.dialog.grand-permissions.confirmation.success.desc",defaultMessage:"Anyone who's logged in can now view {spaceName} space, add pages to it, and more.",description:"Success confirmation description for space"},grandSpacePermissionsConfirmationFailedTitle:{id:"change-edition.notification.dialog.grand-permissions.confirmation.failed.title",defaultMessage:"Space permissions not granted",description:"Failed confirmation title for space"},grandSpacePermissionsConfirmationFailedDesc:{id:"change-edition.notification.dialog.grand-permissions.confirmation.failed.desc",defaultMessage:"We couldn't grant space permissions to all users for the {spaceName} space. Try again.",description:"Failed confirmation description for space"},learnMoreButton:{id:"change-edition.section.message.general.button.link",defaultMessage:"Learn more",description:"A button that links to action description help page"},grantAllButton:{id:"change-edition.section.message.space-permissions.grandfathered.button.link",defaultMessage:"Grant all users permissions for this space",description:"Granting permissions button"},removeThisRestrictionButton:{id:"change-edition.section.message.content.grandfathered.button.link-2",defaultMessage:"Remove this page's restrictions",description:"Removing permissions button"},siteAdminContentRestrictionsTitle:{id:"change-edition.section.message.site-admin.content-restrictions.title",defaultMessage:"Upgrade for page restrictions",description:"Upgrade for page restrictions title"},nonSiteAdminContentRestrictionsTitle:{id:"change-edition.section.message.non-site-admin.content-restrictions.title",defaultMessage:"Page restrictions are only available on paid plans",description:"Page restrictions title for non-site admin"},grandfatheredChildContentRestrictionsTitle:{id:"change-edition.section.message.content-restrictions.grandfathered.title",defaultMessage:"Only some people can view this page",description:"Page restrictions title for grandfathered child pages"},siteAdminSpacePermissionsTitle:{id:"change-edition.section.message.site-admin.space-permissions.title",defaultMessage:"Upgrade for space permissions",description:"Upgrade for space permissions title for site admins"},nonSiteAdminSpacePermissionsTitle:{id:"change-edition.section.message.non-admin.space-permissions.title",defaultMessage:"Space permissions are only available on paid plans",description:"Space permissions title for non-site admins"},siteAdminGlobalPermissionsTitle:{id:"change-edition.section.message.site-admin.global-permissions.title",defaultMessage:"Upgrade for global permissions",description:"Upgrade for global permissions title for site admins"},nonSiteAdminGlobalPermissionsTitle:{id:"change-edition.section.message.non-admin.global-permissions.title",defaultMessage:"Global permissions are only available on paid plans",description:"Upgrade for global permissions title for non-site admins"},siteAdminAuditLogsTitle:{id:"change-edition.section.message.site-admin.audit-logs.title",defaultMessage:"Upgrade for Audit logs",description:"Upgrade for audit logs title"},nonSiteAdminAuditLogsTitle:{id:"change-edition.section.message.non-site-admin.audit-logs.title",defaultMessage:"Audit logs are only available on paid plans",description:"Upgrade for audit logs title for non-site admins"},siteAdminPageRestrictionsBody:{id:"change-edition.section.message.site-admin.page-restrictions.body",defaultMessage:"You're on the free plan, so anyone who's logged in can view and edit this page. To set page restrictions, upgrade your plan.",description:"Warning message explaining why anyone can't change restrictions"},nonSiteAdminPageRestrictionsBody:{id:"change-edition.section.message.non-admin.page-restrictions.body",defaultMessage:"You're on the free plan, so anyone who's logged in can view and edit this page.",description:"Warning message explaining why the form is not editable for non-admin"},siteAdminContentRestrictionsBody:{id:"change-edition.section.message.site-admin.content.grandfathered.body",defaultMessage:"You're on the free plan, so you can't change the page restrictions. To set restrictions on pages, upgrade your plan.",description:"Warning message explaining why the form is not editable"},nonSiteAdminContentRestrictionBody:{id:"change-edition.section.message.non-admin.content.grandfathered.body",defaultMessage:"You're on the free plan, so you can't change the page restrictions.",description:"Warning message explaining why the form is not editable for non-admin"},grandfatheredChildContentRestrictionsBody:{id:"change-edition.section.message.content-restrictions.grandfathered.body",defaultMessage:"This page is inheriting restrictions from the {parent} page.",description:"Page restrictions body for grandfathered child pages"},spacePermissionsFreeText:{id:"change-edition.section.message.space-permissions.free.text",defaultMessage:"You're on the free plan, so anyone who's logged in can view this space, add pages to it, and more. To set space permissions, upgrade your plan.",description:"Warning message explaining why the form is not editable"},spacePermissionsGrandfatheredText:{id:"change-edition.section.message.space-permissions.grandfathered.text",defaultMessage:"You're on the free plan, so you can't change the space permissions. To set permissions on spaces, upgrade your plan. If needed, you can grant all users permissions for this space. (Anonymous users won't be granted permissions.)",description:"Warning message explaining why the form is not editable"},nonAdminSpacePermissionsGrandfatheredCanClearBody:{id:"change-edition.section.message.non-site-admin.space-permissions.grandfathered.can.clear.body",defaultMessage:"You're on the free plan, so you can't change the space permissions. If needed, you can grant all users permissions for this space. (Anonymous users won't be granted permissions.)",description:"Warning message explaining why the form is not editable for non site-admins"},nonAdminSpacePermissionsGrandfatheredCantClearBody:{id:"change-edition.section.message.non-site-admin.space-permissions.grandfathered.cant.clear.body",defaultMessage:"You're on the free plan, so anyone who's logged in can view this space, add pages to it, and more.",description:"Warning message explaining why the form is not editable for non site-admins"},spacePermissionsGrandfatheredNoclearText:{id:"change-edition.section.message.space-permissions.grandfathered.noclear.text",defaultMessage:"You're on the free plan, so you can't change the space permissions. To set permissions on spaces, upgrade your plan.",description:"Warning message explaining why the form is not editable"},spaceRestrictedPagesText:{id:"change-edition.section.message.space-restricted-pages.text",defaultMessage:"You're on the free plan, so you can only remove all restrictions from a page by clicking its lock icon below. To set restrictions on pages, upgrade your plan.",description:"Warning message explaining why the form is not editable"},nonSiteAdminGrandfatheredRestrictedPagesBody:{id:"change-edition.section.message.non-admin.grandfathered.space-restricted-pages.body",defaultMessage:"You're on the free plan, so you can only remove all restrictions from a page by clicking its lock icon below.",description:"Warning message explaining why the form is not editable"},siteAdminRestrictedPagesBody:{id:"change-edition.section.message.site-admin.space-restricted-pages.body",defaultMessage:"You're on the free plan, so anyone who's logged in can view and edit all pages. To set page restrictions, upgrade your plan.",description:"Warning message explaining why the form is not editable for site admin"},nonSiteAdminRestrictedPagesBody:{id:"change-edition.section.message.non-admin.space-restricted-pages.body",defaultMessage:"You're on the free plan, so anyone who's logged in can view and edit all pages.",description:"Warning message explaining why the form is not editable non-site admin"},spaceNoRestrictedPagesText:{id:"change-edition.section.message.no-space-restricted-pages.text",defaultMessage:"You're on the free plan, so anyone who's logged in can view and edit all pages. To set page restrictions, upgrade your plan.",description:"Warning message explaining why users cannot see and have restricted pages"},siteAdminSpaceBody:{id:"change-edition.section.message.site-admin-space.body",defaultMessage:"You're on the free plan, so you can't set the default permissions for new spaces. Anyone who's logged in can view new spaces, add pages to them, and more. To set default space permissions, upgrade your plan.",description:"Warning message explaining why the form is not editable for site admins"},nonSiteAdminSpaceBody:{id:"change-edition.section.message.non-admin-space.body",defaultMessage:"You're on the free plan, so you can't set the default permissions for new spaces. Anyone who's logged in can view new spaces, add pages to them, and more.",description:"Warning message explaining why the form is not editable for non-site admins"},siteAdminGlobalBody:{id:"change-edition.section.message.site-admin.global.body",defaultMessage:"You're on the free plan, so you can't change these permissions. To set global permissions and define what people can do on your site, upgrade your plan.",description:"Warning message explaining why the form is not editable for site admins"},nonSiteAdminGlobalBody:{id:"change-edition.section.message.non-site-admin.global.body",defaultMessage:"You're on the free plan, so you can't change the global permissions to define what people can do on your site.",description:"Warning message explaining why the form is not editable for non-site admins"},siteAdminAuditLogsBody:{id:"change-edition.section.message.site-admin-audit-logs.body",defaultMessage:"You're on the free plan, so you can't view and track changes made across your site in the audit logs. To access the audit logs, upgrade your plan.",description:"Warning message explaining why the audit logs are not viewable to site admins"},nonSiteAdminAuditLogsBody:{id:"change-edition.section.message.non-site-admin-audit-logs.body",defaultMessage:"You're on the free plan, so you can't view and track changes made across your site in the audit logs.",description:"Warning message explaining why the audit logs are not viewable to non-site admins"},requestUpgradeButton:{id:"change-edition.upgrade.request.trial",defaultMessage:"Request trial",description:"The text of the button which starts the user to request for upgrade"},requestUpgradeAlreadySentWarningTitle:{id:"change-edition.section.message.warning.flag.title",defaultMessage:"You can only request once",description:"Title of yarning message explaining why user can not send request again"},requestUpgradeAlreadySentWarningDescription:{id:"change-edition.section.message.warning.flag.description",defaultMessage:"You’ve already requested Confluence {edition}",description:"Description of warning message explaining why user can not send request again"}})},mvtW:function(e,t,n){"use strict";let i;n.d(t,"a",(function(){return i})),function(e){e.FREE="FREE",e.PREMIUM="PREMIUM",e.STANDARD="STANDARD"}(i||(i={}))},r89S:function(e,t,n){"use strict";var i=n("cxan"),a=n("pkwY"),o=n("2q8g"),s=n.n(o),r=n("ERkP"),c=n.n(r),d=n("L21V"),l=n("IC1n"),u=n.n(l),p=n("2sr0"),g=n("/sMe"),m=n("hpu0"),h=n("3VMZ"),f=n("Ec6B"),E=n("AYIe"),b=n("HKB3"),y=n("Uo/y");let w;!function(e){e.LEARN_MORE="learn-more",e.UPGRADE="upgrade",e.REQUEST_UPGRADE="request-upgrade",e.REQUEST_LEARN_MORE="request-learn-more"}(w||(w={}));var O=n("+352"),T=n("46jh"),C=n("mTU2"),S=n("mvtW"),A=n("37V8"),j=n("ezqO"),M=n("8NHI");function v(e){const{analyticsProps:{source:t},appearance:n,cloudId:o,currentEdition:l,fireExposureAnalytics:p,isSiteAdmin:T,onUpFlowOpen:A,showUpFlow:M,targetEdition:v=S.a.STANDARD,upFlowVariateFlag:R,intl:I}=e,[N,F]=Object(r.useState)(!1),{cohort:U,fireExposureEvent:P}=Object(f.a)(E.a.END_USER_REQUEST,b.b,b.a.NOT_ENROLLED),x=M&&!T&&Object(y.a)(I&&I.locale),k=x&&U===b.a.EXPERIMENT,L=k?w.REQUEST_LEARN_MORE:w.LEARN_MORE;Object(r.useEffect)(()=>()=>{M||k||Object(m.a)().abort({name:h.a.UPSELL_EDITION,reason:"Canceled by user"}),x&&P()},[M,k,x,P]);const D=()=>{const{analyticsProps:n,createAnalyticsEvent:i}=e;if(i){i({type:"sendUIEvent",data:Object(a.a)({action:"clicked",actionSubject:"link",actionSubjectId:"freeLearnMore"},n,{attributes:Object(a.a)({currentEdition:l,isSiteAdmin:T,linkMessage:C.a.learnMoreButton.defaultMessage,targetEdition:v,upFlowVariateFlag:R},n.attributes)})}).fire()}k||Object(m.a)().start({name:h.a.UPSELL_EDITION,id:u()(),attributes:{currentEdition:l,linkClicked:n.actionSubjectId||"freeLearnMore",source:t,targetEdition:v,upFlowVariateFlag:R}})},_={target:M?void 0:"_blank",href:M?"#":O.d,onClick:e=>{D(),p(),M&&(F(!0),e.preventDefault())}},B=c.a.createElement(d.c,C.a.learnMoreButton);return c.a.createElement(c.a.Fragment,null,"inline-link"===n?c.a.createElement("a",_,B):c.a.createElement(g.a,Object(i.a)({appearance:n,className:"primaryButton",id:"learnMoreLink",spacing:"default"},_),B),M&&N&&c.a.createElement(j.a,{cloudId:o,canChangeEdition:T,currentEdition:l,targetEdition:v,flow:L,product:"confluence",touchpointId:t,onClose:()=>{s()(A)||F(!1)},onOpen:A,isExperienceTrackerEnabled:!k}))}function R(e){return c.a.createElement(A.a,null,({edition:t,loading:n,error:a})=>n||a?null:c.a.createElement(M.a,null,({cloudId:n,cohort:a,fireExposureAnalytics:o,showUpFlow:s})=>c.a.createElement(v,Object(i.a)({},e,{cloudId:n,currentEdition:t,fireExposureAnalytics:o,showUpFlow:s,upFlowVariateFlag:a}))))}n.d(t,"a",(function(){return I})),R.displayName="LearnMoreButtonWithUpFlow";const I=Object(T.a)(Object(p.a)()(Object(d.h)(R)))},uMk2:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("KD1n"),a=n("H5qd");function o(){const e=Object(i.a)(["\n  fragment EditionFragment on Query {\n    tenant {\n      editions {\n        edition\n      }\n    }\n  }\n"]);return o=function(){return e},e}const s=n.n(a)()(o())}}]);
//# sourceMappingURL=14.54VHUyCe-v39.js.map