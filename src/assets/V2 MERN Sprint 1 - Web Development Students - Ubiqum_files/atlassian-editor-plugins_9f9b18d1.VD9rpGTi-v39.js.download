/*! For license information please see atlassian-editor-plugins~9f9b18d1.VD9rpGTi-v39.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([["atlassian-editor-plugins~9f9b18d1"],{"+7yL":function(e,t,n){var o=n("qNQp");"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("cuK8")(o,a);o.locals&&(e.exports=o.locals)},"32IQ":function(e,t,n){(e.exports=n("PBB4")(!1)).push([e.i,".status-macro {\n\tmin-width: 76px;\n\tpadding: 2px 5px 1px 5px\n}\n",""])},"3eVS":function(e,t,n){var o=n("32IQ");"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("cuK8")(o,a);o.locals&&(e.exports=o.locals)},"4DxN":function(e,t,n){(e.exports=n("PBB4")(!1)).push([e.i,"/* Styles for draggable decoration */\ntable.draggable {\n    margin-left: -10px;\n    margin-top: -10px;\n}\n\ntable.draggable:hover > tbody > tr > td.draggable-table,\ntable.draggable:hover > tbody > tr > td.draggable-column,\ntable.draggable:hover > tbody > tr > td.draggable-row {\n    background-color: #777;\n    border-top: 1px solid #777;\n    border-left: 1px solid #777;\n}\n\ntable.draggable:hover > tbody > tr > td.draggable-table,\ntable.draggable:hover > tbody > tr > td.draggable-column {\n    border-right: 1px solid #aaa;\n}\n\ntable.draggable:hover > tbody > tr > td.draggable-table,\ntable.draggable:hover > tbody > tr > td.draggable-row {\n    border-bottom: 1px solid #aaa;\n}\n\ntd.draggable-table,\ntd.draggable-column,\ntd.draggable-row {\n    background-color: transparent;\n    border-top: 1px solid transparent;\n    border-left: 1px solid transparent;\n    cursor: move;\n}\n\ntd.draggable-table,\ntd.draggable-column {\n    border-right: 1px solid transparent;\n}\n\ntd.draggable-table,\ntd.draggable-row {\n    border-bottom: 1px solid transparent;\n}\n\ntd.draggable-column {\n    height: 10px;\n}\n\ntd.draggable-row {\n    width: 10px;\n}\n\n/*.detached {*/\n    /*position: absolute;*/\n/*}*/\n\n.wiki-content img.confluence-embedded-image,\n.wiki-content img.editor-inline-macro,\n.wiki-content table.wysiwyg-macro {\n    cursor: move;\n}\n\n.wiki-content table.wysiwyg-macro > tbody > tr > td.wysiwyg-macro-body {\n    cursor: text;\n}\n\n#move-indicator {\n    font-weight: normal !important;\n}",""])},"5wKT":function(e,t,n){(e.exports=n("PBB4")(!1)).push([e.i,'/* Insert Wiki Select Dialog*/\n.aui-dialog .wiki-parser-selector {\n    font-size: 14px;\n    margin-right: 5px;\n}\n\n.insert-wiki-markup-panel div,\n.insert-wiki-markup-panel div form {\n    height: 100%;\n    text-align: center;\n}\n.insert-wiki-markup-panel .spinner {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -73px;\n    margin-left: -60px;\n}\n\n#insert-wiki-info-title {\n    text-align: left;\n    margin-left: 10px;\n}\n\n#insert-wiki-markup-form  {\n    height: 95%;\n}\n\n#insert-wiki-markup-form .wiki-title span {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    display: -moz-inline-stack;\n    display: inline-block;\n    margin-bottom: 10px;\n    max-width: 48%;\n    text-align: left;\n    vertical-align: middle;\n    width: 48%;\n}\n#insert-wiki-markup-form .wiki-title span:first-child {\n    margin-right: 20px;\n}\n\n#insert-wiki-textarea-preview,\n#insert-wiki-textarea {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    display: -moz-inline-stack;\n    display: inline-block;\n    font-size: 14px;\n    height: 84%;\n    max-width: 48%;\n    vertical-align: middle;\n    width: 48%;\n    resize: none;\n}\n\n#insert-wiki-textarea.originalDefault {\n    height: 100%;\n    min-width: 100%;\n    width: 100%;\n}\n\n/* Insert Wiki Dialog*/\n#insert-wiki-textarea {\n    font-family: "Monaco", "Consolas", "Courier New", "monospace";\n    margin-right: 20px;\n}\n/* Insert Wiki preview*/\n#insert-wiki-textarea-preview {\n    border: 1px solid #ccc;\n    border-radius: 3px;\n    position: relative;\n}\n#insert-wiki-textarea-preview iframe {\n    border: 0;\n    height: 100%;\n    left: 0;\n    min-height: 100%;\n    overflow: hidden;\n    position: absolute;\n    top: 0;\n    width: 100%;\n}\n',""])},CxWt:function(e,t,n){var o=n("lB22");"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("cuK8")(o,a);o.locals&&(e.exports=o.locals)},"O/dN":function(e,t,n){(e.exports=n("PBB4")(!1)).push([e.i,".tc-aui-help-tip.aui-inline-dialog>.contents{-ms-box-sizing:border-box;box-sizing:border-box;padding:16px;position:relative}.tc-aui-help-tip.aui-inline-dialog .tc-helptip-body,.tc-aui-help-tip.aui-inline-dialog .tc-helptip-link,.tc-aui-help-tip.aui-inline-dialog .tc-helptip-title{margin-bottom:.5em}.tc-aui-help-tip.aui-inline-dialog .tc-helptip-body{color:#292929}.tc-aui-help-tip.aui-inline-dialog .tc-helptip-title{color:#292929;font-weight:400;margin:0}.tc-aui-help-tip.aui-inline-dialog .tc-helptip-body h3{margin-top:0}",""])},OGf2:function(e,t,n){var o=n("O/dN"),a=n("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return a(o,e)}},Q2fH:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c}));var o=n("jUyC");function a(e,t,n,a){return"function"==typeof a?Object(o.default)(e).bind(t,n,a):Object(o.default)(e).bind(t,n)}function r(e,t,n){return Object(o.default)(e).unbind(t,n)}function c(e,t,n){return Object(o.default)(e).trigger(t,n)}},"QEi/":function(e,t,n){"use strict";n.r(t);var o=n("M2LZ"),a=n("bfgX");const r="confluence.spa.editor";var c=n("cGYM");const i=(e,t)=>{Object.keys(t).forEach(e=>{t[e]=Object(c.a)(t[e])}),Object(a.b)("analytics",{name:"".concat(r,".plugins.").concat(e),data:t})};var l=n("WM+X"),s=n("jUyC"),d=n("Jygk"),u=n.n(d),f=n("Zf7T");function m(){const e=[],t={};let n,o;u.a.tinymce.Env.ie?(n="\ufeff{$caret}",o="<p>{$caret}</p>"):u.a.tinymce.Env.webKit?(n="\ufeff{$caret}<br>",o=n):(n="\ufeff{$caret}",o=n);const a={insertTextPlaceHolder(e){const t='<span class="text-placeholder">'.concat(n,"</span>");const o=Object(s.default)("<div></div>").append(t);e&&o.find(".text-placeholder").html(e),u.a.tinymce.activeEditor.execCommand("mceInsertContent",!1,o.html())},removePlaceholder(e){const t=u.a.tinymce.activeEditor,a=Object(s.default)(t.getBody());let r=n;const c=e.parentElement;"LI"===c.nodeName&&(r=o);const i=t.dom.create("span",{id:"placeholder-cursor"},"&nbsp;");c.replaceChild(i,e);const l=a.find("#placeholder-cursor")[0];t.selection.select(l.firstChild),t.dom.remove(l,!1),t.execCommand("mceInsertContent",!1,r)},addPlaceholderType(n){n&&n.type&&(e.push(n),t[n.type]=n)},getPlaceholderTypes:()=>[].concat(e),getPlaceholderType:e=>t[e]};return Object(f.b)().Placeholder=a,a}var p=n("JGxT");function g(){return{name:"textplaceholder",canHandleElement:e=>e.hasClass("text-placeholder"),handle(e){if("click"!==e.e.type&&"mouseup"!==e.e.type)return;const t=m.getPlaceholderTypes(),n=e.containerEl,o=Object(s.default)(n),a=o.attr("data-placeholder-type"),r=[];function c(e,t,n){return{className:"text-placeholder-property-panel-type-item text-placeholder-property-panel-type-".concat(e),text:t,tooltip:n,selected:a===e,click(){!function(e){"default"===e?o.removeAttr("data-placeholder-type"):o.attr("data-placeholder-type",e);const t=Object(s.default)(".text-placeholder-property-panel-type-".concat(e));t.parent().find(".text-placeholder-property-panel-type-item").removeClass("selected"),t.addClass("selected")}(e)}}}const i=c("default",u.a.tinymce.activeEditor.translate("property.panel.textplaceholder.display.default"),u.a.tinymce.activeEditor.translate("property.panel.textplaceholder.display.default.tooltip"));let l;i.selected=!a,r.push(i);for(let e=0,n=t.length;e<n;e++)l=t[e],r.push(c(l.type,l.label,l.tooltip));r.push(null),r.push({className:"text-placeholder-property-panel-remove-button",text:u.a.tinymce.activeEditor.translate("property.panel.textplaceholder.remove"),click(){u.a.Confluence.PropertyPanel.destroy(),m.removePlaceholder(o)}}),u.a.Confluence.PropertyPanel.createFromButtonModel("textplaceholder",n,r,{anchorIframe:Object(f.b)().getEditorFrame()})}}}function h(){const e=m(),t={click:!1,keypress:!0},n=u.a.tinymce.VK,o=u.a.tinymce.dom.Event,r="template"===p.a.get("content-type");function c(t){Object(a.b)("cursor-target-refresh"),Object(s.default)("#rte-button-insert-placeholder").click(t=>{t.preventDefault(),e.insertTextPlaceHolder()}),t.on("KeyPress",e=>{if(13===e.keyCode&&!e.shiftKey){const n=t.selection.getNode(),o=Object(s.default)(n).closest(".text-placeholder");if(o.length&&Object(f.b)().Cursor.isCursorAtEnd(t,t.selection.getRng(),n))return Object(f.b)().Cursor.insertParagraph(t,o,!0),u.a.tinymce.dom.Event.cancel(e)}},!0)}const i={UL:!0,OL:!0,LI:!0,TABLE:!0,TBODY:!0};function l(e){return!i[e.nodeName]}function d(r){function c(){const e=m();e&&r.selection.select(e)}function i(e){e.off("KeyDown",d),e.off("KeyPress",f),e.off("Click",f)}function d(t){const a=m();return t.keyCode===n.LEFT||t.keyCode===n.UP?(function(e,t){let n,o=t.previousSibling;for(;t&&!o;)o=(t=t.parentNode).previousSibling;if(o){for(n=o;!l(n)&&n.lastChild;)n=n.lastChild;e.selection.select(n.lastChild||n),e.selection.collapse(!1),e.selection.normalize()}}(r,a),o.cancel(t)):t.keyCode===n.RIGHT||t.keyCode===n.DOWN?(function(e,t){let n,o=t.nextSibling;for(;t&&!o;)o=(t=t.parentNode).nextSibling;if(o){for(n=o;!l(n)&&n.firstChild;)n=n.firstChild;e.selection.select(n.firstChild||n),e.selection.collapse(!0),e.selection.normalize()}}(r,a),o.cancel(t)):t.keyCode===n.BACKSPACE||t.keyCode===n.DELETE?(e.removePlaceholder(a),o.cancel(t)):void 0}function f(n){if(u.a.tinymce.Env.gecko&&!n.isChar&&"keypress"===n.type)return;const o=m();if(o){const r=o.getAttribute("data-placeholder-type");(function(n,o){const a=e.getPlaceholderType(n);return!!s.default.extend({},t,a&&a.activation)[o]})(r,n.type)&&(e.removePlaceholder(o),Object(a.b)("editor.text-placeholder.activated",{placeholderType:r||"",triggerEvent:n}))}}function m(){const e=Object(s.default)(r.getBody()).find(".text-placeholder.selected");return e.length?e[0]:(i(r),null)}r.on("NodeChange",(function(e){const t=e.element,n=Object(s.default)(t).closest(".text-placeholder");Object(s.default)(r.getBody()).find(".text-placeholder.selected").not(n).removeClass("selected"),n.length?(n.hasClass("selected")||(n.addClass("selected"),function(e){e.on("KeyDown",d,!0),e.on("KeyPress",f,!0),e.on("Click",f,!0)}(r)),setTimeout(c,0)):i(r)}),!0)}return{init(e){e.on("init",()=>{(r?c:d)(e),function(e){const t=Object(s.default)(e.getDoc()).find("head");s.default.browser.msie?t.append('<style type="text/css">.wiki-content .text-placeholder { display: inline; }</style>'):t.append('<style type="text/css">.wiki-content .text-placeholder { display: inline-block; }</style>')}(e)})},getInfo:()=>({longname:"Text Placeholder Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})}}var b=n("7LQG");let y=0;const C={updateNode(e,t){const n=u.a.tinymce.activeEditor,o=Object(s.default)(e,n.getDoc()),r="confluence.update-node-".concat(y++);Object(a.b)("synchrony.stop",{id:r});const c=C.prepareNodeForUpdate(o);return C.replaceNode(o,t).fail(c).always(()=>{Object(a.b)("synchrony.start",{id:r})}).promise()},storeNodeState(e,t){const n={};let o;for(let a=0,r=t.length;a<r;a++)o=t[a],n[o]=e.attr(o);return()=>{for(const t in n)e.attr(t,n[t])}},prepareNodeForUpdate(e){let t=null;return e.is("img")&&(t=C.storeNodeState(e,["width","height","src","class"]),e.addClass("image-hotswap").attr({src:"".concat(b.a,"/images/border/spacer.gif"),width:e.attr("width"),height:e.attr("height")})),t},replaceNode(e,t){const n=C.getDoc(),o=Object(s.default)(t,n),r=Object(s.default)(e,n),c="confluence.replace-node-".concat(y++);return Object(a.b)("synchrony.stop",{id:c}),s.default.Deferred((function(){const e=this;o.is("img")?(o[0].onload=function(){this.onload=null,e.resolve(this)},s.default.browser.opera&&(o[0].src=o.attr("src")),n.createDocumentFragment().appendChild(o[0])):e.resolve(o[0])})).always(()=>{Object(a.b)("synchrony.start",{id:c})}).done(e=>{r.replaceWith(e)}).promise()},replaceSelection(e){const t=u.a.tinymce.activeEditor,n=t.selection.getRng(!0),o=t.getDoc().createRange(),a=Object(s.default)(e).clone(!0,!1)[0];n.deleteContents(),3===n.startContainer.nodeType&&""===n.startContainer.nodeValue&&(n.startContainer.nodeValue=Object(f.b)().HIDDEN_CHAR),n.insertNode(a);const r=t.getDoc().createTextNode(Object(f.b)().HIDDEN_CHAR);t.dom.insertAfter(r,a);const c=r;return o.setStartBefore(c),o.setEndAfter(c),o.collapse(!1),t.selection.setRng(o),a},normalize(e){const t=u.a.tinymce.activeEditor,n=t.selection.getRng(!0);let o,a,r,c=[];e&&e.childNodes&&(u.a.tinymce.isWebKit?o=n:u.a.tinymce.isGecko&&(o=n.cloneRange(),a={startIndex:[...e.childNodes].indexOf(n.startContainer),startOffset:o.startOffset,endIndex:[...e.childNodes].indexOf(n.endContainer),endOffset:o.endOffset},(a.startIndex>-1||a.endIndex>-1)&&(c=function(e){const t=[];let n=0;return e.childNodes.forEach((e,o)=>{const a={},r=t[o-1]||{};a.isTextNode=3===e.nodeType,a.textNodesBefore=(a.isTextNode&&r.isTextNode?1:0)+~~r.textNodesBefore,a.precedingTextLength=n,n=a.isTextNode?n+e.nodeValue.length:0,t.push(a)}),t}(e))),e.normalize(),u.a.tinymce.isGecko&&((r=c[a.startIndex])&&(a.newStartIndex=a.startIndex-r.textNodesBefore,a.newStartOffset=a.startOffset+r.precedingTextLength,o.setStart(e.childNodes[a.newStartIndex],a.newStartOffset)),(r=c[a.endIndex])&&(a.newEndIndex=a.endIndex-r.textNodesBefore,a.newEndOffset=a.endOffset+r.precedingTextLength,o.setEnd(e.childNodes[a.newEndIndex],a.newEndOffset))),o&&t.selection.setRng(o))},getDoc:()=>s.default.browser.mozilla||s.default.browser.opera?document:u.a.tinymce.activeEditor.getDoc(),isolateSelectedRange(){const e=u.a.tinymce.activeEditor,t=C.getDoc(),n=e.selection,o=n.getRng(!0),a=o.startContainer,r=o.startOffset,c=o.endContainer;let i,l=o.endOffset;if(o.collapsed)return o;function d(n,o,a){let r,c=e.dom.getParent(n,e.dom.isBlock);c||(c=e.getBody());const i=function(e,n,o,a){let r,c,i=null,l=null;const d=a?"nextSibling":"previousSibling";if(r=0===n,!r&&a&&(r=3===e.nodeType?n===e.length:n===e.childNodes.length),r)for(i=e[d],l=e;null===i;){if(l===o)return;if(l.parentNode===o)break;l=l.parentNode,i=l[d]}else 3===e.nodeType?(c=e.data,e.data=c.slice(n),i=t.createTextNode(c.slice(0,n)),l=e,Object(s.default)(i).insertBefore(l),a&&(c=l,l=i,i=c)):(l=e.childNodes[n-(a?1:0)],i=l[d]);return[l,i]}(n,o,c,a);return r=i?i[1]?function(e,t,n,o){let a,r,c,i;for(;t!==n&&t.parentNode!==n;){if(r=t.parentNode,a=r.cloneNode(!1),o)for(Object(s.default)(a).insertAfter(r),c=e;c;)i=c.nextSibling,a.appendChild(c),c=i;else for(Object(s.default)(a).insertBefore(r),c=r.firstChild;c!==t;)i=c.nextSibling,a.appendChild(c),c=i;e=a,t=r}return t}(i[1],i[0],c,a):i[0]:void 0,r}a===c&&(i=l-r);const f=d(a,r);f&&o.setStartBefore(f),a!==o.startContainer&&(l=i||l);const m=d(c,l,!0);return m&&o.setEndAfter(m),n.setRng(o),o}};var w=C;var v=n("HvGa"),O=n.n(v);const x=e=>{const t=document.querySelector("meta[name=ajs-enabled-dark-features]");if(t){const n=t.content.split(",");return n.indexOf(e)>-1&&-1===n.indexOf("".concat(e,".disable"))}};var k=n("bQlP");function j(){let e=p.a.get("content-id");return+e||(e=p.a.get("page-id")),+e||(e="0"),e}function T(e){return e.closest(I).length>0}function E(e,t,n){T(e)&&(t.disable(),document.getElementById("rte-button-insert-table").setAttribute("data-tooltip",n.translate("tinymce.tablepicker.nested_table_unsupported")))}const I=x(k.d)?"BLOCKQUOTE, TABLE.confluenceTable, LI":null;function A(e){return Object(s.default)(e).hasClass("wysiwyg-macro")}function S(e,t){let n;if(e.macro&&e.contentId)n={type:"POST",url:"".concat(b.a,"/rest/tinymce/1/macro/placeholder"),contentType:"application/json; charset=utf-8",data:s.default.toJSON(e),dataType:"text"};else{if(!e.url||!e.type)throw new Error("illegal argument received: ".concat(e));n=e}const o=s.default.Deferred(),r=u.a.tinymce.activeEditor;let c;if(!t){const e="macro-".concat((new Date).getTime());c=r.dom.create("span",{id:e}),r.selection.setNode(c),t=c=r.dom.select("#".concat(e))[0],o.fail(()=>{Object(s.default)(c).remove()})}return s.default.extend(n,{timeout:this.DEFAULT_INSERT_MACRO_TIMEOUT}),O.a.Editor.UI.setButtonsState(!1),s.default.ajax(n).done((function(e){function n(e){return e&&e.parentNode}"<"!==e[0]&&(e=document.createTextNode(e)),n(t)?w.updateNode(t,e).done(t=>{o.resolve(t,e)}).fail(o.reject):o.rejectWith(this,arguments)})).fail((function(e,t,n){o.rejectWith(this,arguments)})),o.done((e,t)=>{O.a.Editor.UI.setButtonsState(!0),A(e)&&/P|H\d/.test(e.parentNode.nodeName)&&r.dom.split(e.parentNode,e),function(e){const t=u.a.tinymce.activeEditor,n=t.getDoc(),o=t.selection.getRng(!0);if(A(e)){!u.a.tinymce.isIE&&Object(s.default)("p, pre",e).each((e,t)=>{0===t.childNodes.length&&t.appendChild(n.createElement("br"))});const a=t.dom.select(".wysiwyg-macro-body",e)[0].firstChild;a&&(o.setStart(a,0),o.setEnd(a,0))}else o.setStartAfter(e),o.setEndAfter(e);t.selection.setRng(o)}(e),r.nodeChanged(),Object(f.b)().showElement(e),r.selection.onSetContent.dispatch(r.selection,{content:t,format:"html"}),u.a.tinymce.activeEditor.undoManager.add(),Object(a.b)("macro-browser.macro-inserted")}).fail(()=>{O.a.Editor.UI.setButtonsState(!0)}),o.promise()}const M={DEFAULT_INSERT_MACRO_TIMEOUT:5e3,insertMacro:S,isInMacro:e=>(e.jquery?e:Object(s.default)(e)).closest(".wysiwyg-macro").length>0,updateMacro:(e,t,n,o)=>S({contentId:j(),macro:{name:n,params:e,body:t||""}},o)};var B=M;const N={storedRange:null,bookmark:null,getCurrentNode:()=>Object(s.default)(u.a.tinymce.activeEditor.selection.getNode()),isMacroDiv:e=>Object(s.default)(e).hasClass("wysiwyg-macro"),isMacroTag(e){const t=Object(s.default)(e);return t.hasClass("wysiwyg-macro")||t.hasClass("editor-inline-macro")},isBodylessMacro:e=>Object(s.default)(e).hasClass("editor-inline-macro"),isMacroWithBody:e=>Object(s.default)(e).hasClass("wysiwyg-macro"),isMacroStartTag:e=>Object(s.default)(e).hasClass("wysiwyg-macro-starttag"),isMacroEndTag:e=>Object(s.default)(e).hasClass("wysiwyg-macro-endtag"),isMacroBody:e=>Object(s.default)(e).hasClass("wysiwyg-macro-body"),hasMacroBody:e=>"true"==Object(s.default)(e).attr("macrohasbody"),getNestingMacros(e){const t=Object(s.default)(e||N.getCurrentNode()),n=[];return t.parents(".wysiwyg-macro").each((e,t)=>{n.push(Object(s.default)(t).attr("data-macro-name"))}),n},logMCESelection(e){u.a.tinymce.activeEditor.selection},getSelectedMacro(){const e=N.getCurrentNode();return N.isMacroDiv(e)?e:B.isInMacro(e)},openMacro(e){O.a.MacroBrowser.open({selectedMacro:e,onComplete:N.macroBrowserComplete,onCancel:N.macroBrowserCancel})},editMacro(e){const t=Object(s.default)(e);N.editedMacroDiv=t[0];const n=u.a.tinymce.activeEditor.serializer.serialize(t.clone()[0],{forced_root_block:!1});u.a.tinymce.activeEditor.selection.select(t[0]),Object(f.b)().BookmarkManager.storeBookmark(),s.default.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"".concat(b.a,"/rest/tinymce/1/macro/definition"),data:s.default.toJSON({contentId:j(),macroHtml:n}),dataType:"text",success(e){N.openMacro(s.default.secureEvalJSON(e))}})},macroBrowserToolbarButtonClicked(e){const t=u.a.tinymce.activeEditor,n=N.getCurrentNode();Object(f.b)().BookmarkManager.storeBookmark();const o=s.default.extend({presetMacroName:null,nestingMacros:N.getNestingMacros(n),onComplete:N.macroBrowserComplete,onCancel:N.macroBrowserCancel,mode:"insert",selectedHtml:"",selectedText:""},e);if(e&&!e.ignoreEditorSelection&&(o.selectedHtml=t.selection.getContent(),o.selectedText=t.selection.getContent({format:"text"})),"function"!=typeof O.a.MacroBrowser.Model.addMacro)return O.a.MacroBrowser.open(o);if(o.presetMacroMetadata)O.a.MacroBrowser.open(o);else if(o.presetMacroName){const e=O.a.MacroBrowser.getMacroMetadata(o.presetMacroName);e?(o.presetMacroMetadata=e,O.a.MacroBrowser.open(o)):O.a.MacroBrowser.Rest.fetchMacroMetadataDetails({id:o.presetMacroName,successCallback:e=>{e&&e.details?(O.a.MacroBrowser.Model.addMacro(e.details),o.presetMacroMetadata=O.a.MacroBrowser.getMacroMetadata(o.presetMacroName),O.a.bind("reset.complete",(function e(){O.a.MacroBrowser.open(o),O.a.unbind("reset.complete",e)})),O.a.trigger("reset.rte")):O.a.MacroBrowser.open(o)},errorCallback:e=>{console.log("AJS.MacroBrowser.Rest.fetchMacroMetadataDetails ERROR",e)}})}else O.a.MacroBrowser.open(o)},macroBrowserComplete(e){const t={contentId:p.a.get("content-id")||"0",macro:{name:e.name,params:e.params,defaultParameterValue:e.defaultParameterValue,body:e.bodyHtml}};Object(f.b)().BookmarkManager.restoreBookmark(),N.editedMacroDiv?(B.insertMacro(t,N.editedMacroDiv),delete N.editedMacroDiv):B.insertMacro(t)},macroBrowserCancel(){Object(f.b)().BookmarkManager.restoreBookmark(),N.editedMacroDiv=null,N.editedMacro=null}};var R=N;function _(e){return e&&3===e.nodeType&&0===e.nodeValue.length}var P={isCursorAtStartOf(e,t){return t.collapsed&&this.isRangeAtStartOf(e,t)},isRangeAtStartOf(e,t){if(!t||!t.startContainer)throw new Error("range is invalid. received: ".concat(t));if(!e||!e.nodeType)throw new Error("context is invalid. received: ".concat(e));const n=t.startContainer;let o;if(3===n.nodeType){if(0!==t.startOffset)return!1;o=n}else if(o=n.childNodes[t.startOffset],void 0===o&&n.childNodes.length>0)return!1;const a=new u.a.tinymce.dom.TreeWalker(o,e);let r;do{r=a.prev(!0)}while(_(r));return void 0===r},isCursorAtEndOf(e,t){return t.collapsed&&this.isRangeAtEndOf(e,t)},isRangeAtEndOf(e,t){if(!t||!t.endContainer)throw new Error("range is invalid. received: ".concat(t));if(!e||!e.nodeType)throw new Error("container is invalid. received: ".concat(e));const n=t.endContainer;let o;if(3===n.nodeType){if(t.endOffset!=n.nodeValue.length)return!1;o=n}else o=n.childNodes[0===t.endOffset?t.endOffset:t.endOffset-1];const a=new u.a.tinymce.dom.TreeWalker(o,e);let r;do{r=a.next(!0)}while(_(r));return void 0===r||"BR"===r.nodeName&&void 0===a.next(!0)},setCursorAtStartOfContents(e){if(!e)throw new Error("element is required.");if(1!==e.nodeType&&3!==e.nodeType)throw new Error("invalid argument: expected a DOM element or text node, got: ".concat(e));const t=u.a.tinymce.activeEditor,n=t.dom.createRng();["br","img"].includes(e.nodeName.toLowerCase())?(n.setStartBefore(e),n.setEndBefore(e),t.selection.setRng(n)):(t.selection.select(e,!0),t.selection.collapse(!0))}};function H(e,t){return"undefined"!=typeof document&&document.addEventListener?document.addEventListener(e,t):null}n("CxWt");const D=()=>{const e=u.a.Confluence.PropertyPanel,t=[];return Object(a.a)("add-handler.property-panel",(e,n)=>{n&&t.push(n)}),{init:n=>{const o=()=>!!e.current;let r;const c=(r,c)=>{const i={focusedEl:c,focusedNodeName:c.nodeName&&c.nodeName.toLowerCase(),ed:n,e:s.default.extend({},r)},l=(e=>{if(e.is("img"))return e[0];const t=e.closest("a,table,.wysiwyg-macro,.editor-inline-macro,.text-placeholder");return t.length?t[0]:""})(Object(s.default)(c)),d=!!Object(s.default)(c).closest("table:not(.wysiwyg-macro,.editor-inline-macro)").length;const u=!!Object(s.default)(".toolbar-contextual").length;if(i.containerEl=l,Object(a.b)("user-blurred-rte-element",i),l&&!(e=>"click"==e.type&&(e.which?3===e.which:e.button?2==e.button:void 0))(r)&&!o()&&e.shouldCreate)for(let e=0,n=t.length;e<n;e++)if(t[e].canHandleElement(Object(s.default)(l))){if(u||!d)return t[e].handle(i);(e=>{H("shown.contextToolbar",()=>{e.handle(i)})})(t[e])}};function i(e,t){c(e,t.elem)}function l(t,n){o()&&(!n.containerEl||e.current.hasAnchorChanged(n.containerEl)?e.destroy():Object(a.b)("same-anchor.property-panel"))}function d(){setTimeout(()=>{Object(f.b)().bindScroll("property-panel",()=>{e.destroy()})},0),Object(s.default)(n.getDoc()).bind("keydown.property-panel.escape",t=>{27===t.keyCode&&o()&&e.destroy()})}function m(){Object(f.b)().unbindScroll("property-panel"),Object(s.default)(n.getDoc()).unbind("keydown.property-panel.escape")}u.a.tinymce.Env.ie&&n.on("MouseDown",e=>{r&&r.unbind("mouseup.IEDragHandlesWorkaround"),r=Object(s.default)(e.target),r.filter("img, table").bind("mouseup.IEDragHandlesWorkaround",()=>{c(n,e,e.target)})}),n.on("Click",e=>{c(e,e.target)}),n.on("KeyUp",e=>{27!==e.keyCode&&c(e,n.selection.getNode())},!0),n.on("ContextMenu",()=>{e.destroy()}),Object(a.a)("trigger.property-panel",i),Object(a.a)("user-blurred-rte-element",l),Object(a.a)("created.property-panel",d),Object(a.a)("destroyed.property-panel",m),n.on("Remove",()=>{Object(a.c)("trigger.property-panel",i),Object(a.c)("user-blurred-rte-element",l),Object(a.c)("created.property-panel",d),Object(a.c)("destroyed.property-panel",m)})},getInfo:()=>({longname:"Image, Link and Macro Property Panels",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}};let L;const F=()=>{const e=u.a.tinymce.DOM.getViewPort(u.a.tinymce.activeEditor.getWin());return{scrollX:e.x,scrollY:e.y}},z=e=>{if(e){u.a.tinymce.activeEditor.getWin().scrollTo(e.scrollX,e.scrollY)}},W={storeBookmark:()=>{const e=u.a.tinymce.activeEditor,t=F();let n;e.focus();const o=e.selection.getRng();n=o.cloneRange&&"function"==typeof o.cloneRange?o.cloneRange():o.duplicate&&o.duplicate()||o,L={scrollX:t.scrollX,scrollY:t.scrollY,range:n}},restoreBookmark:()=>{const e=u.a.tinymce.activeEditor.selection,t=u.a.tinymce.activeEditor.getWin();L&&(z(L),t.focus(),e.setRng(L.range)),L=null},getScroll:F,restoreScroll:z};var K=W;n("VRGO");const $=/^\u200b?(\[)$/;function U(e){return e.dom.getParent(e.selection.getStart(),"UL,OL")}function V(e){return!(!e||"ul"!==e.nodeName.toLowerCase()||!e.classList.contains("inline-task-list"))}function q(e){return e&&"ul"===e.nodeName.toLowerCase()&&!V(e)}function G(e){if(e&&e.classList.contains("inline-task-list")){e.classList.remove("inline-task-list"),e.removeAttribute("data-inline-tasks-content-id"),Array.prototype.slice.call(e.children).forEach(e=>{e.removeAttribute("data-inline-task-id"),e.classList.remove("checked")})}}var J=n("dHP6");var X=e=>{e.addCommand("confInsertTable",(t,n)=>{((e,t,n,o)=>{const a=u.a.tinymce.Env;let r,c,i,l,s;const d=a.ie&&a.ie<10?"&nbsp;":'<br data-mce-bogus="1">';for(i='<table id="__mce" class="confluenceTable"><tbody>',r=0;r<n;r++){const e=0===r&&o,n=e?"confluenceTh":"confluenceTd";for(i+="<tr>",c=0;c<t;c++)i+=e?"<th class=".concat(n,">").concat(d,"</th>"):"<td class=".concat(n,">").concat(d,"</td>");i+="</tr>"}i+="</tbody></table>",e.undoManager.transact(()=>{e.insertContent(i),l=e.dom.get("__mce"),e.dom.setAttrib(l,"id",null),e.$("tr",l).each((t,n)=>{e.fire("newrow",{node:n}),e.$("th,td",n).each((t,n)=>{s=s||n,e.fire("newcell",{node:n})})}),e.dom.setAttribs(l,e.settings.table_default_attributes||{}),e.dom.setStyles(l,e.settings.table_default_styles||{})}),e.selection.select(s,!0),e.selection.collapse(!0)})(e,n.cols,n.rows,n.heading),Object(J.b)("insert.table")})};function Q(){return Object(s.default)("#table-highlight-group").attr("data-highlight-colour")||""}function Y(e,t,n){if(!t.length)return;const o=function(e,t){const n=Object(s.default)(e.selection.getNode());return!!n.length&&(n[0]===t[0]||!!n.closest(t).length)}(e,t),a=t[0],r=a.ownerDocument.createElement(n),c=a.attributes;for(let e=0,t=c.length;e<t;e++){const t=c[e];r.setAttribute(t.nodeName,t.nodeValue)}for(;a.hasChildNodes();)r.appendChild(a.firstChild);return a.parentNode.replaceChild(r,a),o&&(e.selection.select(r,!0),e.selection.collapse()),Object(s.default)(r)}var Z={convertToNormalCells(e,t){t.filter("th").each((function(){let t=Object(s.default)(this);t=Y(e,t,"td"),t.removeClass("confluenceTh"),t.addClass("confluenceTd")}))},convertToHeadingCells(e,t){t.filter("td").each((function(){let t=Object(s.default)(this);t=Y(e,t,"th"),t.removeClass("confluenceTd"),t.addClass("confluenceTh")}))},areCellsHeadings(e){const t=e.filter("th").length;return e.length===t},isColumnHeading(e,t){const n=Object(s.default)(e).children("tbody").children("tr");return 1!==n.length&&n.children().filter("th:nth-child(".concat(t,")")).length===n.length},areCellsHighlighted(e){const t=e.filter("td[data-highlight-colour],th[data-highlight-colour]"),n=t.length;return e.length===n&&function(e){const t=Q();let n,o,a;for(n=0,o=e.length;n<o;n++)if(a=e.eq(n).attr("data-highlight-colour")||"",a!==t)return!1;return!0}(t)},isColumnHighlighted(e,t){const n=Object(s.default)(e).children("tbody").children("tr").children("th,td").nthCol(t),o=n.filter("td[data-highlight-colour],th[data-highlight-colour]").length;if(n.length!==o)return!1;const a=n.eq(0).attr("data-highlight-colour");for(let e=1,t=n.length;e<t;e++)if(a!==n.eq(e).attr("data-highlight-colour"))return!1;return!0},getSelectedHighlightColour:Q};function ee(e){let t=0;e.find(">tbody >tr").each((function(){let e=0;Object(s.default)(this).find(">th,>td").each((function(){const t=Object(s.default)(this);t.attr("colspan")?e+=parseInt(t.attr("colspan")):e++})),e>t&&(t=e)}));let n=e.find(">colgroup");const o=n.find("col"),a=o.length;if(a===t)return;const r=n.length>0;if(r||(n=Object(s.default)("<colgroup>")),t>a)for(let e=0;e<t-a;e++){const e=Object(s.default)("<col>");n.append(e)}else for(let e=0;e<a-t;e++)o.last().remove();return r||e.prepend(n),n}function te(e,t,n){let o=e.find(">colgroup>col");0===o.length&&(ee(e),o=e.find(">colgroup>col"));const a=o.length;let r,c,i;const l=e.find(">thead>tr,>tbody>tr,>tr");for(let e=0;e<l.length;e++)if(a===l.eq(e).find(">th, >td").length){r=l.eq(e);break}if(r)c=r.find(">th, >td");else{const t=Object(s.default)("<tr>");i=Object(s.default)("<tfoot>"),i.append(t);for(let e=0;e<a;e++)t.append(Object(s.default)("<td>"));e.append(i),c=t.find(">td")}const d=e.outerWidth()-1,f=[],m=[];for(let e=0;e<a;e++){const n=c.eq(e),o=n[0].getBoundingClientRect(),a=t?"".concat(o.width/d*100,"%"):n.outerWidth();f[e]=a,m[e]=o}let p=0;u.a.tinymce.activeEditor&&(p=u.a.tinymce.activeEditor.getWin().pageXOffset);for(let e=0;e<a;e++)o.eq(e).attr("data-resize-pixel",m[e].width).attr("data-resize-percent",m[e].width/d*100).attr("data-offset-left",m[e].left+p).attr("data-offset-right",m[e].right+p).removeAttr("data-mce-style"),(!n||e===n.index()&&e===n.next().index())&&o.eq(e).css({width:f[e]});i&&i.remove(),e.removeAttr("data-mce-style")}function ne(e,t,n){const o={};let a=!1;const r=t.find("body");return n.each((function(){const t=Object(s.default)(this);se(t)&&t.find("th, td").each((function(){if(o[t])return;const n=Object(s.default)(this),c=n.offset().left+n.innerWidth();Math.abs(c-parseInt(e.attr("data-offset-right")))<=0&&(o[t]=!0,a=!0,function(e,t){Object(s.default)('<div contenteditable="false" class="resize-alignment-bar">').css({top:ae(e[0],r[0]),left:t,height:e.height()}).appendTo(r)}(t,c))}))})),a}function oe(e){e.find(".resize-alignment-bar").remove()}function ae(e,t){return parseInt(e.getBoundingClientRect().top-t.getBoundingClientRect().top,10)}const re=function(e){const t={$doc:Object(s.default)(u.a.document)},n=this;let o=n.data("uuid");if(n.data("initialized"))return;o||(o=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())}(),n.data("uuid",o)),e=s.default.extend(t,e||{});const r=e.$doc,c=e.editor,i=r.find("body");let l,d,f,m,g,h,b=!1,y=-1,C=!1;let w,v,O,k=Object(s.default)('<div contenteditable="false" class="synchrony-exclude" id="resize-indicator">');const j=Object(s.default)('<div contenteditable="false" class="synchrony-exclude resize-width-holder" unselectable="on">');let T,E=!1;function I(e,t,o){f||(f=l.width()),l.attr("data-mce-style")&&l.removeAttr("data-mce-style");let a=!1;if(v){const t=e-v,o=n.parent().width(),r=n.width()/o*100;le(n)&&r>99.9&&t>1&&(a=!0,!g&&(g=l.width()+l.next().width()));const c=Math.abs(Math.abs(e)-Math.abs(v));if(c>=7&&(w=!1),w&&c<7)return}let c=f+e;if(c<29&&(c=29),l.width(c),(a||m)&&(l.next().width(g-c),!m&&(m=o.pageX)),m&&m>o.pageX&&(m=null),te(n,!1,l),!C&&t&&(k.css({display:"block",top:ae(n[0],i[0]),left:parseInt(l.attr("data-offset-right"))-1,height:n.height()}),se(n))){const e=ne(l,r,O)||function(e,t,n){let o;return Math.abs(parseInt(e.next().attr("data-resize-pixel"))-parseInt(e.attr("data-resize-pixel")))<=1&&(o=!0,n.find(".resizable-align-right").remove(),Object(s.default)('<div contenteditable="false" class="resize-alignment-bar resizable-align-right">').css({height:t.height(),top:ae(t[0],n[0]),left:parseInt(e.next().attr("data-offset-right"))-1}).appendTo(n).clone().css({left:parseInt(e.attr("data-offset-left"))-1}).appendTo(n)),Math.abs(parseInt(e.prev().attr("data-resize-pixel"))-parseInt(e.attr("data-resize-pixel")))<=1&&(o=!0,Object(s.default)('<div contenteditable="false" class="resize-alignment-bar">').css({height:t.height(),top:ae(t[0],n[0]),left:parseInt(e.prev().attr("data-offset-right"))-1}).appendTo(n).clone().css({left:parseInt(e.prev().attr("data-offset-left"))-1}).appendTo(n)),o}(l,n,i);e&&(w=!0),!e&&oe(i)}v=Math.abs(e)}const A=function(){k.remove(),n.removeClass("active-resizable"),E=!1,w=void 0,m=null,g=null,i.attr("data-table-resizing",!1)},S=function(e){r.find("#resize-indicator").length>0?k=r.find("#resize-indicator"):k.appendTo(i),n.addClass("active-resizable"),k.css({top:ae(n[0],i[0]),left:e,height:n.height()}),E=!0},M=function(e){i.outerWidth(!0)!==i[0].scrollWidth&&(e&&ie(n),i.find("#".concat(o,"-holder")).length||(j.css("width",n.width()+parseInt(Object(s.default)(c.getBody()).css("margin-right"))),j.attr("id","".concat(o,"-holder")),n.after(j)))};function B(e){l&&E&&(T=se(n)?"fixed":le(n)?"relative":"fluid",b=!0,te(n),n.updateTableModeInToolbar(),x("confluence.table.resizable.relative.keep.width")&&l.next().length||n.css({width:""}),d=e.pageX,n[0].setCapture&&n[0].setCapture(),r.find("body").attr("data-table-resizing",!0),f=parseInt(l.width(),10),O=function(e){const t=e.nextAll(".confluenceTable").first(),n=e.prevAll(".confluenceTable").first();return s.default.merge(n,t)}(n),e.preventDefault())}return n.on("mousemove.table-resizable".concat(o),"th, td",(function(e){if(b)return;if(Object(s.default)(this).parents("table.confluenceTable").length>1)return;if(de(n)&&x("confluence.table.resizable.hide-indicator-on-fluid"))return;ee(n);const t=Object(s.default)(this),o=t.offset().left;let a;const r=Math.round(k.outerWidth()/2);let c=t.index();const i=t.parent().children();y=-1;const d=t.closest("tr").index();if(t.closest("table.confluenceTable tr").prevAll("tr").each((function(){const e=Object(s.default)(this),n=e.index();e.children("td, th").each((function(){if(t.offset().left>Object(s.default)(this).offset().left){const e=parseInt(Object(s.default)(this).attr("colspan")),t=parseInt(Object(s.default)(this).attr("rowspan"));e&&t?n+t>d&&(c+=e):t&&n+t>d&&(c+=1)}}))})),C=!1,e.pageX-t.offset().left<t.outerWidth()/2){if(c-=1,0===c&&t.prev().hasClass("numberingColumn"))return;if(c<0){C=!0;const e=i.eq(0);e.attr("colspan")?y+=parseInt(e.attr("colspan")):y++}else for(let e=0;e<=c;e++){const t=i.eq(e);t.attr("colspan")?y+=parseInt(t.attr("colspan")):y++}a=C?o+t.outerWidth()-r:o-r}else{if(0===c&&t.hasClass("numberingColumn"))return;for(let e=0;e<=c;e++){const t=i.eq(e);t.attr("colspan")?y+=parseInt(t.attr("colspan")):y++}a=o+t.outerWidth()-r}l=t.closest("table").find("col").eq(y),function(){if(Math.abs(h-a)<=1)if(E){if(Math.abs(e.pageX-a-r)<=4)return;A()}else{if(!(Math.abs(e.pageX-a-r)<=4))return;S(a)}else Math.abs(e.pageX-a-r)<=4?S(a):A()}(),h=a,se(n)&&M()})),n.on("mousedown.table-resizable".concat(o),e=>{B(e)}),n.on("mouseout.table-resizable".concat(o),()=>{b||A()}),r.on("keypress.table-resizable".concat(o),()=>{E&&A()}),r.on("mousemove.table-resizable".concat(o),(function(e){b&&(Object(a.b)("synchrony.stop",{id:"confluence.table-resize-plugin"}),I(e.pageX-d,!0,e),e.preventDefault())})),r.on("mouseup.table-resizable".concat(o),(function(){b&&(n[0].releaseCapture&&n[0].releaseCapture(),b=!1,A(),oe(r),ie(n),l&&l.width()!==f&&(de(n)&&n.addClass("relative-table"),Object(a.b)("analytics",{name:"confluence.table.resize.from.".concat(T),data:{pageId:p.a.get("page-id")}})),le(n)&&ce(n),se(n)&&M(!0),c&&(c.undoManager.add(),Object(a.b)("synchrony.start",{id:"confluence.table-resize-plugin"})))})),n.data("initialized",!0),this};let ce=function(e){const t=e.parent().width();let n=e.width()/t*100;return n>100&&(n=100),e.css({width:"".concat(n,"%")}).attr("data-resize-percent",n),function(e){te(e,!0)}(e),e},ie=function(e){return e.parent("body").find("#".concat(e.data("uuid"),"-holder")).remove(),e},le=function(e){return e.hasClass("relative-table")},se=function(e){return e.hasClass("fixed-table")},de=function(e){return!le(e)&&!se(e)};const ue=function(e){const t={$doc:Object(s.default)(u.a.document)},n=(e=s.default.extend(t,e||{})).$doc,o=this.data("uuid");return n.find("#resize-indicator").remove(),this.off("mousemove.table-resizable".concat(o)),this.off("mouseout.table-resizable".concat(o)),this.off("mousedown.table-resizable".concat(o)),n.off("keypress.table-resizable".concat(o)),n.off("mousemove.table-resizable".concat(o)),n.off("mouseup.table-resizable".concat(o)),this.data("initialized",!1),this},fe=function(){return ie(Object(s.default)(this)).removeClass("relative-table fixed-table").removeAttr("style").find(">colgroup").remove(),this},me=function(){const e=Object(s.default)(this);return ie(e),function(e){return te(e),e}(e).css("width","").removeClass("relative-table").addClass("fixed-table"),this},pe=function(){if(this.parent().closest("table.confluenceTable").length)return Object(s.default)("#table-mode-picker .dropdown-text").text(u.a.tinymce.activeEditor.translate("tinymce.table.responsive")),void Object(s.default)("#table-mode-picker .aui-dd-parent").addClass("disabled");Object(s.default)("#table-mode-picker .aui-dd-parent").removeClass("disabled"),se(this)?Object(s.default)("#table-mode-picker .dropdown-text").text(u.a.tinymce.activeEditor.translate("tinymce.table.fixed_width")):Object(s.default)("#table-mode-picker .dropdown-text").text(u.a.tinymce.activeEditor.translate("tinymce.table.responsive"))},ge=function(e,t,n){if(!n&&!n.content)return;const o=Object(s.default)("<div/>").append(n.content);o.find("table.confluenceTable.relative-table, table.confluenceTable.relative-table > colgroup > col").each((function(){var e;(e=Object(s.default)(this)).data("resize-percent")?e.css({width:"".concat(e.data("resize-percent"),"%")}):e.attr("style",e.data("mce-style"))})),n.content=o.html()},he=function(e){const t=Object(s.default)(e.getWin().document);function n(){t.find("table.confluenceTable").each((function(){Object(s.default)(this).removeTableResizable({$doc:t})})),t.find("#resize-indicator").remove(),t.find(".resize-width-holder").remove(),Object(s.default)(e.getBody()).removeAttr("data-table-resizing")}return e.on("Change",()=>{const n=e.selection.getNode(),o=Object(s.default)(n).parent().closest("table.confluenceTable").not("table.confluenceTable table.confluenceTable");o.is(".confluenceTable")&&o.removeTableResizable({$doc:t}).tableResizable({$doc:t,editor:e,force:!0})}),Object(a.a)("confluence.editor.on.save",n),e.on("Remove",()=>{Object(a.c)("confluence.editor.on.save",n)}),t.on("mousemove","table.confluenceTable",(function(){const n=Object(s.default)(this);n.parents("table.confluenceTable").length||n.data("initialized")||n.tableResizable({$doc:t,editor:e})})),u.a.tinymce.isWebKit&&Object(s.default)(u.a.document).bind("prePaste",ge),u.a.tinymce.Env.ie&&Object(s.default)('<style type="text/css"></style>').html(".confluenceTable td, .confluenceTable th {overflow: hidden !important;}.confluenceTable .content-wrapper {overflow-x : visible !important}").appendTo(t.find("head")),this};var be=e=>{x("confluence.table.resizable")&&(s.default.fn.tableResizable=re,s.default.fn.removeTableResizable=ue,s.default.fn.toggleFluidColumnWidth=fe,s.default.fn.toggleFixedColumnWidth=me,s.default.fn.updateTableModeInToolbar=pe,e.on("init",()=>{he(e)}))};var ye=e=>{function t(e){let t;n(e),Z.getSelectedHighlightColour()&&(t=Z.getSelectedHighlightColour(),e.attr("data-highlight-colour",t),e.addClass("highlight-".concat(t)))}function n(e){let t,n,o;for(t=0,n=e.length;t<n;t++)o=e.eq(t),o.attr("data-highlight-colour")&&o.removeAttr("data-highlight-colour"),o[0].className=o[0].className.replace(/( |^)highlight(-\w+)+/g,"")}e.on("init",(function(){const o=function(e){return Object(s.default)(e.selection.getNode()).closest("th.confluenceTh,td.confluenceTd")},a=function(e){const t=Object(s.default)(e.getBody()).find("th.confluenceTh.mceSelected,td.confluenceTd.mceSelected");return t.length?t:o(e)},r=function(e){return 0===e.find("tbody > tr > td").length};function c(e){return Object(s.default)(e).parents("table").is(".confluenceTable")}function i(t){if(9===t.keyCode){const n=e.selection.getNode();if(c(n)&&!function(t){const n=e.dom.getParent(t,"UL,OL,TR").tagName;return"UL"===n||"OL"===n}(n)){const n=t.shiftKey?"mceTableMoveCaretToPrevCell":"mceTableMoveCaretToNextCell";return e.execCommand(n),t.preventDefault(),!1}}}e.addCommand("confTableRowToggleHeading",(function(){const t=function(e){let t=Object(s.default)(e.getBody()).find("td.mceSelected,th.mceSelected");t.length||(t=Object(s.default)(e.selection.getNode()));let n=t.closest("tr"),o=n.parent(),a=o.is("tbody")?n.parent().parent():o;for(;0!==n.length&&!a.is(".confluenceTable");)n=a.closest("tr"),o=n.parent(),a=o.is("tbody")?n.parent().parent():o;return n}(this);let n=t.children("td,th"),o=0;Z.areCellsHeadings(n)?(r(t.closest("table"))||(n=n.filter((function(){const e=Object(s.default)(this),t=e.closest("table");return o+=e.attr("colspan")||1,!Z.isColumnHeading(t,o)}))),Z.convertToNormalCells(e,n)):Z.convertToHeadingCells(e,n)})),e.addCommand("confTableColumnToggleHeading",(function(){let t=function(e){let t=Object(s.default)([]);return e.each((function(){const e=Object(s.default)(this),n=e.index()+1,o=e.closest("table.confluenceTable").children("tbody").children("tr");t=t.add(o.children().nthCol(n))})),t}(a(this));Z.areCellsHeadings(t)?(r(t.closest("table"))||(t=t.filter((function(){const e=Object(s.default)(this).parent("tr").children(),t=e.filter("th");return e.length!==t.length}))),Z.convertToNormalCells(e,t)):Z.convertToHeadingCells(e,t)})),e.addCommand("confTableSelectionToggleHighlight",(function(e,o){const r=o&&o.alwaysHighlight,c=a(this);Z.areCellsHighlighted(c)&&!r||Object(s.default)("#table-highlight-group").attr("data-remove-highlight")?n(c):t(c)})),(u.a.tinymce.isIE8||x("confluence-table-enhancements.auto-row"))&&e.on("KeyDown",(function(t){function n(t,n){const o=e.selection.getRng(!0),a=o.startContainer;if(o.collapsed){const e=function(e,t,n){for(;e!=t;){if(e[n])return!1;e=e.parentNode}return!0}(a,t,n);return 3===a.nodeType?e&&o.startOffset==("nextSibling"==n?a.length:0):a==t?o.startOffset==("nextSibling"==n?a.childNodes.length-1:0):e}return!1}if((37===t.keyCode||39===t.keyCode)&&!t.shiftKey){const a=o(this);if(a.length){const o=a[0];if(37===t.keyCode&&n(o,"previousSibling")&&!function(){const t=e.selection.getNode();return Object(s.default)(t).parents("table").first().find("tr:first-child").children().first()[0]==t}())return e.execCommand("mceTableMoveCaretToPrevCell"),u.a.tinymce.dom.Event.cancel(t);if(39===t.keyCode&&n(o,"nextSibling")&&!function(){const t=e.selection.getNode();return Object(s.default)(t).parents("table").first().find("tr:last-child").children().last()[0]==t}())return e.execCommand("mceTableMoveCaretToNextCell"),u.a.tinymce.dom.Event.cancel(t)}}})),e.on("KeyDown",t=>{i(t),x("editor.spa.uxenhancements")||function(t){if(!t.altKey||38!==t.keyCode&&40!==t.keyCode)return;const n=e.selection.getRng(!0),o=Object(s.default)(n.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent");if(0===o.length)return;e.execCommand(38===t.keyCode?"mceTableInsertRowBefore":"mceTableInsertRowAfter");let a=o.parent()[38===t.keyCode?"prev":"next"]().find("td:first-child")[0];const r=Object(s.default)(a);r.hasClass("numberingColumn")&&(a=r.next()[0]),n.setStart(a,0),n.setEnd(a,0),e.selection.setRng(n),t.preventDefault()}(t)}),x("confluence-table-enhancements.auto-row")&&(e.on("Click",(function(){const t=o(this);t.hasClass("numberingColumn")&&!t.hasClass("confluenceTh")&&e.execCommand("mceTableMoveCaretToNextCell")})),e.on("KeyDown",(function(t){if((38===t.keyCode||40===t.keyCode)&&c()&&o(this).hasClass("numberingColumn"))return e.execCommand("mceTableMoveCaretToNextCell"),t.preventDefault(),!1}),!0))})),x("confluence-table-enhancements.auto-row")&&e.on("init",(function(){Object(s.default)(u.a.tinymce.activeEditor.getBody()).find(".confluenceTd.numberingColumn").attr("contenteditable","false")}))},Ce=e=>{const t=/([\+\-]?\d*)[nN]([\+\-]?\d*)/;let n,o;e.fn.nthCol=function(a){return o=function(e){let n=[];const o={multiplier:0,offset:0};return"even"===e?e="2n":"odd"===e?e="2n+1":/^\d*$/.test(e)&&(e="0n+".concat(e)),n=t.exec(e),null!==n&&(o.multiplier=n[1]-0,o.offset=n[2]-0),o}(a),n=function(t){let n,o,a=[],r=0;const c=[];return e.each(t,(e,t)=>{let i=0,l=0;const s=t.rowSpan||1,d=t.colSpan||1;for(t.parentNode!==n&&(n=t.parentNode,n.parentNode!==o&&(o=n.parentNode,a=[]),r=0,void 0===a[n.rowIndex]&&(a[n.rowIndex]=[])),i=0;i<a[n.rowIndex].length+1;i+=1)if(void 0===a[n.rowIndex][i]){r=i;break}for(c[e]=r,i=n.rowIndex;i<n.rowIndex+s;i+=1)for(void 0===a[i]&&(a[i]=[]),l=r;l<r+d;l+=1)a[i][l]=!0}),c}(this),e(this).filter((function(e){return function(e,t,a){const r=n[a]-(o.offset-1);return 0===o.multiplier?0===r:r%o.multiplier==0&&r/o.multiplier>=0}(0,0,e)}))}},we=()=>{const e=u.a.tinymce.each,t=u.a.AJS.storageManager;Ce(s.default);const n=t("atlassian.editor","tables");let o;function a(e,t){return parseInt(e.getAttribute(t)||1)}function r(t,n,r){let c,i,l,d,f;p();function m(e,t){return(e=e.cloneNode(t)).removeAttribute("id"),t&&A()&&e.removeChild(e.children[0]),e}function p(){let o=0;c=[],e(["thead","tbody","tfoot"],r=>{const i=n.select("> ".concat(r," > tr"),t);e(i,(t,i)=>{i+=o,e(n.select("> td, > th",t),(e,t)=>{let n,o;if(c[i])for(;c[i][t];)t++;const l=a(e,"rowspan"),s=a(e,"colspan");for(o=i;o<i+l;o++)for(c[o]||(c[o]=[]),n=t;n<t+s;n++)c[o][n]={part:r,real:o==i&&n==t,elm:e,rowspan:l,colspan:s}})}),o+=i.length})}function g(e,t){const n=c[t];if(n)return n[e]}function h(e,t,n){e&&(1===(n=parseInt(n))?e.removeAttribute(t,1):e.setAttribute(t,n,1))}function b(e){return e&&(n.hasClass(e.elm,"mceSelected")||e==d)}function y(){const o=[];return e(t.rows,t=>{e(t.cells,e=>{if(n.hasClass(e,"mceSelected")||e==d.elm)return o.push(t),!1})}),o}function C(t){let o;return u.a.tinymce.walk(t,a=>{let r;if(3===a.nodeType)return e(n.getParents(a.parentNode,null,t).reverse(),e=>{e=m(e,!1),o?r&&r.appendChild(e):o=r=e,r=e}),r&&(r.innerHTML=u.a.tinymce.isIE?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),h(t=m(t,!1),"rowSpan",1),h(t,"colSpan",1),o?t.appendChild(o):u.a.tinymce.isIE||(t.innerHTML='<br data-mce-bogus="1" />'),Object(s.default)(t).attr("contenteditable","true").removeClass("numberingColumn"),t}function w(){const o=n.createRng();if(e(n.select("tr",t),e=>{0===e.cells.length&&n.remove(e)}),0===n.select("tr",t).length)return o.setStartAfter(t),o.setEndAfter(t),r.setRng(o),void n.remove(t);e(n.select("thead,tbody,tfoot",t),e=>{0===e.rows.length&&n.remove(e)}),function(){let e;p();const t=c[Math.min(c.length-1,i.y)];t&&(e=t[Math.min(t.length-1,i.x)].elm,e&&(n=e,u.a.tinymce.isIE9||u.a.tinymce.isIE10up?(r.setCursorLocation(n,0),r.collapse(!0)):(r.select(n,!0),r.collapse(!0))));var n}()}function v(e,t,o,a){let r,i,l,s,d;for(r=c[t][e].elm.parentNode,l=1;l<=o;l++)if(r=n.getNext(r,"tr"),r){for(i=e;i>=0;i--)if(d=c[t+l][i].elm,d.parentNode==r){for(s=1;s<=a;s++)n.insertAfter(C(d),d);break}if(-1==i)for(s=1;s<=a;s++)r.insertBefore(C(r.cells[0]),r.cells[0])}}function O(){e(c,(t,o)=>{e(t,(e,t)=>{let r,c,i;if(b(e)&&(r=a(e=e.elm,"colspan"),c=a(e,"rowspan"),r>1||c>1)){for(h(e,"rowSpan",1),h(e,"colSpan",1),i=0;i<r-1;i++)n.insertAfter(C(e),e);v(t,o,c-1,r)}})})}function k(t){let o,r,i,l,s,d,f,p,g,y,C;for(e(c,(n,a)=>{if(e(n,e=>{if(b(e)&&(e=e.elm,s=e.parentNode,d=m(s,!1),o=a,t))return!1}),t)return!o}),l=0;l<c[0].length;l++)if(c[o][l]&&(r=c[o][l].elm,r!=i)){if(t){if(o>0&&c[o-1][l]&&(p=c[o-1][l].elm,g=a(p,"rowSpan"),g>1)){h(p,"rowSpan",g+1);continue}}else if(g=a(r,"rowspan"),g>1){h(r,"rowSpan",g+1);continue}C=j(l),f=C?n.create("th"):n.create("td"),f.colSpan=r.colSpan,f.width=r.width,f.innerHTML=u.a.tinymce.isIE9?"":u.a.tinymce.isIE?"&nbsp;":'<br data-mce-bogus="1" />',f.className=r.className,C||(n.removeClass(f,u.a.tinymce.settings.confluence_table_heading_style),n.addClass(f,u.a.tinymce.settings.confluence_table_cell_style)),y=n.getAttrib(r,"data-highlight-colour"),T(l)?n.setAttrib(f,"data-highlight-colour",y):n.removeClass(f,"highlight-".concat(y)),d.appendChild(f),i=r}d.hasChildNodes()&&(t?s.parentNode.insertBefore(d,s):n.insertAfter(d,s)),I()}function j(e){if(1===c.length)return!1;for(let t=0;t<c.length;t++)if(c[t]&&c[t][e]&&"TH"!==c[t][e].elm.tagName.toUpperCase())return!1;return!0}function T(e){const t=c[0][e].elm.getAttribute("data-highlight-colour");if(null===t)return!1;for(let n=0;n<c.length;n++)if(c[n][e].elm.getAttribute("data-highlight-colour")!==t)return!1;return!0}function E(t){let r,i;const l=[];return e(c,n=>{if(e(n,(e,n)=>{if(b(e)&&(r=n,t))return!1}),t)return!r}),(0!=r||!t||!A())&&(e(c,(e,c)=>{let d,f;if(!e[r])return;const m=e[r].elm;if(x("confluence.table.resizable")&&0===c){const e=Object(s.default)(m).closest("table"),n=e.find(">colgroup>col").eq(r),a=Object(s.default)("<col>");t?a.insertBefore(n):a.insertAfter(n),e.hasClass("fixed-table")&&(o&&0!==parseFloat(o)?a.css({width:o}):a.css({width:29}))}if(m!=i){if(f=a(m,"colspan"),d=a(m,"rowspan"),1==f){const e=function(e){const t=n.create(e.tagName);t.colSpan=e.colSpan,t.width=e.width,t.className=e.className,t.innerHTML=u.a.tinymce.isIE?"&nbsp;":'<br data-mce-bogus="1"/>';const o=n.getAttrib(e,"data-highlight-colour");return o&&n.setAttrib(t,"data-highlight-colour",o),Object(s.default)(t).attr("contenteditable","true").removeClass("numberingColumn"),t}(m);t?(m.parentNode.insertBefore(e,m),v(r,c,d-1,f)):(n.insertAfter(e,m),v(r,c,d-1,f)),l.push(e)}else h(m,"colSpan",m.colSpan+1);i=m}}),l)}function I(){if(A()){f=1;let n=0,o=0;e(t.rows,e=>{e=Object(s.default)(e),Z.areCellsHeadings(e.children())?e.children(":first").addClass("numberingColumn").attr("contenteditable","true"):o>0?o--:(e.children(":first").html(f).attr("contenteditable","false").addClass("numberingColumn"),n=e.children(":first").attr("rowspan"),n>1&&(o=n-1),f++)})}}function A(){return Object(s.default)(t.rows[0]).children(":first").hasClass("numberingColumn")}function S(e){if(e){if(Object(s.default)(t.rows[0]).children(":first").addClass("numberingColumn"),x("confluence.table.resizable")){const e=Object(s.default)(t),n=e.find(">colgroup>col").eq(0),o=Object(s.default)("<col>");o.insertBefore(n),e.hasClass("fixed-table")&&o.css({width:29})}}else Object(s.default)(t.rows[0]).children(":first").removeClass("numberingColumn"),x("confluence.table.resizable")&&Object(s.default)(t).find(">colgroup>col").eq(0).remove()}function M(){const t=[];e(c,o=>{e(o,(o,r)=>{b(o)&&-1===u.a.tinymce.inArray(t,r)&&(x("confluence.table.resizable")&&Object(s.default)(o.elm).closest("table").find(">colgroup>col").eq(r).remove(),e(c,e=>{if(e[r]){const t=e[r].elm,o=a(t,"colSpan");o>1?h(t,"colSpan",o-1):n.remove(t)}}),t.push(r))})}),w()}function B(){const t={};return e(c,n=>{e(n,(e,n)=>{b(e)&&(x("confluence.table.resizable")&&(o=Object(s.default)(e.elm).closest("table").find(">colgroup>col").eq(n).css("width"),0===parseFloat(o)&&(o=e.elm.getBoundingClientRect().width)),t[n]||(t[n]=[]))})}),e(c,n=>{e(n,(e,n)=>{t[n]&&t[n].push(e.elm.innerHTML)})}),t}function N(e){e&&e.parentNode&&(r.select(e.parentNode),r.collapse(!0))}function R(e,t){let n=g(e.x,e.y).elm;const o=void 0===t||t;if((u.a.tinymce.isGecko||u.a.tinymce.isIE)&&n.firstChild&&(n=n.firstChild),u.a.tinymce.isIE9||u.a.tinymce.isIE10up){const e=r.getRng(1);o?(e.setStart(n,0),e.setEnd(n,0)):(e.setStartAfter(n,0),e.setEndAfter(n,0)),r.setRng(e)}else r.select(n,!0),r.collapse(o)}function _(){let e;const t=c[0].length;return i.x==t-1&&i.y==c.length-1||(i.x==t-1&&A()?(e={x:1,y:i.y+1},Z.areCellsHeadings(Object(s.default)(c[e.y][0].elm).parent().children())&&(e.x=0)):e=i.x==t-1?{x:0,y:i.y+1}:{x:i.x+1,y:i.y}),e}function P(){let e,t;return 0==i.x&&0==i.y||(1==i.x&&A()&&!Z.areCellsHeadings(Object(s.default)(c[i.y][0].elm).parent().children())?(t=i.y-1,e={x:c[t].length-1,y:t}):i.x>0?e={x:i.x-1,y:i.y}:(t=i.y-1,e={x:c[t].length-1,y:t})),e}function H(t){let n;return e(c,(o,a)=>(e(o,(e,o)=>{if(e.elm==t)return n={x:o,y:a},!1}),!n)),n}d=n.select("td.mceSelected,th.mceSelected")[0]||Object(s.default)(r.getStart()).closest(["table.confluenceTable > tbody > tr > th","table.confluenceTable > tbody > tr > td","table.confluenceTable > thead > tr > th","table.confluenceTable > thead > tr > td"].join(","))[0],d&&(i=H(d),l=function(){let t,n;return t=n=0,e(c,(o,a)=>{e(o,(e,o)=>{let r,i;b(e)&&(e=c[a][o],o>t&&(t=o),a>n&&(n=a),e.real&&(r=e.colspan-1,i=e.rowspan-1,r&&o+r>t&&(t=o+r),i&&a+i>n&&(n=a+i)))})}),{x:t,y:n}}(),d=g(i.x,i.y)),u.a.tinymce.extend(this,{deleteTable:function(){const e=n.createRng();e.setStartAfter(t),e.setEndAfter(t),r.setRng(e),n.remove(t)},split:O,merge:function(t,o,a){let r,s,d,f,m,b,y,C,v;if(t){const e=H(t);r=e.x,s=e.y,d=r+(o-1),f=s+(a-1)}else r=i.x,s=i.y,d=l.x,f=l.y;if(0==r&&A())return;y=g(r,s);const x=g(d,f);if(y&&x&&y.part==x.part){for(O(),p(),y=g(r,s).elm,h(y,"colSpan",d-r+1),h(y,"rowSpan",f-s+1),b=s;b<=f;b++)for(m=r;m<=d;m++)c[b]&&c[b][m]&&(t=c[b][m].elm)!=y&&(C=u.a.tinymce.grep(t.childNodes),e(C,e=>{y.appendChild(e)}),C.length&&(C=u.a.tinymce.grep(y.childNodes),v=0,e(C,e=>{"BR"===e.nodeName&&n.getAttrib(e,"data-mce-bogus")&&v++<C.length-1&&y.removeChild(e)})),n.remove(t));w()}},insertRow:k,insertCol:E,insertNumCol:function(){if(A())e(c,e=>{const t=e[0].elm;Object(s.default)(t).hasClass("numberingColumn")&&null!==t.parentNode&&t.parentNode.removeChild(t)}),S(!1);else{let t;e(c,e=>{const n=e[0].elm;if(t==n)return;const o=C(n);n.parentNode.insertBefore(o,n),n.rowSpan>1&&(o.rowSpan=n.rowSpan),t=n}),S(!0)}I()},updateNumCol:I,deleteCols:M,deleteRows:function(){const t=y();(u.a.tinymce.isIE9||u.a.tinymce.isIE10)&&N(t[0]),e(t.reverse(),t=>{!function(t){let o,r;e(t.cells,e=>{const t=a(e,"rowSpan");t>1&&(h(e,"rowSpan",t-1),o=H(e),v(o.x,o.y,1,1))}),o=H(t.cells[0]),e(c[o.y],e=>{let t;(e=e.elm)!=r&&(t=a(e,"rowSpan"),t<=1?n.remove(e):h(e,"rowSpan",t-1),r=e)})}(t)}),w(),I()},cutRows:function(){const e=y();return(u.a.tinymce.isIE9||u.a.tinymce.isIE10)&&N(e[0]),n.remove(e),w(),I(),e},copyRows:function(){const t=y();return e(t,(e,n)=>{t[n]=m(e,!0)}),t},pasteRows:function(t,o){const a=y(),r=a[o?0:a.length-1];let i=r.cells.length;e(c,t=>{let n;if(i=0,e(t,e=>{e.real&&(i+=e.colspan),e.elm.parentNode==r&&(n=1)}),n)return!1}),o||t.reverse(),e(t,e=>{let t,a=e.cells.length;for(Object(s.default)(e.cells[0]).hasClass("numberingColumn")&&(e.removeChild(e.cells[0]),a--),f=0;f<a;f++)t=e.cells[f],h(t,"colSpan",1),h(t,"rowSpan",1);for(A()&&(e.insertBefore(e.firstChild.cloneNode(!1),e.firstChild),Object(s.default)(e.firstChild).addClass("numberingColumn"),a++);i<a;)E(!1),i++;for(f=a;f<i;f++)e.appendChild(C(e.cells[a-1]));o?r.parentNode.insertBefore(e,r):n.insertAfter(e,r)}),I()},getPos:H,setStartCell:function(e){i=H(e)},setEndCell:function(e){let t,o,a,r,s,d,u,f;if(l=H(e),i&&l){t=Math.min(i.x,l.x),o=Math.min(i.y,l.y),a=Math.max(i.x,l.x),r=Math.max(i.y,l.y),s=a,d=r;for(let n=o;n<=d;n++)(e=c[n][t]).real||t-(e.colspan-1)<t&&(t-=e.colspan-1);for(let n=t;n<=s;n++)(e=c[o][n]).real||o-(e.rowspan-1)<o&&(o-=e.rowspan-1);for(let n=o;n<=r;n++)for(let o=t;o<=a;o++)(e=c[n][o]).real&&(u=e.colspan-1,f=e.rowspan-1,u&&o+u>s&&(s=o+u),f&&n+f>d&&(d=n+f));n.removeClass(n.select("td.mceSelected,th.mceSelected"),"mceSelected");for(let e=o;e<=d;e++)for(let o=t;o<=s;o++)c[e][o]&&n.addClass(c[e][o].elm,"mceSelected")}},moveCaretToNextCell:function(){let e=_();e||(k(!1),p(),e=_()),R(e)},moveCaretToPrevCell:function(){let e=P();e||(k(!0),p(),i=H(n.getParent(r.getStart(),"th,td")),e=P()),R(e,!1)},cutColumns:function(){const e=B();return M(),e},copyColumns:B,pasteColumns:function(e,t){const n=Object.keys(e);t||n.reverse(),s.default.each(n,(n,o)=>{const a=E(t);for(n=0;n<a.length;n++)a[n].innerHTML=e[o][n]||""})},prepareTableForColPasteAndCheckIfNeedToRepaint:function(t){let n,o,a=t[Object.keys(t)[0]].length,r=!1;if(e(c,(t,r)=>{a--,n=r,e(t,(e,t)=>{o=t})}),a>0)for(r=!0,d=g(o,n),f=0;f<a;f++)k(!1);return r},toggleFluidColumnWidth:function(){t&&t.rows&&(Object(s.default)(t).toggleFluidColumnWidth(),Object(s.default)("#table-mode-picker .dropdown-text").text(u.a.tinymce.activeEditor.translate("tinymce.table.responsive")))},toggleFixedColumnWidth:function(){t&&t.rows&&(Object(s.default)(t).toggleFixedColumnWidth(),Object(s.default)("#table-mode-picker .dropdown-text").text(u.a.tinymce.activeEditor.translate("tinymce.table.fixed_width")))}})}return{init(t){let c,i,l=!0;function d(e){const n=t.selection;e=e||n.getNode().parentNode;const o=t.dom.getParent(e,"table.confluenceTable");if(o)return new r(o,t.dom,n)}function f(){t.getBody().style.webkitUserSelect="",l&&(t.dom.removeClass(t.dom.select("td.mceSelected,th.mceSelected"),"mceSelected"),l=!1)}function m(e){const o=[];let a="";for(let n=0;n<e.length;n++)o.push(t.serializer.serialize(e[n]));a="<tr>".concat(o.join("</tr><tr>"),"</tr>"),n.setItem("copied",a,7200)}function p(){let e=[];const o=n.getItem("copied")||"";let a;return o&&(a=t.getDoc().createElement("div"),a.innerHTML="<table>".concat(o,"</table>"),e=Object(s.default)(a).find("tr")),e}function g(e){n.setItem("copiedCols",JSON.stringify(e))}function h(){return JSON.parse(n.getItem("copiedCols"))||{}}e([["table","table.desc","mceInsertTable",!0],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",!0],["cell_props","table.cell_desc","mceTableCellProps",!0],["split_cells","table.split_cells_desc","mceTableSplitCells",!0],["merge_cells","table.merge_cells_desc","mceTableMergeCells",!0]],e=>{t.addButton(e[0],{title:e[1],cmd:e[2],ui:e[3]})}),u.a.tinymce.isIE||t.on("Click",e=>{"TABLE"===(e=e.target).nodeName&&(t.selection.select(e),t.nodeChanged())}),t.on("PreProcess",e=>{let n,o,a;const r=t.dom,c=r.select("table",e.node);for(n=c.length;n--;)o=c[n],r.setAttrib(o,"data-mce-style",""),(a=r.getAttrib(o,"width"))&&(r.setStyle(o,"width",a),r.setAttrib(o,"width","")),(a=r.getAttrib(o,"height"))&&(r.setStyle(o,"height",a),r.setAttrib(o,"height",""))}),t.on("init",()=>{let n,o,r;const c=t.dom;function i(e){if(!u.a.tinymce.isWebKit)return;const t=e.selection.getRng(),n=e.selection.getNode();let o=e.dom.getParent(t.startContainer,"TD,TH");if(!function(e,t,n,o){const a=e.dom.getParent(t.startContainer,"TABLE");let r;a&&(r=a.parentNode);const c=3===t.startContainer.nodeType&&0==t.startOffset&&0==t.endOffset&&o&&("TR"===n.nodeName||n==r),i=("TD"===n.nodeName||"TH"===n.nodeName)&&!o;return c||i}(e,t,n,o))return;o||(o=n);let a=o.lastChild;for(;a.lastChild;)a=a.lastChild;t.setEnd(a,a.nodeValue.length),e.selection.setRng(t)}if(t.on("MouseDown",e=>{2!=e.button&&(f(),o=c.getParent(e.target,"td,th"),n=c.getParent(o,"table"))}),c.bind(t.getDoc(),"mouseover",e=>{let a,i;const s=c.getParent(e.target,"td,th");if(o&&(r||s!=o)&&s){i=c.getParent(s,"table"),i==n&&(r||(r=d(i),r.setStartCell(o),t.getBody().style.webkitUserSelect="none"),r.setEndCell(s),l=!0),a=t.selection.getSel();try{a.removeAllRanges?a.removeAllRanges():a.empty()}catch(e){}e.preventDefault()}}),t.on("MouseUp",()=>{let e;const a=t.selection;let i,l,s,d;if(o){function f(t,n){const o=new u.a.tinymce.dom.TreeWalker(t,t);do{if(3===t.nodeType&&0!==u.a.tinymce.trim(t.nodeValue).length)return void(n?e.setStart(t,0):e.setEnd(t,t.nodeValue.length));if("BR"===t.nodeName)return void(n?e.setStartBefore(t):e.setEndBefore(t))}while(t=n?o.next():o.prev())}if(r&&(t.getBody().style.webkitUserSelect=""),i=c.select("td.mceSelected,th.mceSelected"),i.length>0){e=c.createRng(),s=i[0],e.setStartBefore(s),e.setEndAfter(s),f(s,1),l=new u.a.tinymce.dom.TreeWalker(s,c.getParent(i[0],"table"));do{if("TD"===s.nodeName||"TH"===s.nodeName){if(!c.hasClass(s,"mceSelected"))break;d=s}}while(s=l.next());f(d),a.setRng(e)}t.nodeChanged(),o=r=n=null}}),t.on("Undo",()=>{l=t.dom.select("td.mceSelected, th.mceSelected").length>0}),t.on("KeyUp",()=>{f()}),t.on("KeyDown",()=>{i(t)}),t.on("MouseDown",e=>{2!=e.button&&i(t)}),t.plugins.aeTable.fixTableCellSelection=i,u.a.tinymce.isWebKit){t.on("KeyDown",(function(n){const o=u.a.tinymce.util.VK,r=n.keyCode;function c(e,n,o){const a=e?"previousSibling":"nextSibling",r=t.dom.getParent(n,"tr"),d=r[a];if(d)return s(t,n,d,e),u.a.tinymce.dom.Event.cancel(o),!0;{const d=t.dom.getParent(r,"table"),f=r.parentNode,m=f.nodeName.toLowerCase();if("tbody"===m||m===(e?"tfoot":"thead")){const a=function(e,n,o,a){const r=t.dom.select(">".concat(a),n),c=r.indexOf(o);if(e&&0===c||!e&&c===r.length-1)return function(e,n){const o=e?"thead":"tfoot",a=t.dom.select(">".concat(o),n);return 0!==a.length?a[0]:null}(e,n);if(-1===c){const e="thead"===o.tagName.toLowerCase()?0:r.length-1;return r[e]}return r[c+(e?-1:1)]}(e,d,f,"tbody");if(null!==a)return function(e,n,o,a){const r=i(n,e);return r&&s(t,o,r,e),u.a.tinymce.dom.Event.cancel(a),!0}(e,a,n,o)}return function(e,n,o,a,r){const s=a[o];if(s)return l(s),!0;{const o=t.dom.getParent(a,"td,th");if(o)return c(e,o,r);return l(i(n,!e)),u.a.tinymce.dom.Event.cancel(r)}}(e,r,a,d,o)}}function i(e,n){const o=e&&e[n?"lastChild":"firstChild"];return o&&"BR"===o.nodeName?t.dom.getParent(o,"td,th"):o}function l(e){t.selection.setCursorLocation(e,0)}function s(t,n,o,r){const c=function(t,n){let o=0,r=0;return e(t.children,(e,t)=>{if(o+=a(e,"colspan"),r=t,o>n)return!1}),r}(o,function(e){let t=0,n=e;for(;n.previousSibling;)n=n.previousSibling,t+=a(n,"colspan");return t}(t.dom.getParent(n,"td,th"))),s=o.childNodes[c];l(i(s,r)||s)}function d(e){const n=t.selection.getNode(),o=t.dom.getParent(n,"td,th"),a=t.dom.getParent(e,"td,th");return o&&o!==a&&(r=o,c=a,t.dom.getParent(r,"TABLE")===t.dom.getParent(c,"TABLE"));var r,c}if((r==o.UP||r==o.DOWN)&&function(e){const t=e.selection.getNode();return null!==e.dom.getParent(t,"tr")}(t)){const e=t.selection.getNode();setTimeout(()=>{d(e)&&c(!n.shiftKey&&r===o.UP,e,n)},0)}}))}if(!u.a.tinymce.isIE){function s(){}u.a.tinymce.isGecko&&t.on("KeyDown",e=>{let n,o;const a=t.dom;37!==e.keyCode&&38!==e.keyCode||(n=t.selection.getRng(),o=a.getParent(n.startContainer,"table"),o&&t.getBody().firstChild==o&&function(e,t){const n=t.ownerDocument,o=n.createRange();o.setStartBefore(t),o.setEnd(e.endContainer,e.endOffset);const a=n.createElement("body");return a.appendChild(o.cloneContents()),0===a.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}(n,o)&&(n=a.createRng(),n.setStartBefore(o),n.setEndBefore(o),t.selection.setRng(n),e.preventDefault()))}),t.on("KeyUp",s),t.on("SetContent",s),t.on("VisualAid",s),u.a.tinymce.isGecko&&t.on("KeyDown",e=>{if(e.keyCode===u.a.tinymce.util.VK.ENTER&&e.shiftKey){const e=t.selection.getRng().startContainer;if(c.getParent(e,"td,th")){const n=t.getDoc().createTextNode("\ufeff");c.insertAfter(n,e)}}}),t.startContent=t.getContent({format:"raw"})}}),e({mceTableSplitCells(e){e.split()},mceTableMergeCells(e){t.dom.select("td.mceSelected,th.mceSelected").length&&e.merge()},mceTableInsertRowBefore(e){e.insertRow(!0)},mceTableInsertRowAfter(e){e.insertRow()},mceTableInsertNumberingCol(e){e.insertNumCol()},mceTableUpdateNumberingCol(e){e.updateNumCol()},mceAutoWidth(e){e.toggleFluidColumnWidth()},mceFixedWidth(e){e.toggleFixedColumnWidth()},mceTableInsertColBefore(e){o=null,e.insertCol(!0)},mceTableInsertColAfter(e){o=null,e.insertCol()},mceTableDeleteCol(e){e.deleteCols()},mceTableDeleteRow(e){e.deleteRows()},mceTableCutRow(e){c=e.cutRows(),m(c)},mceTableCopyRow(e){c=e.copyRows(),m(c)},mceTablePasteRowBefore(e){e.pasteRows(p(),!0)},mceTablePasteRowAfter(e){e.pasteRows(p())},mceTableDelete(e){e.deleteTable()},mceTableMoveCaretToNextCell(e){e.moveCaretToNextCell()},mceTableMoveCaretToPrevCell(e){e.moveCaretToPrevCell()},mceTableCopyCol(e){i=e.copyColumns(),g(i)},mceTableCutCol(e){i=e.cutColumns(),g(i)},mceTablePasteColBefore(e){const n=h();e.prepareTableForColPasteAndCheckIfNeedToRepaint(n)&&(t.execCommand("mceRepaint"),e=d()),e.pasteColumns(n,!0)},mceTablePasteColAfter(e){e.pasteColumns(h(),!1)}},(e,n)=>{t.addCommand(n,()=>{const n=d();n&&(e(n),t.execCommand("mceRepaint"),f())})}),X(t),be(t),ye(t)}}};n("zFIa");var ve=function(e){return e.replace(/[&"'<>`]/g,e=>{const t={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return"string"==typeof t[e]?t[e]:"&quot;"})};function Oe(e,t,n){"cl.ly"==e.host?s.default.get("".concat(b.a,"/rest/autoconvert/1.0/cloudappembed?resource=").concat(e.path.substr(1)),e=>{if(e)switch(e.item_type){case"image":const o=ve(e.content_url);n(Object(s.default)('<img class="confluence-embedded-image confluence-external-resource" src="'.concat(o,'" data-image-src="').concat(o,'"/>'))[0]);break;case"bookmark":t.text(e.name),t.attr("href",ve(e.redirect_url)),n(t)}else n()}):n()}var xe=n("kC4U"),ke=n("7M9M");function je(){const e=this,t=function(e,t,n){return t.anchor&&0!==t.anchor.indexOf("comment-")?n?"".concat(e,"#").concat(n):"".concat(e,"#").concat(t.anchor.substring(t.anchor.indexOf("-")+1)):e},n=function(e,t,n){if(!a(e))return void n();const r=ke.EDIT_PAGE_V2.match(e.path)||ke.VIEW_PAGE.match(e.path);var c,i;r?(c=r.params.contentId,Object(xe.a)("/cgraphql?q=CheckIfFabric",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:(i={contentId:c},JSON.stringify({operationName:"CheckIfFabric",variables:i,query:"\n      query CheckIfFabric ($contentId: ID) {\n        content(id: $contentId) {\n          nodes {\n            metadata {\n              simple {\n                isFabric\n              }\n            }\n          }\n        }\n      }\n    "}))})).then(async a=>{var r;const c=await a.json();Boolean(null!=(r=c.data)&&null!=(r=r.content)&&null!=(r=r.nodes)&&null!=(r=r[0])&&null!=(r=r.metadata)&&null!=(r=r.simple)?r.isFabric:r)?o(e,t,n,e.anchor):o(e,t,n)}).catch(e=>{throw new Error("Error retrieving content type: ".concat(e))}):o(e,t,n)},o=function(n,o,a,r){const c=function(e){return b.a?e.path.substring(b.a.length+1):e.path.substring(1)}(n),i=decodeURIComponent(c).split("/");let l;n.queryKey=n.queryKey||{},n.queryKey.focusedCommentId?(l="$".concat(n.queryKey.focusedCommentId),l=t(l,n)):n.queryKey.pageId?(l="$".concat(n.queryKey.pageId),l=t(l,n)):"display"===i[0]?l=function(e,n,o){return 2===o.length&&0===o[1].indexOf("~")?n=o[1]:3===o.length?(n="".concat(o[1],":").concat(o[2].replace(/\+/g," ")),n=t(n,e)):4===o.length&&"status"===o[1]?n="$".concat(o[3]):6===o.length&&(n="".concat(o[1],":")+"/".concat(o[2],"/").concat(o[3],"/").concat(o[4],"/").concat(o[5].replace(/\+/g," ")),n=t(n,e)),n}(n,l,i):"spaces"===i[0]&&(l=e.spaViewPageLinkHandler(i),l=l||e.spaBlogPostLinkHandler(i),l=l?t(l,n,r):function(e,n,o){return 2!==o.length&&3!==o.length||-1!==o[1].indexOf(".action")||(n="".concat(o[1],":")+"",n=t(n,e)),n}(n,l,i)),l?(l="[".concat(l,"]"),u.a.tinymce.plugins.Autoconvert.getHtmlFromWikiMarkup(l,e=>{if(r){if(e.match(/href="#/))e=e.replace(/(data-base-url=".*">)(.*)(<\/a><\/p>)$/,"$1".concat(decodeURIComponent(r),"$3"));else{const t=e.match(/(data-anchor=")([^"]*)(" )/)[2],n=e.match(/(data-linked-resource-default-alias=")([^"]*)(" )/)[2],o=n.lastIndexOf(t),a=n.substring(0,o)+decodeURIComponent(r);e=e.replace(/(data-base-url=".*">)(.*)(<\/a><\/p>)$/,"$1".concat(a,"$3"))}e=(e=(e=e.replace(/(href="[^#]*#)([^"]*)(" )/,"$1".concat(r,"$3"))).replace(/(data-linked-resource-default-alias=")([^"]*)(" )/,"$1".concat(r,"$3"))).replace(/data-anchor="(.*?)"/,'data-anchor="'.concat(r,'"'))}a(Object(s.default)(e).children()[0])},()=>{a()})):a()},a=function(e){let t=!0;return t=t&&e.authority===document.location.host,t=t&&(!b.a||0===e.path.indexOf(b.a)),t};this.init=function(){u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler(n)}}je.prototype.spaViewPageLinkHandler=function(e){const t="spaces"===e[0]&&"pages"===e[2],n="edit"===e[3]?e[4]:e[3];if(t&&n)return"$".concat(n)},je.prototype.spaBlogPostLinkHandler=function(e){const t="spaces"===e[0]&&"blog"===e[2],n=e[1],o=e[3],a=e[4],r=e[5],c=e[6],i=e[7];if(t&&n&&o&&a&&r&&c&&i)return"".concat(n,":$").concat(c,"/").concat(o,"/").concat(a,"/").concat(r,"/").concat(i.replace(/\+/g," "))};function Te(){u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler((function(e,t,n){if(e.host.match(/google.*/)&&"/url"===e.path&&e.queryKey&&e.queryKey.url){const o=decodeURIComponent(e.queryKey.url);(t=Object(s.default)(t)).attr("href",o),t.attr("data-mce-href",o),t.text(o),n(t)}else n()}))}function Ee(e,t,n){if(-1===e.host.search(".linkedin."))return void n();const o="https://card-meta.atlassian.io/meta?url=".concat(e.source);s.default.ajax(o,{timeout:5e3,success(n){if(-1!==n.title.search("Sign In"))return;const o=n.title.indexOf("|"),a=-1===o?n.title:n.title.substring(0,o);t.text(a),t.attr("href",e.source)},error(e,t){0},complete(){n()}})}const Ie=function(){let e=[];const t=function(e){return e.indexOf("%s")>=0?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace("%s","(.*)"):"".concat(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"(.*)")};u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler((function(t,n,o){if(t.source===n.text()){for(let a=0;a<e.length;a++){const r=e[a],c=t.source.match(r.regex);if(c){const e=c[1];if(r.defaultAlias){const t=r.defaultAlias.replace(/%s/,e);return void o(Object(s.default)(n).text(t))}return void o(Object(s.default)(n).text(e))}}o()}else o()})),setTimeout(()=>{s.default.ajax({url:"".concat(b.a,"/rest/autoconvert/latest/shortcutlinkconfigurations"),type:"GET",dataType:"json",success(n){e=n.configurations;for(let n=0;n<e.length;n++){const o=e[n];try{o.regex=new RegExp(t(o.expandedValue,o.defaultAlias))}catch(e){console.log("Failed to generated regex for ".concat(o))}}},error(e){console.log("Failed to load shortcut link configurations ".concat(e.statusText))}})},0)};const Ae={pasteHandler(e,t,n){"www.skitch.com"===e.host||"skitch.com"===e.host?s.default.get("".concat(b.a,"/rest/autoconvert/1.0/skitchembed?url=").concat(e.source),e=>{e&&e.url?n(Object(s.default)('<img class="confluence-embedded-image confluence-external-resource" src="'.concat(e.url,'" data-image-src="').concat(e.url,'"/>'))[0]):n()}):n()}};function Se(){const e=[/youtube.com\/watch\?/,/vimeo.com\/[0-9]+/,/maps.google(.[a-z]+)+\/maps/,/[^\.]\.wufoo\.com\/(?:forms|reports)/];u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler((function(t,n,o){const a=decodeURI(t.source);for(let t=0;t<e.length;t++)if(a.match(e[t])){const e={name:"widget",params:{url:a}};return void u.a.tinymce.plugins.Autoconvert.convertMacroToDom(e,o,o)}o()}))}function Me(){u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler((e,t,n)=>{if(e.host.match(".*youtu.be.*")){const o=e.path.substr(1),a="http://youtube.com/watch?v=".concat(o);n(Object(s.default)(t).attr("href",a).html(a))}else n()})}const Be={issueKeyOnlyRegEx:/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+$)/,singleTicketXMLEx:/\/jira\.issueviews:issue-xml\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)\//,issueKeyWithinRegex:/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)(?:\?|#)/,jqlRegEx:/jqlQuery\=([^&]+)/,jqlRegExAlternateFormat:/jql\=([^&]+)/,_getMatchedServerFromLink(e,t){let n=null;for(const o in t)if(t.hasOwnProperty(o)){const a=t[o];let r=a.url;if("/"!==a.url[a.url.length-1]&&(r+="/"),0===e.indexOf(r)){n=a;break}}return n},pasteHandler(e,t,n){const o=O.a.Editor.JiraConnector.servers;if(!o)return n(),null;const a=O.a.Editor.JiraAnalytics,r={},c=Be._getMatchedServerFromLink(e.source,o);let i=null;if(c){const t=Be.jqlRegEx.exec(e.source)||Be.jqlRegExAlternateFormat.exec(e.source),n=O.a.JQLHelper.isFilterUrl(e.source);let o=Be.issueKeyOnlyRegEx.exec(e.source)||Be.issueKeyWithinRegex.exec(e.source);if(o?(o=o[2],a&&(r.type=a.linkTypes.jql)):(o=Be.singleTicketXMLEx.exec(e.source),o&&(o=o[1],a&&(r.type=a.linkTypes.xml))),t)r.is_single_issue=!1,r.type=O.a.JQLHelper.checkQueryType(e.source),i={name:"jira",params:{server:c.name,serverId:c.id,jqlQuery:decodeURIComponent(t[1].replace(/\+/g,"%20"))}};else if(n){const t=e.source;r.is_single_issue=!1,r.type=O.a.JQLHelper.checkQueryType(t),i={name:"jira",params:{server:c.name,serverId:c.id,jqlQuery:O.a.JQLHelper.getFilterFromFilterUrl(t)}}}else o&&(r.is_single_issue=!0,i={name:"jira",params:{server:c.name,serverId:c.id,key:o}})}i?(u.a.tinymce.plugins.Autoconvert.convertMacroToDom(i,n,n),a&&a.triggerPasteEvent(r)):n()}};const Ne={pasteHandler(e,t,n){const{source:o}=e,{context:{activeElement:a=null}}=t;let r=null;(e=>/^http[s]?:\/\/.*\/secure\/Roadmap\.jspa.*(\?|&)projectKey=([\w][\w]+)/g.exec(e))(o)&&a&&a.classList.contains("page-edit")&&(r={name:"jiraroadmap",params:{url:o}}),r?u.a.tinymce.plugins.Autoconvert.convertMacroToDom(r,n,n):n()}};const Re=/^\/(.*?)\/status\/([^/]+\/?$)/,_e=/^\/(.*?)\/statuses\/([^/]+\/?$)/,Pe=(e,t,n)=>{let o,a,r;e.host.match(/^twitter.com/)?((o=decodeURI(e.path).match(Re))?a="".concat(e.protocol,"://twitter.com/").concat(o[1],"/status/").concat(o[2]):(o=decodeURI(e.path).match(_e))&&(a="".concat(e.protocol,"://twitter.com/").concat(o[1],"/statuses/").concat(o[2])),a?(r={name:"widget",params:{url:a}},u.a.tinymce.plugins.Autoconvert.convertMacroToDom(r,n,n)):n()):n()};const He={pasteHandler(e,t,n){const{source:o}=e,{context:{activeElement:a=null}}=t;let r=null;(e=>{const t=new RegExp(/^(https?):\/\/[-a-zA-Z0-9+&@#\/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#\/%=~_|]/);return-1!==e.indexOf("PortfolioRoadmapConfluence.jspa")&&e.match(t)})(o)&&a&&a.classList.contains("page-edit")&&(r={name:"portfolioforjiraplan",params:{url:o,planHeight:"700"}}),r?u.a.tinymce.plugins.Autoconvert.convertMacroToDom(r,n,n):n()}};const De=/\son[\w-]+(?=[^<]*>)/gi;function Le(){Object(a.a)("init.rte",()=>{u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler(Oe)}),function(){const e=new je;Object(a.a)("init.rte",e.init)}(),Object(a.a)("init.rte",Te),x("autoconvert-link-to-page-title")&&Object(a.a)("init.rte",()=>{u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler(Ee)}),Object(a.a)("init.rte",Ie),Object(a.a)("init.rte",()=>{u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler(Ae.pasteHandler)}),Object(a.a)("init.rte",Se),Object(a.a)("init.rte",Me),Object(a.a)("init.rte",()=>{u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler(Be.pasteHandler)}),Object(a.a)("init.rte",()=>u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler(Pe)),Object(a.a)("init.rte",()=>{u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler(Ne.pasteHandler)}),Object(a.a)("init.rte",()=>{u.a.tinymce.plugins.Autoconvert.autoConvert.addHandler(He.pasteHandler)})}let Fe={initializeEditor(){u.a.AJS&&u.a.AJS.Rte&&u.a.AJS.Rte.BootstrapManager&&u.a.AJS.Rte.BootstrapManager.addOnInitCallback(()=>{const e=u.a.tinymce.activeEditor;e&&(!u.a.MutationObserver||u.a.tinymce.Env.gecko||u.a.tinymce.Env.webkit?function(e){e.on("Paste",e=>!!Fe.onPaste(e)||(u.a.tinymce.dom.Event.cancel(e),!1))}(e):function(e){new MutationObserver(e=>{for(let t=0;t<e.length;t++){const n=e[t];if(n.addedNodes.length)for(let e=0;e<n.addedNodes.length;e++){if("img"===n.addedNodes[e].localName)return void u.a.setTimeout(Fe.pasteFromDataURL,0)}}}).observe(e.getDoc(),{childList:!0,subtree:!0})}(e))})},pasteFromDataURL(){const e=Object(s.default)('img[src^="data:image"]:not(".editor-inline-macro")',u.a.tinymce.activeEditor.getDoc());s.default.each(e,(function(){const e=this.src;let t,n,o;if(x("filestore.direct.upload")&&!x("filestore.direct.upload.force.disable")){const o=e.split(","),a=atob(o[1]);let r=a.length;for(n=a.length,t=new Uint8Array(r);r--;)t[r]=a.charCodeAt(r)}else{o="base64",t=e.substring(22,e.length),n=3*t.length/4;let a=0;for(let e=t.length-1;"="==t[e];e--)a++;n-=a}u.a.AJS.Confluence.Uploader.upload([Fe.createUploadFile(t,n,o)])})),e.remove()},onPaste:e=>!e||!e.clipboardData||Fe.pasteFromEvent(e),showClipboardAccessError(){const e=u.a.tinymce.activeEditor;new u.a.AJS.Dialog({width:400,closeOnOutsideClick:!0}).addPanel("alert",Object(s.default)("<div />",{text:e.translate("clipboardaccess.browser.not.supported")})).addButton(e.translate("clipboardaccess.ok"),e=>{e.remove()}).show().updateHeight()},pasteFromEvent(e){if(e&&e.clipboardData){if(e.clipboardData.items){const t=e.clipboardData.items[0];if(!t||"file"!=t.kind)return!0;const n=t.getAsFile(),o=Fe.createUploadFile(n,n.size);return u.a.AJS.Confluence.Uploader.upload([o]),!1}u.a.setTimeout(e=>{const t=Object(s.default)("img[src^='webkit-fake-url://']",u.a.tinymce.activeEditor.getDoc());t.length&&(t.remove(),e.showClipboardAccessError())},0,this)}return!0},createUploadFile(e,t,n){const o=new Date,a=o.getMonth()+1;return{fileName:"image".concat(o.getFullYear(),"-").concat(a,"-").concat(o.getDate(),"_").concat(o.getHours(),"-").concat(o.getMinutes(),"-").concat(o.getSeconds(),".png"),fileSize:t,slice:(t,n)=>e.slice(t,t+n),getAsBinary:()=>e,getData:()=>e,encoding:n}}};n("e2U2");const ze=function(){const e=u.a.Confluence.PropertyPanel;if(s.default.browser.msie&&s.default.browser.version<=8)return;let t,n,o,r,c,i,l,d,m,p,g,h,b;const y=[800,800,400,400,400,300,300,300,300,300,300,300,300,300,300,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100];const C="p,h1,h2,h3,h4,h5,h6,blockquote,li,td,th,img";function w(e){const n=!!r.children(".contentLayout,.contentLayout2").length;function a(){return o.find("#move-indicator")}function c(e){return"move-indicator"===e.attr("id")}function i(e){return n?e.is("div.innerCell,div.cell"):e.is("body")}function l(e,t,n){if(e.is("img")){return function(e,t){const n=e.offset();return t+o.scrollLeft()-n.left}(e,t)<e.width()/2}return d(e,n)<e.height()/2}function d(e,t){const n=e.offset();return t+o.scrollTop()-n.top}return{positionNear:function(t,n){const u=function(t,n){let u=Object(s.default)(o[0].elementFromPoint(t,n)),f=!0;if(function(t){if(t.is(C)&&!c(t))return(!t.is("td.wysiwyg-macro-body")||"PLAIN_TEXT"!==t.closest("table").attr("data-macro-body-type"))&&!(t.is("img")&&!e.is("img"));return!1}(u))return{target:u,before:l(u,t,n)};if(i(u)){if(u=function(e){if(e.is("div.cell"))return e.children("div.innerCell").first();return e}(u),function(e,t){return d(e.children().first(),t)<0}(u,n))u=u.children().first();else if(function(e,t){return function(e,t){const n=d(e,t),o=e.height();return n-o}(e.children().last(),t)>0}(u,n))u=u.children().last(),f=!1;else{if(m=u,a().length>0&&a().parent(m).length>0)return null;u=function(t){let n=e.parent(C);n.length||(n=t.find(C).last());n.length||(n=r.find(C).last());return n}(u),f=!1}return{target:u,before:f}}var m;return null}(t,n);u&&function(e,t){if(c(e))return;let n=a();if(e.is("li,td,th")&&e.find(n).length)return;n.length?n.detach():n=Object(s.default)('<span id="move-indicator">|</span>');!(e=function(e){if(e.is("li,td,th")){const t=e.children().first();t.is("p,h1,h2,h3,h4,h5,h6,blockquote")&&(e=t)}return e}(e)).is("img")&&Object(f.b)().Cursor.isTextContainerEmpty(e[0])?e.prepend(n):e.is("li,td,th")?t?e.prepend(n):e.append(n):t?e.before(n):e.after(n)}(u.target,u.before)},replaceWith:function(e){const n=a();n.length?(e.is("img")&&i(n.parent())&&(e=Object(s.default)("<p></p>").append(e)),n.replaceWith(e),t.dom.isBlock(e[0])&&e.parent().is("p")&&e.unwrap(),Object(f.b)().showElement(e),t.selection.select(e[0]),t.selection.collapse(!0)):t.undoManager.undo(),Object(f.b)().Cursor.fixCursorTargets(t.getBody())},destroy:function(){const e=a();e.length&&(e.remove(),Object(f.b)().Cursor.fixCursorTargets(t.getBody()))}}}function v(e){if(1!==e.which)return;if(e.target!==e.currentTarget)return;if(m)return void j(e);m=Object(s.default)(e.target),t.selection.select(e.target),e.preventDefault(),o.bind({"mousemove.moveable-zone":k,"mouseup.moveable-zone":j,"keydown.moveable-zone":O,"mouseover.moveable-zone":x});const n=m.offset();var a;l=e.pageX,d=e.pageY,c=n.top-d,i=n.left-l,g=!0,p=(a=m).attr("style")||"",m=a}function O(e){27===e.keyCode&&(h.cancelScrolling(),o.unbind(".moveable-zone"),t.undoManager.undo(),t.selection.select(m[0]),t.selection.collapse(!1),m=null)}function x(){o.find(".mceSelected").removeClass("mceSelected")}function k(o){if(g){if(function(e){const t=Math.abs(l-e.pageX),n=Math.abs(d-e.pageY);return t<10&&n<10}(o))return;Object(f.b)().BookmarkManager.storeBookmark(),t.undoManager.beforeChange(),t.undoManager.typing=!0,t.undoManager.add(),Object(a.b)("synchrony.stop",{id:"confluence.draggable-plugin"}),function(){const e=t.selection.getSel();e&&e.removeAllRanges&&e.removeAllRanges()}(),m.css({position:"absolute",width:m.css("width"),"max-width":"50%"}),e.current&&e.destroy(),m.detach(),Object(f.b)().Cursor.fixCursorTargets(t.getBody()),r.append(m),b=w(m),g=!1}o.preventDefault(),m.hide(),function(e,t){const o=y.length;if((t=Math.max(t,0))<o)return void h.scrollUp(y[t]);const a=n.height(),r=Math.max(0,a-t);if(r<o)return void h.scrollDown(y[r]);h.cancelScrolling()}(o.clientX,o.clientY),b.positionNear(o.clientX,o.clientY);const s=Math.min(o.pageY+c,h.scrollHeight()-m.outerHeight()),u=o.pageX+i;m.css({top:s,left:u,opacity:.5}),m.show()}function j(e){o.unbind(".moveable-zone"),h.cancelScrolling(),g?m=null:(e.preventDefault(),m.detach(),m.attr("style",p),b.replaceWith(m),b.destroy(),m=null,b=null,x(),t.undoManager.add(),Object(a.b)("synchrony.start",{id:"confluence.draggable-plugin"}))}return{init(e){t=e,e.on("Init",()=>{let t;n=Object(s.default)(e.getWin()),o=Object(s.default)(e.getDoc()),r=Object(s.default)(e.getBody()),t=s.default.browser.webkit?r:o.find("html"),h=function(e){let t=0;return{scrollUp(n){if(t===-n)return;t=-n;const o=e.scrollTop()/n*1e3;e.stop(!1,!1),e.animate({scrollTop:0},{duration:o})},scrollDown(n){if(t===n)return;const o=e[0].scrollHeight,a=(o-e.scrollTop())/n*1e3;e.stop(!1,!1),e.animate({scrollTop:o},{duration:a})},cancelScrolling(){e.stop(!0,!1)},scrollHeight:()=>e[0].scrollHeight}}(t),o.delegate("img.confluence-embedded-image,img.editor-inline-macro,table.wysiwyg-macro",{mousedown:v})})},getInfo:()=>({longname:"Draggable objects (images, tables, placeholders) around the document via drag and drop",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}};n("+7yL");const We=function e(t,n){let o;if(p.a.get("atlassian-account-id")&&p.a.get("confluence.prefs.editor.disable.autoformat"))return;function r(e){return Object(s.default)("<div>").append(e.cloneNode(!0)).html()}function c(e){let t,n;if(!e||!e.collapsed)throw new Error("range is null or not collapsed");if(t=e.startContainer,n=e.startOffset,1===t.nodeType&&n>0){if(t=t.childNodes[e.startOffset-1],3!==t.nodeType)return"";n=t.nodeValue.length}else if(3!==t.nodeType)return"";let o=t.nodeValue.substring(0,n);for(let e=t.previousSibling;e&&3===e.nodeType;e=e.previousSibling)o=e.nodeValue+o;return o}function i(e,t,n,a){return{handles(t){let n=!1;const o=t.selection.getRng(!0),r=o.commonAncestorContainer||{};return!!o.collapsed&&(!Object(s.default)(r).closest("pre,.text-placeholder").length&&((!a||!Object(s.default)(r).closest(a).length)&&(n=e.test(c(o)),n)))},execute(a,r,i){let d,m=1;const p=l(r);if(32===p?a.execCommand("mceInsertContent",!1,"&nbsp;"):a.execCommand("mceInsertContent",!1,String.fromCharCode(p)),a.undoManager.transact(()=>{const n=a.selection.getRng(!0);d=c(n),"|"==d[d.length-1]&&(d+=" ",m=0);const r=e.exec(d.substring(0,d.length-1)),i=function(e,t,n){let o,a;if(t){3!==t.nodeType&&(n=(t=t.childNodes[n-1]).length);for(let r=t,c=n;r&&3===r.nodeType;r=r.previousSibling){if(-1==c&&(c=r.nodeValue.length),c>e)return{container:r,offset:c-e};if(c==e){for(a=0,o=r.parentNode;r=r.previousSibling;)a++;return{container:o,offset:a}}e-=c,c=-1}return null}}(r[1].length+m,n.commonAncestorContainer,n.startOffset);n.setStart(i.container,i.offset);const l=Object(s.default)(n.commonAncestorContainer);a.selection.setRng(n),l.closest(".wysiwyg-macro-body").length&&n.toString()==l.text()?(l[0].innerHTML="<br>",a.selection.select(l[0].childNodes[0]),a.selection.collapse(!0)):a.execCommand("delete",!1,{},{skip_undo:!0}),t(r,a.selection.getRng(!0)),o=a.selection.getRng(!0)}),n)return i.preventDefault(),i.stopPropagation(),u.a.tinymce.dom.Event.cancel(r),Object(f.b)().showElement(o.startContainer),!1}}}function l(e){return e.which}function d(){this.handlers={}}d.prototype={registerHandler(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},executeHandlers(e,t,n,o){let a=!0;return s.default.each(this.handlers[e]||[],(e,r)=>{if(r.handles(t))return a=r.execute(t,n,o),!1}),a}};const m=n.editor,g=new d;function h(e,t,n,o,a){const r=e.charCodeAt(0),c="".concat(Object(f.b)().getResourceUrlPrefix(),"/images/icons/emoticons/").concat(a),l=i(t,()=>{const e=m.dom.createHTML("img",{src:c,alt:m.translate("tinymce.".concat(o)),title:m.translate("tinymce.".concat(o)),border:0,class:"emoticon emoticon-".concat(n),"data-emoticon-name":n});m.execCommand("mceInsertContent",!1,e,{skip_undo:!0})},!0);this.imagePath=c,g.registerHandler(r,l)}const b=[new h(")",e.regularExpressions._REGEXES_EMOTICON.SMILE,"smile","emotions_dlg.smile","smile.png"),new h("(",e.regularExpressions._REGEXES_EMOTICON.SAD,"sad","emotions_dlg.sad","sad.png"),new h("P",e.regularExpressions._REGEXES_EMOTICON.CHEEKY,"cheeky","emotions_dlg.tongue","tongue.png"),new h("p",e.regularExpressions._REGEXES_EMOTICON.CHEEKY_2,"cheeky","emotions_dlg.tongue","tongue.png"),new h("D",e.regularExpressions._REGEXES_EMOTICON.LAUGH,"laugh","emotions_dlg.biggrin","biggrin.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.WINK,"wink","emotions_dlg.wink","wink.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.THUMBS_UP,"thumbs-up","emotions_dlg.thumbs_up","thumbs_up.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.THUMBS_DOWN,"thumbs-down","emotions_dlg.thumbs_down","thumbs_down.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.INFORMATION,"information","emotions_dlg.information","information.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.TICK,"tick","emotions_dlg.check","check.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.CROSS,"cross","emotions_dlg.error","error.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.WARNING,"warning","emotions_dlg.warning","warning.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.PLUS,"plus","emotions_dlg.add","add.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.MINUS,"minus","emotions_dlg.forbidden","forbidden.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.QUESTION,"question","emotions_dlg.help_16","help_16.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.LIGHT_ON,"light-on","emotions_dlg.lightbulb_on","lightbulb_on.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.LIGHT_OFF,"light-off","emotions_dlg.lightbulb","lightbulb.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.YELLOW_STAR,"yellow-star","emotions_dlg.star_yellow","star_yellow.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.YELLOW_STAR_2,"yellow-star","emotions_dlg.star_yellow","star_yellow.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.RED_STAR,"red-star","emotions_dlg.star_red","star_red.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.GREEN_STAR,"green-star","emotions_dlg.star_green","star_green.png"),new h(")",e.regularExpressions._REGEXES_EMOTICON.BLUE_STAR,"blue-star","emotions_dlg.star_blue","star_blue.png"),new h("3",e.regularExpressions._REGEXES_EMOTICON.HEART,"heart","emotions_dlg.heart","heart.png"),new h("3",e.regularExpressions._REGEXES_EMOTICON.BROKEN_HEAR,"broken-heart","emotions_dlg.broken_heart","broken_heart.png")];let y;const C=[];for(y=0;y<b.length;y++)C[y]=new u.a.Image,C[y].src=b[y].imagePath;function w(e,t){const n=m.formatter.get(e)[0],o=m.dom.create(n.inline,{style:n.styles});o.appendChild(document.createTextNode(t)),m.execCommand("mceInsertContent",!1,"".concat(r(o),"\ufeff"),{skip_undo:!0})}if(x(k.a)){const e={"*":"italic",_:"italic","`":"monospace"};s.default.each(e,(e,t)=>{const n=new RegExp("(?:[\\s\\xA0\\u200b\\uFEFF]+|^)(\\".concat(e,"(?=[^\\s").concat(e,"])([^").concat(e,"]*?[^\\s]))$"));g.registerHandler(e.charCodeAt(0),i(n,e=>{w(t,e[2])},!0))});const t={"*":"bold",_:"bold","~":"strikethrough"};s.default.each(t,(e,t)=>{const n=new RegExp("(?:[\\s\\xA0\\u200b\\uFEFF]+|^)(\\".concat(e,"\\").concat(e,"(?=[^\\s])([^*]*?[^\\s])\\").concat(e,")$"));g.registerHandler(e.charCodeAt(0),i(n,e=>{w(t,e[2])},!0))}),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(\#)$/,()=>{m.execCommand("formatBlock",!1,"h1",{skip_undo:!0})},!0)),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(\#\#)$/,()=>{m.execCommand("formatBlock",!1,"h2",{skip_undo:!0})},!0)),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(\#\#\#)$/,()=>{m.execCommand("formatBlock",!1,"h3",{skip_undo:!0})},!0)),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(\#\#\#\#)$/,()=>{m.execCommand("formatBlock",!1,"h4",{skip_undo:!0})},!0)),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(\#\#\#\#\#)$/,()=>{m.execCommand("formatBlock",!1,"h5",{skip_undo:!0})},!0)),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(\#\#\#\#\#\#)$/,()=>{m.execCommand("formatBlock",!1,"h6",{skip_undo:!0})},!0)),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(1\))$/,()=>{m.execCommand("InsertOrderedList")},!0)),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(>)$/,()=>{m.execCommand("formatBlock",!1,"blockquote",{skip_undo:!0})},!0));const n=i(/^\u200b?(\-\-)$/,()=>{m.execCommand("mceInsertContent",!1,"<hr />",{skip_undo:!0})},!0),o=i(/^(\*\*)$/,()=>{m.execCommand("mceInsertContent",!1,"<hr />",{skip_undo:!0})},!0);g.registerHandler("-".charCodeAt(0),n),g.registerHandler("*".charCodeAt(0),o);const a=i(/^\u200b?(\`\`)$/,()=>{B.insertMacro({contentId:p.a.get("content-id")||"0",macro:{name:"code",body:""}})},!0);g.registerHandler("`".charCodeAt(0),a)}else{const e={"*":"bold",_:"italic","~":"subscript","^":"superscript","+":"underline","-":"strikethrough"};for(s.default.each(e,(e,t)=>{const n=new RegExp("(?:[\\s\\xA0\\u200b\\uFEFF]+|^)(\\".concat(e,"(?=[^\\s").concat(e,"])([^").concat(e,"]*?[^\\s]))$"));g.registerHandler(e.charCodeAt(0),i(n,e=>{w(t,e[2])},!0))}),m.formatter.register("code",{inline:"code"}),g.registerHandler("}".charCodeAt(0),i(/(?:[\s\xA0\u200b]+|^)({{(?=[^\s])([^}]*?[^\s])})$/,e=>{w("code",e[2])},!0)),y=1;y<=6;y++)(e=>{g.registerHandler(" ".charCodeAt(0),i(new RegExp("^\\u200b?(h".concat(e,"\\.)$")),()=>{m.execCommand("formatBlock",!1,"h".concat(e),{skip_undo:!0})},!0))})(y);g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(bq\.)$/,()=>{m.execCommand("formatBlock",!1,"blockquote",{skip_undo:!0})},!0));const t=i(/^\u200b?(\-\-\-\-)$/,()=>{m.execCommand("mceInsertContent",!1,"<hr />",{skip_undo:!0})},!0);g.registerHandler(" ".charCodeAt(0),t),g.registerHandler(13,t),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(\#)$/,()=>{m.execCommand("InsertOrderedList")},!0))}g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(\*)$/,()=>{m.execCommand("InsertUnorderedList")},!0)),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(1\.)$/,()=>{m.execCommand("InsertOrderedList")},!0)),g.registerHandler(" ".charCodeAt(0),i(/^\u200b?(\-)$/,()=>{const e=m.dom;m.execCommand("InsertUnorderedList");const t=e.getParent(m.selection.getNode(),"OL,UL");t&&(e.setStyles(t,{listStyleType:"square"}),t.removeAttribute("data-mce-style"))},!0)),Object(a.b)("confluence.editor.registerHandlers",{handlerManager:g,createHandler:i,ed:m});const v=i(/((\<\-\-?\>)([^\s-]*))$/,e=>{m.execCommand("mceInsertContent",!1,"↔"+e[3],{skip_undo:!0})},!1);g.registerHandler(" ".charCodeAt(0),v),g.registerHandler(13,v);const O=i(/((\-\-?\>)([^\s-]*))$/,e=>{m.execCommand("mceInsertContent",!1,"→"+e[3],{skip_undo:!0})},!1);g.registerHandler(" ".charCodeAt(0),O),g.registerHandler(13,O);const j=i(/((\<\-\-?)([^\s-]*))$/,e=>{m.execCommand("mceInsertContent",!1,"←"+e[3],{skip_undo:!0})},!1);g.registerHandler(" ".charCodeAt(0),j),g.registerHandler(13,j),g.registerHandler(" ".charCodeAt(0),i(/[^-]*[\s](\-\-\-?)$/,e=>{const t=2===e[1].length?"–":"—";m.execCommand("mceInsertContent",!1,t,{skip_undo:!0})},!1));const T=i(/(([^\s-]+)(\-\-\-?)([^\s-]+))$/,e=>{const t=2===e[3].length?"–":"—";m.execCommand("mceInsertContent",!1,e[2]+t+e[4],{skip_undo:!0})},!1);g.registerHandler(" ".charCodeAt(0),T),g.registerHandler(13,T),g.registerHandler(13,i(/(^\u200b?\|\|\s*(?:[^|]*\s?\|\|\s?)+$)/,e=>{let t='<table class="confluenceTable"><tr>',n="",o=!0;const a=Object(s.default)(e[1].slice(2,-2).split("||")).map((function(e){return e=s.default.trim(this),o=o&&""==e,e}));o&&(a[0]=m.translate("editor.autoformat.sampletext.firstcell"));for(let e=0,o=a.length;e<o;e++)t+='<th class="confluenceTh">'.concat(a[e],"</th>"),n+='<td class="confluenceTd">'.concat(Object(f.b)().ZERO_WIDTH_WHITESPACE,"</td>");t+="</tr><tr>".concat(n,"</tr></table>"),m.execCommand("mceInsertContent",!1,t,{skip_undo:!0}),m.selection.select(Object(s.default)(m.selection.getRng(!0).commonAncestorContainer).parents("table").find(o?"th":"td")[0].childNodes[0]),Object(s.default)(m.selection.getRng().startContainer).parent().closest('[contenteditable="true"]').focus()},!0,I)),g.registerHandler(13,i(/(^\u200b?\|\s?(?:[^|]*\s?\|\s?)+$)/,e=>{let t='<table class="confluenceTable"><tr>',n=!0;const o=Object(s.default)(e[1].slice(1,-1).split("|")).map((function(e){return e=s.default.trim(this),n=n&&""==e,e}));n&&(o[0]=m.translate("editor.autoformat.sampletext.firstcell"));for(let e=0,n=o.length;e<n;e++)t+='<td class="confluenceTd">'.concat(o[e],"</td>");t+="</tr></table>",m.execCommand("mceInsertContent",!1,t,{skip_undo:!0}),n&&m.selection.select(Object(s.default)(m.selection.getRng(!0).commonAncestorContainer).parents("table").find("td")[0].childNodes[0]),Object(s.default)(m.selection.getRng().startContainer).parent().closest('[contenteditable="true"]').focus()},!0,I));const E=i(/\b(((https?|ftp):\/\/|(www\.))[\w\.\$\-_\+!\*'\(\),/\?:@=&%#~;\[\]]+)$/,e=>{const t=e[3]?e[1]:"http://".concat(e[1]),n=m.dom.create("a",{href:t});n.appendChild(document.createTextNode(e[1])),m.execCommand("mceInsertContent",!1,r(n),{skip_undo:!0}),m.getDoc().execCommand("unlink",!1,{})},!1,"a");g.registerHandler(" ".charCodeAt(0),E),g.registerHandler(13,E);const A=i(/\b((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)$/i,e=>{const t=m.dom.create("a",{href:"mailto:".concat(e[1])});t.appendChild(document.createTextNode(e[1])),m.execCommand("mceInsertContent",!1,r(t),{skip_undo:!0}),m.getDoc().execCommand("unlink",!1,{})},!1,"a");g.registerHandler(" ".charCodeAt(0),A),g.registerHandler(13,A);const S=function(e,t){const n=i(e,()=>{m.execCommand("mceInsertContent",!1,t,{skip_undo:!0})},!1);g.registerHandler(" ".charCodeAt(0),n),g.registerHandler(13,n)};S(/(?:\b|^)(jira|JIRA)$/,"Jira"),S(/(?:\b|^)([Ss]tatus[Pp]age)$/,"Statuspage"),S(/(?:\b|^)([Ff]ishEye)$/,"Fisheye"),S(/(?:\b|^)([Ss]ource[Tt]ree)$/,"Sourcetree"),S(/(?:\b|^)([Hh]ip[Cc]hat)$/,"Hipchat"),S(/(?:\b|^)([Bb]it[Bb]ucket)$/,"Bitbucket"),S(/(?:\b|^)(atlassian)$/,"Atlassian");const M={"]":e.regularExpressions._REGEXES.WIKI_LINK,"}":e.regularExpressions._REGEXES.WIKI_MACRO,"!":e.regularExpressions._REGEXES.WIKI_EMBED};s.default.each(M,(e,t)=>{g.registerHandler(e.charCodeAt(0),i(t,t=>{const n=t[1]+e,o={type:"POST",contentType:"application/json; charset=utf-8",url:"".concat(p.a.get("context-path"),"/rest/tinymce/1/wikixhtmlconverter"),data:s.default.toJSON({wiki:n,entityId:p.a.get("content-id"),spaceKey:p.a.get("space-key"),suppressFirstParagraph:!0}),dataType:"text",timeout:5e3};"}"==e?u.a.tinymce.confluence.MacroUtils.insertMacro(o):"!"==e?s.default.ajax(o).done(e=>{!n===e?u.a.tinymce.confluence.ImageUtils.insertImagePlaceholder(e):m.execCommand("mceInsertContent",!1,e,{skip_undo:!0})}):s.default.ajax(o).done(e=>{m.execCommand("mceInsertContent",!1,e,{skip_undo:!0})})},!0))}),m.on("KeyPress",e=>g.executeHandlers(l(e),m,e,t)),m.on("KeyDown",e=>{if(13===l(e))return g.executeHandlers(13,m,e,t)},!0);return{getHandlerCount:()=>Object.keys(g.handlers).length}};We.regularExpressions={_REGEXES:{WIKI_MACRO:/(?:\s|^)(\{[^{^}]+)$/,WIKI_LINK:/(?:\s|^)(\[[^\[^\]]+)$/,WIKI_EMBED:/(?:\s|^)(![^!]{5,})$/},_REGEXES_EMOTICON:{SMILE:/\B(:-?)$/,SAD:/\B(:-?)$/,CHEEKY:/\B(:-?)$/,CHEEKY_2:/\B(:-?)$/,LAUGH:/\B(:-?)$/,WINK:/\B(;-?)$/,THUMBS_UP:/\B(\(y)$/,THUMBS_DOWN:/\B(\(n)$/,INFORMATION:/\B(\(i)$/,TICK:/\B(\(\/)$/,CROSS:/\B(\(x)$/,WARNING:/\B(\(!)$/,PLUS:/\B(\(\+)$/,MINUS:/\B(\(-)$/,QUESTION:/\B(\(\?)$/,LIGHT_ON:/\B(\(on)$/,LIGHT_OFF:/\B(\(off)$/,YELLOW_STAR:/\B(\(\*)$/,YELLOW_STAR_2:/\B(\(\*y)$/,RED_STAR:/\B(\(\*r)$/,GREEN_STAR:/\B(\(\*g)$/,BLUE_STAR:/\B(\(\*b)$/,HEART:/\B(<)$/,BROKEN_HEAR:/\B(<\/)$/}};let Ke=0;const $e={fixedOffset:0,leftOffset:0,marginTop:0,objDocument:u.a.document,objHead:"head",objWindow:u.a,scrollableArea:u.a,cacheHeaderHeight:!1};function Ue(e,t){const n=this;n.$el=Object(s.default)(e),n.el=e,n.id=Ke++,n.$el.bind("destroyed",s.default.proxy(n.teardown,n)),n.$clonedHeader=null,n.$originalHeader=null,n.cachedHeaderHeight=null,n.isSticky=!1,n.hasBeenSticky=!1,n.leftOffset=null,n.topOffset=null,n.init=function(){n.setOptions(t),n.$el.each((function(){const e=Object(s.default)(this);e.css("padding",0),n.$originalHeader=Object(s.default)("thead:first",this),n.$clonedHeader=n.$originalHeader.clone(),e.trigger("clonedHeader.".concat("stickyTableHeaders"),[n.$clonedHeader]),n.$clonedHeader.addClass("tableFloatingHeader"),n.$clonedHeader.css("display","none"),n.$originalHeader.addClass("tableFloatingHeaderOriginal"),n.$originalHeader.after(n.$clonedHeader),n.$printStyle=Object(s.default)('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),n.$head.append(n.$printStyle)})),n.updateWidth(),n.toggleHeaders(),n.bind()},n.destroy=function(){n.$el.unbind("destroyed",n.teardown),n.teardown()},n.teardown=function(){n.isSticky&&n.$originalHeader.css("position","static"),s.default.removeData(n.el,"plugin_".concat("stickyTableHeaders")),n.unbind(),n.$clonedHeader.remove(),n.$originalHeader.removeClass("tableFloatingHeaderOriginal"),n.$originalHeader.css("visibility","visible"),n.$printStyle.remove(),n.el=null,n.$el=null},n.bind=function(){n.$scrollableArea.on("scroll.".concat("stickyTableHeaders"),n.toggleHeaders),n.isWindowScrolling||(n.$window.on("scroll.".concat("stickyTableHeaders").concat(n.id),n.setPositionValues),n.$window.on("resize.".concat("stickyTableHeaders").concat(n.id),n.toggleHeaders)),n.$scrollableArea.on("resize.".concat("stickyTableHeaders"),n.toggleHeaders),n.$scrollableArea.on("resize.".concat("stickyTableHeaders"),n.updateWidth)},n.unbind=function(){n.$scrollableArea.off(".".concat("stickyTableHeaders"),n.toggleHeaders),n.isWindowScrolling||(n.$window.off(".".concat("stickyTableHeaders").concat(n.id),n.setPositionValues),n.$window.off(".".concat("stickyTableHeaders").concat(n.id),n.toggleHeaders)),n.$scrollableArea.off(".".concat("stickyTableHeaders"),n.updateWidth)},n.debounce=function(e,t){let n=null;return function(){const o=this,a=arguments;clearTimeout(n),n=setTimeout(()=>{e.apply(o,a)},t)}},n.toggleHeaders=n.debounce(()=>{n.$el&&n.$el.each((function(){const e=Object(s.default)(this);let t;const o=n.isWindowScrolling?isNaN(n.options.fixedOffset)?n.options.fixedOffset.outerHeight():n.options.fixedOffset:n.$scrollableArea.offset().top+(isNaN(n.options.fixedOffset)?0:n.options.fixedOffset),a=e.offset(),r=n.$scrollableArea.scrollTop()+o,c=n.$scrollableArea.scrollLeft(),i=n.options.cacheHeaderHeight?n.cachedHeaderHeight:n.$clonedHeader.height(),l=n.isWindowScrolling?r>a.top:o>a.top,d=(n.isWindowScrolling?r:0)<a.top+e.height()-i-(n.isWindowScrolling?0:o);l&&d?(t=a.left-c+n.options.leftOffset,n.$originalHeader.css({position:"fixed","margin-top":n.options.marginTop,left:t,"z-index":3}),n.leftOffset=t,n.topOffset=o,n.$clonedHeader.css("display",""),n.isSticky||(n.isSticky=!0,n.updateWidth(),e.trigger("enabledStickiness.".concat("stickyTableHeaders"))),n.setPositionValues()):n.isSticky&&(n.$originalHeader.css("position","static"),n.$clonedHeader.css("display","none"),n.isSticky=!1,n.resetWidth(Object(s.default)("td,th",n.$clonedHeader),Object(s.default)("td,th",n.$originalHeader)),e.trigger("disabledStickiness.".concat("stickyTableHeaders")))}))},0),n.setPositionValues=n.debounce(()=>{const e=n.$window.scrollTop(),t=n.$window.scrollLeft();!n.isSticky||e<0||e+n.$window.height()>n.$document.height()||t<0||t+n.$window.width()>n.$document.width()||n.$originalHeader.css({top:n.topOffset-(n.isWindowScrolling?0:e),left:n.leftOffset-(n.isWindowScrolling?0:t)})},0),n.updateWidth=n.debounce(()=>{if(!n.isSticky)return;n.$originalHeaderCells||(n.$originalHeaderCells=Object(s.default)("th,td",n.$originalHeader)),n.$clonedHeaderCells||(n.$clonedHeaderCells=Object(s.default)("th,td",n.$clonedHeader));const e=n.getWidth(n.$clonedHeaderCells);n.setWidth(e,n.$clonedHeaderCells,n.$originalHeaderCells),n.$originalHeader.css("width",n.$clonedHeader.width()),n.options.cacheHeaderHeight&&(n.cachedHeaderHeight=n.$clonedHeader.height())},0),n.getWidth=function(e){const t=[];return e.each((function(e){let o;const a=Object(s.default)(this);if("border-box"===a.css("box-sizing")){const e=a[0].getBoundingClientRect();o=e.width?e.width:e.right-e.left}else{if("collapse"===Object(s.default)("th",n.$originalHeader).css("border-collapse"))if(u.a.getComputedStyle)o=parseFloat(u.a.getComputedStyle(this,null).width);else{const e=parseFloat(a.css("padding-left")),t=parseFloat(a.css("padding-right")),n=parseFloat(a.css("border-width"));o=a.outerWidth()-e-t-n}else o=a.width()}t[e]=o})),t},n.setWidth=function(e,t,n){t.each(t=>{const o=e[t];n.eq(t).css({"min-width":o,"max-width":o})})},n.resetWidth=function(e,t){e.each((function(e){const n=Object(s.default)(this);t.eq(e).css({"min-width":n.css("min-width"),"max-width":n.css("max-width")})}))},n.setOptions=function(e){n.options=s.default.extend({},$e,e),n.$window=Object(s.default)(n.options.objWindow),n.$head=Object(s.default)(n.options.objHead),n.$document=Object(s.default)(n.options.objDocument),n.$scrollableArea=Object(s.default)(n.options.scrollableArea),n.isWindowScrolling=n.$scrollableArea[0]===n.$window[0]},n.updateOptions=function(e){n.setOptions(e),n.unbind(),n.bind(),n.updateWidth(),n.toggleHeaders()},n.init()}s.default.fn.stickyTableHeaders=function(e){return this.each((function(){const t=s.default.data(this,"plugin_".concat("stickyTableHeaders"));t?"string"==typeof e?t[e].apply(t):t.updateOptions(e):"destroy"!==e&&s.default.data(this,"plugin_".concat("stickyTableHeaders"),new Ue(this,e))}))};const Ve=function(e){return!e.parents("table").length>0},qe=function(e){return!e.closest(".columnLayout").length>0},Ge=function(){return!Object(s.default)("body").hasClass("theme-documentation")};var Je=function(e){const t=Object(s.default)(e);return Ge()&&function(e){return!e.hasClass("stickyTableHeaders")}(t)&&qe(t)&&Ve(t)&&function(e){return e.find("> thead:first").is(":visible")}(t)&&function(e){return 1===e.find("thead").children().length}(t)&&function(e){return 1===e.find(".confluenceTh").parent().length}(t)&&function(e){return e.find(".confluenceTh").siblings().hasClass("confluenceTh")}(t)},Xe=function(e,t){const n=t||Object(s.default)(window);e.closest(".table-wrap").scroll(()=>{n.trigger("scroll.stickyTableHeaders")})},Qe=function(e){Object(s.default)(e).each((function(){const e=Object(s.default)(this),t=e.find(".confluenceTh[rowspan]").length>0,n=e.find("> :first-child > :first-child .confluenceTh"),o=n.length&&n.closest("thead").length>0,a=n.length&&0===n.parent().index();if(Ve(e)&&qe(e)&&!o&&a&&!t){const t=Object(s.default)("<thead />").append(n.parent());e.prepend(t)}}))},Ye=Ge;const Ze=function(e,t){const n=e.filter((function(){return Je(this)}));n.stickyTableHeaders(t).addClass("stickyTableHeaders"),Object(a.a)("sticky-table-headers.change.options",(e,t)=>{n.stickyTableHeaders(t)}),Xe(n)};var et=function(){const e=Object(s.default)(".confluenceTable"),t=Object(s.default)(window);if(Ye()){if(Qe(e),window.MutationObserver){const e=document.querySelector("#page");if(!e)return;const n=/sticky|tableFloating|confluenceTh/;new MutationObserver(s.default.debounce(e=>{let o,a=!1;for(let t=0,r=e.length;t<r;t++)if(o=e[t].target.className,!n.test(o)){a=!0;break}a&&t.trigger("resize.stickyTableHeaders")},0)).observe(e,{subtree:!0,attributes:!0,childList:!0})}Ze(e,{cacheHeaderHeight:!0})}};const tt=function(e,t){const n=u.a.tinymce.activeEditor;if(n){const o=function(e){const t={};return t.objWindow=Object(s.default)(e.getWin()),t.scrollableArea=t.objWindow,t.objDocument=Object(s.default)(e.getDoc()),t.objHead=t.objDocument.find("head"),t}(n),a=s.default.extend({},o,t),r=e.filter((function(){return Je(this)}));r.stickyTableHeaders(a).addClass("stickyTableHeaders"),Xe(r,a.objWindow)}};var nt=function(){const e=u.a.tinymce.activeEditor;if(e){const t=Object(s.default)(e.getBody()).find(".confluenceTable");Qe(t),tt(t)}};const ot={init(e){const t=u.a.Confluence.Editor;function n(){if(t.UI.isFormEnabled()&&e.isDirty()&&!t.isEmpty())return e.translate("unsaved.comment.lost")}e.on("Init",()=>{Object(a.a)("beforeunload",n)}),e.on("Remove",()=>{Object(a.c)("beforeunload",n)})},getInfo:()=>({longname:"Confluence Leave Comment",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})};const at={init(e){const t=u.a.Confluence.Editor;function n(){if(t.UI.isFormEnabled()&&e.isDirty()&&!t.isEmpty())return e.translate("unsaved.template.lost")}e.on("Init",()=>{Object(a.a)("beforeunload",n)}),e.on("Remove",()=>{Object(a.c)("beforeunload",n)})},getInfo:()=>({longname:"Confluence Leave Template",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})};var rt=n("FuAq");const ct=()=>({init:e=>{const t=u.a.Confluence.Editor.Drafts,n=u.a.Confluence.Editor;let o;function r(){let e=u.a.location.search;return void 0===e?"":("?"===e.charAt(0)&&(e=e.substr(1)),e.split("&").filter(e=>0===e.indexOf("username=")||0===e.indexOf("userFullName=")||0===e.indexOf("accountId=")||0===e.indexOf("displayName=")||0===e.indexOf("accessType=")||0===e.indexOf("grantAccess=")||0===e.indexOf("atlOrigin=")||0===e.indexOf("src.")).join("&"))}function c(){const t=Object(rt.a)();var o,c;o=p.a.get("draft-id"),c=p.a.get("draft-share-id"),0!==o&&(Object(s.default)("#confluence-ui").length?t.replace("".concat(u.a.location.pathname,"?draftId=").concat(o,"&draftShareId=").concat(c,"&").concat(r())):t.replace("".concat(b.a,"/pages/resumedraft.action?draftId=").concat(o,"&draftShareId=").concat(c,"&").concat(r()))),n.UI.cancelButton.attr("data-tooltip",e.translate("editor.shared.draft.done.desc")),n.UI.cancelButton.on("click",()=>{Object(a.b)("analytics",{name:"confluence.editor.done.button.clicked"}),Object(a.b)("analytics",{name:"confluence.editor.close",data:{source:"closeButton",contentId:p.a.get("content-id"),currentVersion:p.a.get("page-version")||"null"}})})}function i(){if(!p.a.get("has-collaborated")&&u.a.AJS.Rte.Content.editorHasContentChanged()){p.a.set("has-collaborated",!0);const e=p.a.get("content-id");s.default.ajax({type:"PUT",url:"".concat(b.a,"/rest/experimental/relation/collaborator/from/user/current/to/content/").concat(e,"?targetStatus=draft"),error(){p.a.set("has-collaborated",!1)}}),s.default.ajax({type:"DELETE",url:"".concat(b.a,"/rest/experimental/relation/touched/from/user/current/to/content/").concat(e,"?targetStatus=current")}),s.default.ajax({type:"PUT",url:"".concat(b.a,"/rest/experimental/relation/touched/from/user/current/to/content/").concat(e,"?targetStatus=draft"),error(){p.a.set("has-collaborated",!1)}})}}e.on("Init",()=>{x("collaborative-audit-log")&&Object(a.a)("editor.local.change",i)}),e.on("Remove",()=>{x("collaborative-audit-log")&&Object(a.c)("editor.local.change",i)}),Object(a.a)("rte-ready",()=>{Object(s.default)("#draft-status").show(),t.bindUnloadMessage(),n.UI.cancelButton.click(()=>{t.save({skipErrorHandler:!0})}),c(),o=setInterval(t.save,+p.a.get("draft-save-interval")||3e4)}),Object(a.a)("rte-destroyed",()=>{clearInterval(o)})},getInfo:()=>({longname:"Confluence Drafts",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})});const it={init(e){e.on("Init",()=>{e.addCommand("mceConfMacroBrowser",u.a.tinymce.confluence.macrobrowser.macroBrowserToolbarButtonClicked)})},getInfo:()=>({longname:"Confluence Macro Browser",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})};const lt={init:e=>{e.on("init",()=>{if(p.a.get("use-watch")){const o={userWatchingOwnContent:p.a.get("user-watching-own-content")};Object(s.default)("#rte-savebar-tinymce-plugin-point").append((t=t=>e.translate(t),n=o.userWatchingOwnContent,'\n    <ul class="toolbar-group toolbar-group-watch-page" id="toolbar-group-watch-page-after-comment">\n        <li class="toolbar-item">\n            <input id="watchPage" name="watchPageAfterComment" value="true" type="checkbox" '.concat(n?'checked="checked"':"",'/>\n            <label for="watchPage">').concat(t("comment.notification.enable"),"</label>\n        </li>\n    </ul>\n")))}var t,n})},getInfo:()=>({longname:"Confluence Watch",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})};const st={init:e=>{const t=e=>{Object(s.default)(".tablesorter",e.node).each((e,t)=>{let n,o,a=Object(s.default)(t).find("thead");1===a.length&&(a=a[0],"THEAD"===a.nodeName&&1===a.childNodes.length&&(o=a.removeChild(a.childNodes[0]),n=Object(s.default)(t).find("tbody")[0],t.removeChild(a),n.insertBefore(o,n.childNodes[0])))})};e.on("PastePostProcess",t),e.on("remove",()=>{e.off("PastePostProcess",t)})},getInfo:()=>({longname:"ConfluenceSortableTablesPlugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})};const dt={init(e){e.on("Init",()=>{e.getBody().classList.add("resizable")});let t=0;if(e.getParam("fullscreen_is_enabled"))return;const n=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight)),o=parseInt(e.getParam("autoresize_max_height",0));function a(r){const c=e.getDoc(),i=c.body,l=c.documentElement,d=u.a.tinymce.DOM;let f=n;const m=r===Object(r)&&r.forceExec||!1,p=Object(s.default)(c).height();if(p>n&&(f=p),o&&p>o?(f=o,i.style.overflowY="auto",l.style.overflowY="auto"):(i.style.overflowY="hidden",l.style.overflowY="hidden",i.scrollTop=0),m||f!==t){const n=f-t;d.setStyle(d.get("".concat(e.id,"_ifr")),"height","".concat(f,"px")),t=f,u.a.tinymce.Env.webkit&&n<0&&a()}}e.on("Change SetContent Paste KeyUp Init",a),e.addCommand("mceAutoResize",a)},getInfo:()=>({longname:"Auto Resize",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})};var ut=function(){function e(e){return e.nodeValue.toLowerCase()}return{search(t,n,o,a,r){const c=t.getSel(),i=function e(t){const n=[];if(t.nodeType===Node.TEXT_NODE)n.push(t);else{const o=t.childNodes;for(let t=0,a=o.length;t<a;++t)n.push.apply(n,e(o[t]))}return n}(a);n=n.replace(/\s/g,"").toLowerCase();const l=i.map(e).join("");o=function(e,t,n){const o=e.getRng();if(o.endContainer.nodeValue){const e=n.indexOf(o.endContainer.nodeValue.toLowerCase())+o.endOffset;t=t!==e&&-1!==t?e:t}return t}(t,o,l);const s=function(e,t,n,o){let a=o?e.lastIndexOf(t,n-1):e.indexOf(t,n+1);return a<0&&!o?a=e.indexOf(t):0===a&&0===n&&o&&(a=e.lastIndexOf(t)),a}(l,n,o,r);if(s<0)return[!1,s];const d=function(e,t,n){let o,a,r,c,i=0;for(let l=0;l<t.length;l++){if(t[l].nodeType===Node.TEXT_NODE){const s=e+n.length;!a&&t[l].length+i>=s&&(a=t[l],c=s-i),!o&&t[l].length+i>e&&(o=t[l],r=e-i),i+=t[l].length}if(o&&a)return{startNode:o,startIndex:r,endNode:a,endIndex:c}}}(s,i,n),u=document.createRange();return u.setStart(d.startNode,d.startIndex),u.setEnd(d.endNode,d.endIndex),c.removeAllRanges(),c.addRange(u),u.startContainer.parentNode.scrollIntoView(),[!0,s]}}},ft=n("m+2k");const mt=function(){const e=ut(),t=new ft.a(u.a.navigator.userAgent),n='<mark data-searching class="find-current">',o=function e(t){const n=t;let o=null,a=null,r=null,c=null,i=null;const l={initialised:!1,find:function(e,t,n){const a=o.getFindInput().val(),c=r.findText(a,!0,e);c&&t?t():!c&&n&&n()},replace:function(e,t){const n=o.getFindInput(),a=o.getReplaceInput();let c="";a&&(c=a.val());const i=r.replaceText(n.val(),c,!0);i&&e?e():!i&&t&&t()},replaceAll:function(e,t){const n=o.getFindInput(),a=o.getReplaceInput();let c="";a&&(c=a.val());const i=r.replaceAll(n.val(),c);i&&e?e():!i&&t&&t()},focus:function(){o.focusFindTextBox()},isVisible:function(){return null!=o},init:function(){o=e.UI(n,c,i),a=new e.MarkManager,a.addListener(o),r=null,r=u.a.tinymce.Env.ie?new e.implIE(o):new e.impl(o,a),o.getFindInput().focus()},onVisible:function(e){if(null!=e&&e.length>0){const t=o.getFindInput(),n=t.val();t.val(n+e)}o.onVisible()},onHide:function(){c=o.getFindInput().val(),i=o.getReplaceInput().val(),r.destroy(),r=null,o.destroy(),o=null,a.destroy(),a=null},_clearSavedValues:function(){c=null,i=null}};return l};return o.utils={moveCursorToEnd(e){if(u.a.tinymce.Env.ie){const t=e.createTextRange();t.execCommand("SelectAll"),t.move("textedit"),t.select()}else if(u.a.tinymce.Env.gecko){const t=Object(s.default)(e).val().length;e.setSelectionRange(t,t)}},createTextRange:(e,t)=>e.selection?e.selection.createRange():t.getBody().createTextRange()},o.impl=function(n,o){let a=new u.a.tinymce.html.Writer,r=o,c=-1;const i=function n(o,a,i){if(!o)return!1;const l=u.a.tinymce.activeEditor;let s=l.selection;const d=l.getWin();function f(){return l.undoManager.ignore(()=>{r.markCurrentlySelectedRange()}),!0}function m(){return l.undoManager.ignore(()=>{r.removeCurrentMark(!0),u.a.tinymce.activeEditor.selection.isCollapsed()||u.a.tinymce.activeEditor.selection.collapse()}),!1}if(r.isCursorAtCurrentMark()&&l.undoManager.ignore(()=>{s=r.selectCurrentMark()}),s.isCollapsed()||s.collapse(i),u.a.tinymce.Env.gecko)return d.find(o,!1,i)?f():a?(s.select(l.getBody(),!1),s.collapse(!i),n(o,!1,i)):m();if(!t.isMSEdge())return d.find(o,!1,i,!0,!1,!1,!1)?f():m();{const t=e.search(s,o,c,l.getBody(),i);if(c=t[1],t[0])return f()}},l=function(e){const t=u.a.tinymce.activeEditor;a.text(e),t.selection.setContent(a.getContent(),{format:"raw"}),a.reset(),t.selection.collapse(!0)},s={};return s.findText=i,s.replaceText=function(e,t,n){const o=u.a.tinymce.activeEditor;return r.hasCurrentMark()?(o.undoManager.transact(()=>{const e=r.replaceCurrentMark(t);e&&o.selection.select(e)}),i(e,n)):i(e,n)},s.replaceAll=function(n,o){const a=u.a.tinymce.activeEditor;let c=0;return a.undoManager.transact(()=>{const i=a.selection,s=a.getWin();if(r.removeCurrentMark(!1),a.execCommand("selectAll"),a.selection.collapse(!0),t.isMSEdge()){let t=-1;for(;;){const r=e.search(i,n,t,a.getBody(),!1);if(!r[0])break;t=r[1],l(o),c++}}else for(;s.find(n,!1,!1,!1,!1,!1,!1);)l(o),c++;if(0===c)u.a.Confluence.EditorNotification.notify("info",a.translate("tinymce.searchreplace_dlg.notfound"));else if(1===c)u.a.Confluence.EditorNotification.notify("success",a.translate("tinymce.searchreplace_dlg.allreplaced.singular"));else if(c>1){const e=a.translate("tinymce.searchreplace_dlg.allreplaced.plural");u.a.Confluence.EditorNotification.notify("success",e.replace("{0}",c))}}),c},s.destroy=function(){r=null,a=null},s},o.implIE=function(e){const t={};let a=e,r=null,c=new u.a.tinymce.html.Writer;const i=o.utils.createTextRange,l=function e(n,o,a){if(!n)return!1;const c=u.a.tinymce.activeEditor,i=c.getDoc();let l=t.storedRange=t.storedRange||i.body.createTextRange();if(c.focus(),r&&r.select(),c.selection.collapse(!a),m(),a&&r){const e=i.body.createTextRange();e.moveToElementText(Object(s.default)("p:first",c.getBody())[0]),l.setEndPoint("StartToStart",e);let t=r.text;t.length&&(t=t.replace(/s+$/,""),t.length&&l.moveEnd("character",-t.length));const n=l.text.length;l.moveEnd("word",-1),l.text.length>=n&&l.moveEnd("character",-1),l.select(),l.collapse(!1)}return r=null,l.findText(n,a?-1:1,0)?(l.scrollIntoView(),l=f(l),l.select(),r=l,!0):o?(c.selection.select(u.a.tinymce.activeEditor.getBody(),!0),c.selection.collapse(!a),e(n,!1,a)):void(t.storedRange=null)},d=function(){m()};let f=function(e){const t=e.htmlText;return e.pasteHTML(n+t+"</mark>"),a.marked(),function(){const e=u.a.tinymce.activeEditor;e.on("Change",d),e.on("BeforeSetContent",d)}(),e},m=function(){!function(){const e=u.a.tinymce.activeEditor;e.off("Change",d),e.off("BeforeSetContent",d)}();const e=u.a.tinymce.activeEditor,t=Object(s.default)("mark",e.getDoc());if(t.length){let n=!1;const o=e.selection.getRng(!0).commonAncestorContainer;Object(s.default)(o).closest("mark").length&&(n=!0),t.each((e,t)=>{const n=Object(s.default)(t);n.contents().each((e,t)=>{n.before(t)})}).remove(),n&&e.execCommand("RemoveFormat")}a.markRemoved()};const p=function(){m()};return t.findText=l,t.replaceText=function(e,t,n){const o=u.a.tinymce.activeEditor;if(r){const e=o.getDoc().createTextNode(t),n=Object(s.default)("mark",o.getDoc());o.undoManager.transact(()=>{n.parent()[0].replaceChild(e,n[0]);const a=o.getDoc().createElement("mark");a.setAttribute("class","current"),a.dataset.searching=!0,e.parentNode.insertBefore(a,e),a.appendChild(o.getDoc().createTextNode(t)),a.parentNode.removeChild(e)})}return l(e,n)},t.replaceAll=function(e,t){const n=u.a.tinymce.activeEditor;let o=0;return n.undoManager.transact(()=>{const a=n.selection,r=n.getDoc();m(),a.select(n.getBody(),!1),a.collapse(!0),n.focus();const l=i(r,n);for(;l.findText(e,1,0);)l.scrollIntoView(),l.select(),c.text(t),n.selection.setContent(c.getContent(),{format:"raw"}),c.reset(),o++,l.moveStart("character",t.length);if(0==o)u.a.Confluence.EditorNotification.notify("info",n.translate("tinymce.searchreplace_dlg.notfound"));else if(1==o)u.a.Confluence.EditorNotification.notify("success",n.translate("tinymce.searchreplace_dlg.allreplaced.singular"));else if(o>1){const e=n.translate("tinymce.searchreplace_dlg.allreplaced.plural");u.a.Confluence.EditorNotification.notify("success",e.replace("{0}",o))}}),o},t.destroy=function(){u.a.tinymce.activeEditor.onBeforeGetContent.remove(p),m(),a=null,r=null,c=null},u.a.tinymce.activeEditor.onBeforeGetContent.add(p),t},o.UI=function(e,t,n){let a=null;const r=o.utils.moveCursorToEnd;u.a.tinymce.activeEditor&&u.a.tinymce.activeEditor.plugins&&u.a.tinymce.activeEditor.plugins.customtoolbar&&(a=u.a.tinymce.activeEditor.plugins.customtoolbar.getToolbarRow(e));const c=function(){const e=Object(s.default)(".toolbar-find-input",a);return e.length?e:null},i=function(){const e=Object(s.default)(".toolbar-replace-input",a);return e.length?e:null},l=function(e){if("input"===e.type||"propertychange"===e.type){const e=c(),t=null!=e&&e.val().length>0;f(t),m(t)}},d=function(){const e=c();h(e&&e.val())};let f=function(e){e?(u.a.tinymce.activeEditor.plugins.customtoolbar.enableToolbarButton("search-toolbar-find-next-button"),u.a.tinymce.activeEditor.plugins.customtoolbar.enableToolbarButton("search-toolbar-find-previous-button")):(u.a.tinymce.activeEditor.plugins.customtoolbar.disableToolbarButton("search-toolbar-find-next-button"),u.a.tinymce.activeEditor.plugins.customtoolbar.disableToolbarButton("search-toolbar-find-previous-button"))},m=function(e){const t=c();p().toggleClass("default-action",e&&t.val().length>0)},p=function(){const e=Object(s.default)(".search-toolbar-find-next-button",a).closest(".aui-button");return e.length?e:null};let g=function(e){const t=u.a.tinymce.activeEditor.plugins.customtoolbar;e?t.enableToolbarButton("search-toolbar-replace-button"):t.disableToolbarButton("search-toolbar-replace-button")},h=function(e){const t=u.a.tinymce.activeEditor.plugins.customtoolbar;e?t.enableToolbarButton("search-toolbar-replaceall-button"):t.disableToolbarButton("search-toolbar-replaceall-button")};const b={};return b.getFindInput=c,b.getReplaceInput=i,b.focusFindTextBox=function(){top.focus(),c().focus()},b.onVisible=function(){const e=c();e.focus(),e.val().length>0&&(r(e[0]),f(!0),h(!0))},b.destroy=function(){},b.marked=function(){g(!0)},b.markRemoved=function(){g(!1)},function(e,t){const n=c();let o=!1;if(e&&e.length&&(n.val(e),o=!0),t&&t.length){i().val(t)}!function(){function e(e,t){if(e)if(u.a.tinymce.isIE9)e[0].attachEvent("onpropertychange",t);else{const n=u.a.tinymce.isIE8?"propertychange":"input";e.bind(n,t)}}const t=c();e(t,l),e(t,d),Object(s.default)(a).focusin(()=>{m(!0)}).focusout(()=>{m(!1)}),t.focus(()=>{m(!0)})}(),f(o),h(o),g(!1)}(t,n),b},o.MarkManager=function(){let e=null;const t=new u.a.tinymce.html.Writer;let o=null;const a=[],r=function(){l()},c=function(){if(!e)return null;const t=u.a.tinymce.activeEditor;return t.selection.select(e[0]),t.selection};let i=function(t){h(),(d(e,t)||o&&u.a.tinymce.activeEditor.selection.getRng(!0).toString()==o)&&(e=null,o=null,s.default.each(a,(e,t)=>{t.markRemoved()}))},l=function(){h(),Object(s.default)("mark",u.a.tinymce.activeEditor.getDoc()).each((e,t)=>{d(Object(s.default)(t),!1)}),e=null,o=null,s.default.each(a,(e,t)=>{t.markRemoved()})},d=function(e,t){const n=u.a.tinymce.activeEditor.selection.getRng(!0);if(!e)return!1;const o=function(e,t){if(e.intersectsNode)return e.intersectsNode(t);{const n=u.a.tinymce.activeEditor.getDoc().createRange();return n.selectNodeContents(t),!(e.compareBoundaryPoints(Range.START_TO_END,n)<=0||e.compareBoundaryPoints(Range.END_TO_START,n)>=0)}}(n,e[0]);let a=null,r=null;if(e.contents().each((t,n)=>{e.before(n),a||(a=n),r=n}),o||t){const e=u.a.tinymce.activeEditor.selection.getRng(!0);e.setStartBefore(a),e.setEndAfter(r),t||e.collapse(!1),u.a.tinymce.activeEditor.selection.setRng(e)}return e.remove(),!0};const f=function(){return!!e||(o?u.a.tinymce.activeEditor.selection.getRng(!0).toString()==o:void 0)},m=function(){l()},p=function(){h(),s.default.each(a,(e,t)=>{t.markRemoved()})};let g=function(e){const t=u.a.tinymce.activeEditor;t.on("Change",r),t.on("BeforeSetContent",r),e&&(t.on("Click",p),t.on("DblClick",p))},h=function(){const e=u.a.tinymce.activeEditor;e.off("Change",r),e.off("BeforeSetContent",r),e.off("Click",p),e.off("DblClick",p)};const b={markCurrentlySelectedRange:function(){const t=u.a.tinymce.activeEditor;if(e){const e=t.selection.getBookmark();i(!1),t.selection.moveToBookmark(e)}o=null;const r=t.selection.getRng(!0);e=Object(s.default)(n+"</mark>",t.getDoc());try{r.surroundContents(e[0]),g(!1)}catch(t){1==t.code&&(o=r.toString(),e=null,g(!0))}s.default.each(a,(e,t)=>{t.marked()}),o||c().collapse()}};return b.removeCurrentMark=i,b.removeAllMarks=l,b.selectCurrentMark=c,b.isCursorAtCurrentMark=function(){if(!e)return!1;const t=u.a.tinymce.activeEditor.selection;t.isCollapsed()||t.collapse();const n=t.getRng(!0);if(3===n.startContainer.nodeType)return n.startContainer.parentNode.normalize(),n.startContainer.nextSibling===e[0]||n.startContainer.previousSibling===e[0];if(1===n.startContainer.nodeType){const t=n.startContainer.childNodes,o=n.startOffset;return o>0&&t[o-1]===e[0]||!!(o+1<t.length&&t[o+1===e[0]])}},b.hasCurrentMark=f,b.replaceCurrentMark=function(n){if(function(n){if(e||!f())return!1;const o=u.a.tinymce.activeEditor;return o.undoManager.transact(()=>{t.text(n),o.selection.setContent(t.getContent(),{format:"raw"}),t.reset()}),o.undoManager.ignore(()=>{i(!1)}),!0}(n))return null;if(!e)return null;const o=u.a.tinymce.activeEditor,a=[];o.undoManager.ignore(()=>{e.contents().each((e,t)=>{a.push(t)}),i(!1)});let r=void 0;return o.undoManager.transact(()=>{r=Object(s.default)(a[0]).before(o.getDoc().createTextNode(n))[0].previousSibling;for(let e=a.length-1;e>=0;e--)Object(s.default)(a[e]).remove()}),r},b.addListener=function(e){a.push(e)},b.destroy=function(){i(!0),u.a.tinymce.activeEditor.onBeforeGetContent.remove(m)},u.a.tinymce.activeEditor.onBeforeGetContent.add(m),b},o};var pt=n("Q2fH");var gt=function(){Object(pt.a)(document,"initContextToolbars.Toolbar",(e,t)=>{u.a.Confluence.Editor.searchToolbar=function(){const e=u.a.Confluence.Editor;return{initContextToolbars(t,n){const o=function(e){if(u.a.tinymce.Env.ie){const t=e.createTextRange();t.execCommand("SelectAll"),t.move("textedit"),t.select()}else if(u.a.tinymce.Env.gecko){const t=Object(s.default)(e).val().length;e.setSelectionRange(t,t)}},a=function(e){top.focus(),u.a.tinymce.activeEditor.plugins.customtoolbar.focusToolbarButton(e)},r=function(){top.focus();const e=Object(s.default)("#search-toolbar-find-text");e.focus(),o(e[0])},c=function(){top.focus();const e=Object(s.default)("#search-toolbar-replace-text");e.focus(),o(e[0])},i=function(){if(u.a.tinymce.Env.ie&&frames.wysiwygTextarea_ifr.focus(),u.a.tinymce.Env.ie||u.a.tinymce.Env.gecko){const e=u.a.tinymce.activeEditor;e.focus(),e.selection.select(e.getBody()),e.selection.collapse(!1),e.focus()}},l=new e.Toolbar.Components.TextBox({id:"search-toolbar-find-text",text:n.translate("tinymce.searchreplace_dlg.findlabel"),name:"find",keydown:function(e){if(!u.a.tinymce.isIE8&&(e.ctrlKey||u.a.tinymce.isMac&&e.metaKey)&&70===e.which)e.preventDefault();else if(13===e.which){e.preventDefault();const t={backwards:!1,onFound:r,onNotFound:r};u.a.tinymce.activeEditor.undoManager.ignore(()=>{u.a.tinymce.activeEditor.execCommand("mceConfSearch",!1,t,{skip_undo:!0})})}else 27===e.which&&(e.preventDefault(),u.a.tinymce.activeEditor.undoManager.ignore(()=>{u.a.tinymce.activeEditor.execCommand("mceSearchReplaceToolbar",!1,!1,{skip_undo:!0})}))},cssClass:"toolbar-find-input"}),d=new e.Toolbar.Components.TextBox({id:"search-toolbar-replace-text",text:n.translate("tinymce.searchreplace_dlg.replacelabel"),name:"replace",keydown:function(e){if(!u.a.tinymce.isIE8&&(e.ctrlKey||u.a.tinymce.isMac&&e.metaKey)&&70===e.which)e.preventDefault();else if(13===e.which){e.preventDefault();const t=u.a.tinymce.activeEditor.undoManager.ignore(()=>{u.a.tinymce.activeEditor.execCommand("mceConfSearch",!1,{backwards:!1,onFound:c,onNotFound:r},{skip_undo:!0})});g(c,r,t)}else 27===e.which&&(e.preventDefault(),u.a.tinymce.activeEditor.undoManager.ignore(()=>{u.a.tinymce.activeEditor.execCommand("mceSearchReplaceToolbar",!1,!1,{skip_undo:!0})}))},cssClass:"toolbar-replace-input"}),f=new e.Toolbar.Components.TextButton({text:n.translate("tinymce.searchreplace_dlg.findprevious"),click(){const e={backwards:!0,onFound(){top.focus(),a("search-toolbar-find-previous-button")},onNotFound:r};n.undoManager.ignore(()=>{n.execCommand("mceConfSearch",!1,e,{skip_undo:!0})})},textClass:"search-toolbar-find-previous-button"}),m=new e.Toolbar.Components.TextButton({text:u.a.tinymce.Env.ie?n.translate("tinymce.searchreplace_dlg.findlabel"):n.translate("tinymce.searchreplace_dlg.findnext"),click(){const e={backwards:!1,onFound(){top.focus(),a("search-toolbar-find-next-button")},onNotFound:r};n.undoManager.ignore(()=>{n.execCommand("mceConfSearch",!1,e,{skip_undo:!0})})},textClass:"search-toolbar-find-next-button"}),p=new e.Toolbar.Components.TextButton({text:n.translate("tinymce.searchreplace_dlg.replace"),click(){g(()=>{top.focus(),a("search-toolbar-replace-button")},r)},textClass:"search-toolbar-replace-button"}),g=(e,t,n)=>{u.a.Confluence.Editor.searchManager&&(u.a.tinymce.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replace-button")?u.a.Confluence.Editor.searchManager.replace(e,t):n&&n())},h=new e.Toolbar.Components.TextButton({text:n.translate("tinymce.searchreplace_dlg.replaceall"),click(){const e={onReplaced:i,onNotReplaced:r};n.undoManager.transact(()=>{n.execCommand("mceConfReplaceAll",!1,e)})},textClass:"search-toolbar-replaceall-button"}),b=new e.Toolbar.Components.Button({text:n.translate("tinymce.searchreplace_dlg.close"),iconClass:"icon-close",click(){n.undoManager.ignore(()=>{n.execCommand("mceConfSearchClose",!1,null)})}});return{Buttons:[new e.Toolbar.Components.Group([b],{groupClass:"close"}),new e.Toolbar.Components.Group([l,d],{groupClass:"no-separator"}),new e.Toolbar.Components.Group(u.a.tinymce.Env.ie?[m]:[f,m]),new e.Toolbar.Components.Group([p,h])]}}}}().initContextToolbars(e,t)})};function ht(){const e=u.a.Confluence.Editor;let t=null;const n=function(e){e.preventDefault(),e.stopPropagation()},o=function(e){n(e);let o=e.which;o||(o=e.charCode?e.charCode:e.keyCode),o<48||t.push(o)},r=function(){const e=u.a.tinymce.activeEditor;e.off("KeyDown",o),e.off("KeyPress",n),e.off("KeyUp",n);let a="";for(let e=0;e<t.length;e++)a+=(r=t[e])>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r))):String.fromCharCode(r);var r;return a.toLowerCase()},c=()=>{!function(){const e=u.a.tinymce.activeEditor;t=[],e.on("KeyDown",o),e.on("KeyPress",n),e.on("KeyUp",n)}();const a=Object(s.default)("body"),c=!a.hasClass("no-tools")||a.hasClass("no-tools-toolbars-visible");Object(pt.b)(document,"createContextToolbarRow.Toolbar",{id:"searchreplace",buttons:e.searchToolbar.Buttons,topToolbar:!0,editorAdjacent:!0,animate:c,onVisible(){const t=r();e.searchManager.onVisible(t),e.searchManager.initialised=!0}}),r()};return{init(t){t.addCommand("mceSearchReplaceToolbar",()=>{t.undoManager.ignore(()=>{!function(){const t=Object(s.default)("#rte-button-searchreplace");!t.hasClass("active")?(t.addClass("active"),e.searchManager||(e.searchManager=new e.SearchManager("searchreplace")),e.searchManager.init(),Object(pt.b)(document,"enableContextToolbarRow.Toolbar",{id:"searchreplace"})):(t.removeClass("active"),e.searchManager.onHide(),Object(pt.b)(document,"disableContextToolbarRow.Toolbar",{id:"searchreplace"}),u.a.tinymce.Env.gecko||frames.wysiwygTextarea_ifr.focus(),u.a.tinymce.activeEditor.focus())}()})}),t.addCommand("mceConfSearch",(t,n)=>{e.searchManager&&((!(n=n||{}).backwards||u.a.tinymce.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-previous-button"))&&(n.backwards||u.a.tinymce.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-next-button"))?e.searchManager.find(n.backwards,n.onFound,n.onNotFound):e.searchManager.focus())}),t.addCommand("mceConfReplaceAll",(t,n)=>{e.searchManager&&(n=n||{},u.a.tinymce.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replaceall-button")&&e.searchManager.replaceAll(n.onReplaced,n.onNotReplaced))}),t.addCommand("mceConfSearchClose",()=>{e.searchManager&&t.undoManager.ignore(()=>{t.execCommand("mceSearchReplaceToolbar",!1,null)})}),t.addButton("searchreplace",{title:"searchreplace.search_desc",cmd:"mceSearchReplaceToolbar"}),8!=u.a.tinymce.Env.ie&&t.addShortcut("ctrl+f","searchreplace.search_desc",()=>{e.searchManager&&e.searchManager.isVisible()?e.searchManager.focus():t.undoManager.ignore(()=>{t.execCommand("mceSearchReplaceToolbar",!1,!1,{skip_undo:!0})})}),Object(a.a)("rte-ready",()=>{c(),Object(pt.b)(document,"disableContextToolbarRow.Toolbar",{id:"searchreplace"})})},getInfo:()=>({longname:"Search/Replace",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}}function bt(){const e=u.a.Confluence.Editor;let t=null,n=!1;const o=function(e){e.preventDefault(),e.stopPropagation()},a=function(e){o(e);let n=e.which;n||(n=e.charCode?e.charCode:e.keyCode),n<48||t.push(n)},r=function(e){const t=Object(s.default)("#rte-button-searchreplace a");t.length&&(e?t.unbind("click",!1):t.bind("click",!1))},c=function(){if(n)return;n=!0;const c=Object(s.default)("#rte-button-searchreplace"),i=!c.hasClass("active"),l=Object(s.default)("body"),d=!l.hasClass("no-tools")||l.hasClass("no-tools-toolbars-visible");i?(c.addClass("active"),e.searchManager||(e.searchManager=new e.SearchManager("searchreplace")),Object(s.default)(document).trigger("createContextToolbarRow.Toolbar",{id:"searchreplace",buttons:e.searchToolbar.Buttons,topToolbar:!0,editorAdjacent:!0,animate:d,onVisible(){const c=function(){const e=u.a.tinymce.activeEditor;e.off("KeyDown",a),e.off("KeyPress",o),e.off("KeyUp",o);let n="";for(let e=0;e<t.length;e++)n+=(r=t[e])>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r))):String.fromCharCode(r);var r;return n.toLowerCase()}();e.searchManager.onVisible(c),r(!0),n=!1,e.searchManager.initialised=!0}}).trigger("enableContextToolbarRow.Toolbar"),function(){const e=u.a.tinymce.activeEditor;t=[],e.on("KeyDown",a),e.on("KeyPress",o),e.on("KeyUp",o)}(),e.searchManager.init(),r(!1)):(c.removeClass("active"),e.searchManager.onHide(),Object(s.default)(document).trigger("removeContextToolbarRow.Toolbar",{id:"searchreplace",animate:d,onHide(){Object(s.default)(document).trigger("contextToolbarRowRemoved.Toolbar"),r(!0),n=!1,e.searchManager.initialised=!1}}),r(!1),u.a.tinymce.Env.gecko||frames.wysiwygTextarea_ifr.focus(),u.a.tinymce.activeEditor.focus())};return{init(t){t.addCommand("mceSearchReplaceToolbar",()=>{t.undoManager.ignore(()=>{c()})}),t.addCommand("mceConfSearch",(t,n)=>{e.searchManager&&((!(n=n||{}).backwards||u.a.tinymce.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-previous-button"))&&(n.backwards||u.a.tinymce.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-next-button"))?e.searchManager.find(n.backwards,n.onFound,n.onNotFound):e.searchManager.focus())}),t.addCommand("mceConfReplaceAll",(t,n)=>{e.searchManager&&(n=n||{},u.a.tinymce.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replaceall-button")&&e.searchManager.replaceAll(n.onReplaced,n.onNotReplaced))}),t.addCommand("mceConfSearchClose",()=>{e.searchManager&&t.undoManager.ignore(()=>{t.execCommand("mceSearchReplaceToolbar",!1,null)})}),t.addButton("searchreplace",{title:"searchreplace.search_desc",cmd:"mceSearchReplaceToolbar"}),8!=u.a.tinymce.Env.ie&&t.addShortcut("ctrl+f","searchreplace.search_desc",()=>{e.searchManager&&e.searchManager.isVisible()?e.searchManager.focus():t.undoManager.ignore(()=>{t.execCommand("mceSearchReplaceToolbar",!1,!1,{skip_undo:!0})})})},getInfo:()=>({longname:"Search/Replace",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}}var yt="object"==typeof window?window.localStorage:{};const Ct=function(e,t){const n=p.a.get("atlassian-account-id")||"anonymous",o="localStorage/".concat(e,".").concat(n,".").concat(t);let a=!1;const r=/\d+#/,c=function(e){if(!a)return null;let t,n=yt.getItem("".concat(o,".").concat(e));if((t=r.exec(n))&&(n=n.replace(t[0],""),+new Date>t[0].replace("#","")))return yt.removeItem("".concat(o,".").concat(e)),null;if(n&&n.indexOf('"')>-1)try{n=JSON.parse(n)}catch(e){return null}return n};try{a=Object.keys(yt).length}catch(e){console.log("Browser does not support localStorage, Confluence.storageManager will not work.")}return{getItem:c,getAllItems:function(){if(!a)return null;const e={};for(const t in yt)if(yt.hasOwnProperty(t)&&t.startsWith("".concat(o,"."))){const n=t.split("".concat(o,"."))[1];e[n]=c(n)}return e},doesContain:e=>!!c(e),getItemAsBoolean(e){const t=c(e);return"false"!==t&&("true"===t||!!t)},setItem(e,t,n){a&&(t=function(e){const t=1e3*(e||0);return t?+new Date+t+"#":""}(n)+t,yt.setItem("".concat(o,".").concat(e),t))},setItemQuietly(e,t,n){try{this.setItem(e,t,n)}catch(n){console.log("Unable to write to localStorage. key: ".concat(e,", value: ").concat(t,", cause: ").concat(n))}},removeItem(e){a&&yt.removeItem("".concat(o,".").concat(e))}}}("confluence","userSettings");function wt(e,t){return t?"".concat(e,".").concat(t.replace(/\./g,"-")):e}var vt={get:function(e,t,n){const o=wt(e,t),a=Ct.getItem(o);let r;return r=null!==a?JSON.parse(a):void 0!==n?n:null,r},set:function(e,t,n,o){const a=wt(e,t);if(o===n)Ct.removeItem(a);else{const e=2592e3;Ct.setItem(a,JSON.stringify(o),e)}}};const Ot={init:e=>{e.on("init",()=>{const t={contentId:p.a.get("content-id")},n=Object(s.default)("#rte-savebar-tinymce-plugin-point");n.append('\n    <span class="minor-edit toolbar-item">\n        <input id="notifyWatchers" name="notifyWatchers" value="true" type="checkbox" checked>\n        <label for="notifyWatchers">\n          <span>'.concat((t=>e.translate(t))("editor.minor.edit"),"</span>\n        </label>\n    </span>\n"));const o=n[0].querySelector('input[id="notifyWatchers"]'),a=vt.get("notifyWatchers",t.contentId,!0);null!==a&&(o.checked=a),Object(pt.a)(o,"change",()=>{vt.set("notifyWatchers",t.contentId,!0,o.checked)})})},getInfo:()=>({longname:"Confluence Notify Watchers",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})};let xt;function kt(){Object(a.b)("analytics",{name:"confluence.table.image.insert",data:{pageId:p.a.get("page-id"),tableMode:Tt()}})}function jt(){return!!Object(s.default)(xt.selection.getNode()).closest("table.confluenceTable").length}function Tt(){const e=Object(s.default)(xt.selection.getNode()).closest("table.confluenceTable");return e.hasClass("fixed-table")?"fixed":e.hasClass("relative-table")?"relative":"fluid"}function Et(){const e=Object(s.default)(xt.getBody()).find("table.confluenceTable");Object(a.b)("analytics",{name:"confluence.table.quality.in.page",data:{pageId:p.a.get("page-id"),total:e.length,fixed:e.filter(".fixed-table").length,fluid:e.filter(":not(.fixed-table,.relative-table)").length,relative:e.filter(".relative-table").length,nested:e.find("table.confluenceTable").length}})}const It={init(e){function t(e,t){jt()&&function(e){const t=function(){const e=Object(s.default)(xt.selection.getNode()),t=e.closest("th, td");return e.width()>t.width()};e&&e.name&&e.name.indexOf("confluence.editor.image.resize")>=0&&Object(a.b)("analytics",{name:"confluence.table.img.resize",data:{pageId:p.a.get("page-id"),tableMode:Tt(),isImgBiggerCell:t()}})}(t)}xt=e,e.on("ExecCommand",e=>{switch(e.command){case"mceAutoWidth":case"mceRelativeWidth":case"mceFixedWidth":Object(a.b)("analytics",{name:"confluence.table.mode.to.".concat(Tt()),data:{pageId:p.a.get("page-id")}});break;case"mceTableCopyRow":Object(a.b)("analytics",{name:"confluence.table.row.copy",data:{pageId:p.a.get("page-id")}});break;case"mceTablePasteRowBefore":case"mceTablePasteRowAfter":Object(a.b)("analytics",{name:"confluence.table.row.paste",data:{pageId:p.a.get("page-id")}});break;case"mceTableCopyCol":Object(a.b)("analytics",{name:"confluence.table.col.copy",data:{pageId:p.a.get("page-id")}});break;case"mceTablePasteColBefore":case"mceTablePasteColAfter":Object(a.b)("analytics",{name:"confluence.table.col.paste",data:{pageId:p.a.get("page-id")}});break;case"mceInsertContent":!function(e){const t=Object(s.default)("<div/>").html(e);t.find("img").length&&jt()&&kt(),t.find("table.confluenceTable").length&&Object(a.b)("analytics",{name:"confluence.table.paste",data:{pageId:p.a.get("page-id")}})}(e.value)}}),e.on("Init",()=>{e.selection.onSetContent.add((e,t)=>{jt()&&t&&function(e){Object(s.default)("<div/>").html(e.content).find(".confluence-embedded-image").length&&kt()}(t)})}),Object(a.a)("analyticsEvent",t),Object(a.a)("rte.safe-save.success",Et),e.on("Remove",()=>{Object(a.c)("analyticsEvent",t),Object(a.c)("rte.safe-save.success",Et)})},getInfo:()=>({longname:"Table Analytics Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})};function At(e,t,n){n&&n.node&&Object(s.default)(".inline-comment-marker",n.node).contents().unwrap()}const St={init(e){e.on("beforeExecCommand",e=>{if("Indent"===e.command||"Outdent"===e.command){const t=e.target,n=t.selection.getNode(),o=n.nodeName.toLowerCase();if("li"!==o&&"body"!==o){const e=parseInt(t.dom.getStyle(n,"margin-left")||0,10)+parseInt(t.dom.getStyle(n,"padding-left")||0,10);if(0!==e){const o=t.settings.indentation,a=/[a-z%]+/i.exec(o);t.dom.setStyle(n,"padding-left",""),t.dom.setStyle(n,"margin-left",e+a)}}}})},getInfo:()=>({longname:"Confluence Indentation",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})};const Mt=function(e){const t=e.selection.getNode(),n=Object(s.default)(t).closest("a"),o=e.selection.getRng();n.length&&function(e,t,n){if(!e.selection.getSel().isCollapsed)return!1;if(t.compareEndPoints){const o=e.getBody().createTextRange();return o.moveToElementText(n),o.collapse(0),0===t.compareEndPoints("EndToEnd",o)}const o=t.endContainer;if(3===o.nodeType)return o.wholeText.length==t.endOffset;const a=o.childNodes[t.endOffset];return Object(s.default)(a).is(":last-child")}(e,e.selection.getRng(),t)&&(o.setStartAfter(n[0]),o.setEndAfter(n[0]),e.selection.setRng(o),e.selection.collapse())},Bt=function(e){const t=e.endOffset;return 3===e.endContainer.nodeType?e.endContainer:e.endContainer.childNodes[t-1]},Nt=function(e,t){if(t&&t.previousSibling&&t.previousSibling.hasChildNodes()){const n=t.previousSibling,o=n.childNodes.length,a=n.childNodes[o-1],r=a.length,c=e.dom.createRng();c.setStart(a,r),c.setEnd(a,r),e.selection.setRng(c)}},Rt={init(e){e.on("KeyDown",t=>{u.a.tinymce.VK.modifierPressed(t)||32!==t.keyCode||Mt(e),u.a.tinymce.VK.modifierPressed(t)||8!==t.keyCode&&37!==t.keyCode||function(e){if(e.selection.isCollapsed()&&e.selection.selectedRange&&!function(e){return!!e.dom.getParents(e.selection.getNode(),"#autocomplete-search-text").length}(e)){const t=Bt(e.selection.selectedRange);t&&t.nodeValue&&65279===t.nodeValue.charCodeAt(0)&&function(e,t){return 1==t.nodeValue.length&&1==e.selection.getNode().childNodes.length}(e,t)&&e.undoManager.ignore(()=>{Nt(e,t),t.parentNode.removeChild(t)})}}(e)})}};n("pkwY");function _t(e){let t=e.offsetTop;for(;e.offsetParent;)t+=(e=e.offsetParent).offsetTop;return t}var Pt=new class{constructor(e,t){const n=p.a.get("atlassian-account-id")||"anonymous";this._namespace="sessionStorage/".concat(e,".").concat(n,".").concat(t),this._sessionStorageSupported=!!u.a.sessionStorage}getItem(e){if(!this._sessionStorageSupported)return null;let t=u.a.sessionStorage.getItem("".concat(this._namespace,".").concat(e));return t&&t.indexOf('"')>-1&&(t=JSON.parse(t)),t}doesContain(e){return!!this.getItem(e)}setItem(e,t){if(this._sessionStorageSupported)try{u.a.sessionStorage.setItem("".concat(this._namespace,".").concat(e),t)}catch(n){console.error("Unable to write to sessionStorage. key: ".concat(e,", value: ").concat(t,", cause: ").concat(n))}}removeItem(e){this._sessionStorageSupported&&u.a.sessionStorage.removeItem("".concat(this._namespace,".").concat(e))}}("atlassian","frontend");const Ht=e=>{const t=[];return[...e].forEach((e,n)=>{(function(e,t){const n=t?t.documentElement:u.a.document.documentElement;if(!e||!n)return;const o=e.getBoundingClientRect(),{top:a,bottom:r}=o,c=n.offsetHeight;return 0<=a&&a<c||0<=r&&r<=c||a<=0&&0<=r&&r>=c})(e)&&t.push({targetElementIndex:n,visibleBlockEl:e})}),t},Dt=e=>{const t=Ht(e);let n=null;return t.some(e=>!!function(e,t){const n=t?t.documentElement:u.a.document.documentElement;if(!e||!n)return;const o=e.getBoundingClientRect(),{top:a}=o,r=n.offsetHeight;return 0<=a&&a<r}(e.visibleBlockEl)&&(n=e,!0)),!n&&t.length>0?t[0]:n||{targetElementIndex:-1,visibleBlockEl:null}};function Lt(e,t){if(!e||0===t)return null;const n={targetElementIndex:-1,offsetBetweenTargetAndCurrentScroll:0,columnLayoutPosition:{columnIndex:-1,rowIndex:-1}};if((e=>{if(!e)return!1;const t=e.children[0];return t&&t.classList.contains("contentLayout2")})(e)){const o=e.children[0].children,{targetElementIndex:a,visibleBlockEl:r}=Dt(o);if(r){const e=r.getElementsByClassName("innerCell"),{columnIndex:o,targetElementIndexInColumn:c,visibleBlockEl:i}=(e=>{const t={targetElementIndexInColumn:-1,columnIndex:-1,visibleBlockEl:null};return[...e].some((e,n)=>{const{visibleBlockEl:o,targetElementIndex:a}=Dt(e.children);return!!o&&(t.columnIndex=n,t.targetElementIndexInColumn=a,t.visibleBlockEl=o,!0)}),t})(e);i&&(n.targetElementIndex=c,n.offsetBetweenTargetAndCurrentScroll=t-_t(i),n.columnLayoutPosition={rowIndex:a,columnIndex:o})}}else{const{targetElementIndex:o,visibleBlockEl:a}=Dt(e.children);a&&(n.targetElementIndex=o,n.offsetBetweenTargetAndCurrentScroll=t-_t(a),delete n.columnLayoutPosition)}return-1!==n.targetElementIndex?n:null}const Ft={_saveScrollPosition(e){e.getDoc()&&e.getWin()&&(e=>{const{contentId:t,isInViewPage:n,docObject:o=document,winObject:a=u.a}=e;let r;r=n?o.getElementById("main-content"):o.body;const c=Lt(r,a.pageYOffset);c&&(c.contentId=t,c.isInViewPage=n,Pt.setItem("editor-persit-scroll-position",JSON.stringify(c)))})({contentId:j(),isInViewPage:!1,docObject:e.getDoc(),winObject:e.getWin()})},_restoreScrollPositionIfNeeded(e){e.getDoc()&&e.getWin()&&(e=>{const{contentId:t,isInViewPage:n,docObject:o=document,winObject:a=u.a}=e;let r,c=Pt.getItem("editor-persit-scroll-position");try{c=JSON.parse(c)}catch(e){0}finally{Pt.removeItem("editor-persit-scroll-position")}if(!c||c.contentId!==t||c.isInViewPage===n)return;r=n?o.getElementById("main-content"):o.body;const{columnLayoutPosition:i}=c;let l;if(i){const e=r.children[0].children[i.rowIndex].getElementsByClassName("innerCell")[i.columnIndex];l=e&&e.children[c.targetElementIndex]}else l=r.children[c.targetElementIndex];if(l){const e=_t(l)+c.offsetBetweenTargetAndCurrentScroll;setTimeout(()=>a.scrollTo(0,e),1)}})({contentId:j(),isInViewPage:!1,docObject:e.getDoc(),winObject:e.getWin()})},init:e=>{const t=p.a.get("content-type");"page"!==t&&"blogpost"!==t||(Object(a.a)("rte-collab-ready",()=>{Ft._restoreScrollPositionIfNeeded(e)}),Object(a.a)("rte-ready",()=>{u.a.Confluence.Editor.UI.cancelButton.click(()=>Ft._saveScrollPosition(e)),u.a.Confluence.Editor.UI.saveButton.click(()=>Ft._saveScrollPosition(e))}))},getInfo:()=>({longname:"Persist scroll position for transition between view page and edit page",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})};var zt=n("2wFc");function Wt(e){const t=e.split(".");let n=window[t.shift()];for(;void 0!==n&&t.length;)n=n[t.shift()];return n}function Kt(e){0}const $t={init(e){e.on("init",()=>{!function({listener:e,globalProperty:t,interval:n=250},o){if(Wt(t))return Kt("window.".concat(t," is already available for use by ").concat(e,".")),o(),null;const a=setInterval(()=>{Kt("".concat(e," is waiting for window.").concat(t," to be available")),Wt(t)&&(Kt("window.".concat(t," now available!")),clearInterval(a),o())},n)}({listener:"packages/confluence-editor/src/editor-plugins/fabric-migration/plugin.js",globalProperty:"Synchrony.ready"},()=>{})})},_showMessageDialog(e){const t={content:$t.getDialogContent(),width:420,height:40,id:"fabric-migration-dialog",name:"fabric.migration.dialog.title"},n={buttons:[{label:"fabric.migration.dialog.action",action:()=>{const e=Object(zt.j)(p.a.get("space-key"),p.a.get("content-type"),p.a.get("page-id"));var t;t=e,u.a.location=t},customClass:"aui-button aui-button-primary"}],cancelLink:!1},o=e.windowManager.open(t,n),a=u.a.document.getElementById(o);if(a){a.querySelector(".button-panel-button").classList.remove("button-panel-button")}},getDialogContent(){const e=u.a.tinymce.EditorManager.activeEditor.translate("tinymce.fabric.migration.dialog.content");return"\n      <p>\n        <span class='exceptionMessage'>\n          ".concat(e," \n        </span>\n      </p>\n    ")},getInfo:()=>({longname:"Confluence Fabric Editor Migration",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})};var Ut=n("cczi");function Vt(){u.a.tinymce.activeEditor.getBody().style.height="auto"}var qt=n("owi1");function Gt(){const e=Object(qt.a)();return{component:function(e){let t;return e=e||{},e=s.default.extend({},{keypressListener:n=>{if(27===n.keyCode)O.a.debug("dialog.js: escape keydown caught"),Object(s.default)(".aui-dropdown",t.popup.element).is(":visible")||("function"==typeof e.onCancel?e.onCancel():t.hide());else if(13===n.keyCode&&(O.a.debug("dialog.js: enter keydown caught"),!Object(s.default)(".aui-dropdown",t.popup.element).is(":visible"))){"textarea"!=(n.target.nodeName&&n.target.nodeName.toLowerCase())&&"function"==typeof e.onSubmit&&setTimeout(e.onSubmit)}},width:865,height:530},e),t=new O.a.Dialog(e),document.addEventListener("hideLayer",(n,o,a)=>{"popup"==o&&a==t&&"function"==typeof e.onCancel&&e.onCancel()}),t},initialiser:function(t){Object(a.a)("show.dialog",(e,t)=>{const n=O.a.Meta.get("page-id"),o=O.a.Meta.get("space-key"),a=O.a.Meta.get("editor-mode"),r=O.a.Meta.get("new-page");O.a.EventQueue=O.a.EventQueue||[],O.a.EventQueue.push({name:t.dialog.id,properties:(()=>{const e={};return n&&(e.pageid=n),o&&(e.spacekey=o),a&&(e.editormode=a),r&&(e.newpage=r),e})()})}),document.addEventListener("showLayer",(n,o,a)=>{e.runBinderComponents(),"popup"==o&&a&&(n=>{const o=t(n);let a;if(o.attr("data-lasttab-override"))return;o.attr("data-tab-default")&&(a=o.attr("data-tab-default"));const r=e.storageManager(o.attr("id")),c=r.getItem("last-tab"),i=null!=c?c:a;i&&t(".page-menu-item:visible:eq(".concat(i,") button"),o).click(),o.attr("data-lasttab-bound")||(t(".page-menu-item",o).each((e,n)=>{t(n).click(()=>{r.setItem("last-tab",e)})}),o.attr("data-lasttab-bound","true"))})(a.element)}),O.a.Dialog.prototype.overrideLastTab=()=>{t(this.popup.element).attr("data-lasttab-override","true")},O.a.Dialog.prototype.addHelpText=(e,n)=>{if(!e)return;let o=e;n&&(o=O.a.template(e).fill(n).toString());const a=this.page[this.curpage];a.buttonpanel||a.addButtonPanel();const r=t("<div class='dialog-tip'></div>").html(o);a.buttonpanel.append(r),t("a",r).click(()=>(u.a.open(this.href,"_blank").focus(),!1))},O.a.Dialog.prototype.getTitle=()=>t("#".concat(this.id,".dialog-components:visible h2")).text(),O.a.Dialog.prototype.isVisible=()=>t("#".concat(this.id)).is(":visible")}}}var Jt="undefined"!=typeof Confluence?Confluence:{};var Xt=function(){const e={Button:function(e){const t=e.text,n=e.tooltip,o=e.triggerText,a=e.iconClass,r=e.click,c=!!e.disabled,i=e.id;this.render=()=>{const e=Object(s.default)('<button type="button"></button>').addClass("aui-button").attr("data-tooltip",n||t);if(i&&e.attr("id",i),c&&e.prop("disabled",!0).attr("aria-disabled","true"),e.click(()=>{e.prop("disabled")||r()}),a){const n=Object(s.default)("<span />");n.addClass("icon ".concat(a)),n.text(t),e.append(n)}if(o){const t=Object(s.default)("<span />");t.addClass("trigger-text"),t.text(o),e.append(t)}return e[0]}},DropDownButton:function(e){const t=e.id,n=e.tooltip,o=e.text||"",a=e.iconClass,r=!!e.disabled,c=e.dropDownContent;let i;this.render=function(){const e=Object(s.default)("<div></div>").addClass("toolbar-item").addClass("toolbar-dropdown").attr("data-tooltip",n);e.attr("id",t);const l=Object(s.default)("<div/>").addClass("aui-dd-parent"),d=Object(s.default)("<a href='#'></a>");if(d.addClass("toolbar-trigger").addClass("aui-dd-trigger").addClass("aui-button"),o&&d.append("<span class='dropdown-text'>".concat(o,"</span>")),r&&(e.addClass("disabled"),d.addClass("disabled")),a){const e=Object(s.default)("<span />");e.addClass("icon ".concat(a)),e.text(o),d.append(e)}const u=Object(s.default)("<span/>");return u.addClass("icon").addClass("icon-dropdown"),d.append(u),i=Object(s.default)("<div/>").addClass("hidden").addClass("aui-dropdown"),c&&i.append(c),l.append(d),l.append(i),e.append(l),e[0]}},TextButton:function(e){const t=e.text,n=e.textClass,o=e.click,a=!!e.disabled,r=e.tooltip;this.render=()=>{const e=Object(s.default)('<button type="button"></button>').addClass("aui-button").addClass(n).text(t);return r&&e.attr("data-tooltip",r),a&&e.prop("disabled",!0).attr("aria-disabled","true"),e.click(()=>{e.prop("disabled")||o()}),e[0]}},TextBox:function(e){const t=e.id,n=e.text,o=e.name,a=e.keydown,r=e.cssClass;this.render=function(){const e=Object(s.default)("<div></div>").addClass("toolbar-item");e.append(Object(s.default)('<label for="'.concat(t,'">').concat(n,"</label>")));const c=Object(s.default)('<input id="'.concat(t,"\" type='text' name=\"").concat(o,'" class="').concat(r,' text" autocomplete="off">'));return c.keydown(e=>{a(e)}),e.append(c),e[0]}},Group:function(e,t){const n=e;this.render=function(){const e=Object(s.default)("<div></div>");e.addClass("aui-buttons"),t&&(t.id&&e.attr("id",t.id),t.groupClass&&e.addClass(t.groupClass));for(let t=0,o=n.length;t<o;t++)e.append(n[t].render());return e[0]}}};return e.SplitGroup=function(e,t){const n=e,o=t&&t.dropDownOptions||{};this.render=function(){const e=Object(s.default)("<div></div>");e.addClass("aui-buttons"),t&&(t.id&&e.attr("id",t.id),t.groupClass&&e.addClass(t.groupClass));for(let t=0,o=n.length;t<o;t++)e.append(n[t].render());return e.append(function(){const e=o.id,t=o.disabled,n=o.dropDownContent,a=o.title,r=o.alignment,c=Object(s.default)("<div></div>").addClass("toolbar-item").addClass("toolbar-dropdown").addClass("toolbar-splitbutton");e&&c.attr("id",e),a&&c.attr({"data-tooltip":a}),r&&c.data("dropdown-alignment",r);const i=Object(s.default)("<div/>").addClass("aui-dd-parent"),l=Object(s.default)("<a href='#'></a>");l.addClass("toolbar-trigger aui-dd-trigger"),t&&(c.addClass("disabled"),l.addClass("disabled"));const d=Object(s.default)("<span/>");d.addClass("icon").addClass("icon-dropdown"),l.append(d);const u=Object(s.default)("<div/>").addClass("hidden").addClass("aui-dropdown");return n&&u.append(n),i.append(l),i.append(u),c.append(i),c[0]}()),t&&t.postProcess&&t.postProcess(e),e[0]}},u.a.Confluence.Editor.Toolbar={},u.a.Confluence.Editor.Toolbar.Components=e,e};const Qt=()=>{const e={};let t,n,o,a,r,c,i,l,d,m,p,g,h;let b,y,C,w,v,O=!1;function x(){i.css({top:Object(s.default)("#insert-table-dropdown").outerHeight(!0)}),x=function(){}}function k(){i.hasClass("hidden")||(!function(){const e=Object(s.default)(u.a.tinymce.activeEditor.getDoc());t.unbind(".atlassian-table-picker"),e.unbind(".atlassian-table-picker")}(),i.addClass("hidden"),o.addClass("hidden"),c.removeClass("active"))}function j(e,t){e==C&&t==w||(e=Math.max(1,Math.min(15,e)),t=Math.max(1,Math.min(20,t)),b=Math.max(4,e),y=Math.max(4,t),C=e,w=t,l.width(25*b+1),l.height(17*y+20),E(d,b,y),E(p,C,w),E(m,b,1),E(g,C,1),T(),h.text("".concat(C," x ").concat(w)))}function T(){m.toggleClass("hidden",!v),g.toggleClass("hidden",!v)}function E(e,t,n){e.width(25*t+1),e.height(17*n+1)}function I(e){const n=d.offset(),o=n.top-t.scrollTop(),a=n.left-t.scrollLeft(),r=o+d.outerHeight(!0)+0,c=r-17-0,i=a+d.outerWidth(!0)+0,l=i-25-0,s=e.clientY,u=e.clientX;let f,m,p=b,g=y;u>i?(f=u-i,m=~~(f/25+1),p+=m):u<l&&(f=u-l,m=~~(f/25-1),p+=m),s>r?(f=s-r,m=~~(f/17+1),g+=m):s<c&&(f=s-c,m=~~(f/17-1),g+=m),j(p,g)}function A(e){e!=v&&(v=e,T())}function S(e){const t=function(e){const t=1+~~(~~(e.offsetX||e.originalEvent.layerX)/25),n=1+~~(~~(e.offsetY||e.originalEvent.layerY)/17);return t<1||t>15||n<1||n>20?null:{width:t,height:n}}(e);e.preventDefault(),t&&(k(),function(e,t,o){let a,r;0;const c=Object(s.default)("#tinymce-table-form");c.length?(c.find('input[name="rows"]').val(t),c.find('input[name="cols"]').val(e)):(a=u.a.AJS.renderTemplate("tableForm",t,e),r=Object(s.default)("<div></div>").addClass("hidden"),r.append(a),n.append(r));Object(s.default)("#table-heading-checkbox").prop("checked",o),Object(f.b)().BookmarkManager.restoreBookmark(),u.a.tinymce.activeEditor.undoManager.beforeChange();const i={cols:e,rows:t,heading:o};u.a.tinymce.activeEditor.execCommand("confInsertTable",!1,i),r&&r.remove()}(t.width,t.height,v))}function M(e){s.default.browser.msie?(16===e.keyCode&&A(!e.shiftKey),27===e.keyCode&&k()):(0===e.charCode&&A(!e.shiftKey),27===e.keyCode&&0===e.charCode&&k())}function B(){k()}return e.insertTable=S,{bindToControl:function(){t=Object(s.default)(document),n=t.find("body"),a=Object(s.default)("#insert-table-dropdown"),r=Object(s.default)("#rte-button-insert-table"),c=a.find(".aui-dd-parent"),i=Object(s.default)("#table-picker-container"),l=i.find(".table-picker-box"),d=i.find(".picker-cell"),m=i.find(".picker-heading"),p=i.find(".picker-selected-cell"),g=i.find(".picker-selected-heading"),h=l.find(".desc"),o=Object(s.default)("<div></div>").attr("id","table-picker-backdrop").addClass("hidden").appendTo(a),r.click(e=>{e.preventDefault(),O||(Object(f.b)().BookmarkManager.storeBookmark(),x(),v=!0,j(1,1),function(){const e=Object(s.default)(u.a.tinymce.activeEditor.getDoc());t.bind("mousemove.atlassian-table-picker",I),t.bind("keydown.atlassian-table-picker",M),t.bind("keyup.atlassian-table-picker",M),e.bind("keydown.atlassian-table-picker",M),e.bind("keyup.atlassian-table-picker",M)}(),o.removeClass("hidden"),i.removeClass("hidden"),c.addClass("active"),r.focus())}),o.click(B),p.click(S),g.click(S)},disable:function(){O=!0,a.addClass("disabled")},enable:function(){O=!1,a.removeClass("disabled"),r.attr("data-tooltip",u.a.tinymce.activeEditor.translate("tinymce.tablepicker.insert_table_title"))},close:k,_internal:e}};var Yt=[],Zt=e=>{e.fn.tipsy.autoBounds2=function(t,n){return function(){const o={},a=e(document).scrollTop()+t,r=e(document).scrollLeft()+t,c=e(this);return n.length>1?(o.ns=n[0],o.ew=n[1]):"e"==n[0]||"w"==n[0]?o.ew=n[0]:o.ns=n[0],c.offset().top<a&&(o.ns="n"),c.offset().left<r&&(o.ew="w"),e(window).width()+e(document).scrollLeft()-(c.offset().left+c.width())<t&&(o.ew="e"),e(window).height()+e(document).scrollTop()-(c.offset().top+c.height())<t&&(o.ns="s"),o.ns?o.ns+(o.ew?o.ew:""):o.ew}}};function en(){Object(s.default)(".tipsy").remove()}function tn(){const e=/\+/g;setTimeout(()=>{Object(s.default)("#rte-savebar .aui-button[title]").each((function(){const t=Object(s.default)(this);let n=t.attr("title");if(t.removeAttr("title"),u.a.tinymce.Env.mac){const t=n.indexOf("(");t>=0&&(n=n.substr(0,t)+n.substr(t).replace(e,""))}t.attr("data-tooltip",n)}))},0)}function nn(){Zt(s.default);const e={live:!0,gravity:"n",title:function(){return Object(s.default)(this).attr("data-tooltip")||""},delayIn:250,delayOut:0},t=s.default.fn.tipsy.autoBounds2(50,"n"),n=s.default.fn.tipsy.autoBounds2(50,"w"),o=s.default.extend({},e,{gravity:t}),r=s.default.extend({},e,{gravity:n}),c=s.default.extend({},e,{gravity:"se"});function i(e,t,n){if("dropdown"===t&&(Object(s.default)(".tipsy").remove(),n&&n.trigger&&n.trigger.jquery)){const e=n.trigger.data("tipsy");e&&(e.hoverState="out")}}Object(s.default)("#rte-toolbar [data-tooltip]:not(.dropdown-item)").tooltip(o),Object(s.default)("#rte-toolbar .dropdown-item[data-tooltip]").tooltip(r),Object(s.default)("#rte-savebar [data-tooltip]").tooltip(c),Object(s.default)("#editor-precursor [data-tooltip]").tooltip(o),Object(s.default)("#property-panel [data-tooltip]").tooltip(o),H("showLayer",i),H("hideLayer",i),Object(a.a)("created.property-panel",en),Object(a.a)("destroyed.property-panel",en),Object(a.a)("register-contexts.keyboardshortcuts",tn)}function on(){Object(a.c)("created.property-panel",en),Object(a.c)("destroyed.property-panel",en),Object(a.c)("register-contexts.keyboardshortcuts",tn)}function an(){const e=Jt.Editor;let t,n;function o(e){const t=()=>{e&&e.hide()};Object(pt.a)(document,"showLayer",(n,o,a)=>{if("dropdown"==o&&a==e){const e=u.a.tinymce.activeEditor;e.on("Click",t),e.on("KeyUp",t)}}),Object(pt.a)(document,"hideLayer",(n,o,a)=>{if("dropdown"==o&&a==e){const e=u.a.tinymce.activeEditor;e.off("Click",t),e.off("KeyUp",t)}})}function a(e){e.addCallback("show",()=>{e.$.parents(".disabled").length&&e.hide()})}function r(e,t){const n=m(t);Object(s.default)("#".concat(n)).removeClass("disabled")}function c(e,t){const n=m(t);Object(s.default)("#".concat(n)).addClass("disabled")}function i(e,t){t?e.closest(".aui-button").prop("disabled",!0).attr("aria-disabled","true").toggleClass("disabled",t):e.closest(".aui-button").prop("disabled",!1).removeAttr("aria-disabled").toggleClass("disabled",t)}function l(e,t,n,o){const a=Object(s.default)("#toolbar"),r=a.find(".toolbar-item"),c=Object(s.default)("#insert-menu, #more-menu"),i=Object(s.default)("#insert-menu, #color-picker-control"),l=Object(s.default)("#format-dropdown"),d=o||function(){return!0};r.toggleClass("disabled",e),c.toggleClass("disabled",e),i.toggleClass("disabled",e),l.toggleClass("disabled",!!t),Object(f.b)().TablePicker[e?"disable":"enable"](),void 0!==n&&a.find("button, input").filter(d).toggleClass("disabled",n).prop("disabled",n)}const d=e=>n=>{const o=n.element,a=(r=o,r=Object(s.default)(r).closest("PRE,BLOCKQUOTE,.text-placeholder"),e=>r.is(e));var r;const c=a("BLOCKQUOTE"),i=a("PRE"),d=a(".text-placeholder");let u;i?(u=Object(s.default)(o).parents("table").is("[data-macro-body-type='PLAIN_TEXT']"),l(!0,u)):d?l(!0):c?(l(!1),t.toggleClass("disabled",!0)):l(!1),E(Object(s.default)(o),Object(f.b)().TablePicker,e),C(Object(s.default)(o))};function m(e){let t="default";return e&&e.id&&(t=e.id),"rte-toolbar-row-".concat(t)}function p(e){return Object(s.default)("#".concat(e)).length>0}function g(e,t){let n=t.animate;null==n&&(n=!0);const o=function(){Object(s.default)(this).remove(),Object(pt.b)(document,"resize.resizeplugin"),t.onHide&&t.onHide()},a=m(t),r=Object(s.default)("#".concat(a));n?r.addClass("disabled"):(r.addClass("disabled"),o.call(r))}function h(e,t){const n=m(t);if(p(n))return;let o=t.animate;null==o&&(o=!0);const a=Object(s.default)("<div></div>").addClass("toolbar-split toolbar-split-row toolbar-contextual disabled");a.attr("id",n),t.editorAdjacent&&a.addClass("editor-adjacent");const r=t.topToolbar?Object(s.default)("#rte-toolbar.aui-toolbar:visible"):Object(s.default)("#savebar-container .aui-toolbar:visible");for(let e=0,n=t.buttons.length;e<n;e++){const n=t.buttons[e];a.append(n.render())}if(t.editorAdjacent)r.append(a);else{const e=Object(s.default)(".editor-adjacent",r).filter(":first");e.length?e.before(a):r.append(a)}a.find(".toolbar-dropdown").each((function(){b(this)}));o||(Object(pt.b)(document,"resize.resizeplugin"),Object(pt.b)(document,"shown.contextToolbar"),t.onVisible&&t.onVisible()),a.removeClass("disabled")}function b(e){const t=Object(s.default)(e),n=t.dropDown("Standard",{alignment:t.data("dropdown-alignment")||"left"})[0];t.find(".dropdown-item").click((function(e){!function(e){const t=e.attr("data-macro-name"),n=e.attr("data-command"),o=e.attr("data-format"),a=e.attr("data-control-id"),r=u.a.tinymce.activeEditor;t&&R.macroBrowserToolbarButtonClicked({presetMacroName:t}),n&&r.execCommand(n,!1),o&&r.theme.controlHandlers.formatselect.click.dispatch(o),a&&r.theme.controlHandlers.buttons.click.dispatch(a)}(Object(s.default)(this)),n.hide(),e.preventDefault()})),a(n),o(n)}function y(){const e={},t=[];for(const n in e)t.push("hints.".concat(n));const n=function(e){if(!Array.isArray(e))throw new Error("Hints passed in must be an array of strings");let t=Math.floor(Math.random()*e.length);return{getNextHint:()=>{const n=e[t];return t=(t+1)%e.length,n}}}(t),o=()=>{Object(s.default)("#rte-savebar .hints-text").html(u.a.tinymce.activeEditor.translate("tinymce.".concat(n.getNextHint())))};o(),Object(s.default)("#rte-savebar a.hints-close").click((function(e){Object(s.default)(this).closest(".toolbar-split").addClass("hidden"),e.preventDefault()})),Object(s.default)("#rte-savebar a.hints-next").click(e=>{o(),e.preventDefault()})}function C(e){x(k.c)&&(e.closest("P, BLOCKQUOTE, H1, H2, H3, H4, H5, PRE").length>0?n.toggleClass("disabled",!0):n.toggleClass("disabled",!1))}return{init(i){var l;b("#format-dropdown"),b("#more-menu .aui-dd-parent"),b("#insert-menu .aui-dd-parent"),Object(s.default)("#pagelayout-menu").length&&b("#pagelayout-menu .aui-dd-parent"),Object(s.default)("#template-menu").length&&b("#template-menu .aui-dd-parent"),function(){const e=Object(s.default)("#color-picker-control");if(!e.length)return;const t=e.find(".aui-dd-parent"),n=Object(s.default)("#rte-button-color"),r=n.find(".selected-color"),c=t.dropDown("Standard",{alignment:"left"})[0],i=n.attr("data-color");r.css("background-color","#".concat(i)),e.delegate("a[data-color]","click",(function(e){const t=Object(s.default)(this),o=t.attr("data-color");e.preventDefault(),t.closest(".disabled").length||(u.a.tinymce.execCommand("ForeColor",!1,"#".concat(o)),n.attr("data-color",o),r.css("background-color","#".concat(o)))})),a(c),o(c)}(),Object(f.b)().TablePicker.bindToControl(u.a.tinymce.activeEditor,Object(s.default)("#insert-table-dropdown")),function(){const t=Object(s.default)("#rte-button-source-mode");t.click(()=>{t.hasClass("active")?e.changeMode(e.MODE_RICHTEXT):e.changeMode(e.MODE_SOURCE)})}(),y(),t=Object(s.default)("#rte-button-justifyleft, #rte-button-justifycenter, #rte-button-justifyright"),n=Object(s.default)("#rte-button-indent"),l=i,Object(pt.b)(document,"initContextToolbars.Toolbar",l),Object(pt.a)(document,"createContextToolbarRow.Toolbar",h),Object(pt.a)(document,"removeContextToolbarRow.Toolbar",g),Object(pt.a)(document,"enableContextToolbarRow.Toolbar",r),Object(pt.a)(document,"disableContextToolbarRow.Toolbar",c);const m=Object(s.default)("#format-dropdown"),p=m.find("span.dropdown-text");i.on("BeforeExecCommand",e=>{const t=e.command,n=e.value,o=u.a.tinymce.activeEditor;if(s.default.each(["pre","blockquote"],(function(){"FormatBlock"==t&&n==this&&(o.formatter.remove("alignleft"),o.formatter.remove("aligncenter"),o.formatter.remove("alignright"))})),Object(s.default)(o.selection.getNode()).closest("pre,.text-placeholder").length){const n=["Bold","Italic","Underline","Strikethrough","InsertUnorderedList","InsertOrderedList","InsertInlineTaskList","InsertInlineTaskListNoToggle","superscript","subscript","mceConfMacroBrowser","mceConfimage","mceConfAttachments","mceEmotion","InsertWikiMarkup","mceConflink","mceInsertTable","mceConfAutocompleteLink"],o=n.length;for(let a=0;a<o;a++)t==n[a]&&e.preventDefault()}if("FormatBlock"==t&&"pre"==n&&(o.undoManager.add(),o.execCommand("removeFormat")),"FormatBlock"==t&&"p"==n){const e=m.find(".dropdown-item[data-format='blockquote']").text();p.text()==e&&o.execCommand("FormatBlock",!1,"blockquote")}"confDefaultTable"===t&&T(Object(s.default)(o.selection.getNode()))&&e.preventDefault()}),i.on("ExecCommand",e=>{const t=e.command,n=e.value;if("FormatBlock"==t){let e=m.find(".dropdown-item[data-format='".concat(n,"']"));e.length||(e=m.find(".dropdown-item[data-format='p']")),p.text(e.text())}}),i.on("NodeChange",d(i)),i.on("init",()=>{const e=u.a.tinymce.activeEditor;const t={};Object(s.default)(".aui-toolbar").find("[data-control-id]").each((n,o)=>{let a;const r=(o=Object(s.default)(o)).attr("data-control-id");"formatselect"==r?(a=e.theme.controlHandlers[r],a.state.add(e=>{const t=u.a.tinymce.activeEditor;if("p"==e){const n=t.selection.getNode();Object(s.default)(n).closest("p").parent().is("blockquote")&&(e="blockquote")}const n=m.find(".dropdown-item[data-format='".concat(e,"']")).text();n&&p.text(n)})):t[r]=o});const n=e.theme.controlHandlers.buttons;n.state.add((e,n,o)=>{const a=t[e];if(!a)return;const r=a.find(".icon-check"),c=a.closest(".toolbar-item");r.length?r.toggleClass("hidden",!o):c.toggleClass(n,o)}),Object(s.default)(".aui-toolbar").delegate(".toolbar-item","click",(function(e){const t=Object(s.default)(this);if(t.hasClass("disabled"))e.preventDefault();else{const o=t.children(".toolbar-trigger[data-control-id]").attr("data-control-id");o&&(n.click.dispatch(o),e.preventDefault())}})),s.default.support.shrinkWrapBlocks=!1,nn()}),i.on("Remove",()=>{on()}),i.on("Focus",()=>{const e=Object(s.default)(i.selection.getNode());E(e,Object(f.b)().TablePicker,i),C(e)})},toggleToolbarButton:i,disableToolbarButton:function(e){i(Object(s.default)(".".concat(e.replace(".",""))),!0)},enableToolbarButton:function(e){i(Object(s.default)(".".concat(e.replace(".",""))),!1)},focusToolbarButton:function(e){Object(s.default)(".".concat(e.replace(".",""))).closest(".aui-button").focus()},isToolbarRowEnabled:function(e){const t=m({id:e});return p(t)&&!Object(s.default)("#".concat(t)).hasClass("disabled")},getToolbarRow:function(e){const t=m({id:e}),n=Object(s.default)("#".concat(t));return n.length?n[0]:null},isToolbarButtonEnabled:function(e){return!Object(s.default)(".".concat(e.replace(".",""))).closest(".aui-button").prop("disabled")},bindDropdownMenu:b,toggleToolbarButtons:l,getInfo:()=>({longname:"customtoolbar",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.0"})}}function rn(){const e=Jt.Editor;function t(e){const t=()=>{e&&e.hide()};Object(pt.a)(document,"showLayer",(n,o,a)=>{if("dropdown"==o&&a==e){const e=u.a.tinymce.activeEditor;e.on("Click",t),e.on("KeyUp",t)}}),Object(pt.a)(document,"hideLayer",(n,o,a)=>{if("dropdown"==o&&a==e){const e=u.a.tinymce.activeEditor;e.off("Click",t),e.off("KeyUp",t)}})}function n(e){e.addCallback("show",()=>{e.$.parents(".disabled").length&&e.hide()})}function o(e,t){const n=l(t);Object(s.default)("#".concat(n)).removeClass("disabled")}function a(e,t){const n=l(t);Object(s.default)("#".concat(n)).addClass("disabled")}function r(e,t){t?e.closest(".aui-button").prop("disabled",!0).attr("aria-disabled","true").toggleClass("disabled",t):e.closest(".aui-button").prop("disabled",!1).removeAttr("aria-disabled").toggleClass("disabled",t)}function c(e,t,n,o){const a=Object(s.default)("#toolbar"),r=a.find(".toolbar-item"),c=Object(s.default)("#insert-menu, #more-menu"),i=Object(s.default)("#insert-menu, #color-picker-control"),l=Object(s.default)("#format-dropdown"),d=o||function(){return!0};r.toggleClass("disabled",e),c.toggleClass("disabled",e),i.toggleClass("disabled",e),l.toggleClass("disabled",!!t),Object(f.b)().TablePicker[e?"disable":"enable"](),void 0!==n&&a.find("button, input").filter(d).toggleClass("disabled",n).prop("disabled",n)}const i=e=>t=>{const n=t.element,o=(a=n,a=Object(s.default)(a).closest("PRE,BLOCKQUOTE,.text-placeholder"),e=>a.is(e));var a;const r=o("BLOCKQUOTE"),i=o("PRE"),l=o(".text-placeholder");let d;if(i)d=Object(s.default)(n).parents("table").is("[data-macro-body-type='PLAIN_TEXT']"),c(!0,d);else if(l)c(!0);else if(r){c(!1),Object(s.default)("#rte-button-justifyleft, #rte-button-justifycenter, #rte-button-justifyright").toggleClass("disabled",!0)}else c(!1);E(Object(s.default)(n),Object(f.b)().TablePicker,e)};function l(e){let t="default";return e&&e.id&&(t=e.id),"rte-toolbar-row-".concat(t)}function d(e){return Object(s.default)("#".concat(e)).length>0}let m;function p(e,t){let n=t.animate;null==n&&(n=!0);const o=function(){Object(s.default)(this).remove(),Object(pt.b)(document,"resize.resizeplugin"),t.onHide&&t.onHide()};clearTimeout(m),m=setTimeout(()=>{const e=l(t),a=Object(s.default)("#".concat(e));n?a.slideUp(400,o):(a.hide(),o.call(a))},100)}function g(e,t){const n=l(t);let o=t.animate;if(null==o&&(o=!0),d(n))return void Object(s.default)("#".concat(n,":hidden")).slideDown(400,()=>{0});const a=Object(s.default)("<div></div>").addClass("toolbar-split toolbar-split-row toolbar-contextual");a.attr("id",n),t.editorAdjacent&&a.addClass("editor-adjacent");const r=t.topToolbar?Object(s.default)("#rte-toolbar.aui-toolbar:visible"):Object(s.default)("#savebar-container .aui-toolbar:visible");for(let e=0,n=t.buttons.length;e<n;e++){const n=t.buttons[e];a.append(n.render())}if(a.css({display:"none"}),t.editorAdjacent)r.append(a);else{const e=Object(s.default)(".editor-adjacent",r).filter(":first");e.length?e.before(a):r.append(a)}a.find(".toolbar-dropdown").each((function(){h(this)}));const c=()=>{Object(pt.b)(document,"resize.resizeplugin"),Object(pt.b)(document,"shown.contextToolbar"),t.onVisible&&t.onVisible()};clearTimeout(m),m=setTimeout(()=>{o?a.slideDown(400,c):(a.show(),c())},100)}function h(e){const o=Object(s.default)(e),a=o.dropDown("Standard",{alignment:o.data("dropdown-alignment")||"left"})[0];o.find(".dropdown-item").click((function(e){!function(e){const t=e.attr("data-macro-name"),n=e.attr("data-command"),o=e.attr("data-format"),a=e.attr("data-control-id"),r=u.a.tinymce.activeEditor;t&&R.macroBrowserToolbarButtonClicked({presetMacroName:t}),n&&r.execCommand(n,!1),o&&r.theme.controlHandlers.formatselect.click.dispatch(o),a&&r.theme.controlHandlers.buttons.click.dispatch(a)}(Object(s.default)(this)),a.hide(),e.preventDefault()})),n(a),t(a)}function b(){const e={},t=[];for(const n in e)t.push("hints.".concat(n));const n=function(e){if(!Array.isArray(e))throw new Error("Hints passed in must be an array of strings");let t=Math.floor(Math.random()*e.length);return{getNextHint:()=>{const n=e[t];return t=(t+1)%e.length,n}}}(t),o=()=>{Object(s.default)("#rte-savebar .hints-text").html(u.a.tinymce.activeEditor.translate("tinymce.".concat(n.getNextHint())))};o(),Object(s.default)("#rte-savebar a.hints-close").click((function(e){Object(s.default)(this).closest(".toolbar-split").addClass("hidden"),e.preventDefault()})),Object(s.default)("#rte-savebar a.hints-next").click(e=>{o(),e.preventDefault()})}return{init(r){var c;h("#format-dropdown"),h("#more-menu .aui-dd-parent"),h("#insert-menu .aui-dd-parent"),Object(s.default)("#pagelayout-menu").length&&h("#pagelayout-menu .aui-dd-parent"),Object(s.default)("#template-menu").length&&h("#template-menu .aui-dd-parent"),function(){const e=Object(s.default)("#color-picker-control");if(!e.length)return;const o=e.find(".aui-dd-parent"),a=Object(s.default)("#rte-button-color"),r=a.find(".selected-color"),c=o.dropDown("Standard",{alignment:"left"})[0],i=a.attr("data-color");r.css("background-color","#".concat(i)),e.delegate("a[data-color]","click",(function(e){const t=Object(s.default)(this),n=t.attr("data-color");e.preventDefault(),t.closest(".disabled").length||(u.a.tinymce.execCommand("ForeColor",!1,"#".concat(n)),a.attr("data-color",n),r.css("background-color","#".concat(n)))})),n(c),t(c)}(),Object(f.b)().TablePicker.bindToControl(u.a.tinymce.activeEditor,Object(s.default)("#insert-table-dropdown")),function(){const t=Object(s.default)("#rte-button-source-mode");t.click(()=>{t.hasClass("active")?e.changeMode(e.MODE_RICHTEXT):e.changeMode(e.MODE_SOURCE)})}(),b(),c=r,Object(pt.b)(document,"initContextToolbars.Toolbar",c),Object(pt.a)(document,"createContextToolbarRow.Toolbar",g),Object(pt.a)(document,"removeContextToolbarRow.Toolbar",p),Object(pt.a)(document,"enableContextToolbarRow.Toolbar",o),Object(pt.a)(document,"disableContextToolbarRow.Toolbar",a);const l=Object(s.default)("#format-dropdown"),d=l.find("span.dropdown-text");r.on("BeforeExecCommand",e=>{const t=e.command,n=e.value,o=u.a.tinymce.activeEditor;if(s.default.each(["pre","blockquote"],(function(){"FormatBlock"==t&&n==this&&(o.formatter.remove("alignleft"),o.formatter.remove("aligncenter"),o.formatter.remove("alignright"))})),Object(s.default)(o.selection.getNode()).closest("pre,.text-placeholder").length){const n=["Bold","Italic","Underline","Strikethrough","InsertUnorderedList","InsertOrderedList","InsertInlineTaskList","InsertInlineTaskListNoToggle","superscript","subscript","mceConfMacroBrowser","mceConfimage","mceConfAttachments","mceEmotion","InsertWikiMarkup","mceConflink","mceInsertTable","mceConfAutocompleteLink"],o=n.length;for(let a=0;a<o;a++)t==n[a]&&e.preventDefault()}if("FormatBlock"==t&&"pre"==n&&(o.undoManager.add(),o.execCommand("removeFormat")),"FormatBlock"==t&&"p"==n){const e=l.find(".dropdown-item[data-format='blockquote']").text();d.text()==e&&o.execCommand("FormatBlock",!1,"blockquote")}}),r.on("ExecCommand",e=>{const t=e.command,n=e.value;if("FormatBlock"==t){let e=l.find(".dropdown-item[data-format='".concat(n,"']"));e.length||(e=l.find(".dropdown-item[data-format='p']")),d.text(e.text())}}),r.on("NodeChange",i(r)),r.on("init",()=>{const e=u.a.tinymce.activeEditor;const t={};Object(s.default)(".aui-toolbar").find("[data-control-id]").each((n,o)=>{let a;const r=(o=Object(s.default)(o)).attr("data-control-id");"formatselect"==r?(a=e.theme.controlHandlers[r],a.state.add(e=>{const t=u.a.tinymce.activeEditor;if("p"==e){const n=t.selection.getNode();Object(s.default)(n).closest("p").parent().is("blockquote")&&(e="blockquote")}const n=l.find(".dropdown-item[data-format='".concat(e,"']")).text();n&&d.text(n)})):t[r]=o});const n=e.theme.controlHandlers.buttons;n.state.add((e,n,o)=>{const a=t[e];if(!a)return;const r=a.find(".icon-check"),c=a.closest(".toolbar-item");r.length?r.toggleClass("hidden",!o):c.toggleClass(n,o)}),Object(s.default)(".aui-toolbar").delegate(".toolbar-item","click",(function(e){const t=Object(s.default)(this);if(t.hasClass("disabled"))e.preventDefault();else{const o=t.children(".toolbar-trigger[data-control-id]").attr("data-control-id");o&&(n.click.dispatch(o),e.preventDefault())}})),s.default.support.shrinkWrapBlocks=!1,nn()}),r.on("Remove",()=>{on()})},toggleToolbarButton:r,disableToolbarButton:function(e){r(Object(s.default)(".".concat(e.replace(".",""))),!0)},enableToolbarButton:function(e){r(Object(s.default)(".".concat(e.replace(".",""))),!1)},focusToolbarButton:function(e){Object(s.default)(".".concat(e.replace(".",""))).closest(".aui-button").focus()},isToolbarRowEnabled:function(e){const t=l({id:e});return d(t)&&!Object(s.default)("#".concat(t)).hasClass("disabled")},getToolbarRow:function(e){const t=l({id:e}),n=Object(s.default)("#".concat(t));return n.length?n[0]:null},isToolbarButtonEnabled:function(e){return!Object(s.default)(".".concat(e.replace(".",""))).closest(".aui-button").prop("disabled")},bindDropdownMenu:h,toggleToolbarButtons:c,getInfo:()=>({longname:"customtoolbar",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.0"})}}var cn=n("QTRv");cn.a.configure({endpoint:u.a.location?"".concat(u.a.location.protocol,"//").concat(u.a.location.host):"",contextPath:b.a});var ln=cn.a;n("gV2d");const sn=()=>!x("editor.insert-wiki-markdown"),dn={HELP_REST_API:"".concat(b.a,"/plugins/tinymce/helplink.action"),WIKI:{CONFLUENCE:{api:ln.getWikiConfluenceToXhtml,val:"CONFLUENCE",label:"tinymce.confluence.conf_wikimarkup_confluence_label",helpLink:"help.insert.wiki.markup",restApi:"/rest/tinymce/1/wikixhtmlconverter"},MARKDOWN:{api:ln.getWikiMarkdownToXhtml,val:"MARKDOWN",label:"tinymce.confluence.conf_wikimarkup_markdown_label",helpLink:"help.insert.wiki.markup.markdown",restApi:"/rest/tinymce/1/markdownxhtmlconverter"}}},un={dialog:{id:"insert-wiki-markup-dialog",content:"",width:980,height:500,popup:!1,name:"confluence.conf_wikimarkup_desc"},markupEditId:"insert-wiki-textarea",previewAreaId:"insert-wiki-textarea-preview",selectionMenuId:"wiki-parser-selection-tool",serverRequestTimer:300,entityId:p.a.get("content-id"),spaceKey:p.a.get("space-key")};let fn=null;const mn=()=>{const e=vt.get("insert-wiki-markup-dialog.parser","global","CONFLUENCE");return dn.WIKI[e]},pn=(e,t)=>{const n=Object(s.default)(((e,t,n)=>'\n    <span class="wiki-parser-selector">\n        <form action="#" method="post" id="d" class="aui">\n            <select class="select medium-field" id="wiki-parser-selection-tool" name="wiki-parser-selection-tool" title="wiki parser selector">\n                <option value="'.concat(t.val,'">').concat(e(t.label),"</option>\n                ").concat(Object.keys(n).filter(e=>n[e].val!==t.val).map(t=>'<option value="'.concat(n[t].val,'">').concat(e(n[t].label),"</option>")),"\n            </select>\n        </form>\n    </span>\n"))(e,t,dn.WIKI));return Object(s.default)("#insert-wiki-insert-title").append(n),Object(s.default)("#".concat(un.selectionMenuId))},gn=()=>{const e=Object(s.default)("#".concat(un.selectionMenuId));return e.length?e.val():mn().val},hn=e=>{const t={wiki:(e=e||{}).textToConvert,entityId:un.entityId,spaceKey:un.spaceKey};e.api(JSON.stringify(t),(t,n)=>{t?e.errorCallback(t):e.successCallback(n)})},bn=()=>{const e=Object(s.default)("#".concat(un.markupEditId)),t=e.val();s.default.trim(t)?hn({api:dn.WIKI[gn()].api,textToConvert:t,successCallback:e=>{fn.html(e)},errorCallback:()=>{fn.html(e.val())}}):fn.html(t)},yn=()=>{const e=gn();vt.set("insert-wiki-markup-dialog.parser","global","CONFLUENCE",e),(e=>{const t=Object(s.default)("#".concat(un.dialog.id)).find(".dialog-help-link"),n=dn.WIKI[e].helpLink;t.load(dn.HELP_REST_API,{linkUrlKey:n})})(e),bn()};function Cn(e){if("string"!=typeof e)return"";const t={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return e.replace(/[&"'<>`]/g,e=>"string"==typeof t[e]?t[e]:"&quot;")}const wn={init:(e,t)=>{var n;un.dialog.content=sn()?'\n    <p id="insert-wiki-info-title">'.concat((n=t=>e.translate(t))("tinymce.confluence.conf_wikimarkup_info_title"),'</p>\n    <form action=\'#\' method=\'post\' id="insert-wiki-markup-form" class="aui">\n        <h3 class="wiki-title">\n            <span id="insert-wiki-insert-title">').concat(n("tinymce.confluence.conf_wikimarkup.insert.label"),'</span>\n            <span id="insert-wiki-preview-title">').concat(n("tinymce.confluence.conf_wikimarkup_preview_label"),"</span>\n        </h3>\n        <textarea class='monospaceInput textarea' id='insert-wiki-textarea' name='wikitext'/>\x3c!--\n            --\x3e<div class='example-container' id='insert-wiki-textarea-preview'></div>\n    </form>\n"):" \n    <form action='#' method='post' id=\"insert-wiki-markup-form\" class=\"aui\">\n        <textarea class='monospaceInput textarea originalDefault' id='insert-wiki-textarea' name='wikitext'/>\n    </form>\n";const o=t=>{const n=un.dialog.id,o=gn();var r;e.windowManager.setBusy(n,!1),u.a.tinymce.EditorManager.activeEditor.windowManager.close(n),sn()&&(Object(a.b)("analytics",{name:"insert-wiki-markup-dialog.".concat(o)}),"MARKDOWN"===o&&(t=(e=>{const t=Object(s.default)(e);return t.find("img").addClass("confluence-embedded-image"),Object(s.default)("<div>").append(t.clone()).html()})(t))),e.execCommand("mceInsertContent",!1,t),r=e,u.a.tinymce.each(r.dom.select("p > p"),e=>{try{r.dom.split(e.parentNode,e)}catch(e){}})},r=(t,n,o)=>{e.windowManager.setBusy(un.dialog.id,!1);const a=((e,t)=>"\n        <p class='warning'>\n            ".concat(e,"\n        </p>\n        <p class='exception-report'>\n            <span class='exceptionMessage'>\n                ").concat(t,"\n            </span>\n        </p>\n"))(u.a.tinymce.EditorManager.activeEditor.translate("tinymce.confluence.conf_wikimarkup_conversion_errors"),"timeout"===n?u.a.tinymce.EditorManager.activeEditor.translate("tinymce.confluence.conf_wikimarkup_timeout"):"".concat(Cn(n)," : ").concat(Cn(o)));u.a.tinymce.EditorManager.activeEditor.windowManager.alert(a)};e.addCommand("InsertWikiMarkup",()=>{const n=mn();if(e.windowManager.open(un.dialog,{buttons:[{label:"confluence_dlg.insertbutton.title",action:()=>{e.windowManager.setBusy(un.dialog.id,!0),hn({api:n.api,successCallback:o,errorCallback:r,textToConvert:Object(s.default)("#".concat(un.markupEditId)).val(),setBusy:!0})}}],plugin_url:t,helpLink:n.helpLink,hintText:"confluence.conf_wikimarkup_hint",cssClass:"insert-wiki-markup-panel"}),sn()){let t;(e=>{const t=Object(s.default)("#wysiwygTextarea_ifr").contents().find("head").html(),n=Object(s.default)("<iframe tabindex='-1' id='insert-wiki-markup-preview' />");Object(s.default)("#".concat(e)).append(n);const o=n.contents(),a=o[0];a.open(),a.write('\n    <!DOCTYPE html>\n    <html class="insert-wiki-markup-dialog">\n        <head>\n        </head>\n        <body class="wiki-content previewWiki">\n        </body>\n    </html>\n'),a.close(),o.find("head").html(t),fn=o.find("body")})(un.previewAreaId),pn(t=>e.translate(t),n).on("change",yn),Object(s.default)("#".concat(un.markupEditId)).on("keydown",(function(){clearTimeout(t),t=setTimeout(bn,un.serverRequestTimer)}))}}),e.addButton("insertwikimarkup",{title:"confluence.conf_wikimarkup_desc",cmd:"InsertWikiMarkup"})},getInfo:()=>({longname:"InsertWikiMarkip",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.1"})};const vn={fields:{string:{language:(e,t)=>{const n=Object(s.default)(u.a.Confluence.Templates.MacroBrowser.macroParameterSelect()),o=Object(s.default)("select",n);var a;return null==t&&(t={}),t.setValue=e=>{if(0==o.find("option[value='".concat(e,"']")).length){const t=Object(s.default)("<option/>");t.val(e),t.text(e),o.append(t)}},a=o,ln.getPluginCodeLanguages((e,t)=>{if(e)return;if(!t.length)return;const n=a.val();a.empty(),a.append(Object(s.default)("<option/>").attr("value","")),t.forEach(e=>{const t=Object(s.default)("<option />");t.val(e.aliases[0]),t.text(e.friendlyName),a.append(t)}),a.val(n)}),new u.a.AJS.MacroBrowser.Field(n,o,t)}}}};const On=[],xn=function(e){return["shift","shiftLeft","shiftRight","ctrl","ctrlLeft","ctrlRight","alt","altLeft","altRight","meta","metaLeft","metaRight"].indexOf(e)>-1},kn=function(e){const t={"-":{default:189,variants:[189,45,109,173]},"\\":{default:47,variants:[47,191]},"/":{default:92,variants:[92,220]}};for(const n in t){const o=t[n];if(o.variants.indexOf(e)>-1)return o.default}return e},jn=function(e){const t={};return e.forEach(e=>{const n=kn(e.which),o=function(e,t){return xn(e)?e+(1===t.location?"Left":"Right"):e}(In(n),e);t[o]=e}),t},Tn=function(e,t){const n=jn(e);return An(n,t)},En=function(e){const t=u.a.tinymce.Env.mac?"mac":"win";return e.map(e=>({keys:e[t].split("+").map(e=>0===e.toLowerCase().indexOf("arrow")?function(e){return{arrowleft:37,arrowup:38,arrowright:39,arrowdown:40}[e]}(e.toLowerCase()):xn(e)||e.length>1?e:function(e){const t=e.charCodeAt(0);return"-"===e||"\\"===e||"/"===e?kn(t):t}(e)),context:e.context,param:e.param,description:e.description}))},In=function(e){switch(e){case 16:return"shift";case 17:return"ctrl";case 18:return"alt";case 91:case 93:case 224:return"meta";default:return e}},An=function(e,t){return t.filter(t=>function(e,t){return Object.keys(e).length===t.keys.length&&t.keys.every(t=>!(!xn(t)||!function(e,t){return!(!e["".concat(t,"Left")]&&!e["".concat(t,"Right")])}(e,t))||!!e[t])}(e,t))[0]},Sn=function(e,t,n){if(n){e.preventDefault();const o=n.param.split("-");t.execCommand(o[0],!1,o[1])}},Mn=function(e,t){for(let n=0;n<t.length;n++){const o=t[n];o&&o.which===e.which&&(t.splice(n,1),n--)}},Bn=function(){On.length=0},Nn=function(e,t){return function(n){if(n.metaKey||n.shiftKey||n.altKey||n.ctrlKey){if(Mn(n,On),On.push(n),On.length>1&&Tn(On,t)){const o=Tn(On,t);Sn(n,e,o)}!function(){if(u.a.tinymce.Env.mac)for(let t=0;t<On.length;t++){const n=On[t].which;In(e=n)===e&&(On.splice(t,1),t--)}var e}()}else Bn()}};var Rn=function(e,t){const n=En(t);return e.on("keydown",Nn(e,n),!0),e.on("keyup",(function(e){Mn(e,On)}),!0),e.on("blur",Bn),u.a.addEventListener("error",Bn),((e,t)=>{const n=u.a.document.querySelectorAll("#versionComment, #content-title");if(n&&0!==n.length)for(let o=0;o<n.length;o++)t.forEach(t=>{n[o].addEventListener("keydown",n=>{let o=!0;const a=n.keyCode?n.keyCode:n.which,r=u.a.tinymce.Env.mac?"meta":"ctrl";t.keys.forEach(e=>{o=!(!o||!(e==r&&n.metaKey||"shift"==e&&n.shiftKey||a==e))}),o&&(n.preventDefault(),Sn(n,e,t))})})})(e,n.filter(e=>"form.input"===e.context)),n};var _n=[{win:"ctrl+altLeft+0",mac:"meta+alt+0",context:"tinymce.block",param:"FormatBlock-p",description:"Paragraph"},{win:"ctrl+altLeft+1",mac:"meta+alt+1",context:"tinymce.block",param:"FormatBlock-h1",description:"Heading 1"},{win:"ctrl+altLeft+2",mac:"meta+alt+2",context:"tinymce.block",param:"FormatBlock-h2",description:"Heading 2"},{win:"ctrl+altLeft+3",mac:"meta+alt+3",context:"tinymce.block",param:"FormatBlock-h3",description:"Heading 3"},{win:"ctrl+altLeft+4",mac:"meta+alt+4",context:"tinymce.block",param:"FormatBlock-h4",description:"Heading 4"},{win:"ctrl+altLeft+5",mac:"meta+alt+5",context:"tinymce.block",param:"FormatBlock-h5",description:"Heading 5"},{win:"ctrl+altLeft+6",mac:"meta+alt+6",context:"tinymce.block",param:"FormatBlock-h6",description:"Heading 6"},{win:"ctrl+shift+7",mac:"meta+shift+7",context:"tinymce.list",param:"InsertOrderedList",description:"Numbered List"},{win:"ctrl+shift+8",mac:"meta+shift+8",context:"tinymce.block",param:"InsertUnorderedList",description:"Bullet List"},{win:"ctrl+altLeft+9",mac:"ctrl+altLeft+9",context:"tinymce.quote",param:"mceBlockQuote",description:"Quote"},{win:"ctrl+shift+I",mac:"meta+shift+I",context:"",param:"confDefaultTable",description:"Insert Table"},{win:"ctrl+shift+M",mac:"meta+shift+M",context:"",param:"confMonospace",description:"Mono Spaced Font"},{win:"ctrl+shift+-",mac:"meta+shift+-",context:"",param:"InsertHorizontalRule",description:"Insert Horizontal Rule"},{win:"ctrl+H",mac:"meta+shift+H",context:"",param:"mceSearchReplaceToolbar",description:"Find Replace"},{win:"ctrl+\\",mac:"meta+\\",context:"",param:"RemoveFormat",description:"Remove Formatting"},{win:"ctrl+/",mac:"meta+/",context:"",param:"mceConfShortcutDialog",description:"Help"},{win:"alt+shift+arrowUp",mac:"ctrl+alt+arrowUp",context:"",param:"mceTableInsertRowBefore",description:"Insert table row above"},{win:"alt+shift+arrowDown",mac:"ctrl+alt+arrowDown",context:"",param:"mceTableInsertRowAfter",description:"Insert table row after"},{win:"alt+shift+arrowRight",mac:"ctrl+alt+arrowRight",context:"",param:"mceTableInsertColAfter",description:"Insert column after"},{win:"alt+shift+arrowLeft",mac:"ctrl+alt+arrowLeft",context:"",param:"mceTableInsertColBefore",description:"Insert column before"},{win:"ctrl+shift+9",mac:"meta+shift+9",context:"",param:"FormatBlock-blockquote",description:"Quote"},{win:"ctrl+S",mac:"meta+S",context:"form.input",param:"preventDefaultSave",description:"Prevent default behavior of browser"},{win:"ctrl+13",mac:"meta+13",context:"form.input",param:"publish",description:"Save"},{win:"ctrl+shift+E",mac:"meta+shift+E",context:"form.input",param:"preview",description:"Preview"},{win:"ctrl+shift+J",mac:"meta+shift+J",context:"",param:"mceJiralink",description:"Open Insert JIRA dialog"}];var Pn=function(e){return{"meta+Alt+0":e.shortcuts.remove("meta+Alt+0"),"meta+Alt+1":e.shortcuts.remove("meta+Alt+1"),"meta+Alt+2":e.shortcuts.remove("meta+Alt+2"),"meta+Alt+3":e.shortcuts.remove("meta+Alt+3"),"meta+Alt+4":e.shortcuts.remove("meta+Alt+4"),"meta+Alt+5":e.shortcuts.remove("meta+Alt+5"),"meta+Alt+6":e.shortcuts.remove("meta+Alt+6"),"meta+Alt+7":e.shortcuts.remove("meta+Alt+7"),"meta+Alt+8":e.shortcuts.remove("meta+Alt+8"),"meta+s":e.shortcuts.remove("meta+s"),"meta+shift+i":e.shortcuts.remove("meta+shift+i"),"meta+shift+x":e.shortcuts.remove("meta+shift+x"),"meta+shift+c":e.shortcuts.remove("meta+shift+c"),"meta+shift+v":e.shortcuts.remove("meta+shift+v"),"ctrl+shift+M":e.shortcuts.remove("ctrl+shift+M"),"ctrl+F":e.shortcuts.remove("ctrl+F"),"meta+shift+n":e.shortcuts.remove("meta+shift+n"),"meta+shift+b":e.shortcuts.remove("meta+shift+b"),"access+0":e.shortcuts.remove("access+0"),"access+1":e.shortcuts.remove("access+1"),"access+2":e.shortcuts.remove("access+2"),"access+3":e.shortcuts.remove("access+3"),"access+4":e.shortcuts.remove("access+4"),"access+5":e.shortcuts.remove("access+5"),"access+6":e.shortcuts.remove("access+6"),"access+7":e.shortcuts.remove("access+7"),"access+8":e.shortcuts.remove("access+8"),"access+9":e.shortcuts.remove("access+9"),"alt+arrowUp":e.shortcuts.remove("alt+38"),"alt+arrowDown":e.shortcuts.remove("alt+40"),"ctrl+f":e.shortcuts.remove("ctrl+f"),"ctrl+shift+n":e.shortcuts.remove("ctrl+shift+n"),"ctrl+shift+b":e.shortcuts.remove("ctrl+shift+b"),"ctrl+shift+I":e.shortcuts.remove("ctrl+shift+I"),"ctrl+0":e.shortcuts.remove("ctrl+0"),"ctrl+1":e.shortcuts.remove("ctrl+1"),"ctrl+2":e.shortcuts.remove("ctrl+2"),"ctrl+3":e.shortcuts.remove("ctrl+3"),"ctrl+4":e.shortcuts.remove("ctrl+4"),"ctrl+5":e.shortcuts.remove("ctrl+5"),"ctrl+6":e.shortcuts.remove("ctrl+6"),"ctrl+7":e.shortcuts.remove("ctrl+7"),"ctrl+8":e.shortcuts.remove("ctrl+8"),"ctrl+s":e.shortcuts.remove("ctrl+s")}};const Hn=()=>{u.a.tinymce.execCommand("confInsertTable",!1,{cols:3,rows:3})},Dn=()=>{document.querySelector("#rte-button-publish").click()},Ln=()=>{document.querySelector("#rte-button-preview").click()},Fn=(e,t)=>function(){e.execCommand("FormatBlock",!1,t)};function zn(){let e;function t(){const t=Object(s.default)("#breadcrumbs");t.detach(),!t.find(".edited-page-title").length&&e.length&&t.append(e),Object(s.default)("#editor-precursor .cell").prepend(t)}if("comment"!==p.a.get("content-type")){const n=Object(s.default)("#quickedit-breadcrumbs");n.length>0&&(Object(s.default)("#breadcrumbs").detach(),n.attr("id","breadcrumbs"),Object(s.default)("#breadcrumb-section").append(n)),e=Object(s.default)(".edited-page-title").parent().detach(),t(),Object(pt.a)(u.a.document,"mode-changed",(n,o)=>{"preview"===o?function(){const t=Object(s.default)("#breadcrumbs").detach();e.detach(),Object(s.default)("#breadcrumb-section").append(t)}():"richtext"===o&&t()})}}const Wn={CONNECT:["wr!confluence.web.resources:querystring","wr!confluence.web.resources:navigator-context","wr!com.atlassian.plugins.atlassian-connect-plugin:confluence-atlassian-connect-resources-v5"]}.CONNECT.concat(["wr!com.atlassian.plugins.atlassian-connect-plugin:dynamic-css-resources","wr!com.atlassian.plugins.atlassian-connect-plugin:featured-macro-css-resources"]).concat(["wr!com.atlassian.plugins.atlassian-connect-plugin:confluence-atlassian-connect-autoconvert-resources-v5","wr!com.atlassian.plugins.atlassian-connect-plugin:macro-editor-resources-v5"]);function Kn(e){function t(e){Object(s.default)("#autocomplete-dropdown .top-menu-item").spin(e)}function n(e,t){const n=t.presetMacroMetadata;e.replaceWithSelectedSearchText(),n?O.a.MacroBrowser.hasRequiredParameters(n)||n.alwaysShowConfig?R.macroBrowserToolbarButtonClicked(t):(Object(f.b)().BookmarkManager.storeBookmark(),B.insertMacro({contentId:O.a.Meta.get("content-id")||"0",macro:{name:n.macroName,body:""}})):R.macroBrowserToolbarButtonClicked(t)}function o(e){if(e.hidden&&!O.a.MacroBrowser.isHiddenMacroShown(e))return null;const t={className:"autocomplete-macro-".concat(e.macroName),callback(t){n(t,{ignoreEditorSelection:!0,presetMacroMetadata:e})}};return e.icon?(t.name=e.title,t.href="#",t.icon=(e.icon.relative?O.a.params.staticResourceUrlPrefix:"")+e.icon.location):t.html=O.a.Editor.Autocompleter.Util.dropdownLink(e.title),t}O.a.Editor.Autocompleter.Settings["{"]={ch:"{",cache:!1,endChars:["}",":","{"],dropDownClassName:"autocomplete-macros",dropDownDelay:0,selectFirstItem:!0,getHeaderText:()=>e.translate("editor.autocomplete.macros.header.text"),getAdditionalLinks:()=>[{className:"dropdown-insert-macro",html:O.a.Editor.Autocompleter.Util.dropdownLink(e.translate("editor.autocomplete.macros.dialog.browse"),"dropdown-prevent-highlight","editor-icon"),callback(e){const t=e.text();n(e,{searchText:t})}}],getDataAndRunCallback(n,r,c){const i=O.a.MacroBrowser.getMetadataPromise(),l=this,d=arguments;function u(){let e;e=r?function(e){const t=[],a=O.a.MacroBrowser.searchSummaries(e,{keywordsField:"keywordsNoDesc"});for(let e=0,r=a.length;e<r;e++){const r=o(a[e]);if(r&&t.push(r)==n.maxResults)break}return t}(r):function(e){const t=[];return Object(s.default)("#macro-insert-list li").each((n,a)=>{const r=Object(s.default)(a),c=e.find(e=>e.macroName===r.attr("data-macro-name"));if(c){const e=o(c);e&&t.push(e)}}),t}(O.a.MacroBrowser.metadataList),t(!1),c([e],r)}function f(e){e.preventDefault(),e.stopPropagation(),Object(a.b)("analytics",{name:"autocomplete-macrobrowser.load-retry"}),O.a.MacroBrowser.reset(),O.a.MacroBrowser.preLoadMacro(),l.getDataAndRunCallback.apply(l,d)}l.alreadyBinded||(l.alreadyBinded=!0,i.always(()=>{u(),l.alreadyBinded=!1}),i.fail(()=>{Object(a.b)("analytics",{name:"autocomplete-macrobrowser.fail-to-load"}),O.a.messages.warning("#autocomplete-dropdown ol:nth(1)",{title:e.translate("editor.autocomplete.macros.error.load.header"),body:"<p><a id='macro-retry-link' href='#'>".concat(e.translate("editor.autocomplete.macros.error.load.retrylink"),"</a></p>")}),Object(s.default)("#macro-retry-link").click(f),Object(s.default)("#autocomplete-dropdown ol").eq(1).show()})),"pending"===i.state()&&(c([],r),t(!0))},update(){throw new Error("All items in the Macro Autocomplete dropdown must have a callback function")}}}const $n=()=>({initContextToolbars(){const e=u.a.aui,t=u.a.tinymce.activeEditor,n=Xt(),o=e=>{const n="tinymce.".concat(e);let o;o=x("editor.spa.uxenhancements")?u.a.tinymce.isMac?"".concat(n,"_shortcut_mac"):"".concat(n,"_shortcut_win"):"".concat(n,"_shortcut");let a=t.translate(n);const r=t.translate(o,"");return r&&r!==o&&(a+=" (".concat(r,")")),a},a="aui-icon aui-icon-small aui-iconfont-table-",r=u.a.AJS.storageManager("atlassian.editor","tables"),c={Buttons:[new n.Group([new n.Button({text:o("table.row_before_desc"),iconClass:"".concat(a,"row-up"),click(){u.a.tinymce.execCommand("mceTableInsertRowBefore",!1,"")}}),new n.Button({text:o("table.row_after_desc"),iconClass:"".concat(a,"row-down"),click(){u.a.tinymce.execCommand("mceTableInsertRowAfter",!1,"")}}),new n.Button({text:o("table.delete_row_desc"),iconClass:"".concat(a,"row-remove"),click(){u.a.tinymce.execCommand("mceTableDeleteRow",!1,"")}})]),new n.Group([new n.Button({text:o("table.cut_row_desc"),iconClass:"".concat(a,"cut-row"),click(){u.a.tinymce.execCommand("mceTableCutRow",!1,""),t.plugins.customtoolbar.enableToolbarButton("aui-iconfont-table-paste-row")}}),new n.Button({text:o("table.copy_row_desc"),iconClass:"".concat(a,"copy-row"),click(){u.a.tinymce.execCommand("mceTableCopyRow",!1,""),t.plugins.customtoolbar.enableToolbarButton("aui-iconfont-table-paste-row")}}),new n.Button({text:o("table.paste_row_before_desc"),iconClass:"".concat(a,"paste-row"),click(){u.a.tinymce.execCommand("mceTablePasteRowBefore",!1,"")},disabled:!r.doesContain("copied")})]),new n.Group([new n.Button({text:o("table.col_before_desc"),iconClass:"".concat(a,"col-left"),click(){u.a.tinymce.execCommand("mceTableInsertColBefore",!1,"")}}),new n.Button({text:o("table.col_after_desc"),iconClass:"".concat(a,"col-right"),click(){u.a.tinymce.execCommand("mceTableInsertColAfter",!1,"")}}),new n.Button({text:o("table.delete_col_desc"),iconClass:"".concat(a,"col-remove"),click(){u.a.tinymce.execCommand("mceTableDeleteCol",!1,"")}})]),new n.Group([new n.Button({text:o("table.merge_cells_desc"),iconClass:"".concat(a,"merge"),click(){u.a.tinymce.execCommand("mceTableMergeCells",!1,"")}}),new n.Button({text:o("table.split_cells_desc"),iconClass:"".concat(a,"split"),click(){u.a.tinymce.execCommand("mceTableSplitCells",!1,"")}})]),new n.Group([new n.Button({text:o("table.row_highlight"),iconClass:"".concat(a,"header-row"),click(){u.a.tinymce.execCommand("confTableRowToggleHeading",!1),u.a.tinymce.execCommand("mceTableUpdateNumberingCol",!1)}}),new n.Button({text:o("table.col_highlight"),iconClass:"".concat(a,"header-column"),click(){u.a.tinymce.execCommand("confTableColumnToggleHeading",!1)}})]),new n.SplitGroup([new n.Button({text:o("table.selection_highlight"),iconClass:"".concat(a,"bg"),click(){u.a.tinymce.execCommand("confTableSelectionToggleHighlight",!1)}})],{id:"table-highlight-group",dropDownOptions:{id:"table-highlight-colour",dropDownContent:function(){const e=Object(s.default)("<ul/>").addClass("table-highlight-picker"),t=[!1,!1,!1,!1,!1,!0];return s.default.each(["grey","red","green","blue","yellow",""],(n,o)=>{const a=Object(s.default)("<li/>"),r=Object(s.default)("<a href='#'></a>");t[n]?r.addClass("remove-highlight").attr("data-remove-highlight",!0):r.addClass("highlight-".concat(o)).attr("data-highlight-colour",o),a.append(r),e.append(a)}),e}(),alignment:"right"},postProcess(e){e.attr("data-highlight-colour","grey"),e.addClass("highlight-grey");const t=Object(s.default)("<span>&nbsp;</span>");t.addClass("highlight-indicator"),e.find(".icon.aui-iconfont-table-bg").after(t)}}),new n.Group([new n.Button({text:o("table.del"),iconClass:"".concat(a,"remove"),click(){u.a.tinymce.execCommand("mceTableDelete",!1,"")}})])],Events:Yt};let i;const l=e=>{function t(e,t){return parseInt(e.attr(t),10)}return e.filter((function(){const e=Object(s.default)(this);return t(e,"rowspan")>1||t(e,"colspan")>1})).length>=1},d=function(){const t=e.buttons.button({id:"table-more-settings-trigger",text:"",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-configure",iconText:o("table.more.heading"),extraAttributes:{type:"button","data-aui-trigger":"true","aria-controls":"table-more-settings","data-tooltip":o("table.more.heading")}}),n=e.inlineDialog2.inlineDialog2({alignment:"bottom left",respondsTo:"toggle",id:"table-more-settings"}),a=e.buttons.buttons({content:t});return function(t){this.render=function(){const r=Object(s.default)(a),c=Object(s.default)(n),i=c[0],l=()=>{i.open=!1};return c.on("aui-show",n=>{Object(s.default)(".aui-inline-dialog-contents",n.target).html(function(t){const n=Object(s.default)("<div></div>"),a=Object(s.default)("<h2>".concat(o("table.more.heading"),"</h2>"));return n.append(a),t.forEach(t=>{const o=Object(s.default)(e.form.field({type:"checkbox",id:t.id,labelContent:t.text,isChecked:t.isChecked(),isDisabled:t.isDisabled}));o.on("change",t.onChange),n.append(o)}),n}(t))}),r.append(c),Object(s.default)(u.a).on("resize",s.default.debounce(l,100)),Object(pt.a)(u.a.document,"enableContextToolbarRow.Toolbar disableContextToolbarRow.Toolbar",l),r}}}();function f(e){const n=Object(s.default)(this),o=Object(s.default)("#table-highlight-group"),a=o.attr("data-highlight-colour"),r=o.attr("data-remove-highlight");a&&(o.removeClass("highlight-".concat(a)),o.removeAttr("data-highlight-colour")),o.removeClass("remove-highlight"),r&&o.removeAttr("data-remove-highlight");const c=n.attr("data-highlight-colour");c&&(o.addClass("highlight-".concat(c)),o.attr("data-highlight-colour",c)),n.attr("data-remove-highlight")&&(o.addClass("remove-highlight"),o.attr("data-remove-highlight",!0)),t.focus(),t.execCommand("confTableSelectionToggleHighlight",!1,{alwaysHighlight:!0}),e.preventDefault()}if(t.on("NodeChange",e=>{const n=e.element,o=Object(s.default)("body"),a=!o.hasClass("no-tools")||o.hasClass("no-tools-toolbars-visible");var r;i||null==n.parentNode||"BODY"===n.nodeName||(i=!0,r=n,Object(s.default)(r).closest("table:not(.wysiwyg-macro)").length?(Object(pt.b)(u.a.document,"createContextToolbarRow.Toolbar",{buttons:c.Buttons,topToolbar:!0,animate:a}),Object(pt.b)(u.a.document,"enableContextToolbarRow.Toolbar",{id:"default"}),x("confluence.table.resizable")&&(e=>{s.default.fn.updateTableModeInToolbar&&Object(s.default)(e).closest("table").updateTableModeInToolbar()})(n),(e=>{const n=Object(s.default)(e).closest("td,th"),o=Object(s.default)(".mceSelected",n.closest("table"));l(n.add(o))?t.plugins.customtoolbar.enableToolbarButton("aui-iconfont-table-split"):t.plugins.customtoolbar.disableToolbarButton("aui-iconfont-table-split")})(n)):Object(pt.b)(u.a.document,"disableContextToolbarRow.Toolbar",{animate:a}),i=!1)}),t.on("Undo",()=>{t.nodeChanged()}),t.initialized?Object(s.default)(u.a.document).delegate("#table-highlight-colour .aui-dropdown a","click",f):t.on("init",()=>{Object(s.default)(u.a.document).delegate("#table-highlight-colour .aui-dropdown a","click",f)}),t.on("Remove",()=>{Object(s.default)(u.a.document).undelegate("#table-highlight-colour .aui-dropdown a","click",f)}),x("confluence.table.resizable")&&c.Buttons.splice(0,0,new n.Group([new n.DropDownButton({id:"table-mode-picker",text:o("table.auto_width"),dropDownContent:function(){const e=Object(s.default)("<ul/>").addClass("table-mode-list"),t=[{name:o("table.responsive"),mceCmd:"mceAutoWidth",tooltip:o("table.responsive_tooltip")},{name:o("table.fixed_width"),mceCmd:"mceFixedWidth",tooltip:o("table.fixed_width_tooltip")}];return s.default.each(t,(t,n)=>{const o=Object(s.default)("<li/>").addClass("dropdown-item").attr("data-tooltip",n.tooltip),a=Object(s.default)("<a href='#'>".concat(n.name,"</a>")).addClass("item-link");o.on("click",()=>{u.a.tinymce.execCommand(n.mceCmd,!1,"")}),e.append(o.append(a))}),e}()})])),x("confluence-table-enhancements.copy-cut-paste-cols.disabled")||c.Buttons.splice(3,0,new n.Group([new n.Button({text:o("table.col_cut_desc"),iconClass:"".concat(a,"cut-column"),click(){u.a.tinymce.execCommand("mceTableCutCol",!1,"")}}),new n.Button({text:o("table.col_copy_desc"),iconClass:"".concat(a,"copy-column"),click(){u.a.tinymce.execCommand("mceTableCopyCol",!1,"")}}),new n.Button({text:o("table.col_paste_desc"),iconClass:"".concat(a,"paste-column"),click(){u.a.tinymce.execCommand("mceTablePasteColBefore",!1,"")}})])),!x("confluence-table-enhancements.auto-row.disabled")){const e=[];x("confluence-table-enhancements.auto-row.disabled")||e.push({text:o("table.numbering_column_desc"),id:"insert-numbering-column",isChecked:()=>Object(s.default)(t.selection.getNode()).closest("table").find(".numberingColumn").length>0,onChange:()=>{u.a.tinymce.execCommand("mceTableInsertNumberingCol",!1,"")}}),c.Buttons.push(new d(e))}return c}});n("3eVS");var Un=n("xODI"),Vn=n.n(Un);const qn=["Grey","Red","Yellow","Green","Blue"],Gn=qn[0];let Jn,Xn,Qn,Yn;function Zn(){eo();const e=u.a.Confluence.MacroParameterSerializer.deserialize(Object(s.default)(Xn).attr("data-macro-parameters"));let t=!1,n=!1;return e&&Qn&&(t=e.title!==Qn.title,n=e.colour!==Qn.colour),t||n}function eo(){if(Yn){const e=no(Qn)==Yn.val(),t=""===Yn.val();e||t?delete Qn.title:Qn.title=Yn.val()}}function to(){if(Jn&&Jn.state&&"pending"===Jn.state())return void 0;eo();const e={contentId:u.a.Confluence.Editor.getContentId(),macro:{name:"status",params:Qn,defaultParameterValue:"",body:""}};Jn=u.a.tinymce.confluence.MacroUtils.insertMacro(e,Xn),Jn.done((e,t)=>{var n;Xn=e,n=Xn,u.a.tinymce.activeEditor.selection.select(n),K.storeBookmark(),u.a.tinymce.activeEditor.selection.collapse()}).fail(e=>{0})}function no(e){return e.colour||e.color||Gn}function oo(e){const t=Object(s.default)("<input/>");return t.attr("class","status-macro-title first last editable"),t.keyup(e=>13!==e.keyCode||(u.a.AJS.Confluence.PropertyPanel.destroy(),!1)),t.keydown(e=>27!==e.keyCode||(Yn=null,!0)),t}function ao(e){Yn=oo(),Yn.val(e.find("span.panel-button-text").text()),e.replaceWith(Yn),Yn.select().focus()}const ro=e=>{const t=(e.attr("data-macro-parameters")||"").split("|"),n={};return t&&s.default.each(t,(e,t)=>{const o=t.split("=",2);o.length>0&&(n[o[0]]=o.length>1?o[1]:"")}),n},co=e=>e.attr("data-macro-name"),io=()=>({"calendar-view-month":"month","calendar-view-week":"week","calendar-view-list":"list","calendar-view-upcoming":"upcoming","calendar-view-timeline":"timeline"}),lo=function(){s.default.each(io(),(e,t)=>{u.a.AJS.Confluence.PropertyPanel.Macro.registerButtonHandler(e,(e,n)=>{const o=Object(s.default)(n);u.a.AJS.Rte.getEditor().selection.select(o[0]),u.a.AJS.Rte.BookmarkManager.storeBookmark(),u.a.tinymce.confluence.MacroUtils.insertMacro({contentId:u.a.Confluence.Editor.getContentId(),macro:{name:co(o),params:s.default.extend(ro(o),{defaultView:t}),defaultParameterValue:"",body:""}})})}),u.a.AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("add-subcalendar",(e,t)=>{const n=Object(s.default)(t);u.a.Confluence.TeamCalendars.Dialogs.getAddDialogForMacro({name:co(n),params:ro(n),defaultParameterValue:"",body:""})}),Object(a.a)("created.property-panel",(e,t)=>{let n=ro(Object(s.default)(t.anchor)).defaultView||"month";"upcoming"===n&&(n="list"),Object(s.default)(".macro-property-panel-calendar-view-".concat(n),t.panel).addClass("selected")})};var so=()=>{Object(a.a)("init.rte",lo)},uo=n("OGf2"),fo=n.n(uo);function mo(){return!1}function po(){return!0}let go=0;const ho=(new Date).getTime();function bo(e){return(e="".concat(e||"")).replace(/\./g,"-")}function yo(e,t){if(u.a.AJS.EventQueue&&t&&t.attributes.id){const n={},o=bo(t.attributes.id);n.name="helptips.".concat(o,".").concat(e),n.properties={},u.a.AJS.EventQueue.push(n)}}const Co={dismissedTipIds:[],loaded:s.default.Deferred(),url:()=>"".concat(b.a,"/rest/calendar-services/1.0/tips"),sync(e,t){return e||(e="get"),t||(t=null),s.default.ajax(this.url(),{type:e,context:this,dataType:"json",contentType:"application/json",data:t&&JSON.stringify(t),processData:!1}).promise()},fetch(){if(!u.a.AJS.Meta.get("atlassian-account-id"))return;const e=this.sync();return e.done((function(e){s.default.merge(this.dismissedTipIds,e),this.loaded.resolve()})),e.promise()},show(e){this.loaded.done(e)},dismiss(e){const t=e.attributes.id;t?(this.dismissedTipIds.push(t),this.sync("post",{id:t})):e._dismissed=!0},undismiss(e){const t=e.attributes.id;t?(this.dismissedTipIds.splice(s.default.inArray(t,this.dismissedTipIds),1),this.sync("delete",{id:t})):e._dismissed=!1},isDismissed(e){const t=e.attributes.id;return t?s.default.inArray(t,this.dismissedTipIds)>=0:e._dismissed}},wo=function(e){this.attributes=s.default.extend({},e),this.attributes.id||(this.attributes.id=!1),this.attributes.body&&(this.attributes.bodyHtml=this.attributes.body,delete this.attributes.body),this.cid="c".concat(ho).concat(go++);const t=this.attributes.anchor;delete this.attributes.anchor,this.view=t?new vo(this,t):new Oo(this),this.view.$el.addClass("tc-aui-help-tip")};s.default.extend(wo.prototype,{show(){const e=this;Co.show(()=>{e.isDismissed()||(e.view.show(),yo("shown",e))})},dismiss(){const e=bo(arguments[0]||"programmatically");this.view.dismiss(),this.isDismissed()||(Co.dismiss(this),yo("dismissed.".concat(e),this))},isVisible(){return this.view.$el.is(":visible")},isDismissed(){return Co.isDismissed(this)}});let vo=function(e,t){this.initialize(e,t)};s.default.extend(vo.prototype,{initialize(e,t){const n=this,o=Object(s.default)("#rte").height()-t.offset().top<200,a=Object(s.default)(u.a.AJS.Rte.getEditor().getDoc()).scrollTop();this.model=e,this.beforeHide=mo,this.closeButton=Object(s.default)('\n    <button class="tc-helptip-close aui-button aui-style"><span>'.concat((e=>u.a.tinymce.activeEditor.translate(e))("com.atlassian.confluence.extra.team-calendars.calendar.helptip.close"),"</span></button>\n")),this.closeButton.click(t=>{e.dismiss("close-button"),t.preventDefault()}),this.popup=u.a.AJS.InlineDialog(t,e.cid,(t,o,a)=>{t.html(((e,t)=>{let n="";return e.title&&(n+='<h4 class="tc-helptip-title">'.concat(e.title,"</h4>")),n+='<div class="tc-helptip-body">'.concat(e.bodyHtml,"</div>"),e.url&&(n+='<a class="tc-helptip-link" href="'.concat(e.url,'" target="_blank">').concat(t("calendar3.helptip.learn.more"),"</a>")),n})(e.attributes,e=>u.a.tinymce.activeEditor.translate(e))),t.append(n.closeButton),t.unbind("mouseover mouseout"),t.find(".tc-helptip-link").click(()=>{yo("learn-more.clicked",e)}),a()},{container:"#content",noBind:!0,onTop:o,preHideCallback:()=>n.beforeHide(),calculatePositions(e,n,r,c){const i=u.a.AJS.InlineDialog.opts.calculatePositions(e,n,r,c);return i.popupCss.top=o?Object(s.default)("#rte").offset().top+t.offset().top-e.height()-9:Object(s.default)("#rte").offset().top+(t.offset().top-a)+t.height()+9,i.popupCss.left=t.offset().left,i.displayAbove=o,i}}),this._popupHide=this.popup.hide,this.popup.hide=mo,this.$el=Object(s.default)(this.popup[0]),Object(s.default)(document).bind("showLayer",(t,n,o)=>{"inlineDialog"===n&&o.id===e.cid&&(u.a.AJS.InlineDialog.current=null,Object(s.default)(document.body).unbind("click.".concat(e.cid,".inline-dialog-check")),o._validateClickToClose=mo,o.hide=mo)})},show(){const e=this.popup,t=function(t){e.has(t.target).length||(e.shadow.remove(),e.remove())};e.show(),Object(s.default)("#full-height-container").click(t),u.a.AJS.Rte.getEditor().onClick.add(t)},dismiss(){this.beforeHide=po,this._popupHide()}});let Oo=function(e){this.initialize(e)};s.default.extend(Oo.prototype,{initialize(){this.$el=Object(s.default)("<div></div>")},show(){},dismiss(){}});const xo=["wr!confluence.web.resources.colors:colors","wr!com.atlassian.confluence.keyboardshortcuts:confluence-keyboard-shortcuts","wr!com.atlassian.confluence.editor:editor-resources-conf-frontend","wr!com.atlassian.confluence.plugins.confluence-browser-metrics:editor",...["wr!confluence.web.resources:quicksearchdropdown","wr!com.atlassian.confluence.editor:property-panel-image-link-macro-conf-frontend","wr!confluence.web.resources:legacy-editor-global-AVOID-IF-POSSIBLE","wr!confluence.web.resources:hint-manager","wr!confluence.web.resources:raphael","wr!com.atlassian.confluence.plugins.confluence-link-browser:link-object","wr!confluence.web.resources:core","wr!com.atlassian.confluence.plugins.confluence-page-layout:pagelayout-frontend","wr!com.atlassian.confluence.plugins.confluence-link-browser:link-browser-conf-frontend","wr!confluence.extra.jira:macro-browser-resources","wr!confluence.extra.jira:dialogsJs-for-conf-frontend","wr!confluence.extra.jira:jirachart-macro",...Wn,"wr!com.atlassian.confluence.plugins.confluence-inline-tasks:editor-autocomplete-date-conf-frontend","wr!confluence.web.resources:breadcrumbs","wr!com.atlassian.confluence.plugins.confluence-collaborative-editor-plugin:confluence-collaborative-editor-plugin-resources","wr!com.atlassian.confluence.keyboardshortcuts:confluence-keyboard-shortcuts","wr!com.atlassian.confluence.plugins.confluence-labels:labels-editor","wr!com.atlassian.confluence.plugins.content-formatting-macros:content-formatting-macros-resources","wr!confluence.web.resources:ajs","wr!com.atlassian.auiplugin:aui-inline-dialog2","wr!confluence.web.resources:legacy-editor-global-AVOID-IF-POSSIBLE","wr!com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-editor-conf-frontend","wr!com.atlassian.confluence.plugins.gadgets:macro-browser-for-gadgetsplugin","wr!com.atlassian.confluence.plugins.confluence-hipchat-emoticons-plugin:hipchat-emoticons-conf-frontend","wr!com.atlassian.confluence.plugins.confluence-invite-to-edit:edit-resources","wr!confluence.macros.multimedia:macro-browser-smart-fields","wr!com.atlassian.confluence.editor:property-panel-image-link-macro-conf-frontend","wr!com.atlassian.confluence.editor:property-panel-image-link-macro-conf-frontend","wr!com.atlassian.confluence.image.effects.ImageEffectsPlugin:propertiespanel","wr!com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources-conf-frontend","wr!com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-editor-resources","wr!confluence.macros.advanced:editor_includemacro-conf-frontend","wr!confluence.macros.advanced:jiraroadmap-editor","wr!confluence.macros.advanced:jiraroadmap-preview","wr!confluence.macros.advanced:portfolioforjiraplan-editor","wr!com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources","wr!confluence.web.resources:deferred-dialog-loader","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:editor-resources","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-macro-browser-resources","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-resources","wr!com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-macro-browser","wrc!com.atlassian.confluence.extra.team-calendars:amd","wrc!com.atlassian.confluence.extra.team-calendars:user-timezone-setup","wrc!com.atlassian.confluence.extra.team-calendars:calendar-init-editor","wrc!com.atlassian.confluence.extra.team-calendars:macro-browser-web-resources","wr!confluence.extra.jira:text-placeholders-jira"]],ko=[function(){u.a.tinymce.create("tinymce.plugins.ConfList",{init:e=>{e.editorCommands.addCommands({outdent(){const t=e.selection,n=e.dom;function o(t){return(t=n.getParent(t,n.isBlock))&&parseInt(e.dom.getStyle(t,"margin-left")||0,10)+parseInt(e.dom.getStyle(t,"padding-left")||0,10)>0}return o(t.getStart())||o(t.getEnd())||e.queryCommandState("InsertOrderedList")||e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertInlineTaskList")}},"state")}}),u.a.tinymce.PluginManager.add("conflist",u.a.tinymce.plugins.ConfList)},function(){u.a.tinymce.PluginManager.add("tasklist",(function(e){const t=()=>{const t=U(e);t&&(t=>{const n=e.dom.getParent(t.parentElement,"UL");return t&&"UL"===t.tagName&&n&&n.classList.contains("inline-task-list")&&t!=n})(t)&&(e=>[...e.childNodes].every(e=>e.hasAttribute("data-inline-task-id")))(t)&&e.undoManager.ignore(()=>{t.classList.add("inline-task-list")})};function n(t,n){if(!function(){const e=u.a.AJS.Meta.get("use-inline-tasks");return"true"===e||!0===e}()&&"page"!==p.a.get("content-type")&&"blogpost"!==p.a.get("content-type"))return;const o=n.handlerManager,a=n.createHandler;o.registerHandler("]".charCodeAt(0),a($,()=>{e.execCommand("InsertInlineTaskList")},!0))}function o(){e.addQueryStateHandler("InsertInlineTaskList",()=>V(U(e))),e.addQueryStateHandler("InsertUnorderedList",()=>q(U(e)))}e.addCommand("InsertInlineTaskList",()=>{"page"!==p.a.get("content-type")&&"blogpost"!==p.a.get("content-type")||e.undoManager.transact(()=>{q(U(e))&&(e.execCommand("InsertOrderedList"),G(U(e))),function(e){const t=e.dom.uniqueId();e.execCommand("InsertUnorderedList",!1,{"list-attributes":{"data-task-list-id":t,class:"inline-task-list"},"list-item-attributes":{"data-inline-task-id":""}}),e.dom.select('[data-task-list-id="'.concat(t,'"]')).forEach(t=>{const n=t.querySelectorAll("li")[0];n&&e.dom.isEmpty(t)&&(n.innerHTML="<span class='placeholder-inline-tasks'>".concat(e.translate("tinymce.confluence.placeholder.inline.tasks"),"</span>"),e.selection.select(n.firstChild,!0)),t.removeAttribute("data-task-list-id")})}(e)})}),e.on("BeforeExecCommand",t=>{"InsertUnorderedList"===t.command&&V(U(e))&&!t.value?e.undoManager.ignore(()=>{e.execCommand("InsertOrderedList"),G(U(e))}):"InsertOrderedList"!==t.command||t.value||e.undoManager.ignore(()=>{G(U(e))})}),e.on("execCommand",e=>{"Indent"===e.command&&t()}),e.on("Click",(function(t){const n=t.target;if("LI"!==n.tagName)return;const o=e.dom.getParent(n,"ul,ol");"UL"===o.tagName&&e.dom.hasClass(o,"inline-task-list")&&function(t,n){let o,a;if(u.a.tinymce.Env.gecko){const r=n.getBoundingClientRect();o=t.pageX-(r.left+u.a.tinymce.DOM.getViewPort(e.getWin()).x),a=t.pageY-(r.top+u.a.tinymce.DOM.getViewPort(e.getWin()).y)}else o=t.offsetX,a=t.offsetY;return o>=3&&o<=14&&a>=3&&a<=14}(t,n)&&(e.dom.hasClass(n,"checked")?e.dom.removeClass(n,"checked"):e.dom.addClass(n,"checked"))})),e.on("KeyUp",(function(t){if(t.keyCode===u.a.tinymce.util.VK.ENTER&&!t.shiftKey){const t=function(){const t=e.selection.getStart();return t&&t.tagName&&"LI"===t.tagName.toUpperCase()?t:e.dom.getParent(t,"li")}();t&&(e.dom.removeClass(t,"checked"),e.dom.hasClass(t.parentNode,"inline-task-list")?t.setAttribute("data-inline-task-id",""):t.removeAttribute("data-inline-task-id"))}})),e.on("KeyDown",e=>{e.shiftKey||e.keyCode!==u.a.tinymce.util.VK.TAB||u.a.tinymce.util.VK.metaKeyPressed(e)||t()}),Object(a.a)("confluence.editor.registerHandlers",n),Object(a.a)("rte-ready",o),e.on("Remove",()=>{Object(a.c)("confluence.editor.registerHandlers",n),Object(a.c)("rte-ready",o)})}))},()=>{Object(a.a)("init.rte",We)},function(){u.a.tinymce.create("tinymce.plugins.DeleteCommandPlugin",{init(e){e.addCommand("mceDelete",(t,n)=>{(function(){if(u.a.tinymce.Env.webkit){const t=e.selection.getRng(1);if(t.collapsed)return!1;const n=Object(s.default)(t.startContainer).closest(".wysiwyg-macro-body",e.getBody())[0];if(n&&P.isRangeAtStartOf(n,t)&&P.isRangeAtEndOf(n,t)){const t=Object(s.default)(n.firstChild).is("pre")?"pre":"p",o=Object(s.default)("<".concat(t,"><br data-mce-bogus='1'></").concat(t,">"))[0];return Object(s.default)(n).html(o),e.selection.select(o,1),!0}}return!1})()||e.getDoc().execCommand("Delete",t,n)})},getInfo:()=>({longname:"Delete Command Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}),u.a.tinymce.PluginManager.add("deletecommand",u.a.tinymce.plugins.DeleteCommandPlugin)},function(){},function(){const e=(e=>{const t=new u.a.tinymce.util.Dispatcher,n=u.a.tinymce.Env.ie;return{AUIWindowManager:{init:e=>{e.on("init",()=>{e.windowManager=new u.a.tinymce.AUIWindowManager(e)})},getInfo:()=>({longname:"AUIWindowManager",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})},WindowManager:{AUIWindowManager:function(e){const n=this;n.eventDispatcher=t,n.editor=e,n.params={},n.features={},n.modalDialogsStack=[],n.dialogs={},n.count=0},open(e,t){const o=this;e=e||{},o.initialiseSettings(e),t=t||{},(t=this.setDefaultParameters(t)).mce_width=e.width,t.mce_height=e.height,t.mce_auto_focus=e.auto_focus,n&&(e.center=!0,e.help=!1,e.dialogWidth="".concat(e.width,"px"),e.dialogHeight="".concat(e.height,"px")),o.features=e,o.params=t,o.eventDispatcher.dispatch("open",{t:o,settings:e,params:t});let a=e.height;e.name&&(a+=56),(t.cancelLink||t.buttons)&&(a+=51),a+=40,e.popup&&(a+=8);const r=e.id||u.a.tinymce.DOM.uniqueId(),c=(new Gt).component({width:e.width,height:a,id:r,onCancel:()=>{c.hide().remove()}});e.name&&c.addHeader(this.editor.translate("tinymce.".concat(e.name))),this.createDialogButtons(c,t,r),e.file=e.file||e.url,e.file&&(e.file=e.file),this.createDialogContent(c,e,t,r),t.helpLink&&this.createHelpLink(c,t.helpLink,t.helpName,r),t.hintText&&this.createHintText(c,t.hintText,r);const i={id:r,settings:e,params:t,dialog:c};return this.modalDialogsStack.push(i),this.dialogs[r]=i,this.count++,Object(f.b)().BookmarkManager.storeBookmark(),c.show(),null!=c.takeFocus&&c.takeFocus(),n&&(Object(s.default)("#".concat(r)).css("overflow","hidden"),Object(s.default)("#".concat(r,".").concat(t.cssClass)).css("overflow","hidden")),r},initialiseSettings:e=>{e.width=parseInt(e.width||400,10),e.height=parseInt(e.height||250,10),e.resizable=!1,null==e.popup&&(e.popup=!0),e.popup&&null!=e.content&&(e.popup=!1),e.scrollbars?e.scrollbars="yes":e.scrollbars="no"},createDialogButtons(e,t,n){if(t.buttons)for(let n=0;n<t.buttons.length;n++){const o=t.buttons[n];e.addButton(this.editor.translate("tinymce.".concat(o.label)),o.action,o.customClass)}t.cancelLink&&e.addCancel(this.editor.translate("tinymce.auiwindowmanager.cancel"),()=>u.a.tinymce.activeEditor.windowManager.close(n))},createDialogContent(e,t,n,o){const a=this.createContentId(o),r="panel_".concat(a);t.popup?(e.addPanel(r,Object(s.default)('<iframe id="'.concat(a,'" width="100%" height="').concat(t.height,'px" frameborder="0" name="auidialogiframe" src="').concat(t.file,'" scrolling="').concat(t.scrollbars,'"></iframe>')),n.cssClass),e.takeFocus=()=>{Object(s.default)("#".concat(a)).focus()}):(null==t.content?(e.addPanel(r,Object(s.default)('<div id="'.concat(a,'"/>')),n.cssClass),Object(s.default)("#".concat(a)).load(t.file)):e.addPanel(r,Object(s.default)('<div id="'.concat(a,'">').concat(t.content,"</div>")),n.cssClass),e.takeFocus=()=>{const e=Object(s.default)("#".concat(a,":input"));if(e.length)Object(s.default)(e[0]).focus();else{const e=Object(s.default)("#".concat(a," .button-panel button"));e.length&&Object(s.default)(e[0]).focus()}}),e.gotoPanel(0,0)},createHintText:(e,t,n)=>{const o=Object(s.default)("<div></div>").addClass("dialog-tip");o.text(u.a.tinymce.activeEditor.translate("tinymce.".concat(t))),Object(s.default)("#".concat(n," .dialog-button-panel")).append(o)},createHelpLink:(e,t,n,o)=>{const a=Object(s.default)("<div></div>").addClass("dialog-help-link");a.load("".concat(b.a,"/plugins/tinymce/helplink.action"),{linkUrlKey:t,linkNameKey:n||""}),Object(s.default)("#".concat(o," .dialog-components .dialog-title")).prepend(a)},close(e,t){let n,o;return"string"==typeof e?n=e:t?n=t:(o=this.modalDialogsStack.pop(),o&&(n=o.id)),this.dialogs[n]&&(this.count--,o=this.dialogs[n],o.dialog.remove(),this.dialogs[n]=null,u.a.tinymce.activeEditor.focus(),Object(f.b)().BookmarkManager.restoreBookmark()),!1},alert(e,t,n){const o={content:"<p>".concat(e,"</p>"),width:500,height:160,popup:!1};let a;const r={buttons:[{label:"auiwindowmanager.ok",action:function(){u.a.tinymce.activeEditor.windowManager.toggleOtherDialogs(a,!0),u.a.tinymce.activeEditor.windowManager.close(a),t&&t.call(n||this)}}],cancelLink:!1,cssClass:"tinymce-auidialog-alert"};a=this.open(o,r),this.toggleOtherDialogs(a,!1)},createInstance:(e,t,n,o,a,r)=>new(u.a.tinymce.resolve(e))(t,n,o,a,r),toggleOtherDialogs(e,t){for(let n=0;n<this.modalDialogsStack.length;n++){const o=this.modalDialogsStack[n];o.id!=e&&Object(s.default)("".concat(o.id," .dialog-button-panel")).toggle(t)}},confirm(e,t,n,o){o=o||u.a,t.call(n||this,o.confirm(this._decode(this.editor.translate("tinymce.".concat(e)))))},setBusy(t,n){const o=this.dialogs[t],a="#".concat(this.createBusyContentId(t)),r="#".concat(this.createContentId(t)),c=Object(s.default)(r),i=Object(s.default)(a);if(o)if(n){const n=Object(s.default)(r);n.hide();const o=n.parent();let c=Object(s.default)(a,o);c.length||(o.append(Object(s.default)('<div id="'.concat(a,'" class="spinner"></div>'))),c=Object(s.default)(a,o),e.spinner(c[0],50,"#666")),Object(s.default)(".button-panel button",Object(s.default)("#".concat(t))).each((e,t)=>{Object(s.default)(t).prop("disabled",!0)}),Object(s.default)(c[0]).show()}else i.length&&i.hide(),Object(s.default)(".button-panel button",Object(s.default)("#".concat(t))).each((e,t)=>{Object(s.default)(t).prop("disabled",!1)}),c.show()},logMCESelection:e=>{u.a.tinymce.activeEditor.selection},setDefaultParameters:e=>(e.inline=!1,e.cssClass||(e.cssClass="tinymce-auidialog"),0!=e.cancelLink&&(e.cancelLink=!0),e),createContentId:e=>"content_".concat(e),createBusyContentId:e=>"content_busy_".concat(e),resizeBy:()=>{}}}})(u.a.Raphael);u.a.tinymce.create("tinymce.plugins.AUIWindowManager",e.AUIWindowManager),u.a.tinymce.create("tinymce.AUIWindowManager:tinymce.WindowManager",e.WindowManager),u.a.tinymce.PluginManager.add("auiwindowmanager",u.a.tinymce.plugins.AUIWindowManager)},function(){!function(){const e=g();u.a.Confluence.PropertyPanel.TextPlaceholder=e,Object(a.a)("init.rte",()=>{"template"===p.a.get("content-type")&&Object(a.b)("add-handler.property-panel",e)})}(),u.a.tinymce.create("tinymce.plugins.TextPlaceholderPlugin",h()),u.a.tinymce.PluginManager.add("textplaceholders",u.a.tinymce.plugins.TextPlaceholderPlugin)},function(){u.a.tinymce.create("tinymce.plugins.EmotionsPlugin",{init(e,t){e.addCommand("mceEmotion",()=>{e.windowManager.open({file:"".concat(u.a.tinymce.settings.editor_plugin_action_base_path,"/emotions.action"),width:190+parseInt(e.getLang("emotions.delta_width",0)),height:125+parseInt(e.getLang("emotions.delta_height",0)),inline:1,id:"insert-emoticon-dialog",name:"emotions_dlg.title"},{plugin_url:t})}),e.addButton("emotions",{title:"emotions.emotions_desc",cmd:"mceEmotion"}),e.on("Click",t=>{const n=t.target;let o;if("IMG"===n.nodeName&&n.classList.contains("emoticon"))return o=e.selection.getRng(!0),(t.offsetX||t.layerX-n.x)<n.width/2?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)),e.selection.setRng(o),e.selection.collapse(),u.a.tinymce.dom.Event.cancel(t)})},getInfo:()=>({longname:"Emotions",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/emotions",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}),u.a.tinymce.PluginManager.add("emotions",u.a.tinymce.plugins.EmotionsPlugin)},function(){u.a.tinymce.create("tinymce.plugins.ConfluencePlugin",{init(e){e.addCommand("mceConfUnlink",(t,n)=>{const o=e.selection;let a=n||o.getNode(),r=Object(s.default)(a);if("A"!==a.nodeName){const e=r.closest("a");if(!e.length)return;a=e[0],r=e}let c=r.attr("href");if(c||(c="#",r.attr("href",c)),!r.attr("data-linked-resource-id")&&Confluence.Link.isExternalLink(c)&&r.text()==function(e){const t=/(.*)[\/]$/.exec(e);return null!=t?t[1]:e}(c)){const t=e.dom.create("span",{class:"nolink"},c);e.dom.replace(t,a,!1)}else o.select(a),r.removeClass("createlink unresolved"),e.execCommand("UnLink")}),e.addButton("confimage",{title:"confluence.confimage_desc",cmd:"mceConfimage"}),e.addButton("conf_macro_browser",{title:"confluence.conf_macro_browser_desc",cmd:"mceConfMacroBrowser"})},getInfo:()=>({longname:"Confluence TinyMCE Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}),u.a.tinymce.PluginManager.add("confluence",u.a.tinymce.plugins.ConfluencePlugin)},function(){u.a.tinymce.create("tinymce.plugins.MacroPlaceHolderPlugin",(()=>{const e=u.a.tinymce.util.VK;return{init(t){const n=this;function o(e){t.on("KeyDown",e),u.a.tinymce.isGecko&&(t.on("KeyPress",e),t.on("KeyUp",e))}function a(e,t){return e&&1===e.childNodes.length&&Object(s.default)(e).is(t)&&Object(s.default)(e.firstChild).is("br")}function r(e){if(!e.collapsed)return!1;let t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;if(!t||!t.parentNode)return!1;for(;t&&!Object(s.default)(t).is(".wysiwyg-macro-body");){if(t.previousSibling||t.nextSibling)return!1;t=t.parentNode}return!0}t.on("Init",()=>{t.on("SetContent",e=>{e.selection&&u.a.tinymce.each(t.dom.select("p > .wysiwyg-macro"),e=>{const n=t.dom.getParent(e.parentNode,"p");try{t.dom.split(n,e)}catch(e){}})})}),t.on("SetContent",()=>{u.a.tinymce.each(t.dom.select('.wysiwyg-macro[data-macro-body-type="PLAIN_TEXT"] .wysiwyg-macro-body'),e=>{t.dom.select("pre",e).length||(u.a.tinymce.isIE?t.dom.setHTML(e,"<pre></pre>"):t.dom.setHTML(e,"<pre><br /></pre>"))})}),t.on("KeyDown",n=>{const o=t.selection,a=[e.BACKSPACE,e.DELETE,e.ENTER,e.ESCAPE];if(-1!=s.default.inArray(n.keyCode,a)||function(t){let n=!1;return 0===t.charCode&&(n=-1!=s.default.inArray(t.keyCode,[e.SHIFT,e.CTRL,e.ALT,e.META])),n}(n)||o.isCollapsed())return;if(n.ctrlKey||n.metaKey||!u.a.tinymce.isMac&&n.altKey)return;const r=o.getNode();if(R.isMacroWithBody(r)){const e=Object(s.default)(".wysiwyg-macro-body",r);e.length>0&&o.select(e[0],!0)}}),t.on("DblClick",e=>{const t=Object(s.default)(e.target),n=t.closest("[data-macro-name]");if(n.length){if(n.attr("data-macro-body-type"))if(u.a.tinymce.isIE){if(!t.hasClass("wysiwyg-macro-body")&&!t.hasClass("wysiwyg-macro"))return void 0}else if(t.closest(".wysiwyg-macro-body").length)return void 0;R.editMacro(n),u.a.AJS.Confluence.PropertyPanel&&u.a.AJS.Confluence.PropertyPanel.current&&u.a.AJS.Confluence.PropertyPanel.destroy()}}),t.addCommand("mceConfRemoveMacro",e=>{Object(s.default)(e).remove(),u.a.tinymce.isGecko&&t.execCommand("mceRepaint",!1)}),n._isCursorInMostNestedElement=r,function(){function e(e){if(!e.collapsed)return!1;const t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return t.previousSibling&&!t.nextSibling&&a(t,"p, pre")}(u.a.tinymce.isWebKit||u.a.tinymce.isGecko)&&o(n=>{if(46===n.keyCode&&e(t.selection.getRng(!0)))return u.a.tinymce.dom.Event.cancel(n)}),n._isCursorInLastParagraphOrPre=e}(),u.a.tinymce.isWebKit&&o(e=>{if(8!==e.keyCode&&46!==e.keyCode)return!0;const n=t.selection.getRng(!0),o=3===n.startContainer.nodeType?n.startContainer.parentNode:n.startContainer;return!(function(e){if(!e.collapsed)return!1;const t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return r(e)&&1===t.childNodes.length&&Object(s.default)(t.firstChild).is("br")}(n)&&(8!==e.keyCode||!Object(s.default)(o).is("li")))||u.a.tinymce.dom.Event.cancel(e)}),function(){function e(e){if(!e.collapsed)return!1;const t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return 0===e.startOffset&&Object(s.default)(t).is(".wysiwyg-macro-body > ul > li")&&1===t.childNodes.length&&Object(s.default)(t.firstChild).is("br")}u.a.tinymce.isWebKit&&o(n=>8!==n.keyCode||(!e(t.selection.getRng(!0))||(t.execCommand("Outdent"),u.a.tinymce.dom.Event.cancel(n)))),n._isCursorInsideMacroPlacholderInsideListItemContainingSoloBr=e}(),function(){function e(e){const t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=Object(s.default)(t);return 0===e.startOffset&&a(t,"p, pre")&&n.parent().is("td.wysiwyg-macro-body")&&!t.previousSibling&&t.nextSibling&&a(t.nextSibling,"p, pre")}u.a.tinymce.isWebKit&&o(n=>{if(46!==n.keyCode)return!0;const o=t.selection.getRng(!0),a=3===o.startContainer.nodeType?o.startContainer.parentNode:o.startContainer,r=Object(s.default)(a);if(e(o)){const e=a.nextSibling;return r.remove(),t.selection.select(e,!0),u.a.tinymce.dom.Event.cancel(n)}}),n._isCursorInFirstParagraphWhenThereAreTwoEmptyParagraphs=e}(),function(){function e(e){const t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=Object(s.default)(t);return 0===e.startOffset&&a(t,"p, pre")&&n.parent().is("td.wysiwyg-macro-body")&&!t.nextSibling&&t.previousSibling&&!t.previousSibling.previousSibling&&a(t.previousSibling,"p, pre")}u.a.tinymce.isWebKit&&o(n=>{if(8!==n.keyCode)return!0;const o=t.selection.getRng(!0),a=3===o.startContainer.nodeType?o.startContainer.parentNode:o.startContainer,r=Object(s.default)(a);if(e(o)){const e=a.previousSibling;return r.remove(),t.selection.select(e,!0),u.a.tinymce.dom.Event.cancel(n)}}),n._isCursorInSecondParagraphWhenThereAreTwoEmptyParagraphs=e}(),function(){function e(e){if(!e.collapsed)return!1;const t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=Object(s.default)(t);return!(!t||e.startOffset>0)&&(w.normalize(t),t&&0===e.startOffset&&a(t,"p, pre")&&n.parent().is("td.wysiwyg-macro-body")&&!t.previousSibling&&!t.nextSibling)}(u.a.tinymce.isWebKit||u.a.tinymce.isGecko)&&o(n=>8!==n.keyCode&&46!==n.keyCode||(e(t.selection.getRng(!0))?u.a.tinymce.dom.Event.cancel(n):void 0)),n._isCursorInSoloParagraphOrPreInsidePlaceholder=e}(),function(){function e(e){return e&&e.parentNode&&"BR"===e.nodeName&&e===e.parentNode.lastChild}function a(t){if(!t.collapsed)return!1;const n=t.startContainer;return n&&0===t.startOffset&&3===n.nodeType&&r(t)&&1===n.nodeValue.length&&!n.previousSibling&&(!n.nextSibling||e(n.nextSibling))}function c(t){if(!t.collapsed)return!1;const n=t.startContainer;return n&&1===t.startOffset&&3===n.nodeType&&r(t)&&1===n.nodeValue.length&&!n.previousSibling&&(!n.nextSibling||e(n.nextSibling))}function i(e){if(!e.collapsed)return!1;const t=e.startContainer;return t&&0===e.startOffset&&1===t.nodeType&&1===t.childNodes.length&&r(e)&&!t.previousSibling&&!t.nextSibling}function l(e){if(!e.collapsed)return!1;const t=e.startContainer;return t&&1===e.startOffset&&1===t.nodeType&&1===t.childNodes.length&&r(e)&&!t.previousSibling&&!t.nextSibling}(u.a.tinymce.isWebKit||u.a.tinymce.isGecko)&&o(e=>{if(8!==e.keyCode&&46!==e.keyCode)return!0;const n=t.selection.getRng(!0),o=3===n.startContainer.nodeType?n.startContainer.parentNode:n.startContainer;return!Object(s.default)(o).closest(".wysiwyg-macro-body").size()||(w.normalize(o),!(46===e.keyCode&&(a(n)||i(n))||8===e.keyCode&&(c(n)||l(n)))||(o.lastChild&&!Object(s.default)(o.lastChild).is("br")&&Object(s.default)(o).append("<br/>"),Object(s.default)(o.firstChild).remove(),t.selection.select(o,1),u.a.tinymce.dom.Event.cancel(e)))}),n._isCursorBehindOnlyCharacterInNestedElement=a,n._isCursorAfterOnlyCharacterInNestedElement=c,n._isCursorBehindOnlyChildInNestedElement=i,n._isCursorAfterOnlyChildInNestedElement=l}(),function(){function e(e){if(e.collapsed)return!1;return 0===e.startOffset&&a(e.startContainer,(function(e){return!e.previousSibling}))&&function(e,t){if(!e)return!1;return 3===e.nodeType?t===e.nodeValue.length:1===e.nodeType&&(1===e.childNodes.length&&Object(s.default)(e.firstChild).is("br")?0===t:t===e.childNodes.length)}(e.endContainer,e.endOffset)&&a(e.endContainer,(function(e){return!e.nextSibling}))}function a(e,t){if(!e)return!1;if(Object(s.default)(e).is(".wysiwyg-macro-body"))return!0;do{if(!t(e))return!1;e=e.parentNode}while(e&&!Object(s.default)(e).is(".wysiwyg-macro-body"));return!0}u.a.tinymce.isWebKit&&o(n=>{if(8!==n.keyCode&&46!==n.keyCode)return!0;const o=t.selection.getRng(!0);if(e(o)){const e=Object(s.default)(o.startContainer).closest(".wysiwyg-macro-body");if(e.length>0){const o=Object(s.default)(e[0].firstChild).is("pre");let a;return t.undoManager.add(),e.empty(),a=o?Object(s.default)("<pre><br/></pre>").appendTo(e):Object(s.default)("<p><br/></p>").appendTo(e),t.selection.select(a[0],!0),u.a.tinymce.dom.Event.cancel(n)}}return!0}),n._isMacroBodySelected=e}(),function(){function e(e){if(!e.collapsed)return!1;const t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=Object(s.default)(t);return 0===e.startOffset&&a(t,"p")&&n.next().is("table")}u.a.tinymce.isWebKit&&o(n=>{if(46===n.keyCode&&e(t.selection.getRng(!0)))return u.a.tinymce.dom.Event.cancel(n)}),n._isCursorInEmptyParagraphPrecedingPlaceholder=e}(),function(){function a(e){return e?3===e.nodeType?e:a(e.firstChild)||a(e.nextSibling):null}function r(e){return e&&"PRE"!==e.nodeName&&"TD"!==e.nodeName?"BR"===e.nodeName?e:r(e.previousSibling)||r(e.parentNode):null}function c(e){let t,n;return Object(s.default)(e.commonAncestorContainer).closest(".wysiwyg-macro td").length>0&&(r(e.startContainer)||(t=a(function e(t){return!t||Object(s.default)(t.parentNode).is(".wysiwyg-macro td")?null:Object(s.default)(t.parentNode).is("p")?t.parentNode:e(t.parentNode)}(e.startContainer)))),(n=Object(s.default)(e.commonAncestorContainer).closest(".wysiwyg-macro td > pre")).length>0&&(r(e.startContainer)||(t=a(n[0]))),t&&(e=e.cloneRange()).setStart(t,0),e}u.a.tinymce.isWebKit&&u.a.tinymce.isMac&&o(n=>{const o=t.selection.getRng();if((n.metaKey||n.ctrlKey)&&n.shiftKey&&n.keyCode===e.LEFT){const e=c(o);if(e!==o)return t.selection.setRng(e),u.a.tinymce.dom.Event.cancel(n)}}),n._selectTillStart=c}(),t.on("KeyDown",e=>{if(e.keyCode!==u.a.tinymce.util.VK.TAB)return;const n=t.selection.getRng(1),o=3===n.startContainer.nodeType?n.startContainer.parentNode:n.startContainer;if(Object(s.default)(o).is(".wysiwyg-macro-body > pre")){t.undoManager.beforeChange(),t.undoManager.add();const o=t.getDoc().createTextNode("\t");return n.insertNode(o),t.selection.setCursorLocation(o,1),t.undoManager.add(),u.a.tinymce.dom.Event.cancel(e)}})},getInfo:()=>({longname:"Macro Place Holder plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}})()),u.a.tinymce.PluginManager.add("macroplaceholder",u.a.tinymce.plugins.MacroPlaceHolderPlugin)},function(){Object(pt.a)(u.a.document,"initContextToolbars.Toolbar",e=>{$n().initContextToolbars(e),function(e){const t={},n={},o=function(e,n){let o,a;for(a in t)if(t.hasOwnProperty(a)&&t[a].isEnabled)for(let r=0,c=t[a].events.length;r<c;r++)o=t[a].events[r],o.type.toLowerCase().indexOf(n.type)>-1&&(o.shouldTrigger(e,n)?o.callback.apply(this,[n.target]):o.missed&&o.missed())};return{addEventsForComponent(a,r){a in t||(t[a]={},t[a].events=[],t[a].isEnabled=!0);for(let c=0,i=r.length;c<i;c++)!(r[c].type in n)&&(n[r[c].type]=!0,e[r[c].type].add(o)),"function"!=typeof r[c].shouldTrigger&&function(e){r[c].shouldTrigger=function(t,n){return n.target.tagName.toLowerCase()==e}}(r[c].shouldTrigger),t[a].events.push(r[c])},disableEventsForComponent(e){for(let n=0,o=t.length;n<o;n++)if(e in t)return t[e].isEnabled=!1,!0;return!1},enableEventsForComponent(e){for(let n=0,o=t.length;n<o;n++)if(e in t)return t[e].isEnabled=!0,!0;return!1}}}(u.a.tinymce).addEventsForComponent("TableToolbar",Yt)})},function(){const e=Object(k.x)(k.a)?an:rn;Xt(),u.a.AJS.Rte=Object(f.b)()||{},u.a.AJS.Rte.TablePicker=Qt(),u.a.tinymce.create("tinymce.plugins.customtoolbar",e()),u.a.tinymce.PluginManager.add("customtoolbar",u.a.tinymce.plugins.customtoolbar)},function(){u.a.tinymce.create("tinymce.plugins.InsertWikiMarkupPlugin",wn),u.a.tinymce.PluginManager.add("insertwikimarkup",u.a.tinymce.plugins.InsertWikiMarkupPlugin)},()=>{u.a.tinymce.create("tinymce.plugins.PropertyPanel",D()),u.a.tinymce.PluginManager.add("propertypanel",u.a.tinymce.plugins.PropertyPanel)},function(){},function(){u.a.tinymce.create("tinymce.plugins.ConfMonospacePlugin",{init:e=>{e.addCommand("confMonospace",()=>{e.formatter.toggle("monospace",void 0)}),u.a.tinymce.activeEditor.on("Init",()=>{const e=u.a.tinymce.activeEditor;e.formatter.register({monospace:{inline:"code"}}),e.editorCommands.addCommands({confMonospace:()=>e.formatter.match("monospace")},"state")}),e.addButton("monospace",{title:"monospace",cmd:"confMonospace"})},getInfo:()=>({longname:"Monospace Formatting",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}),u.a.tinymce.PluginManager.add("confmonospace",u.a.tinymce.plugins.ConfMonospacePlugin)},function(){u.a.tinymce.create("tinymce.plugins.KeyboardShortcutsPlugin",{init:e=>{for(let t=1;t<7;t++)e.addCommand("FormatBlock-h".concat(t),Fn(e,"h".concat(t)));e.addCommand("FormatBlock-p",Fn(e,"p")),e.addCommand("FormatBlock-pre",Fn(e,"pre")),e.addCommand("FormatBlock-blockquote",Fn(e,"blockquote")),e.addCommand("mceConfShortcutDialog",u.a.Confluence.KeyboardShortcuts.openDialog),e.addCommand("preventDefaultSave",()=>{}),e.addCommand("publish",Dn),e.addCommand("preview",Ln),e.addCommand("confDefaultTable",Hn),e.addButton("help",{title:"confluence.conf_shortcuts_help_desc",cmd:"mceConfShortcutDialog"});const t=u.a.document.createElement("meta"),n=u.a.document.querySelector("head");t.setAttribute("name","ajs-use-keyboard-shortcuts"),t.setAttribute("content","true"),n.appendChild(t),x("editor.spa.uxenhancements")&&Object(a.a)("rte-ready",()=>{Pn(e),Rn(e,_n)})},getInfo:()=>({longname:"Atlassian Editor Keyboard Shortcuts Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}),u.a.tinymce.PluginManager.add("keyboardshortcuts",u.a.tinymce.plugins.KeyboardShortcutsPlugin)},function(){u.a.tinymce.create("tinymce.plugins.ConfCharmapPlugin",{init:e=>{e.addCommand("confCharmap",()=>{e.windowManager.open({id:"insert-char-dialog",url:"".concat(u.a.tinymce.settings.editor_plugin_action_base_path,"/charmap.action"),width:600+parseInt(e.getLang("advanced.charmap_delta_width",0)),height:290+parseInt(e.getLang("advanced.charmap_delta_height",0)),inline:!0,name:"advanced.charmap_desc"})})},getInfo:()=>({longname:"Confluence Charmap Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}),u.a.tinymce.PluginManager.add("confcharmap",u.a.tinymce.plugins.ConfCharmapPlugin)},function(){let e=".wysiwyg-macro,.placeholder,table";u.a.tinymce.create("tinymce.plugins.CursorTargetPlugin",(()=>({cursorTarget:{addFixSelector:t=>{e+=",".concat(t)}},cursorTargetPlugin:{init:t=>{const n=s.default.ui.keyCode;function o(t,n){Object(s.default)(e,t).each((t,o)=>{!function(t,n){const o=Object(s.default)(t);function a(e){if(0===e.length)throw new Error("no paragraph element specified");r()&&e.addClass("auto-cursor-target");const t=e[0];return 0===t.childNodes.length&&(t.innerHTML="<br />"),t}function c(e){return!Object(s.default)(e).is("ol, ul, p, pre, table, blockquote, div, h1, h2, h3, h4, h5, h6")}function l(e,t){const n=Object(s.default)("<p/>");if(Object(s.default)(e.parentNode).is("li, td, th"))for(;e[t]&&c(e[t]);)n["previousSibling"==t?"prepend":"append"](e[t]);return a(n)}(!o.prev().length||o.prev(e).length||Object(s.default)(t.parentNode).is("li, td, th")&&c(t.previousSibling))&&o.before(l(t,"previousSibling"));(!o.next().length||o.next(".synchrony-container").length||Object(s.default)(t.parentNode).is("li, td, th")&&c(t.nextSibling))&&o.after(l(t,"nextSibling"));r()&&o.next().length&&!o.next().next().length&&i(o.next()[0])&&o.next().addClass("auto-cursor-target");n&&function(t){function n(e){("BR"===e[0].nodeName||i(e[0]))&&e.replaceWith(a(Object(s.default)("<p/>")))}const o=t.prev();o.length&&function(t){let n=t.prev();for(;n.length&&!n.is(e);){const e=n[0];if("BR"!==e.nodeName&&"P"!==e.nodeName)return!1;n=n.prev()}return!0}(o)&&n(o);const r=t.next();r.length&&function(t){let n=t.next();for(;n.length&&!n.is(e);){const e=n[0];if("BR"!==e.nodeName&&"P"!==e.nodeName)return!1;n=n.next()}return!0}(r)&&n(r)}(o)}(o,n)})}function r(){return"page"===p.a.get("content-type")||"blogpost"===p.a.get("content-type")}function c(e){return Object(s.default)("p",e).each((e,t)=>{i(t)&&l(t)&&Object(s.default)(t).attr("data-tag","marked-for-deletion")}),Object(s.default)("p[data-tag=marked-for-deletion]",e).remove(),e}function i(e){return 1===e.nodeType&&0===e.childNodes.length||function(e){let t=0,n=0;for(let o=0,a=e.childNodes.length;o<a;o++){const a=e.childNodes[o];if("BR"===a.nodeName){if(++t>1)return!1}else if(/^[\s|\u00A0]$/.test(a.nodeValue)){if(++n>1)return!1}else if(""!==a.nodeValue)return!1}return!0}(e)}function l(t){if(!t||1!==t.nodeType)return!1;const n=m(t,!1),o=m(t,!0),a=d(n)||Object(s.default)(n).is(e),r=d(o)||Object(s.default)(o).is(e),c=d(n)&&d(o);return a&&r&&!c}function d(e){return!e||e.className&&/cell|header|footer/.test(e.className)}function m(e,t){let n=Object(s.default)(e);do{const e=t?n[0].nextSibling:n[0].previousSibling;if(e)return e;n=n.parent()}while(n.length>0&&!n.is(".cell, .mceContentBody, td, li"));return null}function g(e){const t=e.startContainer;if(3===t.nodeType){return!(t.previousSibling&&(3===t.previousSibling.nodeType||Object(s.default)(t.previousSibling).is("br")))&&0===e.startOffset}return 1===t.nodeType&&0===e.startOffset}function h(e,t){return t.startContainer==t.endContainer&&1===t.startContainer.nodeType&&function(e,t){let n=t.startOffset;return e||n--,n>=0&&n<t.startContainer.childNodes.length&&"TABLE"===t.startContainer.childNodes[n].nodeName}(e,t)}function b(e){if(!e.collapsed)return!1;const t=e.startContainer;let n;if(3===t.nodeType)return n=m(t,!0),e.startOffset==t.nodeValue.length&&(null==n||Object(s.default)(n).is("br"));if(1===t.nodeType){if(Object(s.default)(t).is("td, th")&&0===e.startOffset&&t.childNodes.length>0)return Object(s.default)(t.childNodes[0]).is("br");{const o=0===e.startOffset?0:e.startOffset-1;return n=m(t.parentNode.childNodes[o],!0),null==n||Object(s.default)(n).is("br")}}return!1}function y(e){return e&&1===e.childNodes.length&&Object(s.default)(e.childNodes[0]).is("br")}function C(e,t){return!(!u.a.tinymce.isWebKit||!h(!1,t))||!(!u.a.tinymce.isGecko||!(b(t)||l(e)&&0===t.startOffset&&y(e)))}function w(e,n){return!(!u.a.tinymce.isWebKit||!(h(!0,n)||g(n)&&l(e)||function(e){const n=t.getBody();return!!n.childNodes.length&&(e.collapsed&&0===e.startOffset&&n.childNodes[0]==e.startContainer)}(n)))||!!(u.a.tinymce.isGecko&&g(n)&&l(e)&&y(e))}function v(e){const t=u.a.tinymce.activeEditor,a=e.keyCode;return a!==n.BACKSPACE&&a!==n.DELETE||(t.selection.isCollapsed()?a===n.BACKSPACE&&w(t.selection.getNode(),t.selection.getRng(!0))?u.a.tinymce.dom.Event.cancel(e):a===n.DELETE&&C(t.selection.getNode(),t.selection.getRng(!0))&&u.a.tinymce.dom.Event.cancel(e):o(t.getBody()),!0)}const O=function(){o(t.getBody(),!0)},x=e=>{o(e,!1),u.a.tinymce.isIE10&&function(e){Object(s.default)("p, td.confluenceTd, th.confluenceTh",e).each((e,t)=>{(function(e){return e&&""===e.innerHTML})(t)&&Object(s.default)(t).html("<br />")})}(e)};if(r()){function k(){x(t.getBody())}Object(a.a)("cursor-target-refresh",k),t.on("Remove",()=>{Object(a.c)("cursor-target-refresh",k)})}else t.on("SetContent",()=>{const e=u.a.tinymce.activeEditor;o(e.getBody()),function(e){const t=u.a.tinymce.isIE?"&nbsp;":"<br/>";Object(s.default)("p, td.confluenceTd, th.confluenceTh",e).each((e,n)=>{(function(e){return e&&e.childNodes&&1===e.childNodes.length&&3===e.childNodes[0].nodeType&&e.childNodes[0].nodeValue&&1===e.childNodes[0].nodeValue.length&&160===e.childNodes[0].nodeValue.charCodeAt(0)})(n)&&Object(s.default)(n).html(t)})}(e.getBody())}),t.on("GetContent",e=>{const n="<div class='root-node'>"+e.content+"</div>",o=c(Object(s.default)(n)),a=s.default.extend({},e,{getInner:!1}),r=t.serializer.serialize(o[0],a);e.content=r.substring("<div class='root-node'>".length,r.length-"</div>".length)}),t.on("init",()=>{const e=u.a.tinymce.activeEditor;e.dom.events.bind(e.selection,"SetContent",O),e.dom.events.bind(e.getBody(),"cut",O),Object(a.a)("cursor-target-refresh",O)}),t.on("Remove",()=>{Object(a.c)("cursor-target-refresh",O)}),u.a.tinymce.isGecko&&t.on("KeyDown",e=>{e.keyCode!==n.ENTER&&e.keyCode!==n.BACKSPACE&&e.keyCode!==n.DELETE||t.selection.normalize()}),t.on("KeyDown",v),t.on("KeyUp",v),u.a.tinymce.isGecko&&t.on("KeyPress",v),t.on("Paste",O);s.default.extend(this,{isCursorBeforeAfterTable:h,isCursorTarget:l,_isTextContainerEmpty:i,_removeCollaborativeEditorCursorTargets:function(e){const t=Object(s.default)("<div>");return t.html(e),t.find("p.auto-cursor-target").each((e,t)=>{t.remove()}),t.html()},_processCursorTargets:c,_isCursorAtStartOfContainer:g,_isCursorAtEndOfContainer:function(e){const t=e.startContainer;if(3===t.nodeType){return!(t.nextSibling&&(3===t.nextSibling.nodeType||Object(s.default)(t.nextSibling).is("br")))&&e.endOffset==t.nodeValue.length}if(1===t.nodeType){const n=t.childNodes[e.startOffset];return!(!Object(s.default)(n).is("br")||null!=n.nextSibling)||e.endOffset==t.childNodes.length}return!1},_getSiblingWithinBlockDisregardingNesting:m,_doesContainerHaveNestedContent:function e(t){const n=Object(s.default)(t).children();let o;for(o=0;o<n.length;o++)if(!i(n[o])&&(Object(s.default)(n[o]).contents().filter((function(){return 3===this.nodeType})).length||e(n[o])))return!0;return!1},_addCursorTargetParagraphsToContent:o,_isCursorAtEndOfBottomRightCellInTable:b,_shouldCancelDelete:C,_shouldCancelBackspace:w,_collabEditingCursorTargetRefresh:x}),u.a.AJS.Rte.Cursor=Object(f.b)().Cursor||{},s.default.extend(u.a.AJS.Rte.Cursor,{isTextContainerEmpty:i,fixCursorTargets:o})},getInfo:()=>({longname:"Cursor Target plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}}))().cursorTargetPlugin),u.a.tinymce.PluginManager.add("cursorTarget",u.a.tinymce.plugins.CursorTargetPlugin)},function(){u.a.tinymce.create("tinymce.plugins.iOSEditing",{init(e){u.a.tinymce.Env.iOS&&setTimeout(()=>{Object(s.default)(e.getBody()).addClass("ios")},0)},getInfo:()=>({longname:"iOS Comments Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}),u.a.tinymce.PluginManager.add("iosediting",u.a.tinymce.plugins.iOSEditing)},()=>{u.a.tinymce.create("tinymce.plugins.aeTable",we()),u.a.tinymce.PluginManager.add("aeTable",u.a.tinymce.plugins.aeTable)},function(){const e=function(){const e=function(e){const t=this;e.on("Undo",n=>{t.cleanLinks(e,n)}),this.editor=e,this.weightedHandlers=[],this.handlers=[],Object(s.default)(u.a.document).on("prePaste",t.sanitizePaste)};function t(e){const n=t.options,o=n.parser[n.strictMode?"strict":"loose"].exec(e),a={};let r=14;for(;r--;)a[n.key[r]]=o[r]||"";return a[n.q.name]={},a[n.key[12]].replace(n.q.parser,(e,t,o)=>{t&&(a[n.q.name][t]=o)}),a}e.prototype={addHandler(e,t){this.weightedHandlers.push({handler:e,weight:t||0}),this.weightedHandlers.sort((e,t)=>e.weight-t.weight),this.handlers=[];const n=this.weightedHandlers.length;for(let e=0;e<n;e++)this.handlers.push(this.weightedHandlers[e].handler)},cleanLinks:e=>(Object(s.default)("a.atlassian-autoconvert",e.getDoc()).removeClass("atlassian-autoconvert"),!0),sanitizePaste(e,t,n){n&&n.content&&(n.content=n.content.replace(De,e=>" unsafe-".concat(e.trim())))},callHandlers(e){let o=0;const a=this,r=Object(s.default)(e);let c=Object(s.default)(e).clone();const i=c.attr("href");let l=t(n(i));function d(e){if(e&&(1!==e.length||!e.attr("href")))return m(e);if(e)c=e,o=0,l=t(c.attr("href")),f(a.handlers[o],l,c);else{if(o++,!(o<a.handlers.length))return m(c);f(a.handlers[o],l,c)}}function f(e,t,n){let o,r=d;o=setTimeout(()=>{r=function(){0},d()},u.a.tinymce.plugins.Autoconvert.callbackTimeout),e(t,n,(function(){clearTimeout(o),r.apply(a,arguments),r=function(){0}}))}function m(e){a.editor.undoManager.beforeChange();const t=a.editor.selection,n=a.editor.selection.getBookmark();r.replaceWith(e),t.moveToBookmark(n),a.editor.undoManager.add()}0!==this.handlers.length&&f(this.handlers[0],l,c)}},e.callbackTimeout=5e3,e.convertMacroToDom=function(e,t,n){const o={macro:e,contentId:p.a.get("content-id")};s.default.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"".concat(b.a,"/rest/tinymce/1/macro/placeholder"),data:s.default.toJSON(o),dataType:"text",success:t,error:n,timeout:45e3})},e.convertMacroToDomViaWikiText=function(t,n,o){const a=["{",t.name];let r=!0;t.defaultParameterValue&&(a.push(":",t.defaultParameterValue),r=!1);for(const e in t.params)r?(a.push(":"),r=!1):a.push("|"),a.push(e,"=",t.params[e]);a.push("}"),e.getHtmlFromWikiMarkup(a.join(""),e=>{n(Object(s.default)(e)[0])},()=>{o()})},e.getHtmlFromWikiMarkup=function(e,t,n){const o={wiki:e,entityId:p.a.get("content-id"),spaceKey:p.a.get("space-key")};s.default.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"".concat(b.a,"/rest/tinymce/1/wikixhtmlconverter"),data:s.default.toJSON(o),dataType:"text",success:t,error:n,timeout:45e3})},t.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};const n=function(e){return e.replace(/^(.*?\/\/[^/]*?\/.*?)(@)/,"$1%40")},o={init(t){const n=new e(t);function o(e,o,a){const r=Object(s.default)(a.node).children("a");1===r.length&&"A"===r[0].tagName&&r.text()===r.attr("href")&&(r.attr("class","atlassian-autoconvert"),setTimeout(()=>{const e=Object(s.default)("a.atlassian-autoconvert",Object(s.default)(t.selection.getNode().ownerDocument)).removeClass("atlassian-autoconvert");n.callHandlers(e)},0))}u.a.tinymce.plugins.Autoconvert.autoConvert=n,t.on("init",()=>{Object(s.default)(document).on("postPaste",o),t.addCommand("addAutoconverter",(e,t)=>{n.addHandler(t)})}),t.on("remove",()=>{Object(s.default)(document).off("postPaste",o)})},getInfo:()=>({longname:"Atlassian Autoconvert",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})};return{autoConverter:e,plugin:o}}();u.a.tinymce.plugins.Autoconvert=e.autoConverter,u.a.tinymce.create("tinymce.plugins.AutoconvertPlugin",e.plugin),u.a.tinymce.PluginManager.add("autoconvert",u.a.tinymce.plugins.AutoconvertPlugin),Le()},function(){Object(a.a)("rte-ready",Fe.initializeEditor)},function(){u.a.tinymce.create("tinymce.plugins.draggable",ze()),u.a.tinymce.PluginManager.add("draggable",u.a.tinymce.plugins.draggable)},function(){u.a.tinymce.create("tinymce.plugins.InsertFiles",{init(e){e.addButton("confluence-insert-files",{title:e.translate("tinymce.confluence.files"),tooltip:"".concat(e.translate("tinymce.confluence.conf_file_desc")," (").concat(e.translate("tinymce.confluence.conf_file_shortcut"),")"),cmd:"mceConfimage",className:"insert-files",icon:"aui-icon aui-icon-small aui-iconfont-editor-files",locationGroup:"rte-toolbar-group-files",weight:0})},getInfo:()=>({longname:"Insert Files",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.0"})}),u.a.tinymce.PluginManager.add("insertfiles",u.a.tinymce.plugins.InsertFiles)},function(){u.a.tinymce.create("tinymce.plugins.flextofullsizeplugin",function(){let e,t;const n=function(){const e=Object(s.default)("#wysiwyg").is(":hidden")?Object(s.default)("#preview"):Object(s.default)("#wysiwyg");t=e.find("iframe");const n=Object(s.default)("#header-precursor"),o=Object(s.default)(u.a).height();let a=n.offset().top+n.height()+Object(s.default)("#header").height();Object(s.default)("#content.edit").height(o-a),setTimeout(()=>{if(Object(s.default)("#preview").is(":hidden"))t.height(0).height(e.height());else{Object(s.default)("#content.edit").height("auto");const e=Object(s.default)("#savebar-container").height();a+=Object(s.default)("#editor-precursor").height();const n=4;t.height(o-a-e-n)}},1)};return{init(t){t.on("Init",()=>{let o,a;Object(s.default)(t.getBody()).addClass("fullsize");const r=u.a.tinymce.Env;(r.ie||r.opera)&&(o=t.getWin(),e=Object(s.default)(o.parent),a=Object(s.default)(o.parent.document),Object(s.default)("body").css({overflow:"hidden"}),e.bind("resize.resizeplugin",()=>{n()}),a.bind("messageClose",()=>{setTimeout(n,0)}),a.bind("resize.resizeplugin",(e,t)=>{n(t&&t.height)}),a.bind("mode-changed",()=>{n()}),t.on("Change",()=>{n()}),n())})},getInfo:()=>({longname:"flex editor to full size plugin",description:"adjusts height of editor so it always occupies the right space in between the toolbars",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}}()),u.a.tinymce.PluginManager.add("flextofullsize",u.a.tinymce.plugins.flextofullsizeplugin)},function(){u.a.tinymce.create("tinymce.plugins.Referrer",{init(e){e.on("Init",()=>{const e=Object(s.default)("#createpageform"),t=e.find("#originalReferrer");e.length&&!t.val()&&document.referrer&&t.val(document.referrer)})},getInfo:()=>({longname:"Confluence Cancel Return Url",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}),u.a.tinymce.PluginManager.add("referrer",u.a.tinymce.plugins.Referrer)},()=>{x("confluence.table.resizable")&&(u.a.tinymce.create("tinymce.plugins.TableContentWrapperPlugin",function(){const e=["img:not(.editor-inline-macro, .emoticon)"].concat(["time.non-editable",".editor-inline-macro","a.confluence-link[data-linked-resource-type='userinfo']"]).concat([".wysiwyg-macro"]).join(","),t="<div class='content-wrapper'>";return{init(n){function o(){Object(s.default)(n.dom.select("table.confluenceTable:not(.".concat("wrapped",")"))).each((n,o)=>{Object(s.default)(o).addClass("wrapped").find("> tbody > tr > th, > tbody > tr > td, > thead > tr > th").each((n,o)=>{const a=Object(s.default)(o);!a.find("> .content-wrapper").length&&a.find(e).length&&a.wrapInner(t)})})}Object(a.a)("rte-ready",o),n.on("Remove",()=>{Object(a.c)("rte-ready",o)}),n.on("Change",()=>{const o=n.selection;function a(){return o.getBookmark()}function r(e){o.moveToBookmark(e),Object(f.b)().BookmarkManager.storeBookmark()}const c=o.getNode(),i=Object(s.default)(c);if(c&&i.closest("table.confluenceTable").not("table.confluenceTable table.confluenceTable").length){!function(e){const t=o.getRng();if(e.is("tr")&&Object(s.default)(t.startContainer).is("tr")&&t.collapsed){const n=e.find(">td, >th").first(),a=n.find(":first-child:not(.content-wrapper)")[0]||n[0].firstChild;t.setStart(a,0),t.setEnd(a,0),o.setRng(t)}}(i);const n=i.closest("table.confluenceTable > tbody > tr > th, table.confluenceTable > tbody > tr > td, table.confluenceTable > thead > tr > th");let c;if(n.find(e).length){const e=n.find("> .content-wrapper");e.length?(c=a(),function(e){for(let t=0;t<e.length;t++)e.eq(t).find("> p, > table, > ul, > ol").length||e.eq(t).wrapInner("<p/>"),t>0&&(e.eq(0).append(e.eq(t).children()),e.eq(t).remove())}(e),r(c)):n.find("> p").length?(c=a(),n.wrapInner(t),r(c)):(c=a(),n.wrapInner("<p/>").wrapInner(t),r(c))}}Object(s.default)(n.getWin().document).find(".content-wrapper:empty").remove()})},getInfo:()=>({longname:"Table Content Wrapper Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}}()),u.a.tinymce.PluginManager.add("tableContentWrapper",u.a.tinymce.plugins.TableContentWrapperPlugin))},function(){u.a.tinymce.create("tinymce.plugins.LinkBrowser",(()=>{const e=Object(qt.a)().Editor.LinkBrowser;return{init:t=>{t.addButton("linkbrowserButton",{title:"confluence.conflink_desc",cmd:"mceConflink",class:"mce_conflink"}),t.addCommand("mceConflink",()=>{e.open({bookmarkManager:K})}),t.addCommand("mceConfAttachments",()=>{e.open({panelKey:e.ATTACHMENTS_PANEL,bookmarkManager:K})})},getInfo:()=>({longname:"Confluence Link Browser",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}})()),u.a.tinymce.PluginManager.add("linkbrowser",u.a.tinymce.plugins.LinkBrowser)},function(){u.a.tinymce.create("tinymce.plugins.ConfluenceVersionComment",{init(e){e.on("Init",()=>{const t=p.a.get("version-comment");Object(s.default)("#rte-savebar-tinymce-plugin-point").append(((e,t)=>'\n<span class="rte-toolbar-comment toolbar-item">\n    <input id="versionComment" name="versionComment" '.concat(t?'value="'.concat(t,'"'):"",'\n           placeholder="').concat(e("editor.change.comment"),'"\n           class="text" type="text" size="35">\n    <label for="versionComment" class="assistive">').concat(e("editor.change.comment"),"</label>\n</span>\n"))(t=>e.translate(t),t))})},getInfo:()=>({longname:"Confluence Version Comment",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}),u.a.tinymce.PluginManager.add("confluenceversioncomment",u.a.tinymce.plugins.ConfluenceVersionComment)},function(){},function(){console.log("Finished loading Autocomplete base, Macro browser, JIM, Jira chart plugin"),u.a.tinymce.create("tinymce.plugins.AutoCompleteMacro",{init(e){Kn(e)},getInfo:()=>({longname:"Auto Complete Macro",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"".concat(u.a.tinymce.majorVersion,".").concat(u.a.tinymce.minorVersion)})}),u.a.tinymce.PluginManager.add("autocompletemacro",u.a.tinymce.plugins.AutoCompleteMacro)},function(){x("confluence-table-enhancements.sticky-headers.disabled")||Object(s.default)(document).ready(et),x("confluence-table-enhancements.sticky-headers-editor")&&(Object(a.a)("rte-ready",nt),Object(a.a)("rte-quick-edit-push-state",nt),Object(a.a)("rte-quick-edit-push-hash",nt))},function(){u.a.tinymce.create("tinymce.plugins.ConfluenceLeaveComment",ot),u.a.tinymce.PluginManager.add("confluenceleavecomment",u.a.tinymce.plugins.ConfluenceLeaveComment)},function(){u.a.tinymce.create("tinymce.plugins.ConfluenceLeaveTemplate",at),u.a.tinymce.PluginManager.add("confluenceleavetemplate",u.a.tinymce.plugins.ConfluenceLeaveTemplate)},function(){const e=Object(k.x)(k.a)?ht:bt;u.a.Confluence.Editor.SearchManager=mt(),gt(),u.a.tinymce.create("tinymce.plugins.AtlassianSearchReplacePlugin",e()),u.a.tinymce.PluginManager.add("searchreplace",u.a.tinymce.plugins.AtlassianSearchReplacePlugin)},function(){u.a.tinymce.create("tinymce.plugins.ConfluenceDrafts",ct()),u.a.tinymce.PluginManager.add("confluencedrafts",u.a.tinymce.plugins.ConfluenceDrafts)},function(){},function(){},function(){u.a.tinymce.create("tinymce.plugins.ConfluenceMacroBrowser",it),u.a.tinymce.PluginManager.add("confluencemacrobrowser",u.a.tinymce.plugins.ConfluenceMacroBrowser)},function(){Vn.a._insertCss(),u.a.AJS.Confluence.PropertyPanel.Macro.registerInitHandler((e,t,n)=>{var o,a;Xn=e,function(e){const t=function(e){for(let t=0;t<e.length;t++)if(e[t].className.indexOf("macro-placeholder-property-panel-edit-button")>-1)return e[t];return null}(e),n=function(e){R.editMacro(Object(s.default)(e))};t.click=function(){u.a.AJS.Confluence.PropertyPanel.destroy(),Zn()?Jn.always(n):n(Xn)}}(t),Qn=u.a.Confluence.MacroParameterSerializer.deserialize(Object(s.default)(Xn).attr("data-macro-parameters")),Yn=null,t.splice(1,0,(o=(a=Qn).title||no(a),{className:"status-macro-title first last editable",text:ve(o),click:ao}))},"status"),s.default.each(qn,(e,t)=>{u.a.AJS.Confluence.PropertyPanel.Macro.registerButtonHandler(t,(function(e,n){Qn.colour=t,u.a.AJS.Confluence.PropertyPanel.destroy()}),"status")}),Object(a.a)("destroyed.property-panel",()=>{Zn()&&to()})},function(){},function(){},function(){},function(){u.a.AJS.MacroBrowser.Macros.code=vn},function(){},function(){},()=>{u.a.tinymce.create("tinymce.plugins.ConfluenceWatch",lt),u.a.tinymce.PluginManager.add("confluencewatch",u.a.tinymce.plugins.ConfluenceWatch)},()=>{u.a.tinymce.create("tinymce.plugins.ConfluenceSortableTablesPlugin",st),u.a.tinymce.PluginManager.add("confluencesortabletablesplugin",u.a.tinymce.plugins.ConfluenceSortableTablesPlugin)},function(){u.a.tinymce.create("tinymce.plugins.AutoResizePlugin",dt),u.a.tinymce.PluginManager.add("autoresize",u.a.tinymce.plugins.AutoResizePlugin)},function(){},function(){},()=>{u.a.tinymce.create("tinymce.plugins.ConfluenceNotifyWatchers",Ot),u.a.tinymce.PluginManager.add("confluencenotifywatchers",u.a.tinymce.plugins.ConfluenceNotifyWatchers)},function(){},function(){u.a.AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("office-connector-download-file-button",(e,t)=>{const n=(t=t.nodeType?t:t[0]).getAttribute("data-macro-parameters").split("|"),o={};for(let e=0;e<n.length;e++){const t=n[e].split("=");t.length>1&&(o[t[0]]=t[1])}const a=u.a.AJS.Meta.get("page-id"),r=u.a.AJS.Meta.get("content-type");function c(e,t,n){return e&&t&&("?"!=n.charAt(n.length-1)&&(n+="&"),n="".concat(n).concat(e,"=").concat(encodeURI(t))),n}o.space||(o.space=u.a.AJS.Meta.get("space-key"));let i=u.a.AJS.Meta.get("context-path")+"/plugins/servlet/oc/getattachment?";i=c("title",o.page,i),i=c("date",o.date,i),i=c("space",o.space,i),i=c("filename",o.name,i),i=c("contextid",a,i),i=c("contexttype",r,i);const l=u.a.AJS.$.browser&&u.a.AJS.$.browser.msie?"_blank":"download-office-attachment";u.a.open(i,l)})},function(){},J.a,function(){u.a.tinymce.create("tinymce.plugins.TableAnalytics",It),u.a.tinymce.PluginManager.add("tableAnalytics",u.a.tinymce.plugins.TableAnalytics)},function(){Object(a.a)("init.rte",zn)},function(){Object(a.a)("init.rte",()=>{Object(pt.c)(document,"postPaste",At),Object(pt.a)(document,"postPaste",At),u.a.tinymce.activeEditor&&u.a.tinymce.activeEditor.on("Remove",()=>{Object(pt.c)(document,"postPaste",At)})})},function(){u.a.tinymce.create("tinymce.plugins.ConfIndentation",St),u.a.tinymce.PluginManager.add("confindentation",u.a.tinymce.plugins.ConfIndentation)},function(){},function(){u.a.tinymce.create("tinymce.plugins.TextPatternPlugin",Rt),u.a.tinymce.PluginManager.add("aetextpattern",u.a.tinymce.plugins.TextPatternPlugin)},function(){u.a.require("confluence-request-access-plugin/grant-access").initWhenEditorReady()},function(){},l.b,function(){Object(f.b)().BookmarkManager=W},function(){u.a.tinymce.Env.gecko&&Object(a.a)("rte-ready",Vt)},function(){12===u.a.tinymce.Env.ie&&Object(a.a)("rte-ready",Vt)},()=>{u.a.tinymce.create("tinymce.plugins.PersistScrollPosition",Ft),u.a.tinymce.PluginManager.add("persit_scroll_position",u.a.tinymce.plugins.PersistScrollPosition)},()=>{so(),fo.a._insertCss(),void 0===u.a.Confluence.TeamCalendars&&(u.a.Confluence.TeamCalendars={}),u.a.Confluence.TeamCalendars.HelpTip=wo,u.a.Confluence.TeamCalendars.HelpTip.Manager=Co,Co.fetch()},()=>{u.a.tinymce.create("tinymce.plugins.FabricMigration",$t),u.a.tinymce.PluginManager.add("fabric_migration",u.a.tinymce.plugins.FabricMigration)}],jo=()=>(ko.forEach((e,t)=>{try{e()}catch(n){i("initError",{fnName:e.name||t,message:n.message||"",exceptionName:n.name||""})}}),!0);let To=!1;t.default=()=>{if(To)return;const e=window.tinymce;return e.VK=e.util.VK,e.confluence=e.confluence||{},u.a.tinymce.confluence=u.a.tinymce.confluence||{},u.a.tinymce.confluence.macrobrowser=N,Object(Ut.a)(),u.a.tinymce.confluence=u.a.tinymce.confluence||{},u.a.tinymce.confluence.NodeUtils=C,u.a.tinymce.confluence=u.a.tinymce.confluence||{},u.a.tinymce.confluence.MacroUtils=M,To=!0,o.a.require(xo).then(jo,()=>{i("wrmLoadError",{})})}},VRGO:function(e,t,n){var o=n("ZjlD");"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("cuK8")(o,a);o.locals&&(e.exports=o.locals)},"WM+X":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n("bfgX"),a=n("Q2fH"),r=n("Jygk"),c=n.n(r),i=n("bQlP"),l=n("ieax"),s=n.n(l),d=n("dHP6");const u=()=>c.a.document.querySelector("#rte-toolbar .toolbar-primary"),f=()=>{const e=c.a.document.querySelector(".toolbar-trigger[data-control-id=help]");Object(a.a)(e,"click",(function(){this.parentElement.classList.contains("disabled")&&c.a.Confluence.KeyboardShortcuts.openDialog()}))},m=()=>{const e=c.a.document.querySelector("#content.edit");(e||c.a.document.querySelector(".editor-container")).classList.add("adg3-editor"),e&&c.a.document.body.classList.add("adg3-editor")},p=()=>{const e=c.a.tinymce.activeEditor;(e=>{const t='<style id="adg3-styles" type="text/css">'.concat(s.a._getCss(),"</style>"),n=e.getDoc().head;e.getBody().classList.add("adg3-editor"),n.insertAdjacentHTML("beforeend",t)})(e),(()=>{const e=c.a.document.querySelector("div.aui-toolbar2-secondary"),t=c.a.document.querySelector("ul#avatar-list"),n=c.a.document.querySelector("#synchrony-presence-overlay");e&&t&&n&&(e.appendChild(t),e.appendChild(n))})(),u().insertAdjacentHTML("afterbegin",'\n        <ul class="aui-buttons">\n            ## ADG3 editor logo\n            <li id="adg3-charlie-icon">\n                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40px" height="40px" viewBox="10 9 20 21" version="1.1">\n                    <defs>\n                        <linearGradient x1="87.3894879%" y1="99.2165215%" x2="35.1317389%" y2="39.2162895%" id="linearGradient-1">\n                            <stop stop-color="#A5ADBA" offset="0%"/>\n                            <stop stop-color="#C1C7D0" offset="100%"/>\n                        </linearGradient>\n                        <linearGradient x1="14.1838118%" y1="5.80047897%" x2="61.141783%" y2="70.9663868%" id="linearGradient-2">\n                            <stop stop-color="#A5ADBA" offset="0%"/>\n                            <stop stop-color="#C1C7D0" offset="100%"/>\n                        </linearGradient>\n                    </defs>\n                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <g id="confluence-light" fill-rule="nonzero">\n                            <path d="M10.0679208,24.8931748 C9.85301417,25.243638 9.61165744,25.6503075 9.40666954,25.9743206 C9.22318946,26.2843791 9.32168891,26.6842575 9.62818873,26.8736224 L13.9263221,29.5186276 C14.0771954,29.6117793 14.2591589,29.6404355 14.4313594,29.5981625 C14.6035598,29.5558895 14.7515684,29.4462293 14.8421552,29.2938021 C15.0140805,29.0061578 15.2355997,28.6325508 15.4769564,28.2324938 C17.1796785,25.4221758 18.8923193,25.7660265 21.9803628,27.2406169 L26.2421274,29.2673521 C26.4035355,29.3441777 26.5891716,29.3523812 26.7567273,29.2900928 C26.924283,29.2278045 27.0594818,29.1003316 27.1315104,28.9367264 L29.1780831,24.3079674 C29.3226768,23.9773763 29.1755503,23.5919046 28.8474575,23.4417282 C27.9481557,23.0185274 26.159471,22.175432 24.5493241,21.3984617 C18.7567628,18.5881437 13.8337469,18.7732941 10.0679208,24.8931748 Z" id="Shape" fill="url(#linearGradient-1)"/><path d="M29.3400897,14.0618786 C29.5549964,13.7114154 29.7963531,13.3047459 30.001341,12.9807328 C30.1848211,12.6706743 30.0863216,12.2707959 29.7798218,12.081431 L25.4816884,9.43642585 C25.3287553,9.33452192 25.1403124,9.30085833 24.961556,9.343509 C24.7827995,9.38615966 24.6298552,9.50127703 24.5394053,9.66125129 C24.36748,9.9488956 24.1459608,10.3225026 23.9046041,10.7225596 C22.201882,13.5328776 20.4892412,13.1890269 17.4011977,11.7144365 L13.1526581,9.6910076 C12.99125,9.61418193 12.805614,9.60597847 12.6380582,9.66826684 C12.4705025,9.73055522 12.3353038,9.85802811 12.2632751,10.0216332 L10.2167024,14.6503923 C10.0721087,14.9809834 10.2192353,15.366455 10.547328,15.5166315 C11.4466298,15.9398323 13.2353145,16.7829277 14.8454614,17.559898 C20.6512477,20.3669097 25.5742636,20.1817593 29.3400897,14.0618786 Z" id="Shape" fill="url(#linearGradient-2)"/>\n                        </g>\n                    </g>\n                </svg>\n            </li>\n        </ul>\n    '),c.a.document.querySelector("#adg3-charlie-icon").addEventListener("click",()=>{Object(d.b)("ADG3-Editor-Atlas-Logo-Clicked")}),(e=>{const t=c.a.document.querySelector("#rte-button-pagelayout-2"),n=c.a.document.querySelector("#rte-button-searchreplace"),o=()=>{t.classList.remove("active"),Object(a.b)(c.a.document,"disableContextToolbarRow.Toolbar",{id:"pl2-toolbar"})},r=()=>{Object(a.b)(c.a.document,"disableContextToolbarRow.Toolbar",{id:"default"})},i=()=>{l(n)&&e.execCommand("mceSearchReplaceToolbar")},l=e=>e.classList.contains("active");t.addEventListener("click",()=>{r(),i()}),n.addEventListener("click",()=>{o(),r()}),Object(a.a)(c.a.document,"enableContextToolbarRow.Toolbar",(e,t)=>{t&&t.id&&"default"===t.id&&(o(),i())})})(e),f(),(()=>{const e=c.a.document.querySelector("div.aui-toolbar2-secondary");if(e){const t=c.a.document.createElement("div");t.classList.add("adg3InviteToEdit"),e.appendChild(t)}})(),["#rte-toolbar #macro-insert-list .dropdown-item.macro-gallery"].forEach(e=>{const t=c.a.document.querySelector(e);var n;(n=t)&&(n.remove?n.remove():n.removeNode(!0))})};t.b=()=>{c.a.tinymce.create("tinymce.plugins.Adg3Editor",{init(){Object(o.c)("rte-ready",p),Object(i.x)(i.a)&&Object(o.a)("rte-ready",p)},getInfo:()=>({longname:"Adg3 Themed Editor",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"".concat(c.a.tinymce.majorVersion,".").concat(c.a.tinymce.minorVersion)})}),c.a.tinymce.PluginManager.add("Adg3Editor",c.a.tinymce.plugins.Adg3Editor)}},ZjlD:function(e,t,n){(e.exports=n("PBB4")(!1)).push([e.i,"/*COPIED FROM CONFLUENCE*/\n\n#charmap-picker {\n    border: 0;\n    font-size: 16px;\n    font-family: Arial,Helvetica,FreeSans,sans-serif;\n    padding: 2px;\n    text-align: center;\n}\n\n#charmap-view {\n    padding-right: 1em;\n    text-align: left;\n    vertical-align: top;\n}\n\n#charmap-info {\n    text-align: center;\n    vertical-align: top;\n    width: 100%;\n}\n\n#charmap-info > table {\n    border: 0;\n    height: 100px;\n    padding: 0;\n    width: 100%;\n}\n\n#code-value {\n    font-size: 3em;\n}\n\n#code-name {\n    font-size: 13px;\n}\n\n#code-value, #code-name {\n    color: #666;\n    text-align: center;\n}\n\n.charmap a:link,\n.charmap a:visited,\n.charmap a:active,\n.charmap a:hover {\n    color: #326CA6;\n    text-decoration: none;\n}\n",""])},cczi:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("Jygk"),a=n.n(o),r=n("bS8p");const c=()=>{void 0!==a.a.AJS.Rte&&void 0===a.a.AJS.Rte.Content&&(a.a.AJS.Rte.Content=r.a)}},dHP6:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return h}));var o=n("Jygk"),a=n.n(o),r=n("pa2z"),c=n("cGYM"),i=n("JGxT"),l=n("bfgX");let s,d={},u=0;const f=function(e,t){if(e&&(d[e]?d[e]++:d[e]=1,t)){const n="".concat(e,"Size");d[n]?d[n]+=t:d[n]=t}},m=function e(){d.contentID=i.a.get("content-id"),d.currentVersion=i.a.get("page-version")||"null",d.tinymceVersion=Object(c.a)("".concat(a.a.tinymce.majorVersion,".").concat(a.a.tinymce.minorVersion)),d.frontEndVersion=Object(c.a)(Object(r.a)().FRONTEND_VERSION),Object(l.b)("analytics",{name:"confluence.editor.action",data:d}),d={},clearTimeout(s),s=setTimeout(e,6e4)},p={Bold:"bold",confCharmap:"insert.symbol",confMonospace:"monospace",confTableRowToggleHeading:"table.row.toggle.heading",confTableColumnToggleHeading:"table.column.toggle.heading",confTableSelectionToggleHighlight:"table.selection.toggle.highlight",ForeColor:"foreground.color",FormatBlock:"format.block",Indent:"indent",InsertHorizontalRule:"insert.horizontal.rule",InsertOrderedList:"insert.ordered.list",InsertUnorderedList:"insert.unordered.list",InsertWikiMarkup:"insert.wiki.markup",Italic:"italic",JustifyCenter:"justify.center",JustifyLeft:"justify.left",JustifyRight:"justify.right",mceConfimage:"insert.files.images",mceConflink:"insert.link",mceConfMacroBrowser:"open.other.macros.browser",mceEmotion:"insert.emoticon",mceTableCopyRow:"table.copy.row",mceTableCutRow:"table.cut.row",mceTableDelete:"table.delete",mceTableDeleteCol:"table.delete.column",mceTableDeleteRow:"table.delete.row",mceTableInsertColAfter:"table.insert.column.after",mceTableInsertColBefore:"table.insert.column.before",mceTableInsertRowAfter:"table.insert.row.after",mceTableInsertRowBefore:"table.insert.row.before",mceTableMergeCells:"table.merge.cells",mceTablePasteRowBefore:"table.paste.row.before",mceTableSplitCells:"table.split.cells",mcePageLayoutsToolbar:"page.layouts.toolbar.toggle",mcePageLayoutAddSection:"page.layouts.toolbar.add.section",mcePageLayoutRemoveSection:"page.layouts.toolbar.remove.section",mcePageLayoutMoveSectionDown:"page.layouts.toolbar.movedown.section",mcePageLayoutMoveSectionUp:"page.layouts.toolbar.moveup.section",mcePageLayoutChangeSection:"page.layouts.toolbar.change.section",mceConfShortcutDialog:"open.help.dialog",mceSearchReplaceToolbar:"search.replace.toolbar.toggle",mceConfSearchClose:"search.replace.toolbar.close",mceConfSearch:"search",mceConfReplace:"replace",mceConfReplaceAll:"replace.all",Outdent:"outdent",Redo:"redo",Strikethrough:"strikethrough",subscript:"subscript",superscript:"superscript",Underline:"underline",Undo:"undo",InsertInlineTaskList:"insert.inline.tasklist",InsertInlineTaskListNoToggle:"insert.inline.tasklist.no.toggle"},g=f;function h(){Object(l.a)("rte-ready",()=>{!function(){clearTimeout(s),s=setTimeout(m,6e4);a.a.tinymce.activeEditor.on("ExecCommand",e=>{const t="mceToggleFormat"===e.command?(n=e.value).charAt(0).toUpperCase()+n.slice(1):e.command;var n;f(p[t])}),a.a.tinymce.activeEditor.on("KeyPress",()=>{f("keys")}),a.a.tinymce.activeEditor.on("KeyUp",e=>{46===e.keyCode?f("delete",u):8===e.keyCode&&f("backspace",u),u=a.a.tinymce.activeEditor.selection.getContent().length}),a.a.tinymce.activeEditor.on("MouseUp",()=>{u=a.a.tinymce.activeEditor.selection.getContent().length}),a.a.tinymce.activeEditor.on("Paste",e=>{f("paste",e.clipboardData.getData("text/plain").length)}),a.a.tinymce.activeEditor.on("Remove",()=>{m(),clearTimeout(s)})}(),a.a.addEventListener("beforeunload",()=>{m()})})}},e2U2:function(e,t,n){var o=n("4DxN");"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("cuK8")(o,a);o.locals&&(e.exports=o.locals)},gV2d:function(e,t,n){var o=n("5wKT");"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("cuK8")(o,a);o.locals&&(e.exports=o.locals)},iH7h:function(e,t,n){(e.exports=n("PBB4")(!1)).push([e.i,"#property-panel a.macro-property-panel-Grey span.icon,.wiki-content .aui-lozenge{color:#333;background-color:#ccc;border-color:#ccc}#property-panel a.macro-property-panel-Grey span.icon.aui-lozenge-subtle,.wiki-content .aui-lozenge.aui-lozenge-subtle{color:#333;background-color:#fff;border-color:#ccc}#property-panel a.macro-property-panel-Green span.icon,.wiki-content .aui-lozenge-success{color:#fff;background-color:#14892c;border-color:#14892c}#property-panel a.macro-property-panel-Green span.icon.aui-lozenge-subtle,.wiki-content .aui-lozenge-success.aui-lozenge-subtle{color:#14892c;background-color:#fff;border-color:#b2d8b9}#property-panel a.macro-property-panel-Red span.icon,.wiki-content .aui-lozenge-error{color:#fff;background-color:#d04437;border-color:#d04437}#property-panel a.macro-property-panel-Red span.icon.aui-lozenge-subtle,.wiki-content .aui-lozenge-error.aui-lozenge-subtle{color:#d04437;background-color:#fff;border-color:#f8d3d1}#property-panel a.macro-property-panel-Yellow span.icon,.wiki-content .aui-lozenge-current{color:#594300;background-color:#ffd351;border-color:#ffd351}#property-panel a.macro-property-panel-Yellow span.icon.aui-lozenge-subtle,.wiki-content .aui-lozenge-current.aui-lozenge-subtle{color:#594300;background-color:#fff;border-color:#ffe28c}#property-panel a.macro-property-panel-Blue span.icon,.wiki-content .aui-lozenge-complete{color:#fff;background-color:#4a6785;border-color:#4a6785}#property-panel a.macro-property-panel-Blue span.icon.aui-lozenge-subtle,.wiki-content .aui-lozenge-complete.aui-lozenge-subtle{color:#4a6785;background-color:#fff;border-color:#e4e8ed}#property-panel a.macro-property-panel-Blue,#property-panel a.macro-property-panel-Brown,#property-panel a.macro-property-panel-Green,#property-panel a.macro-property-panel-Grey,#property-panel a.macro-property-panel-Red,#property-panel a.macro-property-panel-Yellow{padding:6px;padding-top:6px!important;display:inline-block}#property-panel a.macro-property-panel-Blue span.icon,#property-panel a.macro-property-panel-Brown span.icon,#property-panel a.macro-property-panel-Green span.icon,#property-panel a.macro-property-panel-Grey span.icon,#property-panel a.macro-property-panel-Red span.icon,#property-panel a.macro-property-panel-Yellow span.icon{display:inline-block;background-image:none;margin:0;border:0;min-width:auto;border-radius:3px;width:16px;height:16px}#insert-menu .macro-status .icon{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90DBgUQHra5bYQAAADGSURBVDjL7dMxSkNREIXhb967JqAWRgXBQoRgJRa6AhejnY07sHEFbsFF2Ip21hYWNtaSQjBRfMm1SWUG3EAODFMc5py/GZYKlPnONHO1u6lqU7fWScEe1lCT8HfcYoDZn+OeiLv4l/F8uCO0aUGNcTwMXGC40EDTjb2e3qsmNhK/4LlENcJ6FhCMBEKXELT4CMeXW+iniGX1++Tput+Fkvm1+iy+3s5wsEhQG7X3cnRof8p2QriCx4KbOU6mKZr5ZPpZfgK/SqI2J6AKSn8AAAAASUVORK5CYII=) no-repeat 50%}.editor-inline-macro[data-macro-name=status]{background:transparent;border:0;min-height:16px;margin:0;vertical-align:-4px}#property-panel .editable.status-macro-title{margin-right:10px;float:none;text-transform:uppercase;text-decoration:none;width:88px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:11px;padding:0 5px}#property-panel input.editable.status-macro-title{outline:none;height:30px;line-height:20px;vertical-align:bottom;padding-top:2px}",""])},ieax:function(e,t,n){var o=n("kJzH"),a=n("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return a(o,e)}},kJzH:function(e,t,n){(e.exports=n("PBB4")(!1)).push([e.i,".adg3-editor .synchrony-tpi-0{background-color:#172b4d}.adg3-editor .synchrony-tpi-1{background-color:#0049b0}.adg3-editor .synchrony-tpi-2{background-color:#00875a}.adg3-editor .synchrony-tpi-3{background-color:#ff8b00}.adg3-editor .synchrony-tpi-4{background-color:#de350b}.adg3-editor .synchrony-tpi-5{background-color:#5243aa}.adg3-editor .synchrony-tpi-6{background-color:#a5adba}.adg3-editor .synchrony-tpi-7{background-color:#2684ff}.adg3-editor .synchrony-tpi-8{background-color:#57d9a3}.adg3-editor .synchrony-tpi-9{background-color:#5e6c84}.adg3-editor .synchrony-tpi-10{background-color:#ff8f73}.adg3-editor .synchrony-tpi-11{background-color:#998dd9}.adg3-editor .synchrony-tpi-0.synchrony-tps:before{border-left-color:#172b4d}.adg3-editor .synchrony-tpi-0.synchrony-tpe:before{border-right-color:#172b4d}.adg3-editor .synchrony-tpi-1.synchrony-tps:before{border-left-color:#0049b0}.adg3-editor .synchrony-tpi-1.synchrony-tpe:before{border-right-color:#0049b0}.adg3-editor .synchrony-tpi-2.synchrony-tps:before{border-left-color:#00875a}.adg3-editor .synchrony-tpi-2.synchrony-tpe:before{border-right-color:#00875a}.adg3-editor .synchrony-tpi-3.synchrony-tps:before{border-left-color:#ff8b00}.adg3-editor .synchrony-tpi-3.synchrony-tpe:before{border-right-color:#ff8b00}.adg3-editor .synchrony-tpi-4.synchrony-tps:before{border-left-color:#de350b}.adg3-editor .synchrony-tpi-4.synchrony-tpe:before{border-right-color:#de350b}.adg3-editor .synchrony-tpi-5.synchrony-tps:before{border-left-color:#5243aa}.adg3-editor .synchrony-tpi-5.synchrony-tpe:before{border-right-color:#5243aa}.adg3-editor .synchrony-tpi-6.synchrony-tps:before{border-left-color:#a5adba}.adg3-editor .synchrony-tpi-6.synchrony-tpe:before{border-right-color:#a5adba}.adg3-editor .synchrony-tpi-7.synchrony-tps:before{border-left-color:#2684ff}.adg3-editor .synchrony-tpi-7.synchrony-tpe:before{border-right-color:#2684ff}.adg3-editor .synchrony-tpi-8.synchrony-tps:before{border-left-color:#57d9a3}.adg3-editor .synchrony-tpi-8.synchrony-tpe:before{border-right-color:#57d9a3}.adg3-editor .synchrony-tpi-9.synchrony-tps:before{border-left-color:#5e6c84}.adg3-editor .synchrony-tpi-9.synchrony-tpe:before{border-right-color:#5e6c84}.adg3-editor .synchrony-tpi-10.synchrony-tps:before{border-left-color:#ff8f73}.adg3-editor .synchrony-tpi-10.synchrony-tpe:before{border-right-color:#ff8f73}.adg3-editor .synchrony-tpi-11.synchrony-tps:before{border-left-color:#998dd9}.adg3-editor .synchrony-tpi-11.synchrony-tpe:before{border-right-color:#998dd9}",""])},lB22:function(e,t,n){(e.exports=n("PBB4")(!1)).push([e.i,"/*COPIED FROM CONFLUENCE*/\n\n#property-panel a.macro-placeholder-property-panel-display-newline-button span.icon {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvklEQVR42rVTPQuFIBT1p1t7e2EFDrXnVmNb4Ca4BS5BW9AfOA+F+wjfAwfpwuHcDzn3olcGIAv5An3fo+u6L55x27bE5P+cZdkWqVJH6pDMsWxTSsFjmqbAMZIC4zjivm9c14XjOLDvO4wx2LYNwzCkBZqmwXmecM7BWgutNdZ1xTzP8LWkQFVVWJYFUspwQUII1HUd2NeSApxzeJRlCfKLovBxYPa6xe9KsedHLc7TXryzidQpnurvZNm/8QMbqb4yyqv4rAAAAABJRU5ErkJggg==);\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n}\n\n#property-panel a.macro-placeholder-property-panel-display-inline-button span.icon {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAw0lEQVR42q1TMQqAMBDr0/UBroJiBUEf0E51dRMcxUlwFBcHPxA5IUuLONSDcDmupO01VQCiEC+gtYagrusH5FVVCfdz0FfRQVVR5CmoLtzfnWBf/R7WWhhjIFnAmvlToOs6XNeF8zyx7zvWdcU8zxjHEW3bhgK8NydaFAWO48C2bViWBdM0YRgGOOcgPc7t9RWyLEPf92ia5hEuyxJ5nj+Lpae+IkkSpGkKZnLW6u/gDHzX+c6kP4j/nfjmNJ8HiP6NN81gzxU6QYojAAAAAElFTkSuQmCC);\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n}\n\n#property-panel a.macro-placeholder-property-panel-display-newline-button,\n#property-panel a.macro-placeholder-property-panel-display-inline-button {\n    padding: 0 6px;\n}\n",""])},"m+2k":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));class o{constructor(t){t?this.userAgent=t:e.window&&(this.userAgent=e.window.navigator.userAgent)}isFirefox(){return-1!==this.userAgent.indexOf("Firefox/")}notFirefox(){return!this.isFirefox()}isMSEdge(){return-1!==this.userAgent.indexOf("Edge/")}notMSEdge(){return!this.isMSEdge()}isIE(){return-1!==this.userAgent.indexOf("MSIE")||-1!==this.userAgent.indexOf("Trident/")||this.isMSEdge()}notIE(){return!this.isIE()}isChrome(){return-1!==this.userAgent.indexOf("Chrome/")}notChrome(){return!this.isChrome()}isSafari(){return-1!==this.userAgent.indexOf("Safari/")&&-1===this.userAgent.indexOf("Chrome/")}notSafari(){return!this.isSafari()}isPhantom(){return-1!==this.userAgent.indexOf("PhantomJS")}notPhantom(){return!this.isPhantom()}version(){if(this.isIE()){const e=this.userAgent.match(/MSIE\s([\d.]+)/)||this.userAgent.match(/rv:([\d.]+)/)||this.userAgent.match(/Edge\/([\d.]+)/);return parseInt(e[1])}return this.isChrome()?parseInt(this.userAgent.match(/Chrome\/([\d.]+)/)[1]):this.isSafari()?parseInt(this.userAgent.match(/Version\/([\d.]+)/)[1]):this.isFirefox()?parseInt(this.userAgent.match(/Firefox\/([\d.]+)/)[1]):void 0}friendlyName(){return this.isMSEdge()?"MSEdge":this.isIE()?"IE":this.isChrome()?"Chrome":this.isSafari()?"Safari":this.isFirefox()?"Firefox":void 0}}}).call(this,n("fRV1"))},mCf2:function(e,t,n){(e.exports=n("PBB4")(!1)).push([e.i,"body.ios {\n    min-height: 150px;\n}",""])},owi1:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));const o=()=>e.Confluence}).call(this,n("fRV1"))},qNQp:function(e,t,n){(e.exports=n("PBB4")(!1)).push([e.i,"/*CONFDEV-25367: Insert files*/\n/* always hide title of this button in comment */\n\n.quick-comment-form #rte-toolbar .insert-files.toolbar-item {\n    padding: 0 6px;\n}\n\n.quick-comment-form #rte-toolbar .insert-files .toolbar-trigger {\n    margin: 0 -6px;\n}\n\n#rte-toolbar .insert-files.toolbar-item {\n    padding: 0;\n}\n\n#rte-toolbar .insert-files .trigger-text {\n    display: none;\n}\n\n#rte-toolbar .insert-files .aui-button {\n    padding: 0 6px;\n}\n\n",""])},xODI:function(e,t,n){var o=n("iH7h"),a=n("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return a(o,e)}},zFIa:function(e,t,n){var o=n("mCf2");"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("cuK8")(o,a);o.locals&&(e.exports=o.locals)}}]);
//# sourceMappingURL=atlassian-editor-plugins~9f9b18d1.VD9rpGTi-v39.js.map